<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-ctypes] Defines, and Structs with platform-specific fields
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Defines%2C%0A%20and%20Structs%20with%20platform-specific%20fields&In-Reply-To=%3C673FCD9F382E4A61A547AE5D74100B12%40erratique.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000114.html">
   <LINK REL="Next"  HREF="000116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-ctypes] Defines, and Structs with platform-specific fields</H1>
    <B>Daniel B&#252;nzli</B> 
    <A HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Defines%2C%0A%20and%20Structs%20with%20platform-specific%20fields&In-Reply-To=%3C673FCD9F382E4A61A547AE5D74100B12%40erratique.ch%3E"
       TITLE="[ocaml-ctypes] Defines, and Structs with platform-specific fields">daniel.buenzli at erratique.ch
       </A><BR>
    <I>Mon Oct 20 15:40:13 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000114.html">[ocaml-ctypes] Defines,	and Structs with platform-specific fields
</A></li>
        <LI>Next message: <A HREF="000116.html">[ocaml-ctypes] Defines,	and Structs with platform-specific fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#115">[ date ]</a>
              <a href="thread.html#115">[ thread ]</a>
              <a href="subject.html#115">[ subject ]</a>
              <a href="author.html#115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le lundi, 20 octobre 2014 &#224; 16:10, Jeremy Yallop a &#233;crit :
&gt;<i> Yet another possibility: you can avoid the need to write C altogether
</I>&gt;<i> by defining the public interface as a module type, defining the
</I>&gt;<i> platform-specific struct definitions as implementations, and using
</I>&gt;<i> first-class modules (or the build system, if you prefer) to pick an
</I>&gt;<i> appropriate definition for the platform.
</I>
While Jeremy's approach is sound, I would advise against it from a maintenance point of view.  

These platform specific fields are labelled as *private* fields in the C interface which means that each time libuv makes a new release you will have to manually check that your description of the c struct in your ctypes is still accurate.  

If the libuv project is well managed you can assume public field changes will be documented in release notes so you'll be warned when you need to do changes. However changes to these privates fields are unlikely to be described so it will be more work for you in the long term.  

Best,

Daniel


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000114.html">[ocaml-ctypes] Defines,	and Structs with platform-specific fields
</A></li>
	<LI>Next message: <A HREF="000116.html">[ocaml-ctypes] Defines,	and Structs with platform-specific fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#115">[ date ]</a>
              <a href="thread.html#115">[ thread ]</a>
              <a href="subject.html#115">[ subject ]</a>
              <a href="author.html#115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/ctypes">More information about the Ctypes
mailing list</a><br>
</body></html>
