<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-ctypes] Defines,	and Structs with platform-specific fields
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Defines%2C%0A%09and%20Structs%20with%20platform-specific%20fields&In-Reply-To=%3CCAAxsn%3DFLvwohow%2BHKO34PLdVjnDEYJi7ecUA29uA_CgBM8w4_w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000117.html">
   <LINK REL="Next"  HREF="000128.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-ctypes] Defines,	and Structs with platform-specific fields</H1>
    <B>Jeremy Yallop</B> 
    <A HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Defines%2C%0A%09and%20Structs%20with%20platform-specific%20fields&In-Reply-To=%3CCAAxsn%3DFLvwohow%2BHKO34PLdVjnDEYJi7ecUA29uA_CgBM8w4_w%40mail.gmail.com%3E"
       TITLE="[ocaml-ctypes] Defines,	and Structs with platform-specific fields">yallop at gmail.com
       </A><BR>
    <I>Mon Oct 20 21:46:26 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000117.html">[ocaml-ctypes] Defines, and Structs with platform-specific fields
</A></li>
        <LI>Next message: <A HREF="000128.html">[ocaml-ctypes] Defines,	and Structs with platform-specific fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#118">[ date ]</a>
              <a href="thread.html#118">[ thread ]</a>
              <a href="subject.html#118">[ subject ]</a>
              <a href="author.html#118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20 October 2014 16:28, Trevor Smith &lt;<A HREF="http://lists.ocaml.org/listinfo/ctypes">trevorsummerssmith at gmail.com</A>&gt; wrote:
&gt;<i> Jeremy -- I like the functor idea + first class modules: it is elegant.
</I>&gt;<i> However I agree with Daniel's point about maintainability.
</I>
Yes, the need to keep things in sync with a potentially changing
implementation is certainly a drawback.

&gt;<i> If I use the allocate w/ a c function that returns the size of the struct I
</I>&gt;<i> will be good to go. Then have ctypes reference public fields
</I>
Careful: giving a partial definition of the struct in ctypes will work
well as long as you're dealing with a prefix -- i.e. when the public
fields are all at the beginning of the struct.  That doesn't appear to
be the case with libuv, where public and private fields are sometimes
interleaved.  The other approaches Daniel suggests -- either defining
accessors in C, or treating the struct types as abstract -- should
work well, though.

This discussion is a useful reminder that ctypes really needs support
for retrieving struct layout details from the declared API.  I'll look
at how to add that support later this week and report back.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000117.html">[ocaml-ctypes] Defines, and Structs with platform-specific fields
</A></li>
	<LI>Next message: <A HREF="000128.html">[ocaml-ctypes] Defines,	and Structs with platform-specific fields
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#118">[ date ]</a>
              <a href="thread.html#118">[ thread ]</a>
              <a href="subject.html#118">[ subject ]</a>
              <a href="author.html#118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/ctypes">More information about the Ctypes
mailing list</a><br>
</body></html>
