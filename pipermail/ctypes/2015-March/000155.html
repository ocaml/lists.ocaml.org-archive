<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-ctypes] Abstract 'a typ
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Abstract%20%27a%20typ&In-Reply-To=%3CA5D7086DCE7E468B996CA60B770D9698%40erratique.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000154.html">
   <LINK REL="Next"  HREF="000156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-ctypes] Abstract 'a typ</H1>
    <B>Daniel B&#252;nzli</B> 
    <A HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Abstract%20%27a%20typ&In-Reply-To=%3CA5D7086DCE7E468B996CA60B770D9698%40erratique.ch%3E"
       TITLE="[ocaml-ctypes] Abstract 'a typ">daniel.buenzli at erratique.ch
       </A><BR>
    <I>Mon Mar  9 21:37:20 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000154.html">[ocaml-ctypes] Abstract 'a typ
</A></li>
        <LI>Next message: <A HREF="000156.html">[ocaml-ctypes] Abstract 'a typ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#155">[ date ]</a>
              <a href="thread.html#155">[ thread ]</a>
              <a href="subject.html#155">[ subject ]</a>
              <a href="author.html#155">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Le lundi, 9 mars 2015 &#224; 22:14, Thomas Braibant a &#233;crit :

&gt;<i> I do not know what's the preferred way to handle this situation in
</I>&gt;<i> ctypes. I would really like to use `abstract`, but in that particular
</I>&gt;<i> case, I should really not be able to provide the size nor the
</I>&gt;<i> alignement of the struct. I could use void pointers to implement foo
</I>&gt;<i> pointers, but this seem a bit error prone (minor variation: use magic
</I>&gt;<i> to expose `unit ptr typ` as `foo ptr typ` with `foo` a fresh type).
</I>
If your bindings are thin you should just use an OCaml abstract type that denotes pointers to void pointers. The only place where you need to be careful is in the bindings themselves but that should be trivial.

For example in tsdl:

<A HREF="https://github.com/dbuenzli/tsdl/blob/bc18d14b1a28af99ebc30b61e303ee5304055d31/src/tsdl.mli#L727">https://github.com/dbuenzli/tsdl/blob/bc18d14b1a28af99ebc30b61e303ee5304055d31/src/tsdl.mli#L727</A>
<A HREF="https://github.com/dbuenzli/tsdl/blob/bc18d14b1a28af99ebc30b61e303ee5304055d31/src/tsdl.ml#L1093-L1095">https://github.com/dbuenzli/tsdl/blob/bc18d14b1a28af99ebc30b61e303ee5304055d31/src/tsdl.ml#L1093-L1095</A>

Best,

Daniel


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000154.html">[ocaml-ctypes] Abstract 'a typ
</A></li>
	<LI>Next message: <A HREF="000156.html">[ocaml-ctypes] Abstract 'a typ
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#155">[ date ]</a>
              <a href="thread.html#155">[ thread ]</a>
              <a href="subject.html#155">[ subject ]</a>
              <a href="author.html#155">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/ctypes">More information about the Ctypes
mailing list</a><br>
</body></html>
