<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-ctypes] Stack allocated structs ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Stack%20allocated%20structs%20%3F&In-Reply-To=%3CCAAxsn%3DEf24RPQnSs2WJMH0M%3DOarn-LHGSbM5L41tvdsvvvcFkg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000022.html">
   <LINK REL="Next"  HREF="000024.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-ctypes] Stack allocated structs ?</H1>
    <B>Jeremy Yallop</B> 
    <A HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Stack%20allocated%20structs%20%3F&In-Reply-To=%3CCAAxsn%3DEf24RPQnSs2WJMH0M%3DOarn-LHGSbM5L41tvdsvvvcFkg%40mail.gmail.com%3E"
       TITLE="[ocaml-ctypes] Stack allocated structs ?">yallop at gmail.com
       </A><BR>
    <I>Thu Dec 12 18:44:16 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000022.html">[ocaml-ctypes] Stack allocated structs ?
</A></li>
        <LI>Next message: <A HREF="000024.html">[ocaml-ctypes] Stack allocated structs ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23">[ date ]</a>
              <a href="thread.html#23">[ thread ]</a>
              <a href="subject.html#23">[ subject ]</a>
              <a href="author.html#23">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12 December 2013 18:20, Daniel B&#252;nzli &lt;<A HREF="http://lists.ocaml.org/listinfo/ctypes">daniel.buenzli at erratique.ch</A>&gt; wrote:
&gt;<i> Is returning stack allocated structs unsupported ? When I try to do this I get this exception:
</I>&gt;<i>
</I>&gt;<i> Fatal error: exception Static.Unsupported(&quot;libffi does not support passing arrays&quot;)
</I>&gt;<i>
</I>&gt;<i> (the struct has a single field with an array 16 uint8_t))
</I>
There's some support for returning stack-allocated structs, but (as
you've discovered) that doesn't include array members for the moment.
This is another thing that'll certainly improve once we have stub
generation.

It might be possible to add the missing support before that, though,
if it's safe to assume that a struct with a member of type T[n] is
passed in the same way as a struct with n members of type T.  I've
added an issue as a reminder to investigate:

<A HREF="https://github.com/ocamllabs/ocaml-ctypes/issues/113">https://github.com/ocamllabs/ocaml-ctypes/issues/113</A>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000022.html">[ocaml-ctypes] Stack allocated structs ?
</A></li>
	<LI>Next message: <A HREF="000024.html">[ocaml-ctypes] Stack allocated structs ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23">[ date ]</a>
              <a href="thread.html#23">[ thread ]</a>
              <a href="subject.html#23">[ subject ]</a>
              <a href="author.html#23">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/ctypes">More information about the Ctypes
mailing list</a><br>
</body></html>
