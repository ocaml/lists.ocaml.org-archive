<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;a&nbsp;lot&nbsp;Jeremy&nbsp;for&nbsp;your&nbsp;answer!&nbsp;I&nbsp;have&nbsp;chosen&nbsp;to&nbsp;write&nbsp;helper&nbsp;C&nbsp;functions&nbsp;to&nbsp;access&nbsp;the&nbsp;records&nbsp;containing&nbsp;bitfields,&nbsp;so&nbsp;that&nbsp;I&nbsp;let&nbsp;the&nbsp;compiler&nbsp;do&nbsp;its&nbsp;business&nbsp;without&nbsp;caring&nbsp;too&nbsp;much.&nbsp;I&nbsp;guess&nbsp;that&nbsp;no&nbsp;field&nbsp;after&nbsp;a&nbsp;bitfield&nbsp;definition&nbsp;in&nbsp;a&nbsp;struct&nbsp;can&nbsp;be&nbsp;reliably&nbsp;accessed&nbsp;either&nbsp;(with&nbsp;ctypes),&nbsp;even&nbsp;if&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;bitfield&nbsp;itself&nbsp;(as&nbsp;there&nbsp;is&nbsp;no&nbsp;means&nbsp;to&nbsp;know&nbsp;if&nbsp;the&nbsp;bitfield&nbsp;was&nbsp;packed&nbsp;or&nbsp;padded).&nbsp;Is&nbsp;that&nbsp;right?&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2014-05-17&nbsp;2:14&nbsp;GMT+02:00&nbsp;Jeremy&nbsp;Yallop&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:yallop@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;yallop@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
Dear&nbsp;Philippe,&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
On&nbsp;16/05/2014,&nbsp;Philippe&nbsp;Veber&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:philippe.veber@gmail.com&quot;&gt;philippe.veber@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Has&nbsp;ctypes&nbsp;some&nbsp;support&nbsp;for&nbsp;bit&nbsp;fields&nbsp;in&nbsp;C&nbsp;struct?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Not&nbsp;yet,&nbsp;I&#39;m&nbsp;afraid.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;not&nbsp;is&nbsp;it&nbsp;correct&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;encode:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;typedef&nbsp;struct&nbsp;{&lt;br&gt;<br>
&gt;&nbsp; &nbsp; int32_t&nbsp;pos;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; uint32_t&nbsp;bin:16,&nbsp;qual:8,&nbsp;l_qname:8;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; ...&lt;br&gt;<br>
&gt;&nbsp;}&nbsp;bam1_core_t&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;as:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; type&nbsp;bam1_core_t&lt;br&gt;<br>
&gt;&nbsp; &nbsp; let&nbsp;bam1_core_t&nbsp;:&nbsp;bam1_core_t&nbsp;structure&nbsp;typ&nbsp;=&nbsp;structure&nbsp;&quot;bam1_core_t&quot;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; let&nbsp;bam1_core_t_pos_f&nbsp;=&nbsp;field&nbsp;bam1_core_t&nbsp;&quot;pos&quot;&nbsp;int32_t&lt;br&gt;<br>
&gt;&nbsp; &nbsp; let&nbsp;bam1_core_t_props_f&nbsp;=&nbsp;field&nbsp;bam1_core_t&nbsp;&quot;props&quot;&nbsp;int32_t&lt;br&gt;<br>
&gt;&nbsp; &nbsp; ...&lt;br&gt;<br>
&gt;&nbsp; &nbsp; let&nbsp;()&nbsp;=&nbsp;seal&nbsp;bam1_core_t&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;and&nbsp;then&nbsp;play&nbsp;with&nbsp;the&nbsp;fake&nbsp;&quot;props&quot;&nbsp;field&nbsp;directly?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;It&#39;s&nbsp;quite&nbsp;likely&nbsp;to&nbsp;work&nbsp;but&nbsp;it&#39;s&nbsp;not&nbsp;guaranteed,&nbsp;since&nbsp;the&nbsp;C&lt;br&gt;<br>
standard&nbsp;gives&nbsp;compilers&nbsp;a&nbsp;fair&nbsp;amount&nbsp;of&nbsp;freedom&nbsp;in&nbsp;laying&nbsp;out&lt;br&gt;<br>
bit-fields.&nbsp; The&nbsp;good&nbsp;news&nbsp;is&nbsp;that&nbsp;the&nbsp;standard&nbsp;also&nbsp;requires&lt;br&gt;<br>
compilers&nbsp;to&nbsp;document&nbsp;how&nbsp;bit-fields&nbsp;are&nbsp;laid&nbsp;out,&nbsp;so&nbsp;your&nbsp;compiler&lt;br&gt;<br>
documentation&nbsp;may&nbsp;have&nbsp;helpful&nbsp;details.&lt;br&gt;<br>
&lt;br&gt;<br>
Kind&nbsp;regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Jeremy.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
