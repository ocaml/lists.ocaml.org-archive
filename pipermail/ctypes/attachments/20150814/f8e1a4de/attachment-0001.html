<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;again—&nbsp;I&nbsp;have&nbsp;an&nbsp;update&nbsp;and&nbsp;then&nbsp;another&nbsp;question&nbsp;or&nbsp;three.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;With&nbsp;help&nbsp;from&nbsp;people&nbsp;on&nbsp;IRC,&nbsp;I&nbsp;have&nbsp;a&nbsp;working&nbsp;version&nbsp;of&nbsp;this&nbsp;now.&nbsp;You&nbsp;can&nbsp;find&nbsp;it&nbsp;here:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://bitbucket.org/runhello/test-emily-game/src/e1cac5bf0546234ab7b69977b53625efaef7d8d7/src/internalPackage.ml?at=default&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bitbucket.org/runhello/test-emily-game/src/e1cac5bf0546234ab7b69977b53625efaef7d8d7/src/internalPackage.ml?at=default&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;a&nbsp;demo&nbsp;of&nbsp;the&nbsp;code&nbsp;running:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://pbs.twimg.com/media/CMRG8wZUcAAd7B2.png:large&quot;&nbsp;target=&quot;_blank&quot;&gt;https://pbs.twimg.com/media/CMRG8wZUcAAd7B2.png:large&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;have&nbsp;is&nbsp;a&nbsp;module&nbsp;FfiSupport.&nbsp;It&nbsp;is&nbsp;based&nbsp;around&nbsp;functions&nbsp;cToValueFor&nbsp;and&nbsp;a&nbsp;valueToCFor,&nbsp;which&nbsp;given&nbsp;a&nbsp;type&nbsp;name&nbsp;can&nbsp;spit&nbsp;out&nbsp;a&nbsp;converter&nbsp;from&nbsp;any&nbsp;specified&nbsp;C&nbsp;type&nbsp;to&nbsp;my&nbsp;&quot;value&quot;&nbsp;variant,&nbsp;or&nbsp;a&nbsp;converter&nbsp;from&nbsp;my&nbsp;&quot;value&quot;&nbsp;variant&nbsp;to&nbsp;any&nbsp;specified&nbsp;C&nbsp;type.&nbsp;The&nbsp;&#39;ctype-&gt;value&nbsp;(or&nbsp;vice&nbsp;versa)&nbsp;&quot;converter&quot;&nbsp;function&nbsp;comes&nbsp;paired&nbsp;with&nbsp;a&nbsp;ctypes&nbsp;typ,&nbsp;so&nbsp;I&nbsp;can&nbsp;pass&nbsp;that&nbsp;directly&nbsp;into&nbsp;&#39;foreign&#39;.&nbsp;The&nbsp;key&nbsp;part&nbsp;is:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;let&nbsp;ValueToCFn&nbsp;(argType,&nbsp;argConvert)&nbsp;=&nbsp;valueToCFor&nbsp;argTypeName&nbsp;in&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;let&nbsp;CToValueFn&nbsp;(retType,&nbsp;retConvert)&nbsp;=&nbsp;cToValueFor&nbsp;retTypeName&nbsp;in&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;let&nbsp;ffi_binding&nbsp;=&nbsp;foreign&nbsp;name&nbsp;(argType&nbsp;@-&gt;&nbsp;returning&nbsp;retType)&nbsp;in&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;fun&nbsp;arg&nbsp;-&gt;&nbsp;retConvert&nbsp;(ffi_binding&nbsp;(argConvert&nbsp;arg))&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;that&nbsp;is&nbsp;very&nbsp;satisfying,&nbsp;but&nbsp;there&nbsp;is&nbsp;an&nbsp;obvious&nbsp;problem,&nbsp;which&nbsp;is&nbsp;that&nbsp;this&nbsp;only&nbsp;works&nbsp;for&nbsp;unary&nbsp;functions.&nbsp;I&nbsp;need&nbsp;it&nbsp;to&nbsp;work&nbsp;for&nbsp;functions&nbsp;of&nbsp;any&nbsp;arity.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;an&nbsp;intuition&nbsp;about&nbsp;how&nbsp;to&nbsp;do&nbsp;this,&nbsp;but&nbsp;a&nbsp;couple&nbsp;of&nbsp;days&nbsp;of&nbsp;tinkering&nbsp;have&nbsp;gotten&nbsp;me&nbsp;nowhere&nbsp;and&nbsp;I&nbsp;am&nbsp;very&nbsp;concerned&nbsp;about&nbsp;whether,&nbsp;if&nbsp;I&nbsp;completed&nbsp;my&nbsp;implementation,&nbsp;OCaml&nbsp;could&nbsp;type&nbsp;it.&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;describe&nbsp;this&nbsp;possibly-unworkable&nbsp;solution,&nbsp;and&nbsp;then&nbsp;ask&nbsp;a&nbsp;question.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;thought&nbsp;is&nbsp;this:&nbsp;If&nbsp;I&nbsp;have&nbsp;for&nbsp;example&nbsp;a&nbsp;2-ary&nbsp;function,&nbsp;I&nbsp;feel&nbsp;like&nbsp;I&nbsp;need&nbsp;to&nbsp;construct&nbsp;two&nbsp;things,&nbsp;an&nbsp;ocaml-ctypes&nbsp;type&nbsp;spec&nbsp;(&#39;a&nbsp;typ&nbsp;@-&gt;&nbsp;&#39;b&nbsp;typ&nbsp;@-&gt;&nbsp;returning&nbsp;&#39;c&nbsp;typ),&nbsp;and&nbsp;a&nbsp;function&nbsp;(&#39;a&nbsp;-&gt;&nbsp;&#39;b&nbsp;-&gt;&nbsp;&#39;c)-&gt;(value-&gt;value-&gt;value).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;maybe&nbsp;the&nbsp;way&nbsp;I&nbsp;achieve&nbsp;this&nbsp;is&nbsp;I&nbsp;construct&nbsp;a&nbsp;base&nbsp;function&nbsp;(&#39;a&nbsp;-&gt;&nbsp;&#39;b)-&gt;(value-&gt;value),&nbsp;and&nbsp;then&nbsp;I&nbsp;construct&nbsp;a&nbsp;&quot;successor&quot;&nbsp;function&nbsp;which&nbsp;transforms&lt;/div&gt;&lt;div&gt;(&#39;b&nbsp;typ&nbsp;@-&gt;&nbsp;...&nbsp;@-&gt;&nbsp;returning&nbsp;&#39;z&nbsp;typ)&nbsp;and&nbsp;(&#39;b&nbsp;-&gt;&nbsp;...&nbsp;-&gt;&nbsp;&#39;z)-&gt;(value-&gt;...-&gt;value)&lt;/div&gt;&lt;div&gt;into&lt;/div&gt;&lt;div&gt;(&#39;a&nbsp;typ&nbsp;@-&gt;&nbsp;&#39;b&nbsp;typ&nbsp;@-&gt;&nbsp;...&nbsp;@-&gt;&nbsp;returning&nbsp;&#39;z&nbsp;typ)&nbsp;and&nbsp;(&#39;a-&gt;&#39;b&nbsp;-&gt;&nbsp;...&nbsp;-&gt;&nbsp;&#39;z)-&gt;(value-&gt;value-&gt;...-&gt;value).&lt;/div&gt;&lt;div&gt;I&nbsp;hope,&nbsp;if&nbsp;I&nbsp;could&nbsp;implement&nbsp;this&nbsp;&quot;successor&quot;&nbsp;function,&nbsp;it&nbsp;would&nbsp;all&nbsp;stay&nbsp;within&nbsp;what&nbsp;the&nbsp;existential&nbsp;types&nbsp;feature&nbsp;can&nbsp;type&nbsp;sensibly,&nbsp;and&nbsp;this&nbsp;will&nbsp;compile&nbsp;:)&nbsp;but,&nbsp;I&nbsp;am&nbsp;feeling&nbsp;stymied,&nbsp;and&nbsp;in&nbsp;my&nbsp;tries&nbsp;so&nbsp;far&nbsp;I&nbsp;haven&#39;t&nbsp;really&nbsp;even&nbsp;succeeded&nbsp;in&nbsp;formulating&nbsp;the&nbsp;(&#39;a-&gt;&#39;b)-&gt;(value-&gt;value)&nbsp;&quot;base&nbsp;case&quot;.&nbsp;(This&nbsp;is&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;got &lt;a&nbsp;href=&quot;https://bitbucket.org/runhello/test-emily-game/src/86e8bf4598e64ef0e1288f5cc6b86f70287d378b/src/internalPackage.ml?at=default&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bitbucket.org/runhello/test-emily-game/src/86e8bf4598e64ef0e1288f5cc6b86f70287d378b/src/internalPackage.ml?at=default&lt;/a&gt; and&nbsp;line&nbsp;56&nbsp;is...&nbsp;wrong.)&nbsp;The&nbsp;problem&nbsp;seems&nbsp;to&nbsp;be&nbsp;that&nbsp;the&nbsp;OCaml&nbsp;type&nbsp;system&nbsp;is&nbsp;not&nbsp;set&nbsp;up&nbsp;to&nbsp;describe&nbsp;curried&nbsp;functions&nbsp;of&nbsp;indeterminate&nbsp;arity;&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;what&nbsp;the&nbsp;type&nbsp;signature&nbsp;for&nbsp;my&nbsp;&quot;successor&quot;&nbsp;function&nbsp;would&nbsp;even&nbsp;look&nbsp;like.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So,&nbsp;my&nbsp;question&nbsp;is:&nbsp;How&nbsp;would&nbsp;you&nbsp;recommend&nbsp;attacking&nbsp;the&nbsp;n-arity&nbsp;case?&nbsp;Do&nbsp;you&nbsp;think&nbsp;this&nbsp;will&nbsp;even&nbsp;be&nbsp;possible?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OCaml-ctypes&nbsp;must&nbsp;have&nbsp;a&nbsp;solution&nbsp;to&nbsp;this&nbsp;kind&nbsp;of&nbsp;problem&nbsp;because&nbsp;it&nbsp;itself&nbsp;works&nbsp;with&nbsp;functions&nbsp;of&nbsp;arbitrary&nbsp;arity.&nbsp;Could&nbsp;I&nbsp;unify&nbsp;my&nbsp;implementation&nbsp;approach&nbsp;better&nbsp;with&nbsp;OCaml-ctypes&#39;s?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;notice&nbsp;that&nbsp;OCaml-ctypes&nbsp;on&nbsp;the&nbsp;inside&nbsp;seems&nbsp;to&nbsp;be&nbsp;working&nbsp;with&nbsp;a&nbsp;thing&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;div&gt;type&nbsp;_&nbsp;fn&nbsp;=&lt;/div&gt;&lt;div&gt; &nbsp;|&nbsp;Returns&nbsp; :&nbsp;&#39;a&nbsp;typ&nbsp; &nbsp;-&gt;&nbsp;&#39;a&nbsp;fn&lt;/div&gt;&lt;div&gt; &nbsp;|&nbsp;Function&nbsp;:&nbsp;&#39;a&nbsp;typ&nbsp;*&nbsp;&#39;b&nbsp;fn&nbsp; -&gt;&nbsp;(&#39;a&nbsp;-&gt;&nbsp;&#39;b)&nbsp;fn&lt;/div&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;looks&nbsp;much&nbsp;superior&nbsp;to&nbsp;what&nbsp;I&nbsp;am&nbsp;doing,&nbsp;which&nbsp;is&nbsp;pure&nbsp;noodly&nbsp;function&nbsp;manipulation.&nbsp;It&nbsp;seems&nbsp;like&nbsp;I&nbsp;would&nbsp;benefit&nbsp;a&nbsp;lot&nbsp;from&nbsp;using&nbsp;something&nbsp;like&nbsp;that,&nbsp;with&nbsp;my&nbsp;retConvert&nbsp;and&nbsp;argConvert&nbsp;list&nbsp;embedded&nbsp;in&nbsp;the&nbsp;structure.&nbsp;But&nbsp;it&nbsp;is&nbsp;unclear&nbsp;to&nbsp;me&nbsp;how&nbsp;to&nbsp;get&nbsp;from&nbsp;what&nbsp;I&nbsp;have&nbsp;to&nbsp;there&nbsp;(GADTs&nbsp;are&nbsp;very&nbsp;new&nbsp;to&nbsp;me)&nbsp;and,&nbsp;I&#39;m&nbsp;not&nbsp;sure&nbsp;if&nbsp;THAT&nbsp;will&nbsp;ultimately&nbsp;be&nbsp;permitted&nbsp;by&nbsp;the&nbsp;OCaml&nbsp;type&nbsp;checker&nbsp;either!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;advice&nbsp;welcome,&nbsp;in&nbsp;the&nbsp;meantime&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;try&nbsp;just&nbsp;starting&nbsp;by&nbsp;manually&nbsp;writing&nbsp;out&nbsp;2-ary,&nbsp;3-ary,&nbsp;4-ary&nbsp;implementations&nbsp;to&nbsp;unblock&nbsp;this&nbsp;particular&nbsp;project&nbsp;in&nbsp;the&nbsp;short&nbsp;term,&nbsp;and&nbsp;probably&nbsp;reading&nbsp;the&nbsp;Types&nbsp;and&nbsp;Programming&nbsp;Languages&nbsp;chapter&nbsp;on&nbsp;existential&nbsp;types&nbsp;to&nbsp;see&nbsp;if&nbsp;it&nbsp;leaves&nbsp;me&nbsp;less&nbsp;confused.&nbsp;&gt;_&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;One&nbsp;last&nbsp;thing.&nbsp;You&nbsp;mentioned&nbsp;in&nbsp;a&nbsp;previous&nbsp;email&nbsp;the&nbsp;idea&nbsp;of&nbsp;a&nbsp;&quot;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:12.8000001907349px&quot;&gt;Ctypes_untyped&quot;&nbsp;module.&nbsp;I&nbsp;think&nbsp;if&nbsp;I&nbsp;got&nbsp;this&nbsp;working,&nbsp;it&nbsp;would&nbsp;*probably*&nbsp;be&nbsp;something&nbsp;that&nbsp;could&nbsp;be&nbsp;generalized&nbsp;by&nbsp;making&nbsp;a&nbsp;first-class&nbsp;module&nbsp;paramerizing&nbsp;the&nbsp;value&nbsp;type&nbsp;and&nbsp;the&nbsp;&quot;constructor&nbsp;factory&quot;&nbsp;functions.&nbsp;It&nbsp;seems&nbsp;like&nbsp;a&nbsp;is&nbsp;a&nbsp;useful&nbsp;thing.&nbsp;If&nbsp;this&nbsp;eventually&nbsp;worked,&nbsp;would&nbsp;it&nbsp;be&nbsp;eventually&nbsp;worth&nbsp;submitting&nbsp;that&nbsp;parameterized&nbsp;Ctypes_variant&nbsp;back&nbsp;to&nbsp;ocaml-ctypes&nbsp;as&nbsp;a&nbsp;pull&nbsp;request?&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;Thanks&nbsp;again!&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;-&nbsp;Andi&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;11,&nbsp;2015&nbsp;at&nbsp;2:41&nbsp;AM,&nbsp;Jeremy&nbsp;Yallop&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:yallop@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;yallop@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&gt;On&nbsp;10/08/2015,&nbsp;Andi&nbsp;McClure&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:andi.m.mcclure@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;andi.m.mcclure@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;syntax&nbsp;could&nbsp;use&nbsp;some&nbsp;work&nbsp;:P&nbsp;But&nbsp;never&nbsp;mind&nbsp;that.&nbsp;I&#39;ve&nbsp;so&nbsp;far&nbsp;got&nbsp;it&lt;br&gt;<br>
&gt;&nbsp;where&nbsp;when&nbsp;you&nbsp;invoke&nbsp;ffi.c.function,&nbsp;the&nbsp;function&nbsp;specification&nbsp;you&lt;br&gt;<br>
&gt;&nbsp;provided&nbsp;gets&nbsp;piped&nbsp;into&nbsp;OCaml&nbsp;and&nbsp;turned&nbsp;into&nbsp;this&nbsp;OCaml&nbsp;data&nbsp;structure:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; type&nbsp;foreignSpec&nbsp;=&nbsp;{&nbsp;name&nbsp;:&nbsp;string;&nbsp;args&nbsp;:&nbsp;string&nbsp;list;&nbsp;returning:&lt;br&gt;<br>
&gt;&nbsp;string;&nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;seems&nbsp;like&nbsp;a&nbsp;straightforward&nbsp;representation&nbsp;of&nbsp;the&nbsp;information&nbsp;@-&gt;&lt;br&gt;<br>
&gt;&nbsp;encodes;&nbsp;it&nbsp;seems&nbsp;something&nbsp;parsing&nbsp;a&nbsp;header&nbsp;would&nbsp;need&nbsp;to&nbsp;represent&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;data&nbsp;the&nbsp;same&nbsp;way.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;My&nbsp;naive&nbsp;impulse&nbsp;is&nbsp;to&nbsp;imagine&nbsp;that&nbsp;this&nbsp;is&nbsp;straightforward,&nbsp;and&nbsp;I&nbsp;need&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;just&nbsp;build&nbsp;up&nbsp;a&nbsp;typ&nbsp;variable&nbsp;by&nbsp;repeatedly&nbsp;chaining&nbsp;@-&gt;,&nbsp;something&nbsp;like:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; let&nbsp;typeConvert&nbsp;=&nbsp;function&nbsp;&quot;void&quot;&nbsp;-&gt;&nbsp;void&nbsp;|&nbsp;&quot;int&quot;&nbsp;-&gt;&nbsp;int&nbsp;|&nbsp;_&nbsp;-&gt;&lt;br&gt;<br>
&gt;&nbsp;failwith&nbsp;&quot;??&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Right:&nbsp;it&nbsp;should&nbsp;be&nbsp;possible&nbsp;to&nbsp;do&nbsp;things&nbsp;like&nbsp;that&nbsp;once&nbsp;you&#39;ve&nbsp;dealt&lt;br&gt;<br>
with&nbsp;the&nbsp;typing&nbsp;problem&nbsp;you&nbsp;describe.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;easiest&nbsp;approach&nbsp;to&nbsp;dealing&nbsp;with&nbsp;the&nbsp;fact&nbsp;that&nbsp;&#39;int&#39;,&nbsp;&#39;void&#39;,&nbsp;etc.&lt;br&gt;<br>
have&nbsp;different&nbsp;types&nbsp;is&nbsp;to&nbsp;use&nbsp;an&nbsp;existential&nbsp;type. &nbsp;Existential&nbsp;types&lt;br&gt;<br>
in&nbsp;OCaml&nbsp;are&nbsp;a&nbsp;sort&nbsp;of&nbsp;variant,&nbsp;but&nbsp;defined&nbsp;with&nbsp;a&nbsp;different&nbsp;syntax;&lt;br&gt;<br>
instead&nbsp;of&nbsp;writing&nbsp;something&nbsp;like&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; type&nbsp;t&nbsp;=&nbsp;A&nbsp;of&nbsp;x&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;B&nbsp;of&nbsp;y&lt;br&gt;<br>
&lt;br&gt;<br>
you&nbsp;give&nbsp;the&nbsp;type&nbsp;signature&nbsp;for&nbsp;each&nbsp;constructor,&nbsp;like&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; type&nbsp;t&nbsp;=&nbsp;A&nbsp;:&nbsp;x&nbsp;-&gt;&nbsp;t&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;B&nbsp;:&nbsp;y&nbsp;-&gt;&nbsp;t&lt;br&gt;<br>
&lt;br&gt;<br>
By&nbsp;itself&nbsp;that&nbsp;doesn&#39;t&nbsp;give&nbsp;you&nbsp;any&nbsp;extra&nbsp;power,&nbsp;and&nbsp;you&nbsp;can&nbsp;actually&lt;br&gt;<br>
write&nbsp;any&nbsp;variant&nbsp;type&nbsp;definition&nbsp;this&nbsp;way. &nbsp;The&nbsp;distinctive&nbsp;feature&lt;br&gt;<br>
of&nbsp;existential&nbsp;types&nbsp;is&nbsp;that&nbsp;you&nbsp;can&nbsp;mention&nbsp;type&nbsp;variables&nbsp;on&nbsp;the&lt;br&gt;<br>
right&nbsp;of&nbsp;the&nbsp;&#39;=&#39;&nbsp;that&nbsp;don&#39;t&nbsp;appear&nbsp;in&nbsp;the&nbsp;type&nbsp;parameters&nbsp;on&nbsp;the&nbsp;left.&lt;br&gt;<br>
Here&#39;s&nbsp;an&nbsp;example:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; type&nbsp;ty&nbsp;=&nbsp;Ty&nbsp;:&nbsp;&#39;a&nbsp;Ctypes.typ&nbsp;-&gt;&nbsp;ty&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;the&nbsp;type&nbsp;signature&nbsp;says,&nbsp;&#39;Ty&#39;&nbsp;takes&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;&#39;a&nbsp;Ctypes.typ&#39;&lt;br&gt;<br>
for&nbsp;any&nbsp;type&nbsp;&#39;a&#39;&nbsp;and&nbsp;builds&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;&#39;ty&#39;. &nbsp;You&nbsp;can&nbsp;therefore&lt;br&gt;<br>
use&nbsp;&#39;Ty&#39;&nbsp;to&nbsp;wrap&nbsp;Ctypes.typ&nbsp;values&nbsp;of&nbsp;different&nbsp;types&nbsp;up&nbsp;as&nbsp;&#39;ty&#39;&lt;br&gt;<br>
values. &nbsp;For&nbsp;example,&nbsp;you&nbsp;can&nbsp;build&nbsp;a&nbsp;list&nbsp;of&nbsp;typs:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; #&nbsp;[Ty&nbsp;void;&nbsp;Ty&nbsp;int];;&lt;br&gt;<br>
 &nbsp; -&nbsp;:&nbsp;ty&nbsp;list&nbsp;=&nbsp;[Ty&nbsp;void;&nbsp;Ty&nbsp;int]&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;you&nbsp;can&nbsp;wrap&nbsp;the&nbsp;variously-typed&nbsp;results&nbsp;of&nbsp;your&nbsp;&#39;typeConvert&#39;&lt;br&gt;<br>
function&nbsp;so&nbsp;that&nbsp;they&nbsp;all&nbsp;have&nbsp;the&nbsp;same&nbsp;type&nbsp;&#39;ty&#39;:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; let&nbsp;typeConvert&nbsp;=&nbsp;function&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &quot;void&quot;&nbsp;-&gt;&nbsp;Ty&nbsp;void&lt;br&gt;<br>
 &nbsp; &nbsp; |&nbsp;&quot;int&quot;&nbsp;-&gt;&nbsp;Ty&nbsp;int&lt;br&gt;<br>
 &nbsp; &nbsp; |&nbsp;_&nbsp;-&gt;&nbsp;failwith&nbsp;&quot;??&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;same&nbsp;difficulty&nbsp;arises&nbsp;with&nbsp;&#39;Ctypes.fn&#39;&nbsp;and&nbsp;your&nbsp;&#39;functionFrom&#39;&lt;br&gt;<br>
definition,&nbsp;which&nbsp;needs&nbsp;to&nbsp;build&nbsp;function&nbsp;type&nbsp;descriptions&nbsp;of&nbsp;all&lt;br&gt;<br>
sorts&nbsp;of&nbsp;different&nbsp;types. &nbsp;Here&#39;s&nbsp;a&nbsp;second&nbsp;existential&nbsp;type&nbsp;which&lt;br&gt;<br>
wraps&nbsp;&#39;Ctypes.fn&#39;:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; type&nbsp;fn&nbsp;=&nbsp;Fn&nbsp;:&nbsp;(&#39;a&nbsp;-&gt;&nbsp;&#39;b)&nbsp;Ctypes.fn&nbsp;-&gt;&nbsp;fn&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;time&nbsp;the&nbsp;type&nbsp;signature&nbsp;says&nbsp;that&nbsp;&#39;Fn&#39;&nbsp;takes&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;&#39;(a&lt;br&gt;<br>
-&gt;&nbsp;b)&nbsp;Ctypes.fn&#39;&nbsp;for&nbsp;any&nbsp;types&nbsp;&#39;a&#39;&nbsp;and&nbsp;&#39;b&#39;&nbsp;and&nbsp;builds&nbsp;a&nbsp;value&nbsp;of&nbsp;type&lt;br&gt;<br>
&#39;fn&#39;. &nbsp;It&nbsp;should&nbsp;be&nbsp;possible&nbsp;to&nbsp;build&nbsp;something&nbsp;like&nbsp;&#39;functionFrom&#39;&lt;br&gt;<br>
that&nbsp;wraps&nbsp;and&nbsp;unwraps&nbsp;intermediate&nbsp;values&nbsp;using&nbsp;&#39;Ty&#39;&nbsp;and&nbsp;&#39;Fn&#39;&nbsp;to&nbsp;deal&lt;br&gt;<br>
with&nbsp;the&nbsp;immediate&nbsp;typing&nbsp;problems&nbsp;(leaving&nbsp;the&nbsp;interesting&nbsp;question&lt;br&gt;<br>
of&nbsp;how&nbsp;to&nbsp;turn&nbsp;the&nbsp;function&nbsp;returned&nbsp;by&nbsp;&#39;Foreign.foreign&#39;&nbsp;into&lt;br&gt;<br>
something&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;from&nbsp;your&nbsp;interpreter).&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;hope&nbsp;that&nbsp;helps&nbsp;a&nbsp;bit.&lt;br&gt;<br>
&lt;br&gt;<br>
Kind&nbsp;regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Jeremy.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
