<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-ctypes] Setting completion function variable for Readline
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Setting%20completion%20function%20variable%20for%20Readline&In-Reply-To=%3C87txhc7i0x.fsf%40enigma.home.hagelb.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000002.html">
   <LINK REL="Next"  HREF="000003.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-ctypes] Setting completion function variable for Readline</H1>
    <B>Phil Hagelberg</B> 
    <A HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Setting%20completion%20function%20variable%20for%20Readline&In-Reply-To=%3C87txhc7i0x.fsf%40enigma.home.hagelb.org%3E"
       TITLE="[ocaml-ctypes] Setting completion function variable for Readline">phil at hagelb.org
       </A><BR>
    <I>Sun Sep 22 20:50:22 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000002.html">[ocaml-ctypes] When can we expect the next version to be	released?
</A></li>
        <LI>Next message: <A HREF="000003.html">[ocaml-ctypes] Setting completion function variable for Readline
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1">[ date ]</a>
              <a href="thread.html#1">[ thread ]</a>
              <a href="subject.html#1">[ subject ]</a>
              <a href="author.html#1">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been using ctypes to call into GNU Readline, and it's been working
out nicely so far. However, I'd like to implement my own custom
completer functionality, and I'm having some difficulty with
that. Readline's documentation[1] says you can set the
&quot;rl_completion_entry_function&quot; variable to a function pointer which can
handle your completion:

&gt;<i> Variable: rl_compentry_func_t * rl_completion_entry_function
</I>&gt;<i>     This is a pointer to the generator function for
</I>&gt;<i>     rl_completion_matches(). If the value of
</I>&gt;<i>     rl_completion_entry_function is NULL then the default filename
</I>&gt;<i>     generator function, rl_filename_completion_function(), is used. An
</I>&gt;<i>     application-specific completion function is a function whose address
</I>&gt;<i>     is assigned to rl_completion_entry_function and whose return values
</I>&gt;<i>     are used to generate possible completions. 
</I>
But I can't find any way to do this from OCaml, with or without
Ctypes. I see some mention of passing OCaml functions as arguments to C
functions, but in this case I need to put it in a variable instead. I
don't actually know C myself, or I'd imagine it'd be easy to do with a
small shim written in C. Is this possible with Ctypes?

thanks,
Phil

[1] - <A HREF="http://tiswww.case.edu/php/chet/readline/readline.html#SEC44">http://tiswww.case.edu/php/chet/readline/readline.html#SEC44</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 489 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/ctypes/attachments/20130922/a4c3b4d6/attachment.sig">http://lists.ocaml.org/pipermail/ctypes/attachments/20130922/a4c3b4d6/attachment.sig</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000002.html">[ocaml-ctypes] When can we expect the next version to be	released?
</A></li>
	<LI>Next message: <A HREF="000003.html">[ocaml-ctypes] Setting completion function variable for Readline
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1">[ date ]</a>
              <a href="thread.html#1">[ thread ]</a>
              <a href="subject.html#1">[ subject ]</a>
              <a href="author.html#1">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/ctypes">More information about the Ctypes
mailing list</a><br>
</body></html>
