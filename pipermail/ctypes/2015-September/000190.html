<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-ctypes] Creating a C wrapper for an OCaml value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Creating%20a%20C%20wrapper%20for%20an%20OCaml%20value&In-Reply-To=%3CCY1PR06MB1883995060B42C918FDB4D86C8500%40CY1PR06MB1883.namprd06.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-ctypes] Creating a C wrapper for an OCaml value</H1>
    <B>EMMA R TURETSKY</B> 
    <A HREF="mailto:ctypes%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-ctypes%5D%20Creating%20a%20C%20wrapper%20for%20an%20OCaml%20value&In-Reply-To=%3CCY1PR06MB1883995060B42C918FDB4D86C8500%40CY1PR06MB1883.namprd06.prod.outlook.com%3E"
       TITLE="[ocaml-ctypes] Creating a C wrapper for an OCaml value">eturetsky at wisc.edu
       </A><BR>
    <I>Fri Sep 11 18:03:30 BST 2015</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000191.html">[ocaml-ctypes] Creating a C wrapper for an OCaml value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
This may be a question with an obvious answer, but I'm having trouble understanding the manual.


I have two code bases, one in OCaml and one in C (c++, actually, but I'll just be using &quot;extern 'C'&quot; when needed), that I need to pass information to and from.


I have a Module in the OCaml code and all I want to do is to pass it to a C constructor that will just wrap around it.  I don't ever need to touch the data in C.


What will happen is that eventually the C code will get to a point where it needs to perform some operation on two of these data types.  That operation is all ready written in the OCaml code so I then want to be able to pass  the stored values back into OCaml which will perform the operation needed and create a new module of the same type that will again be returned and wrapped in C.  I'm pretty sure I understand how to call an OCaml function from C, so that isn't an issue.


So I guess the meat of my question is how do I pass a value in OCaml to C and just create a wrapper around it in a way that I can pass the same value back when I call OCaml from C using ctypes?  I feel like this should be simple and obvious from the manual, but my OCaml understanding is very weak.


Any help is appreciated,

Emma
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/ctypes/attachments/20150911/648a9f11/attachment.html">http://lists.ocaml.org/pipermail/ctypes/attachments/20150911/648a9f11/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000191.html">[ocaml-ctypes] Creating a C wrapper for an OCaml value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#190">[ date ]</a>
              <a href="thread.html#190">[ thread ]</a>
              <a href="subject.html#190">[ subject ]</a>
              <a href="author.html#190">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/ctypes">More information about the Ctypes
mailing list</a><br>
</body></html>
