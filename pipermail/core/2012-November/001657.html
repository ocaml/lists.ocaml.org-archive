<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Cross-module inlining fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Cross-module%20inlining%20fails&In-Reply-To=%3CCAP_800raC7hZobXKzK%2BzL6AZTyThSMWSph7_jBPZ7WHCNZckoQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Cross-module inlining fails</H1>
    <B>Markus Mottl</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Cross-module%20inlining%20fails&In-Reply-To=%3CCAP_800raC7hZobXKzK%2BzL6AZTyThSMWSph7_jBPZ7WHCNZckoQ%40mail.gmail.com%3E"
       TITLE="Cross-module inlining fails">markus.mottl at gmail.com
       </A><BR>
    <I>Mon Nov 19 17:23:32 GMT 2012</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1657">[ date ]</a>
              <a href="thread.html#1657">[ thread ]</a>
              <a href="subject.html#1657">[ subject ]</a>
              <a href="author.html#1657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

I've noticed that cross-module inlining does not work with the
Opam-installed Core library, because the .cmx file is not installed.
Note that it is not enough to install the .cmxa file, because it is
only used during linking.  The compiler wouldn't know where to look
for optimization information.

Looking at the setup.ml file generated by Oasis, it seems that Oasis
is the culprit, but I thought it would be important to know for other
Core users if they experience bad performance.

Sylvain, is there anything one has to put in the _oasis file to
generate correct installation code?  My guess is that all that's
needed is to fix setup.ml by installing the .cmx of packing targets
(e.g. core.cmx), not just .cmx files for constituents of unpacked
libraries, which seem to be handled correctly.

Regards,
Markus

-- 
Markus Mottl        <A HREF="http://www.ocaml.info">http://www.ocaml.info</A>        <A HREF="http://lists.ocaml.org/listinfo/core">markus.mottl at gmail.com</A>

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1657">[ date ]</a>
              <a href="thread.html#1657">[ thread ]</a>
              <a href="subject.html#1657">[ subject ]</a>
              <a href="author.html#1657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
