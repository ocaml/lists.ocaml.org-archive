<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> How to load core in the toplevel?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20How%20to%20load%20core%20in%20the%20toplevel%3F&In-Reply-To=%3C05549d39-5440-4798-ab80-745f69c2fc37%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000701.html">
   <LINK REL="Next"  HREF="000704.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>How to load core in the toplevel?</H1>
    <B>Francois</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20How%20to%20load%20core%20in%20the%20toplevel%3F&In-Reply-To=%3C05549d39-5440-4798-ab80-745f69c2fc37%40googlegroups.com%3E"
       TITLE="How to load core in the toplevel?">francois.berenger.fun at gmail.com
       </A><BR>
    <I>Thu Nov  8 08:09:17 GMT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000701.html">How to load core in the toplevel?
</A></li>
        <LI>Next message: <A HREF="000704.html">How to load core in the toplevel?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#700">[ date ]</a>
              <a href="thread.html#700">[ thread ]</a>
              <a href="subject.html#700">[ subject ]</a>
              <a href="author.html#700">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What is the effect of doing an open of Core.Std (I don't need async for the 
moment)?

Does it override the standard prelude and the standard library?

On Thursday, November 8, 2012 3:12:06 PM UTC+9, Malcolm wrote:
&gt;<i>
</I>&gt;<i> Core.Std and Async.Std are designed to be opened. 
</I>&gt;<i>
</I>&gt;<i> Francois &lt;<A HREF="http://lists.ocaml.org/listinfo/core">francois.b... at gmail.com</A> &lt;javascript:&gt;&gt; writes: 
</I>&gt;<i>
</I>&gt;<i> &gt; On Thursday, November 8, 2012 1:42:41 AM UTC+9, Anil Madhavapeddy wrote: 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; You should also add &quot;#camlp4o&quot; so that toplevel syntax extensions work 
</I>&gt;<i> too. 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In the future, I think only the one from janestreet to do automatic 
</I>&gt;<i> &gt; translations to/from s-expressions interests me. 
</I>&gt;<i> &gt; I prefer to read standard OCaml code usually. 
</I>&gt;<i> &gt;   
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; I'd really recommend using 'utop' (installable via OPAM) instead of the 
</I>&gt;<i> &gt;&gt; default toplevel. It doesn't require the extra -I that the default 
</I>&gt;<i> toplevel 
</I>&gt;<i> &gt;&gt; needs, and has a really nice interactive interpreter. 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have to read about it. 
</I>&gt;<i> &gt; I'm conservative about using new things (I'm an isolated OCaml 
</I>&gt;<i> developper, 
</I>&gt;<i> &gt; no one nearby to help me in case 
</I>&gt;<i> &gt; I mess with something, that's why I'm so active on mailing lists). 
</I>&gt;<i> &gt;   
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; My full .ocamlinit with utop is: 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; #use &quot;topfind&quot; 
</I>&gt;<i> &gt;&gt; #camlp4o 
</I>&gt;<i> &gt;&gt; #thread 
</I>&gt;<i> &gt;&gt; #require &quot;core.top&quot;;; 
</I>&gt;<i> &gt;&gt; #require &quot;async&quot;;; 
</I>&gt;<i> &gt;&gt; open Core.Std 
</I>&gt;<i> &gt;&gt; open Async.Std 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks for sharing this. 
</I>&gt;<i> &gt; I'm very worried about the open directives 
</I>&gt;<i> &gt; and try to never use them so I don't think 
</I>&gt;<i> &gt; it would fit me for the moment. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Best regards, 
</I>&gt;<i> &gt; Francois. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; -anil 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; On 7 Nov 2012, at 05:33, Francois Berenger &lt;<A HREF="http://lists.ocaml.org/listinfo/core">francois.ber... at gmail.com</A>&lt;javascript:&gt;&gt; 
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; wrote: 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Thanks a lot. 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; So, the whole recipe in my case was: 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; ocaml -I $OCAML_TOPLEVEL_PATH 
</I>&gt;<i> &gt;&gt; #thread;; 
</I>&gt;<i> &gt;&gt; #require &quot;core.top&quot;;; 
</I>&gt;<i> &gt;&gt; #require &quot;async&quot;;; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Regards, 
</I>&gt;<i> &gt;&gt; F. 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; On Wednesday, November 7, 2012 12:09:15 PM UTC+9, Sebastien Mondet 
</I>&gt;<i> wrote: 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; I think that one is the   
</I>&gt;<i> &gt;&gt;&gt;    #thread;; 
</I>&gt;<i> &gt;&gt;&gt; thing 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; On Tue, Nov 6, 2012 at 10:06 PM, Francois Berenger &lt; 
</I>&gt;<i> &gt;&gt;&gt; <A HREF="http://lists.ocaml.org/listinfo/core">francois.ber... at gmail.com</A>&gt; wrote: 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; Thanks! That fixes the problem partially. 
</I>&gt;<i> &gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; Now, I get: 
</I>&gt;<i> &gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; # #require &quot;core.top&quot;;; 
</I>&gt;<i> &gt;&gt;&gt;&gt; # #require &quot;core.top&quot;;;stem/lib/core/core.cma: loaded 
</I>&gt;<i> &gt;&gt;&gt;&gt; Error: Reference to undefined global `Condition' 
</I>&gt;<i> &gt;&gt;&gt;&gt; # #require &quot;core&quot;;; 
</I>&gt;<i> &gt;&gt;&gt;&gt; # #require &quot;core&quot;;;m/system/lib/core/core.cma: loaded 
</I>&gt;<i> &gt;&gt;&gt;&gt; Error: Reference to undefined global `Condition' 
</I>&gt;<i> &gt;&gt;&gt;&gt; # #require &quot;async&quot;;; 
</I>&gt;<i> &gt;&gt;&gt;&gt; # #require &quot;async&quot;;;/system/lib/core/core.cma: loaded 
</I>&gt;<i> &gt;&gt;&gt;&gt; Error: Reference to undefined global `Condition' 
</I>&gt;<i> &gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; Any hint? 
</I>&gt;<i> &gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; On Wednesday, November 7, 2012 11:54:47 AM UTC+9, Sebastien Mondet 
</I>&gt;<i> wrote: 
</I>&gt;<i> &gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I'm not sure if this is your problem, but there was something with 
</I>&gt;<i> the 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; toplevel (comming with the system compiler) not knowing about opam 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; packages. 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; I have to launch: 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;    ocaml -I $OCAML_TOPLEVEL_PATH 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; (the variable OCAML_TOPLEVEL_PATH is set by eval `opam config -env`) 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; On Tue, Nov 6, 2012 at 9:37 PM, Francois Berenger 
</I>&gt;<i> &lt;francois.ber...@** 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; gmail.com&gt; wrote: 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Apparently, ocamlfind knows where these libraries are: 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; $ ocamlfind -query core 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; /home/berenger/.opam/system/**lib/core 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; $ ocamlfind -query async 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; /home/berenger/.opam/system/**lib/async 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; $ ocamlfind -query async_extra 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; /home/berenger/.opam/system/**lib/async_extra 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; On Wednesday, November 7, 2012 11:32:43 AM UTC+9, Francois Berenger 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; wrote: 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Hello, 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; I'd like to play with core in my toplevel. 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Is there a recipe? 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; I have installed everything with OPAM: 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; $ opam list | egrep &quot;core|async&quot; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; async                 108.07.01  Monadic concurrency library 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; async_core            108.07.01  Monadic concurrency library 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; async_extra           108.07.01  Monadic concurrency library 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; async_unix            108.07.01  Monadic concurrency library 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; core                  108.07.01  Industrial strength alternative 
</I>&gt;<i> to 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; OCaml's standard library 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; core_extended                --  Extra components that are not as 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; closely vetted or as stable as Core 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; In my toplevel, I type 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; #use &quot;topfind&quot;;; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; #list;; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Nothing about core or async shows up. 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; While parmap is there, for example. 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Is this normal? 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; I guess there is some configuration file of findlib to tweak 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; somewhere. 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; Regards, 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; F. 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt;&gt; 
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/core/attachments/20121108/5a253e75/attachment.html">http://lists.ocaml.org/pipermail/core/attachments/20121108/5a253e75/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000701.html">How to load core in the toplevel?
</A></li>
	<LI>Next message: <A HREF="000704.html">How to load core in the toplevel?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#700">[ date ]</a>
              <a href="thread.html#700">[ thread ]</a>
              <a href="subject.html#700">[ subject ]</a>
              <a href="author.html#700">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
