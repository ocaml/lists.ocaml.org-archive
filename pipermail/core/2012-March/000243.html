<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> pa_ounit outside of Core
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20pa_ounit%20outside%20of%20Core&In-Reply-To=%3CCACLX4jSAnwXbp-zaC1uHW3cu%2BUZJ%2BPbNfj2Lt5vo6Qp2AxVkAQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>pa_ounit outside of Core</H1>
    <B>Yaron Minsky</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20pa_ounit%20outside%20of%20Core&In-Reply-To=%3CCACLX4jSAnwXbp-zaC1uHW3cu%2BUZJ%2BPbNfj2Lt5vo6Qp2AxVkAQ%40mail.gmail.com%3E"
       TITLE="pa_ounit outside of Core">yminsky at janestreet.com
       </A><BR>
    <I>Thu Mar  1 01:35:19 GMT 2012</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001135.html">pa_ounit outside of Core
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#243">[ date ]</a>
              <a href="thread.html#243">[ thread ]</a>
              <a href="subject.html#243">[ subject ]</a>
              <a href="author.html#243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We should definitely merge together Tills' version with ours.  I don't know
any reason for them to deviate.

We should also release a version of our OMakeroot.  It has lots of useful
goodies.  We've talked about that before and not done it.  The real barrier
is I suspect it will take some work to get it working with the bitbucket
tree, and it has lots of internal-only bits and bobs.

But I think we can get a cleaned up version to email out to the mailing
list, so people can look it over and scavenge from it, in any case.

On Wed, Feb 29, 2012 at 6:43 AM, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/core">anil at recoil.org</A>&gt; wrote:

&gt;<i> I ran across Till's very-useful pa_ounit, and would really like to use
</I>&gt;<i> this in our libraries to make adding oUnit tests easier.  There seem to be
</I>&gt;<i> two different versions; the Github one at:
</I>&gt;<i> <A HREF="https://github.com/till-varoquaux/pa_ounit">https://github.com/till-varoquaux/pa_ounit</A>
</I>&gt;<i> ...and the version in the Core distribution.
</I>&gt;<i>
</I>&gt;<i> I've integrated the Core one pretty easily into some of our local
</I>&gt;<i> libraries, and tests are generated as expected. However, the OMake rules
</I>&gt;<i> for extracting and collecting the tests into an executable don't seem to
</I>&gt;<i> be present in the distribution.
</I>&gt;<i>
</I>&gt;<i> What I'd like to do is to only generate the tests during a testing build,
</I>&gt;<i> and for production use have them disappear from the installed binary or
</I>&gt;<i> library. However, there doesn't appear to be a switch in pa_ounit.ml to
</I>&gt;<i> ignore the extra keywords. Do existing pa_ounit consumers just compile the
</I>&gt;<i> tests in with the final library at the moment?
</I>&gt;<i>
</I>
We actually put our tests into the production build, but they only execute
in the unit tests.  The code bloat is small enough for us not to worry
about it.  More work would be required from the syntax extension to make
that work, and you'd have to coordinate having multiple builds, which is
tricky.


&gt;<i> (More generally, the topic of multiple camlp4 options is quite tricky, as
</I>&gt;<i> the same situation exists with pa_lwt generating debug code for mapping
</I>&gt;<i> Lwt threads to backtraces, and it's hard to keep track of what modules
</I>&gt;<i> were built with some set of p4 options).
</I>

Agreed.  it's tricky stuff.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/core/attachments/20120229/b04dbed6/attachment.html">http://lists.ocaml.org/pipermail/core/attachments/20120229/b04dbed6/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001135.html">pa_ounit outside of Core
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#243">[ date ]</a>
              <a href="thread.html#243">[ thread ]</a>
              <a href="subject.html#243">[ subject ]</a>
              <a href="author.html#243">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
