<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Mis-detection of -lrt
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Mis-detection%20of%20-lrt&In-Reply-To=%3C4EC50E29.1040803%40glondu.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000964.html">
   <LINK REL="Next"  HREF="000966.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Mis-detection of -lrt</H1>
    <B>St&#233;phane Glondu</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Mis-detection%20of%20-lrt&In-Reply-To=%3C4EC50E29.1040803%40glondu.net%3E"
       TITLE="Mis-detection of -lrt">steph at glondu.net
       </A><BR>
    <I>Thu Nov 17 13:37:45 GMT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000964.html">ocamlspotter support in core
</A></li>
        <LI>Next message: <A HREF="000966.html">Mis-detection of -lrt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78">[ date ]</a>
              <a href="thread.html#78">[ thread ]</a>
              <a href="subject.html#78">[ subject ]</a>
              <a href="author.html#78">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I've just upgraded Core from version 0.6.0 to 107.01 in Debian, and it
failed on mips, powerpc, s390, hurd and kfreebsd ports, because of
&quot;-lrt&quot; missing [1].

A quick look at Core sources reveals that this flag is supposed to be
there by itself on Linux, and it is indeed on x86, arm and ia64 ports,
but somehow the detection fails everywhere else.

Anyway, I guess checking for Linux is not enough and it is needed
wherever glibc is used. For the moment, I applied a rather crude patch
to the Debian package (attached). It causes &quot;-lrt&quot; to be supplied twice
sometimes, but it at least compiles (and tests pass) everywhere (except
hurd) [2].

[1] <A HREF="https://buildd.debian.org/status/logs.php?pkg=janest-core&amp;ver=107.01-4">https://buildd.debian.org/status/logs.php?pkg=janest-core&amp;ver=107.01-4</A>
[2] <A HREF="https://buildd.debian.org/status/logs.php?pkg=janest-core&amp;ver=107.01-5">https://buildd.debian.org/status/logs.php?pkg=janest-core&amp;ver=107.01-5</A>


Cheers,

-- 
St&#233;phane
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0001-Force-linking-with-lrt.patch
Type: text/x-patch
Size: 1243 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/core/attachments/20111117/723ebc76/attachment.bin">http://lists.ocaml.org/pipermail/core/attachments/20111117/723ebc76/attachment.bin</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000964.html">ocamlspotter support in core
</A></li>
	<LI>Next message: <A HREF="000966.html">Mis-detection of -lrt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78">[ date ]</a>
              <a href="thread.html#78">[ thread ]</a>
              <a href="subject.html#78">[ subject ]</a>
              <a href="author.html#78">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
