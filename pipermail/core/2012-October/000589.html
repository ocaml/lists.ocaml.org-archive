<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> type_conv-108.07 breakage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20type_conv-108.07%20breakage&In-Reply-To=%3CCAP_800rBTJW9wcbRYad87iFojk%3DKmSE%2BGCOSaZp8hWh_25rOsQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001474.html">
   <LINK REL="Next"  HREF="001475.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>type_conv-108.07 breakage</H1>
    <B>Markus Mottl</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20type_conv-108.07%20breakage&In-Reply-To=%3CCAP_800rBTJW9wcbRYad87iFojk%3DKmSE%2BGCOSaZp8hWh_25rOsQ%40mail.gmail.com%3E"
       TITLE="type_conv-108.07 breakage">markus.mottl at gmail.com
       </A><BR>
    <I>Mon Oct  1 20:20:10 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001474.html">type_conv-108.07 breakage
</A></li>
        <LI>Next message: <A HREF="001475.html">type_conv-108.07 breakage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#589">[ date ]</a>
              <a href="thread.html#589">[ thread ]</a>
              <a href="subject.html#589">[ subject ]</a>
              <a href="author.html#589">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Mon, Oct 1, 2012 at 2:36 PM, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/core">anil at recoil.org</A>&gt; wrote:
&gt;<i> I had a quick chat with Yaron about this at OUD.  It seems that the best
</I>&gt;<i> way to export changes from the JSC dev trees is via tarballs (that lose
</I>&gt;<i> history).  However, if we do not need patches to go *bidirectionally*, then
</I>&gt;<i> the Mercurial export infrastructure could be significantly simplified.
</I>
I was under the (wrong?) impression that the bidirectional issues had
been successfully resolved with the patch queue repository.  I can
imagine that releasing the internal dev tree (Core part) via tarballs
is less work for Jane Street than pushing changes to the external dev
tree.  OTOH, it would be great if we could at least see changes in the
patch queue, even if it's just one huge blob rather than more
fine-grained patches.

For example, I don't even know which ones of my patches (if any) have
made it into the internal tree.  If JS placed a patch into the queue
such that it takes already existing, internally applied patches into
account, external developers' lives would be much easier.  If you want
to do things quickly without too much fine-grained control, you'd just
have to apply the internally applied patches to the last release and
create a new patch in the queue from the diff to the latest dev
release.

&gt;<i> I propose something along these lines:
</I>&gt;<i>
</I>&gt;<i> - JSC releases tarballs that are similar to the current ones, but with
</I>&gt;<i>   preX releases so we can see some changes before they're committed to
</I>&gt;<i>   the final release.
</I>
This seems neatly addressed by the patch queue.  E.g. we might have
the policy that &quot;Jane Street patches come first in the queue&quot; so that
external developers have to fix their patches to stay compatible with
pre-releases rather than the other way round.

&gt;<i> - These tarballs are committed by script against a Github repository of
</I>&gt;<i>   Core. This will lose renames if changes are made, but this can't be
</I>&gt;<i>   helped for now.
</I>&gt;<i>
</I>&gt;<i> - Any patches or pull requests against the Github version are transformed
</I>&gt;<i>   into e-mail patches and sent to JSC for incorporation into a future
</I>&gt;<i>   version.  A Git merge will naturally resolve these.
</I>&gt;<i>
</I>&gt;<i> An alternative, if JSC can keep the Bitbucket repo up-to-date more
</I>&gt;<i> frequently, is for us to setup a unidirectional Bitbucket-&gt;Github mirror.
</I>&gt;<i> In practical terms, there seems little advantage though, as the Bitbucket
</I>&gt;<i> repo also loses version history of changesets at present (I think).
</I>
This seems rather involved.  I think the fewer tools, scripts,
repositories, etc., we need to support the workflow, the better.

Has there ever been any attempt at JS to use the patch queue
repository to publish updates?  I don't see any problems with this
fairly simple approach, but your mileage may vary.

Regards,
Markus

-- 
Markus Mottl        <A HREF="http://www.ocaml.info">http://www.ocaml.info</A>        <A HREF="http://lists.ocaml.org/listinfo/core">markus.mottl at gmail.com</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001474.html">type_conv-108.07 breakage
</A></li>
	<LI>Next message: <A HREF="001475.html">type_conv-108.07 breakage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#589">[ date ]</a>
              <a href="thread.html#589">[ thread ]</a>
              <a href="subject.html#589">[ subject ]</a>
              <a href="author.html#589">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
