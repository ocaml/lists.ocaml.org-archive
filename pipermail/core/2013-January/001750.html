<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Contributing bug fixes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Contributing%20bug%20fixes&In-Reply-To=%3CCAP_800rLyjy19h9egKSVaAFirxtKRDN09naAnRHu9pepBPPKTA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001748.html">
   <LINK REL="Next"  HREF="000844.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Contributing bug fixes</H1>
    <B>Markus Mottl</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Contributing%20bug%20fixes&In-Reply-To=%3CCAP_800rLyjy19h9egKSVaAFirxtKRDN09naAnRHu9pepBPPKTA%40mail.gmail.com%3E"
       TITLE="Contributing bug fixes">markus.mottl at gmail.com
       </A><BR>
    <I>Wed Jan 23 16:14:08 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001748.html">Contributing bug fixes
</A></li>
        <LI>Next message: <A HREF="000844.html">Hello World repo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1750">[ date ]</a>
              <a href="thread.html#1750">[ thread ]</a>
              <a href="subject.html#1750">[ subject ]</a>
              <a href="author.html#1750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Tue, Jan 22, 2013 at 2:13 PM, Yaron Minsky &lt;<A HREF="http://lists.ocaml.org/listinfo/core">yminsky at janestreet.com</A>&gt; wrote:
&gt;<i> I'm not quite sure how what you're proposing would work.  The thing I
</I>&gt;<i> like about an email-based workflow is it's very clear what is being
</I>&gt;<i> proposed for inclusion.  I worry about multiple people editing a
</I>&gt;<i> patch-queue, and being left uncertain as to which version is really
</I>&gt;<i> being proposed.
</I>
That's what pull requests are for, it's not that people can just push
patches to the public queue.  Groups of contributors can work
independently with forks of the public patch queue until things
converge.  They will still have to submit a pull request then, which
you may reject if proposed patches do not seem ready.  This ensures
that your public patch queue will only contain serious, polished
patches that are likely candidates for inclusion in the next release.

I think it would be much more confusing to read some back and forth on
the list.  Note, too, that patch queues, unlike email communication,
are version-controlled, which definitely has its merits.

&gt;<i> I think that for collaboration purposes, people could work in an
</I>&gt;<i> ordinary hg branch, and then when they're all done, submit a patch
</I>&gt;<i> based on a rebase of that branch to the current tip of the public
</I>&gt;<i> repo.  That seems more straightforward to me.
</I>
Lets assume you like a contributed patch but need to modify it.  Would
you then email the modified patch back to the contributors?  It just
seems error-prone and complex to handle this all through email.

In my preferred setup you'd simply accept the pull request for the
patch queue with a statement that you'll have to change something.
Then you modify the patch as required and commit the updated patch to
the public patch queue.  Now the contributors can just pull your
updated patch queue to deal with the feedback.

This all leaves an easy to follow digital trail of patch-specific
communication as well as patch version history.  No need to go through
list archives.

&gt;&gt;<i> A possible release workflow for you could then be:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   * download patches from public patch queue
</I>&gt;&gt;<i>   * apply to your &quot;real&quot; internal tree, i.e. not your clone of the public one
</I>&gt;<i>
</I>&gt;<i> Maybe, or maybe we would apply it to the same changeset that it was
</I>&gt;<i> done against in the public release.  We have some internal tools for
</I>&gt;<i> &quot;rebasing&quot; such patches, and it might be cleanest to base it
</I>&gt;<i> internally off of the revision it was based off of externally.
</I>
Seems like a good idea.  Rebasing patches should reduce the number of conflicts.

Btw., the &quot;monster patch&quot; need not contain contributed patches that
were part of the patch queue.  If you want to make a release, you
first apply the patch queue to your public repository.  Then you
submit the &quot;monster patch&quot; containing everything else that changed
internally.  This would make it easier to separate internal Jane
Street stuff from outside contributions in the public repo.

&gt;<i> Just to be clear, are there any patches that you care about that are
</I>&gt;<i> not yet in the release tarballs?  We obviously also need to fix the
</I>&gt;<i> repos, but I just want to make sure we're not missing substantive
</I>&gt;<i> changes.
</I>
It seems all the major things are in.  The minor stuff is too
unimportant to bother with.  I'll gladly hand over maintenance of
type_conv, bin_prot, and sexplib to Jane Street now.

Regards,
Markus

-- 
Markus Mottl        <A HREF="http://www.ocaml.info">http://www.ocaml.info</A>        <A HREF="http://lists.ocaml.org/listinfo/core">markus.mottl at gmail.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001748.html">Contributing bug fixes
</A></li>
	<LI>Next message: <A HREF="000844.html">Hello World repo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1750">[ date ]</a>
              <a href="thread.html#1750">[ thread ]</a>
              <a href="subject.html#1750">[ subject ]</a>
              <a href="author.html#1750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
