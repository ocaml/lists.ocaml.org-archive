<tt>
I'm&nbsp;busy&nbsp;right&nbsp;now.&lt;br&gt;&lt;br&gt;But&nbsp;I'll&nbsp;try&nbsp;to&nbsp;do&nbsp;this&nbsp;before&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;week.&lt;br&gt;&lt;br&gt;I&nbsp;may&nbsp;have&nbsp;inserted&nbsp;(at&nbsp;worst)&nbsp;16M&nbsp;strings&nbsp;in&nbsp;a&nbsp;String.Set,&lt;br&gt;that's&nbsp;all&nbsp;I&nbsp;know&nbsp;for&nbsp;now.&lt;br&gt;&lt;br&gt;On&nbsp;Tuesday,&nbsp;January&nbsp;22,&nbsp;2013&nbsp;5:36:57&nbsp;AM&nbsp;UTC+9,&nbsp;Yaron&nbsp;Minsky&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0;margin-left:&nbsp;0.8ex;border-left:&nbsp;1px&nbsp;#ccc&nbsp;solid;padding-left:&nbsp;1ex;&quot;&gt;Core&nbsp;is&nbsp;not&nbsp;meant&nbsp;to&nbsp;be&nbsp;free&nbsp;of&nbsp;_all_&nbsp;non-tail-rec&nbsp;calls.&nbsp;&nbsp;But&nbsp;it<br>
&lt;br&gt;shouldn't&nbsp;have&nbsp;any&nbsp;that&nbsp;are&nbsp;reasonably&nbsp;easy&nbsp;to&nbsp;trigger.&nbsp;&nbsp;In&nbsp;a&nbsp;set,<br>
&lt;br&gt;where&nbsp;the&nbsp;depth&nbsp;is&nbsp;proportional&nbsp;to&nbsp;log&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;elements,&nbsp;it<br>
&lt;br&gt;seems&nbsp;reasonable&nbsp;to&nbsp;use&nbsp;stack-frames&nbsp;proportional&nbsp;to&nbsp;that&nbsp;depth.&nbsp;&nbsp;But<br>
&lt;br&gt;to&nbsp;blow&nbsp;the&nbsp;stack&nbsp;at&nbsp;a&nbsp;million&nbsp;elements,&nbsp;it&nbsp;must&nbsp;be&nbsp;doing&nbsp;something<br>
&lt;br&gt;worse&nbsp;than&nbsp;that.<br>
&lt;br&gt;<br>
&lt;br&gt;Can&nbsp;you&nbsp;email&nbsp;out&nbsp;a&nbsp;small&nbsp;test&nbsp;case&nbsp;that&nbsp;triggers&nbsp;the&nbsp;bug?<br>
&lt;br&gt;<br>
&lt;br&gt;y<br>
&lt;br&gt;<br>
&lt;br&gt;On&nbsp;Mon,&nbsp;Jan&nbsp;21,&nbsp;2013&nbsp;at&nbsp;4:45&nbsp;AM,&nbsp;Francois&nbsp;Berenger<br>
&lt;br&gt;&lt;&lt;a&nbsp;href=&quot;javascript:&quot;&nbsp;target=&quot;_blank&quot;&nbsp;gdf-obfuscated-mailto=&quot;XhOUIlnW_YcJ&quot;&gt;francois.ber...@&lt;wbr&gt;gmail.com&lt;/a&gt;&gt;&nbsp;wrote:<br>
&lt;br&gt;&gt;<br>
&lt;br&gt;&gt;<br>
&lt;br&gt;&gt;&nbsp;On&nbsp;Monday,&nbsp;January&nbsp;21,&nbsp;2013&nbsp;5:37:51&nbsp;PM&nbsp;UTC+9,&nbsp;Francois&nbsp;Berenger&nbsp;wrote:<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;&gt;&nbsp;Hello,<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;&gt;&nbsp;I&nbsp;think&nbsp;the&nbsp;aux&nbsp;function&nbsp;in&nbsp;add&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://core_set.ml&quot;&nbsp;target=&quot;_blank&quot;&gt;core_set.ml&lt;/a&gt;&nbsp;is&nbsp;not&nbsp;tail&nbsp;rec.<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;&gt;&nbsp;I&nbsp;think&nbsp;it&nbsp;managed&nbsp;to&nbsp;blow&nbsp;my&nbsp;stack&nbsp;when&nbsp;adding<br>
&lt;br&gt;&gt;&gt;&nbsp;lots&nbsp;of&nbsp;elements&nbsp;to&nbsp;a&nbsp;set&nbsp;(over&nbsp;1M&nbsp;strings).<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;&gt;&nbsp;I&nbsp;think&nbsp;I&nbsp;will&nbsp;give&nbsp;a&nbsp;try&nbsp;at&nbsp;a&nbsp;hash&nbsp;table&nbsp;in&nbsp;my&nbsp;code<br>
&lt;br&gt;&gt;&gt;&nbsp;to&nbsp;replace&nbsp;the&nbsp;set&nbsp;and&nbsp;see&nbsp;if&nbsp;it&nbsp;works&nbsp;better.<br>
&lt;br&gt;&gt;<br>
&lt;br&gt;&gt;<br>
&lt;br&gt;&gt;&nbsp;It&nbsp;does&nbsp;not&nbsp;crash&nbsp;with&nbsp;a&nbsp;hash&nbsp;table.<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;&gt;&nbsp;I&nbsp;just&nbsp;let&nbsp;you&nbsp;know&nbsp;because&nbsp;I&nbsp;was&nbsp;thinking<br>
&lt;br&gt;&gt;&gt;&nbsp;core&nbsp;is&nbsp;free&nbsp;from&nbsp;non&nbsp;tail-rec&nbsp;functions.<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;&gt;&nbsp;Regards,<br>
&lt;br&gt;&gt;&gt;&nbsp;F.<br>
&lt;br&gt;&gt;&gt;<br>
&lt;br&gt;&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;
</tt>
