<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2012/11/19&nbsp;Valentin&nbsp;Gatien-Baron&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:vgatien-baron@janestreet.com&quot;&nbsp;target=&quot;_blank&quot;&gt;vgatien-baron@janestreet.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Not&nbsp;all&nbsp;cmx&#39;s&nbsp;should&nbsp;be&nbsp;installed,&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;see&nbsp;why&nbsp;the&nbsp;packed&nbsp;cmx&lt;br&gt;<br>
should&nbsp;not&nbsp;be&nbsp;installed.&nbsp;Generally&nbsp;speaking,&nbsp;I&nbsp;think&nbsp;packed&nbsp;cmx&#39;s&nbsp;are&lt;br&gt;<br>
not&nbsp;special&nbsp;and&nbsp;every&nbsp;cmx&nbsp;that&nbsp;was&nbsp;given&nbsp;to&nbsp;ocamlopt&nbsp;to&nbsp;build&nbsp;the&nbsp;cmxa&lt;br&gt;<br>
should&nbsp;be&nbsp;installed.&lt;br&gt;<br>
&lt;br&gt;<br>
cmxs&nbsp;are&nbsp;for&nbsp;dynamic&nbsp;loading,&nbsp;so&nbsp;that&#39;s&nbsp;not&nbsp;related.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Noted,&nbsp;it&nbsp;will&nbsp;be&nbsp;in&nbsp;the&nbsp;next&nbsp;version&nbsp;of&nbsp;OASIS.&nbsp;I&#39;ll&nbsp;ping&nbsp;you&nbsp;when&nbsp;it&nbsp;lands&nbsp;in&nbsp;the&nbsp;github&nbsp;repository.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
On&nbsp;11/19/12,&nbsp;Sylvain&nbsp;Le&nbsp;Gall&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:sylvain@le-gall.net&quot;&gt;sylvain@le-gall.net&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;2012/11/19&nbsp;Markus&nbsp;Mottl&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:markus.mottl@gmail.com&quot;&gt;markus.mottl@gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;I&#39;ve&nbsp;noticed&nbsp;that&nbsp;cross-module&nbsp;inlining&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;Opam-installed&nbsp;Core&nbsp;library,&nbsp;because&nbsp;the&nbsp;.cmx&nbsp;file&nbsp;is&nbsp;not&nbsp;installed.&lt;br&gt;<br>
&gt;&gt;&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;enough&nbsp;to&nbsp;install&nbsp;the&nbsp;.cmxa&nbsp;file,&nbsp;because&nbsp;it&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;only&nbsp;used&nbsp;during&nbsp;linking.&nbsp; The&nbsp;compiler&nbsp;wouldn&#39;t&nbsp;know&nbsp;where&nbsp;to&nbsp;look&lt;br&gt;<br>
&gt;&gt;&nbsp;for&nbsp;optimization&nbsp;information.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Looking&nbsp;at&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://setup.ml&quot;&nbsp;target=&quot;_blank&quot;&gt;setup.ml&lt;/a&gt;&nbsp;file&nbsp;generated&nbsp;by&nbsp;Oasis,&nbsp;it&nbsp;seems&nbsp;that&nbsp;Oasis&lt;br&gt;<br>
&gt;&gt;&nbsp;is&nbsp;the&nbsp;culprit,&nbsp;but&nbsp;I&nbsp;thought&nbsp;it&nbsp;would&nbsp;be&nbsp;important&nbsp;to&nbsp;know&nbsp;for&nbsp;other&lt;br&gt;<br>
&gt;&gt;&nbsp;Core&nbsp;users&nbsp;if&nbsp;they&nbsp;experience&nbsp;bad&nbsp;performance.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Sylvain,&nbsp;is&nbsp;there&nbsp;anything&nbsp;one&nbsp;has&nbsp;to&nbsp;put&nbsp;in&nbsp;the&nbsp;_oasis&nbsp;file&nbsp;to&lt;br&gt;<br>
&gt;&gt;&nbsp;generate&nbsp;correct&nbsp;installation&nbsp;code?&nbsp; My&nbsp;guess&nbsp;is&nbsp;that&nbsp;all&nbsp;that&#39;s&lt;br&gt;<br>
&gt;&gt;&nbsp;needed&nbsp;is&nbsp;to&nbsp;fix&nbsp;&lt;a&nbsp;href=&quot;http://setup.ml&quot;&nbsp;target=&quot;_blank&quot;&gt;setup.ml&lt;/a&gt;&nbsp;by&nbsp;installing&nbsp;the&nbsp;.cmx&nbsp;of&nbsp;packing&nbsp;targets&lt;br&gt;<br>
&gt;&gt;&nbsp;(e.g.&nbsp;core.cmx),&nbsp;not&nbsp;just&nbsp;.cmx&nbsp;files&nbsp;for&nbsp;constituents&nbsp;of&nbsp;unpacked&lt;br&gt;<br>
&gt;&gt;&nbsp;libraries,&nbsp;which&nbsp;seem&nbsp;to&nbsp;be&nbsp;handled&nbsp;correctly.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Well,&nbsp;.cmx&nbsp;file&nbsp;should&nbsp;be&nbsp;installed&nbsp;EXCEPT&nbsp;if&nbsp;you&nbsp;are&nbsp;using&nbsp;packed&lt;br&gt;<br>
&gt;&nbsp;modules...&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;culprit&nbsp;is:&lt;br&gt;<br>
&gt;&nbsp;(not&nbsp;lib.lib_pack)&nbsp;&amp;&amp;&nbsp;(*&nbsp;Do&nbsp;not&nbsp;install&nbsp;.cmx&nbsp;packed&nbsp;submodules&nbsp;*)&lt;br&gt;<br>
&gt;&nbsp;in&nbsp;src/oasis/OASISLibrary.ml&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;AFAIK,&nbsp;Core&nbsp;use&nbsp;pack&nbsp;module,&nbsp;so&nbsp;this&nbsp;is&nbsp;the&nbsp;reason&nbsp;why&nbsp;it&nbsp;doesn&#39;t&nbsp;install&lt;br&gt;<br>
&gt;&nbsp;.cmx.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;can&nbsp;experiment&nbsp;installing&nbsp;.cmx&nbsp;by&nbsp;commenting&nbsp;this&nbsp;line.&nbsp;But&nbsp;I&nbsp;am&nbsp;really&lt;br&gt;<br>
&gt;&nbsp;not&nbsp;sure&nbsp;this&nbsp;will&nbsp;help&nbsp;that&nbsp;much.&nbsp;I&nbsp;thought&nbsp;that&nbsp;.cmxs&nbsp;was&nbsp;a&nbsp;pack&nbsp;of&nbsp;.cmx&lt;br&gt;<br>
&gt;&nbsp;so&nbsp;that&nbsp;inlining&nbsp;can&nbsp;work&nbsp;using&nbsp;what&nbsp;is&nbsp;inside&nbsp;this&nbsp;archive&nbsp;(contrary&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;.cmxa).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Maybe&nbsp;the&nbsp;inlining&nbsp;using&nbsp;.cmxs&nbsp;doesn&#39;t&nbsp;work&nbsp;as&nbsp;excepted&nbsp;?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Regards,&lt;br&gt;<br>
&gt;&gt;&nbsp;Markus&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;--&lt;br&gt;<br>
&gt;&gt;&nbsp;Markus&nbsp;Mottl&nbsp; &nbsp; &nbsp; &nbsp; &lt;a&nbsp;href=&quot;http://www.ocaml.info&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.ocaml.info&lt;/a&gt;&nbsp; &nbsp; &nbsp; &nbsp; &lt;a&nbsp;href=&quot;mailto:markus.mottl@gmail.com&quot;&gt;markus.mottl@gmail.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
