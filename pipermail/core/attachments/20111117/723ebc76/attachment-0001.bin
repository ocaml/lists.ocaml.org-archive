>From: Stephane Glondu <steph@glondu.net>
Date: Thu, 17 Nov 2011 07:45:05 +0100
Subject: Force linking with -lrt

It is needed for clock_* functions, but its need is misdetected on (at
least) hurd, kfreebsd-*, mips*, powerpc and s390, causing FTBFS.
---
 myocamlbuild.ml |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/myocamlbuild.ml b/myocamlbuild.ml
index 233a58c..c88a61d 100644
--- a/myocamlbuild.ml
+++ b/myocamlbuild.ml
@@ -403,10 +403,10 @@ module MyOCamlbuildBase = struct
               (fun (lib, dir, headers) ->
                    (* Handle C part of library *)
                    flag ["link"; "library"; "ocaml"; "byte"; "use_lib"^lib]
-                     (S[A"-dllib"; A("-l"^lib); A"-cclib"; A("-l"^lib)]);
+                     (S[A"-dllib"; A("-l"^lib); A"-cclib"; A("-l"^lib); A"-cclib"; A"-lrt"]);
   
                    flag ["link"; "library"; "ocaml"; "native"; "use_lib"^lib]
-                     (S[A"-cclib"; A("-l"^lib)]);
+                     (S[A"-cclib"; A("-l"^lib); A"-cclib"; A"-lrt"]);
                         
                    flag ["link"; "program"; "ocaml"; "byte"; "use_lib"^lib]
                      (S[A"-dllib"; A("dll"^lib)]);
-- 
