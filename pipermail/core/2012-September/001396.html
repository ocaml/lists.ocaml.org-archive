<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Compose function operator
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Compose%20function%20operator&In-Reply-To=%3C50471929.3090909%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001419.html">
   <LINK REL="Next"  HREF="000509.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Compose function operator</H1>
    <B>Matej Kosik</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20Compose%20function%20operator&In-Reply-To=%3C50471929.3090909%40gmail.com%3E"
       TITLE="Compose function operator">5764c029b688c1c0d24a2e97cd764f at gmail.com
       </A><BR>
    <I>Wed Sep  5 10:19:37 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001419.html">Compose function operator
</A></li>
        <LI>Next message: <A HREF="000509.html">Lwt/Async abstraction for HTTP library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1396">[ date ]</a>
              <a href="thread.html#1396">[ thread ]</a>
              <a href="subject.html#1396">[ subject ]</a>
              <a href="author.html#1396">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 31/08/12 17:01, David House wrote:
&gt;<i> There is already (|!) which almost does what you want, but in a more
</I>&gt;<i> logical order.
</I>&gt;<i> 
</I>&gt;<i> I say &quot;almost&quot; since it does not allow you to build up a partially
</I>&gt;<i> applied function. But I for one very much dislike Fn.compose in those
</I>&gt;<i> scenarios. I think it's generally much clearer to write out the
</I>&gt;<i> lambda, since then one is forced to give a name to the variable. E.g.
</I>&gt;<i> which is clearer?
</I>&gt;<i> 
</I>&gt;<i>   List.map events ~f:(Fn.compose to_string fst)
</I>&gt;<i>   List.map events ~f:(fun (kind, _time) -&gt; to_string kind)
</I>&gt;<i> 
</I>&gt;<i> The latter code is much more annotated and, to me, clearer as a result.
</I>&gt;<i> 
</I>&gt;<i> I know that sometimes writing names is pretty unnecessary, because
</I>&gt;<i> it's already clear what the output of a function will be. And in that
</I>&gt;<i> case, adding names can just clutter the code and decrease the
</I>&gt;<i> information density, making it harder to read. But one can just use
</I>&gt;<i> (|!), which as I said makes things appear in a more logical order.
</I>
AFAIK, Batteries provide two relevant infix operators:

	|-

	-|

One of them is obviously redundant.

&lt;speculation&gt;
Both are kept probably because it is hard to decide which one to drop.
By dropping one, you can annoy some set of people.
By dropping the other one, you can annoy another set of people.
&lt;/speculation&gt;

But function composition is an important technique for compressing
source code at micro-level. Even in mathematics, you have &quot;o&quot; operator
so introducing infix operator for function composition does not seem to
be a culturally alien thing. I got used to it. Sometimes really, code
verbosity is just verbosity, not clarity.

&gt;<i> 
</I>&gt;<i> Finally, there is a significant cost for any new infix operator. If
</I>&gt;<i> that thing is not used all the time, it is very obscure and makes code
</I>&gt;<i> quite opaque.
</I>&gt;<i> 
</I>&gt;<i> On Fri, Aug 31, 2012 at 4:48 PM, Vladimir Brankov &lt;<A HREF="http://lists.ocaml.org/listinfo/core">brankovv at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> As far as I can tell, the only way to compose functions is Fn.compose.  Why
</I>&gt;&gt;<i> not having an operator as well?  It's easier to say:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     f1 |- f2 |- f3
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> than
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     compose (compose f1 f2) f3
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also, I see that Batteries has some other interesting function composition
</I>&gt;&gt;<i> operators.  I don't have any use for it now, but we may want to think about
</I>&gt;&gt;<i> it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://batteries.forge.ocamlcore.org/doc.preview:batteries-beta1/html/api/Standard.html">http://batteries.forge.ocamlcore.org/doc.preview:batteries-beta1/html/api/Standard.html</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001419.html">Compose function operator
</A></li>
	<LI>Next message: <A HREF="000509.html">Lwt/Async abstraction for HTTP library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1396">[ date ]</a>
              <a href="thread.html#1396">[ thread ]</a>
              <a href="subject.html#1396">[ subject ]</a>
              <a href="author.html#1396">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
