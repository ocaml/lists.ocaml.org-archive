<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> core + opam
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20core%20%2B%20opam&In-Reply-To=%3CCAO4dZbeCX%2BiDqozMsD1ZBEPF0KCARzyHaoBYgcOxj1kZoR2a1w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001434.html">
   <LINK REL="Next"  HREF="001436.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>core + opam</H1>
    <B>Sean McLaughlin</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20core%20%2B%20opam&In-Reply-To=%3CCAO4dZbeCX%2BiDqozMsD1ZBEPF0KCARzyHaoBYgcOxj1kZoR2a1w%40mail.gmail.com%3E"
       TITLE="core + opam">seanmcl at gmail.com
       </A><BR>
    <I>Sat Sep 15 21:12:28 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001434.html">ocaml-core doesn't build with opam installed ocaml
</A></li>
        <LI>Next message: <A HREF="001436.html">core + opam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#546">[ date ]</a>
              <a href="thread.html#546">[ thread ]</a>
              <a href="subject.html#546">[ subject ]</a>
              <a href="author.html#546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm experiencing problems compiling core with opam.  This seems to be due
to the way opam separates the compiled stub files
(in .opam/4.00.0/lib/stublibs/dllbin_prot_stubs.so) from the libraries
themselves (.opam/4.00.0/lib/bin_prot/*.cmx).  I'm not sure if we should
fix this on the Jane Street side in the build system, or if opam's ocaml
should know about this directory during linking.

The failure occurs for me on both on OSX and Linux.  Could this be a
problem with my install of opam?  Has anyone else got this to work?  Before
JS releases a tarball, do you try to compile with opam?

Best,

Sean

+ ocamlfind ocamldep -package variantslib.syntax -package variantslib
-package unix -package threads -package sexplib.syntax -package sexplib
-package res -package pa_pipebang -package pa_ounit -package
fieldslib.syntax -package fieldslib -package comparelib.syntax -package
bin_prot.syntax -package bin_prot -package bigarray -syntax camlp4o
-modules lib/array_permute.ml &gt; lib/array_permute.ml.depends
Camlp4: Uncaught exception: DynLoader.Error
(&quot;/Users/seanmcl/.opam/4.00.0/lib/bin_prot/bin_prot.cma&quot;, &quot;error loading
shared library: dllbin_prot_stubs.so: dlopen(dllbin_prot_stubs.so, 138):
image not found&quot;)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/core/attachments/20120915/cfdb13ae/attachment.html">http://lists.ocaml.org/pipermail/core/attachments/20120915/cfdb13ae/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001434.html">ocaml-core doesn't build with opam installed ocaml
</A></li>
	<LI>Next message: <A HREF="001436.html">core + opam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#546">[ date ]</a>
              <a href="thread.html#546">[ thread ]</a>
              <a href="subject.html#546">[ subject ]</a>
              <a href="author.html#546">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
