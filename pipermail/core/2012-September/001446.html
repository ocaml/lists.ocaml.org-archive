<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> opam 'remove' not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20opam%20%27remove%27%20not%20working&In-Reply-To=%3C536A9684-E72C-4D56-B774-B27CD80E7E7B%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001445.html">
   <LINK REL="Next"  HREF="001447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>opam 'remove' not working</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:core%40lists.ocaml.org?Subject=Re%3A%20opam%20%27remove%27%20not%20working&In-Reply-To=%3C536A9684-E72C-4D56-B774-B27CD80E7E7B%40recoil.org%3E"
       TITLE="opam 'remove' not working">anil at recoil.org
       </A><BR>
    <I>Mon Sep 17 21:41:39 BST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="001445.html">opam 'remove' not working
</A></li>
        <LI>Next message: <A HREF="001447.html">opam 'remove' not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1446">[ date ]</a>
              <a href="thread.html#1446">[ thread ]</a>
              <a href="subject.html#1446">[ subject ]</a>
              <a href="author.html#1446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alas, if for any reason OPAM gets out of sync with OCamlfind, you need to manually rectify it.

Ocamlfind refuses to install over an existing installation...

This shouldn't happen in normal practise, but of course, packaging bugs happen.

-anil

On 17 Sep 2012, at 14:43, Sean McLaughlin &lt;<A HREF="http://lists.ocaml.org/listinfo/core">seanmcl at gmail.com</A>&gt; wrote:

&gt;<i> PS: I know it's 'opam remove' that is not working, because even after doing 
</I>&gt;<i> 
</I>&gt;<i>   opam remove core
</I>&gt;<i> 
</I>&gt;<i> I can do
</I>&gt;<i> 
</I>&gt;<i> $ ocaml
</I>&gt;<i> ...
</I>&gt;<i> # #require &quot;core&quot;;;
</I>&gt;<i> 
</I>&gt;<i> and it loads the old cma file.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Mon, Sep 17, 2012 at 2:40 PM, Sean McLaughlin &lt;<A HREF="http://lists.ocaml.org/listinfo/core">seanmcl at gmail.com</A>&gt; wrote:
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to work on core, and am having some trouble with opam.  I downloaded the latest tarball 
</I>&gt;<i> 
</I>&gt;<i>   ocaml-core-108.07.00
</I>&gt;<i> 
</I>&gt;<i> and everything compiled fine.  Then I edited some code in 
</I>&gt;<i> 
</I>&gt;<i>   ocaml-core-108.07.00/core-108.07.00/lib
</I>&gt;<i> 
</I>&gt;<i> and ran 
</I>&gt;<i> 
</I>&gt;<i>   /usr/local/src/ocaml-core-108.07.00/core-108.07.00
</I>&gt;<i>   $ ocaml setup.ml -build
</I>&gt;<i> 
</I>&gt;<i> which completed fine. Then I tried to install, but got the following error
</I>&gt;<i> 
</I>&gt;<i> $ ocaml setup.ml -install
</I>&gt;<i> ocamlfind: Package core is already installed
</I>&gt;<i>  - (file /Users/seanmcl/.opam/4.00.0/lib/core/META already exists)
</I>&gt;<i> E: Failure(&quot;Command ''/Users/seanmcl/.opam/4.00.0/bin/ocamlfind' install core lib/META _build/top/core_install_printers.cmx _build/top/core_install_printers.cmi _build/top/core_top.cmxs _build/top/core_top.a _build/top/core_top.cmxa _build/top/core_top.cma top/core_install_printers.ml _build/lib/core.cmxs _build/lib/core.a _build/lib/core.cmxa _build/lib/core.cma _build/lib/core.cmi _build/lib/dllcore_stubs.so _build/lib/libcore_stubs.a lib/zone.mli lib/word_size.mli lib/with_return.mli lib/weekday.mli lib/unpack_buffer.mli lib/univ_map.mli lib/univ.mli lib/unit.mli lib/unique_id_intf.ml lib/unique_id.mli lib/union_find.mli lib/tuple.mli lib/timer.mli lib/time_internal.ml lib/time.mli lib/thread_safe_queue.mli lib/t.ml lib/sys_open_patch.mli lib/substring_intf.ml lib/substring.mli lib/string_id.mli lib/stringable.ml lib/std_internal.ml lib/std.ml lib/staged.mli lib/stable_unit_test_intf.ml lib/stable_unit_test.mli lib/stable_internal.ml lib/stable_containers.mli lib/stable.ml lib/squeue.mli lib/span.mli lib/space_safe_tuple.mli lib/source_code_position.mli lib/signal.mli lib/sexpable.ml lib/set_once.mli lib/robustly_comparable.ml lib/result.mli lib/ref.mli lib/quickcheck.mli lib/pretty_printer.mli lib/polymorphic_compare_intf.ml lib/polymorphic_compare.mli lib/piecewise_linear.mli lib/pid.mli lib/out_channel.mli lib/or_error.mli lib/ordered_collection_common.mli lib/option.mli lib/only_in_test.mli lib/ofday_unit_tests_v1.mli lib/ofday.mli lib/no_polymorphic_compare.mli lib/nano_mutex.mli lib/mutex0.ml lib/month.mli lib/monad.ml lib/memo.mli lib/make_substring.ml lib/lock_file.mli lib/linux_ext.mli lib/int_set.mli lib/int_replace_polymorphic_compare.mli lib/int_intf.ml lib/interval_intf.ml lib/interval.mli lib/interfaces.ml lib/int_conversions.ml lib/intable.ml lib/inline_tests.ml lib/info.mli lib/in_channel.mli lib/identifiable.mli lib/host_and_port.mli lib/heap.mli lib/hash_set_intf.ml lib/hash_set.mli lib/hash_queue.ml lib/hash_heap.ml lib/hashable.ml lib/fqueue.mli lib/force_once.mli lib/fn.mli lib/float_robust_compare.mli lib/float_intf.ml lib/floatable.ml lib/float.mli lib/exn.mli lib/error.mli lib/doubly_linked.mli lib/dequeue.mli lib/date.mli lib/daemon.mli lib/crc.mli lib/core_unix.mli lib/core_thread.mli lib/core_sys.mli lib/core_string.mli lib/core_stack.mli lib/core_sexp.mli lib/core_set_unit_tests.mli lib/core_set_intf.ml lib/core_set.mli lib/core_random.mli lib/core_queue.mli lib/core_printf.mli lib/core_printexc.mli lib/core_nativeint.mli lib/core_mutex.mli lib/core_map_unit_tests.mli lib/core_map_intf.ml lib/core_map.mli lib/core_list.mli lib/core_lazy.mli lib/core_int64.mli lib/core_int63.mli lib/core_int32.mli lib/core_int.mli lib/core_hashtbl_intf.ml lib/core_hashtbl.mli lib/core_gc.mli lib/core_filename.mli lib/core_field.ml lib/core_condition.mli lib/core_char.mli lib/core_bin_prot.ml lib/core_array.mli lib/core_arg.mli lib/container.ml lib/constrained_float.ml lib/comparator.mli lib/comparable.ml lib/commutative_group.ml lib/common0.ml lib/common.mli lib/command.mli lib/caml.ml lib/byte_units.mli lib/bucket.ml lib/bounded_int_table.mli lib/bool.mli lib/blang.mli lib/binary_packing.mli lib/binable0.ml lib/binable.mli lib/bigsubstring.mli lib/bigstring_marshal.mli lib/bigstring.mli lib/bigbuffer.mli lib/bag.mli lib/backtrace.mli lib/avltree.mli lib/array_permute.ml' terminated with error code 2&quot;)
</I>&gt;<i> EXIT STATUS 1
</I>&gt;<i> 
</I>&gt;<i> I tried doing 
</I>&gt;<i> 
</I>&gt;<i>   opam remove core 
</I>&gt;<i> 
</I>&gt;<i> which completed without error.  But the files are not removed from 
</I>&gt;<i> 
</I>&gt;<i>   .opam/4.00.0/lib/core
</I>&gt;<i> 
</I>&gt;<i> and the -install step still complains that there's an existing META file and refuses to install itself.  
</I>&gt;<i> 
</I>&gt;<i> Please let me know what I'm doing wrong.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Sean
</I>&gt;<i> 
</I>&gt;<i> Is there an opam mailing list yet so I don't spam the wrong ocamlpro guys?
</I>&gt;<i>    
</I>&gt;<i> 
</I>&gt;<i> 
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/core/attachments/20120917/356613d8/attachment-0001.html">http://lists.ocaml.org/pipermail/core/attachments/20120917/356613d8/attachment-0001.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001445.html">opam 'remove' not working
</A></li>
	<LI>Next message: <A HREF="001447.html">opam 'remove' not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1446">[ date ]</a>
              <a href="thread.html#1446">[ thread ]</a>
              <a href="subject.html#1446">[ subject ]</a>
              <a href="author.html#1446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/core">More information about the core
mailing list</a><br>
</body></html>
