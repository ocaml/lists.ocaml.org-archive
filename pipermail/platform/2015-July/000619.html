<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] [wg-windows] Identifying windows ports for build systems &amp; cross compiling distinctions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20%5Bwg-windows%5D%20Identifying%20windows%20ports%20for%0A%20build%20systems%20%26%20cross%20compiling%20distinctions&In-Reply-To=%3C5B65952A997C4A70B0923F43F26DF2BB%40erratique.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000611.html">
   <LINK REL="Next"  HREF="000620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] [wg-windows] Identifying windows ports for build systems &amp; cross compiling distinctions</H1>
    <B>Daniel B&#252;nzli</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20%5Bwg-windows%5D%20Identifying%20windows%20ports%20for%0A%20build%20systems%20%26%20cross%20compiling%20distinctions&In-Reply-To=%3C5B65952A997C4A70B0923F43F26DF2BB%40erratique.ch%3E"
       TITLE="[ocaml-platform] [wg-windows] Identifying windows ports for build systems &amp; cross compiling distinctions">daniel.buenzli at erratique.ch
       </A><BR>
    <I>Thu Jul 23 21:39:15 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000611.html">[ocaml-platform] [wg-windows] Identifying windows ports for build systems &amp; cross compiling distinctions
</A></li>
        <LI>Next message: <A HREF="000620.html">[ocaml-platform] [wg-windows] Identifying windows ports for build systems &amp; cross compiling distinctions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#619">[ date ]</a>
              <a href="thread.html#619">[ thread ]</a>
              <a href="subject.html#619">[ subject ]</a>
              <a href="author.html#619">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le jeudi, 23 juillet 2015 &#224; 19:55, David Allsopp a &#233;crit :
&gt;<i> utils/config.mlp shows that the output will be the CCOMPTYPE variable OCaml was configured with; config/Makefile.{msvc,msvc64,mingw,mingw64} show that is &quot;msvc&quot; for the first two and &quot;cc&quot; for the second two.
</I>
Thanks very much, that's useful information on where to look at things.

&gt;<i> Additionally, while new code out there may be taking advantage of Sys.win32, I expect there's a lot of code still reasonably expecting that Sys.os_type = &quot;Win32&quot; will work forever.
</I>I'm not suggesting to change that in OCaml I'm suggesting that for the *opam* os variable so that build systems can condition on it an behave accordingly. The opam os variable is already quite different from Sys.os_type which is not precise enough, see [1].
  
&gt;<i> Adding Sys.comp_type would be handy, of course... but then having the entire Config module as Sys.Config would be generally quite useful!
</I>
As already mentioned that doesn't help much in cross-compiling scenarios.
  
&gt;<i> I'm not sure what you're getting at here - what build system differences are you referring to?
</I>
Well the build system needs to adapt file extensions for one thing (which is quite annoying). Hence my question is it *only this* that differs in the mingw and msvc ports or are there also other differences at the build level (e.g. build rules) as if this is the case it would make sense to distinguish the ports using the os variable in order to have a good bulk variable to condition on, otherwise, if it's only the file extensions I don't think it's worth it.

Best,

Daniel

[1] <A HREF="https://github.com/ocaml/opam-depext/blob/d94f9f06e1d489dc4f946fb3aa37589eb9e9a2ec/depext.ml#L62-L74">https://github.com/ocaml/opam-depext/blob/d94f9f06e1d489dc4f946fb3aa37589eb9e9a2ec/depext.ml#L62-L74</A>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000611.html">[ocaml-platform] [wg-windows] Identifying windows ports for build systems &amp; cross compiling distinctions
</A></li>
	<LI>Next message: <A HREF="000620.html">[ocaml-platform] [wg-windows] Identifying windows ports for build systems &amp; cross compiling distinctions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#619">[ date ]</a>
              <a href="thread.html#619">[ thread ]</a>
              <a href="subject.html#619">[ subject ]</a>
              <a href="author.html#619">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
