<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] Unique file names
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Unique%20file%20names&In-Reply-To=%3C5134915D.5060100%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000215.html">
   <LINK REL="Next"  HREF="000218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] Unique file names</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Unique%20file%20names&In-Reply-To=%3C5134915D.5060100%40lexifi.com%3E"
       TITLE="[ocaml-platform] Unique file names">alain.frisch at lexifi.com
       </A><BR>
    <I>Mon Mar  4 12:19:41 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000215.html">[ocaml-platform] Unique file names
</A></li>
        <LI>Next message: <A HREF="000218.html">[ocaml-platform] Unique file names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#217">[ date ]</a>
              <a href="thread.html#217">[ thread ]</a>
              <a href="subject.html#217">[ subject ]</a>
              <a href="author.html#217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/03/2013 04:59 PM, Gabriel Scherer wrote:
&gt;<i> Regarding aspect (2), having filename conflicts is not an issue if
</I>&gt;<i> your namespace language is rich enough to let you map two different
</I>&gt;<i> identifiers to two compunits of the same filename.
</I>
I did not really specify this part.  As you mention, one can decide that 
.ns files maps names to filenames (probably using relative path to the 
.ns file).

That said, I see it as an advantage to have globally unique filenames, 
for various reasons.  I admit it is an annoyance for library writers, 
but I believe it is a tiny one compared to the benefits of this 
solution.  (As a minor point, my emacs is perfectly fine with 
autocompleting filename based on a suffix following an underscore 
character; e.g. if if type Ctrl-X-F, then &quot;_pricing&quot;, then TAB, it 
autocompletes it to apropos_pricing_result.ml.  I don't know if this is 
the default behavior of requires custom configuration, though.)

Some benefits of globally unique filenames:

  - Provide an unambiguous way to refer to a specific compilation unit, 
in a way which only depends on the search path.  While I agree that 
having shorter names &quot;by default&quot; in the documentation or error messages 
is nice, it is also good to support fully explicit outputs, and it is 
better if it does not depend too much on the environment.

  - A corollary to the previous point is to simplify the interface 
between &quot;ocamldep -modules&quot; and the build system.

  - Avoid the need to open compiled files to see &quot;in which namespace&quot; 
they are -- or what their internal name is -- and related problems, 
which we have discussed on this list.

  - Support a deployment scenario where files from many libraries are 
installed in a single directory.

  - Never force library users to use namespaces if they are fine with 
using long names (maybe with the help of a local manual renaming feature).

&gt;<i> Note that Alain's proposal also map the namespace names to .ns
</I>&gt;<i> filenames. My guess would be that if we today recognize that binding
</I>&gt;<i> compunit source-names to their filenames is a mistake, we may regret
</I>&gt;<i> making the exact same choice for the upper-level construct in the
</I>&gt;<i> future.
</I>
An alternative could be to specify on the command-line a set of .ns 
files, each of them containing a definition of the &quot;namespace&quot; it 
defines (the name used in the source code).  This would also support 
defining several &quot;namespaces&quot; in a single .ns file.  There was a strong 
resistance to specifying .ns files to be &quot;opened&quot; on the command-line, 
but here we're not talking about opening namespaces, just specifying 
them to the compiler.

In this variant of the proposal, we could almost get rid of -I flags for 
deployed libraries.



Alain
</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000215.html">[ocaml-platform] Unique file names
</A></li>
	<LI>Next message: <A HREF="000218.html">[ocaml-platform] Unique file names
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#217">[ date ]</a>
              <a href="thread.html#217">[ thread ]</a>
              <a href="subject.html#217">[ subject ]</a>
              <a href="author.html#217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
