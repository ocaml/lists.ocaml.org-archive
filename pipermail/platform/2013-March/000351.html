<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Idea%3A%20use%20%28possibly%20extended%29%20toplevel%0A%20directives%20as%20source%20headers&In-Reply-To=%3C4B0C65E89D924A278C691EE4981FBA65%40erratique.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000347.html">
   <LINK REL="Next"  HREF="000358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers</H1>
    <B>Daniel B&#252;nzli</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Idea%3A%20use%20%28possibly%20extended%29%20toplevel%0A%20directives%20as%20source%20headers&In-Reply-To=%3C4B0C65E89D924A278C691EE4981FBA65%40erratique.ch%3E"
       TITLE="[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers">daniel.buenzli at erratique.ch
       </A><BR>
    <I>Tue Mar 19 13:20:22 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000347.html">[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
</A></li>
        <LI>Next message: <A HREF="000358.html">[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#351">[ date ]</a>
              <a href="thread.html#351">[ thread ]</a>
              <a href="subject.html#351">[ subject ]</a>
              <a href="author.html#351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Le mardi, 19 mars 2013 &#224; 12:29, Gabriel Scherer a &#233;crit :

&gt;<i> Interleaved with the namespace discussion, there is a debate about the
</I>&gt;<i> amount of program semantics that should or not be encoded through
</I>&gt;<i> command-line options and more generally the build system.
</I>
Sources should be reasonably self-describing, and I think we should have in source code what is needed to correctly compile the unit. Correctly in the sense with the semantics the author intended.  

A very clear example for me is non-composable camlp4-like meta-programming facilities whose final result may depend on the order they are applied. This order should be specified in the source.  

Opening a namespace, if it brings up names in your scope, seems also better to have in the module, so that the semantics of your unit doesn't change according to the order of command line arguments.  

Libraries is less clear. You can specify them in any order on the command line (except if they have dependencies among themselves), to get the same semantic result. So it seems less important to me and module usage in the unit already dictates what the environment needs to provide (as I already said a few times before systems that force you to declare every module that will be used by the unit don't bring you anything but noise).

For libraries you could tell me but then you can replace a module by another and that could potentially change the semantics so they should also be specified too according to the above principle. But I still think it's better to leave that to the environment so that you can easily swap a module implementation by another with the same semantics, which is something you will want to do at a certain point in practice (functorizing everything is not a solution, as is shown in this presentation [1]).  

In any case what I would like is not to have to repeat myself. So if we put more in the sources, I don't want to have to repeat that elsewere in the build system and/or want a way to access that information to generate the various pieces of meta-data needed by package systems.  

Daniel


[1] <A HREF="http://www.cis.upenn.edu/~bcpierce/papers/modules-icfp.ps">http://www.cis.upenn.edu/~bcpierce/papers/modules-icfp.ps</A>


</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000347.html">[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
</A></li>
	<LI>Next message: <A HREF="000358.html">[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#351">[ date ]</a>
              <a href="thread.html#351">[ thread ]</a>
              <a href="subject.html#351">[ subject ]</a>
              <a href="author.html#351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
