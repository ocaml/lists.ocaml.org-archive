<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Idea%3A%20use%20%28possibly%20extended%29%20toplevel%0A%20directives%20as%20source%20headers&In-Reply-To=%3CCACLX4jT2uREWCyAk%2B%2B2edXzReqvkXX8Ayp-Sdyn7-gHBNNwVLg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000351.html">
   <LINK REL="Next"  HREF="000380.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers</H1>
    <B>Yaron Minsky</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Idea%3A%20use%20%28possibly%20extended%29%20toplevel%0A%20directives%20as%20source%20headers&In-Reply-To=%3CCACLX4jT2uREWCyAk%2B%2B2edXzReqvkXX8Ayp-Sdyn7-gHBNNwVLg%40mail.gmail.com%3E"
       TITLE="[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers">yminsky at janestreet.com
       </A><BR>
    <I>Tue Mar 19 20:18:29 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000351.html">[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
</A></li>
        <LI>Next message: <A HREF="000380.html">[ocaml-platform] Installing custom toplevel printers with findlib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#358">[ date ]</a>
              <a href="thread.html#358">[ thread ]</a>
              <a href="subject.html#358">[ subject ]</a>
              <a href="author.html#358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If we are to do this, we should make sure that the end result is not
highly verbose.  Right now, it's easy to set up your build system to
concisely specify the dependencies of a large number of files.  We
should be careful not to give that up.  In other words, if we have
require declarations, they should be first class, and we should be
able to import a whole collection of these in a single line.  Indeed,
one could argue that the namespace system should include some facility
for importing #requires in addition to module aliases.

Beyond that, I worry a bit that we're piling together too many issues
all at once.  I wonder if we should focus on namespaces first, and
address this #require question later.

y

On Tue, Mar 19, 2013 at 9:20 AM, Daniel B&#252;nzli
&lt;<A HREF="http://lists.ocaml.org/listinfo/platform">daniel.buenzli at erratique.ch</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Le mardi, 19 mars 2013 &#224; 12:29, Gabriel Scherer a &#233;crit :
</I>&gt;<i>
</I>&gt;&gt;<i> Interleaved with the namespace discussion, there is a debate about the
</I>&gt;&gt;<i> amount of program semantics that should or not be encoded through
</I>&gt;&gt;<i> command-line options and more generally the build system.
</I>&gt;<i>
</I>&gt;<i> Sources should be reasonably self-describing, and I think we should have in source code what is needed to correctly compile the unit. Correctly in the sense with the semantics the author intended.
</I>&gt;<i>
</I>&gt;<i> A very clear example for me is non-composable camlp4-like meta-programming facilities whose final result may depend on the order they are applied. This order should be specified in the source.
</I>&gt;<i>
</I>&gt;<i> Opening a namespace, if it brings up names in your scope, seems also better to have in the module, so that the semantics of your unit doesn't change according to the order of command line arguments.
</I>&gt;<i>
</I>&gt;<i> Libraries is less clear. You can specify them in any order on the command line (except if they have dependencies among themselves), to get the same semantic result. So it seems less important to me and module usage in the unit already dictates what the environment needs to provide (as I already said a few times before systems that force you to declare every module that will be used by the unit don't bring you anything but noise).
</I>&gt;<i>
</I>&gt;<i> For libraries you could tell me but then you can replace a module by another and that could potentially change the semantics so they should also be specified too according to the above principle. But I still think it's better to leave that to the environment so that you can easily swap a module implementation by another with the same semantics, which is something you will want to do at a certain point in practice (functorizing everything is not a solution, as is shown in this presentation [1]).
</I>&gt;<i>
</I>&gt;<i> In any case what I would like is not to have to repeat myself. So if we put more in the sources, I don't want to have to repeat that elsewere in the build system and/or want a way to access that information to generate the various pieces of meta-data needed by package systems.
</I>&gt;<i>
</I>&gt;<i> Daniel
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [1] <A HREF="http://www.cis.upenn.edu/~bcpierce/papers/modules-icfp.ps">http://www.cis.upenn.edu/~bcpierce/papers/modules-icfp.ps</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Platform mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/platform">Platform at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/platform">http://lists.ocaml.org/listinfo/platform</A>
</I></PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000351.html">[ocaml-platform] Idea: use (possibly extended) toplevel directives as source headers
</A></li>
	<LI>Next message: <A HREF="000380.html">[ocaml-platform] Installing custom toplevel printers with findlib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#358">[ date ]</a>
              <a href="thread.html#358">[ thread ]</a>
              <a href="subject.html#358">[ subject ]</a>
              <a href="author.html#358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
