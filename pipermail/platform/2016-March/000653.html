<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] opam without internet access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20opam%20without%20internet%20access&In-Reply-To=%3C1529574.NWCbOykKhb%40maitake%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000652.html">
   <LINK REL="Next"  HREF="000654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] opam without internet access</H1>
    <B>Louis Gesbert</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20opam%20without%20internet%20access&In-Reply-To=%3C1529574.NWCbOykKhb%40maitake%3E"
       TITLE="[ocaml-platform] opam without internet access">louis.gesbert at ocamlpro.com
       </A><BR>
    <I>Thu Mar 24 02:27:11 GMT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000652.html">[ocaml-platform] opam without internet access
</A></li>
        <LI>Next message: <A HREF="000654.html">[ocaml-platform] opam without internet access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#653">[ date ]</a>
              <a href="thread.html#653">[ thread ]</a>
              <a href="subject.html#653">[ subject ]</a>
              <a href="author.html#653">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> However, when I do opam switch for installing a different
</I>&gt;<i> compiler, opam wants to download the OCaml sources from the inria
</I>&gt;<i> website.
</I>&gt;<i> 
</I>&gt;<i> Is there a way to instruct opam-admin to download and cache the
</I>&gt;<i> compiler sources too? I am using now the following workaround: I
</I>&gt;<i> modify the URL in the src field of the .comp file of the few
</I>&gt;<i> compiler versions that I am interested in and copy the source
</I>&gt;<i> file manually into the right location.
</I>
I don't think there is in the latest stable. The upcoming release removes this 
annoying duality between compiler and package definitions (defining everything 
as packages), so that will solve this problem. (on the other hand, it allows 
packages to define extra-sources, e.g. for compiler patches, and that will need 
separate caching)

&gt;<i> I now have 2 questions for opam-admin make. Firstly, is there a
</I>&gt;<i> way to restrict to restrict the download of the sources to the
</I>&gt;<i> latest two stable versions? I mean, it is great that I can
</I>&gt;<i> install every version of utop from 1.2.1 to 1.18.2, but I don't
</I>&gt;<i> really need that flexibility.
</I>
You may see the option `--resolve`. It's a bit clunky but may serve your need.

&gt;<i> Secondly, the archives subdir is present already on
</I>&gt;<i> <A HREF="http://opam.ocaml.org/">http://opam.ocaml.org/</A> . Is there a way to instruct opam-admin to
</I>&gt;<i> download package sources from there without rebuilding them
</I>&gt;<i> locally?
</I>
Not at the moment. `opam update --sync-archives` kind of does that (towards 
the opam cache in ~/.opam), but it was only intended for debug, and you can't 
filter the packages you want to download.

Hope this helps. Generating a self-contained local repo is indeed quite 
useful. There may be some other tools to help do that around.

Louis Gesbert - OCamlPro
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000652.html">[ocaml-platform] opam without internet access
</A></li>
	<LI>Next message: <A HREF="000654.html">[ocaml-platform] opam without internet access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#653">[ date ]</a>
              <a href="thread.html#653">[ thread ]</a>
              <a href="subject.html#653">[ subject ]</a>
              <a href="author.html#653">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
