<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] opam without internet access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20opam%20without%20internet%20access&In-Reply-To=%3C87wposu970.fsf%40elite.fireeye.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000651.html">
   <LINK REL="Next"  HREF="000653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] opam without internet access</H1>
    <B>Hendrik Tews</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20opam%20without%20internet%20access&In-Reply-To=%3C87wposu970.fsf%40elite.fireeye.com%3E"
       TITLE="[ocaml-platform] opam without internet access">Hendrik.Tews at FireEye.com
       </A><BR>
    <I>Wed Mar 23 22:21:39 GMT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000651.html">[ocaml-platform] [Caml-list] Package compilation and debug mode
</A></li>
        <LI>Next message: <A HREF="000653.html">[ocaml-platform] opam without internet access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#652">[ date ]</a>
              <a href="thread.html#652">[ thread ]</a>
              <a href="subject.html#652">[ subject ]</a>
              <a href="author.html#652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am trying to use opam on a machine without internet access. I
got it working with some glitches, I would like to ask here for
advice.

On a machine with internet access I do

   git clone <A HREF="git://github.com/ocaml/opam-repository">git://github.com/ocaml/opam-repository</A>
   cd opam-repository
   opam-admin make

The last command downloads the sources of all packages into the
archives subdir. I then physically move the opam-repository
directory to the machine without internet access and there I do

   opam init local /path/to/opam-repository

I can now install packages without internet connection because
opam accesses the sources in the archives subdir.

However, when I do opam switch for installing a different
compiler, opam wants to download the OCaml sources from the inria
website.

Is there a way to instruct opam-admin to download and cache the
compiler sources too? I am using now the following workaround: I
modify the URL in the src field of the .comp file of the few
compiler versions that I am interested in and copy the source
file manually into the right location.

I now have 2 questions for opam-admin make. Firstly, is there a
way to restrict to restrict the download of the sources to the
latest two stable versions? I mean, it is great that I can
install every version of utop from 1.2.1 to 1.18.2, but I don't
really need that flexibility.

Secondly, the archives subdir is present already on
<A HREF="http://opam.ocaml.org/">http://opam.ocaml.org/</A> . Is there a way to instruct opam-admin to
download package sources from there without rebuilding them
locally?

Thanks in advance,

Hendrik Tews

This email and any attachments thereto may contain private, confidential, and/or privileged material for the sole use of the intended recipient. Any review, copying, or distribution of this email (or any attachments thereto) by others is strictly prohibited. If you are not the intended recipient, please contact the sender immediately and permanently delete the original and any copies of this email and any attachments thereto.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000651.html">[ocaml-platform] [Caml-list] Package compilation and debug mode
</A></li>
	<LI>Next message: <A HREF="000653.html">[ocaml-platform] opam without internet access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#652">[ date ]</a>
              <a href="thread.html#652">[ thread ]</a>
              <a href="subject.html#652">[ subject ]</a>
              <a href="author.html#652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
