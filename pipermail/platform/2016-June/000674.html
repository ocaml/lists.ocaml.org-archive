<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] Is it taking too long for OCaml software to become 4.03-compatible? Would release process changes help?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Is%20it%20taking%20too%20long%20for%20OCaml%20software%20to%0A%20become%204.03-compatible%3F%20Would%20release%20process%20changes%20help%3F&In-Reply-To=%3C57740ECC.5050100%40mjambon.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000673.html">
   <LINK REL="Next"  HREF="000675.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] Is it taking too long for OCaml software to become 4.03-compatible? Would release process changes help?</H1>
    <B>Martin Jambon</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Is%20it%20taking%20too%20long%20for%20OCaml%20software%20to%0A%20become%204.03-compatible%3F%20Would%20release%20process%20changes%20help%3F&In-Reply-To=%3C57740ECC.5050100%40mjambon.com%3E"
       TITLE="[ocaml-platform] Is it taking too long for OCaml software to become 4.03-compatible? Would release process changes help?">martin at mjambon.com
       </A><BR>
    <I>Wed Jun 29 19:09:16 BST 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000673.html">[ocaml-platform] Is it taking too long for OCaml software to	become 4.03-compatible? Would release process changes help?
</A></li>
        <LI>Next message: <A HREF="000675.html">[ocaml-platform] Is it taking too long for OCaml software to become 4.03-compatible? Would release process changes help?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#674">[ date ]</a>
              <a href="thread.html#674">[ thread ]</a>
              <a href="subject.html#674">[ subject ]</a>
              <a href="author.html#674">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>First, thank you Gabriel, Damien, and others who've been working hard on 
improving package quality with each new release of OCaml.

I have the chance to be most of the time a passive user of OCaml, i.e. 
we develop a commercial application, and we typically upgrade OCaml only 
when it becomes necessary. Also it's normally not a problem for us to 
wait for 6 months to a year to upgrade. We have really no complaints 
there. I feel however that it's a missed opportunity to contribute back 
to the community. We generally don't mind bugs in features that we start 
using, but we're really afraid of regression. So it would be good for us 
to confidently upgrade OCaml as soon as we know it's unlikely to break 
our application, but not delay the upgrade out of fear.

I'm also involved in maintaining a small number of public tools because 
I started them. Bugs due to incompatibilities with newer versions of 
OCaml have been reported and sometimes fixed by others, and while this 
is great, I'd rather (1) not have these bugs in the first place and (2) 
fix the bugs before they start affecting users. I must say I really lack 
the motivation for such maintenance, compared to developing a new 
feature that I need.

What could be useful is a few user-visible stats on what's installable 
and what's usable in opam, for a given OCaml version. It's the same idea 
as labeling an OCaml/opam distribution as beta, but finer-grained. Each 
package known to have version-specific problems would be labeled as 
such. A package could be in one of a few states such as: OK, Usable but 
has some version-specific bugs, Uninstallable. For the opam user 
wondering whether they should upgrade OCaml, it would be useful to get 
the percentage of packages in each state for a given OCaml version, as 
well as the list of packages in each state and links to the relevant bug 
reports. Hopefully this would help users be more adventurous and make 
informed decisions on whether to upgrade.

On 06/29/2016 09:40 AM, Gabriel Scherer wrote:
&gt;<i> Dear platform,
</I>&gt;<i>
</I>&gt;<i> TL;DR: I propose that we change the OCaml release process to remain in
</I>&gt;<i> &quot;beta&quot; stage while there remain OPAM packages that are broken by the new
</I>&gt;<i> releases and their version bounds have not been updated.
</I>&gt;<i>
</I>&gt;<i> I'm a bit frustrated with the time it takes for the OCaml ecosystem to
</I>&gt;<i> catch up with the 4.03 release -- which has been released two months ago
</I>&gt;<i> now, on April 25.
</I>&gt;<i>
</I>&gt;<i> A large chunk of my personal hacking time following the release was
</I>&gt;<i> spent on updating Batteries, with a 4.03-compatible release happening on
</I>&gt;<i> May 12, so two weeks after the release -- a time I would still consider
</I>&gt;<i> too long for our downstream users waiting to try the 4.03 goodness but
</I>&gt;<i> held back by a Batteries dependency. I recently helped make atdgen
</I>&gt;<i> compatible with 4.03 (it's a dependency of IOCaml for example), and just
</I>&gt;<i> today found out that Coq releases (or its CoqIDE part) did not work on
</I>&gt;<i> 4.03 (with no upper-bound in opam, it would just miscompile).
</I>&gt;<i>
</I>&gt;<i> I find it frustrating because that means that there is a large time
</I>&gt;<i> window where we advertise (externally, to beginners, etc.) that the best
</I>&gt;<i> OCaml versions ever is 4.03.0, while running opam from this switch to
</I>&gt;<i> install any major software whatsoever feels like playing a rigged
</I>&gt;<i> russian roulette. I feel bad whenever I'm informed that my software (or
</I>&gt;<i> anyone else's, in fact) does not work by end-users that would rather
</I>&gt;<i> have spent their day doing something else than trying broken software.
</I>&gt;<i>
</I>&gt;<i> Do you agree that this is a problem? What could we do to fix that?
</I>&gt;<i>
</I>&gt;<i> When I started writing this email I intended to send it to Damien
</I>&gt;<i> Doligez, as the release manager of the compiler distribution, with the
</I>&gt;<i> following suggestion: maybe we could have a *much longer* beta-testing
</I>&gt;<i> period for OCaml versions that would be used not (only) for finding bugs
</I>&gt;<i> in the new version, but also to let important pieces of the ecosystem
</I>&gt;<i> update to the new version. Say, at least a month. We could have a fixed
</I>&gt;<i> set of software that we monitor, or in fact all of what's in OPAM, and
</I>&gt;<i> delay the release until they get updated/fixed or their OPAM version
</I>&gt;<i> bounds get fixed. (Aha, a Platform indeed!)
</I>&gt;<i>
</I>&gt;<i> Does that sound like a reasonable idea to you? Should we monitor all
</I>&gt;<i> OPAM, or only a subset?
</I>&gt;<i>
</I>&gt;<i> This suggestion is rooted in the idea that when we announce the release
</I>&gt;<i> to our end-users, stuff should just work -- or refuse to install itself.
</I>&gt;<i> Maybe this is an old idea of the SVN times and we're now in the era of
</I>&gt;<i> continuously-released, always-broken stuff?
</I>&gt;<i>
</I>&gt;<i> Finally, there has been all this work on the &quot;OPAM weather services&quot;,
</I>&gt;<i> continuous build of opam packages etc., plus the work that Damien is
</I>&gt;<i> doing around release time. It doesn't seem to have worked very well for
</I>&gt;<i> 4.03. Who is monitoring this stuff? Do we need to fix them to make them
</I>&gt;<i> work better, or to fix our process to use them better? To be honest, I'm
</I>&gt;<i> never looking at these services -- I just don't think of using them. Can
</I>&gt;<i> I get an email whenever they detect that my stuff is broken? Say I'm a
</I>&gt;<i> new package manager, are there guidelines somewhere on what the best
</I>&gt;<i> practices are and what I should do?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Platform mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/platform">Platform at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/platform">http://lists.ocaml.org/listinfo/platform</A>
</I>&gt;<i>
</I></PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000673.html">[ocaml-platform] Is it taking too long for OCaml software to	become 4.03-compatible? Would release process changes help?
</A></li>
	<LI>Next message: <A HREF="000675.html">[ocaml-platform] Is it taking too long for OCaml software to become 4.03-compatible? Would release process changes help?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#674">[ date ]</a>
              <a href="thread.html#674">[ thread ]</a>
              <a href="subject.html#674">[ subject ]</a>
              <a href="author.html#674">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
