<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] Centos 6 OPAM Make Madness
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Centos%206%20OPAM%20Make%20Madness&In-Reply-To=%3Ca1c8d0332a8b20de99036c9e236b27e4%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000505.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] Centos 6 OPAM Make Madness</H1>
    <B>Michael Peters</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Centos%206%20OPAM%20Make%20Madness&In-Reply-To=%3Ca1c8d0332a8b20de99036c9e236b27e4%40mail.gmail.com%3E"
       TITLE="[ocaml-platform] Centos 6 OPAM Make Madness">michael.peters at lazarusalliance.com
       </A><BR>
    <I>Thu Aug 14 13:33:33 BST 2014</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000505.html">[ocaml-platform] Centos 6 OPAM Make Madness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#504">[ date ]</a>
              <a href="thread.html#504">[ thread ]</a>
              <a href="subject.html#504">[ subject ]</a>
              <a href="author.html#504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am running: CentOS release 6.4 (Final) (x86_64) and attempting to install
opam-full-1.1.1 without success. I first installed ocaml-4.01.0 which seems
to have gone along fine.



Configure for opam-full-1.1.1 runs without complaint.



checking for gcc... gcc

checking whether the C compiler works... yes

checking for C compiler default output file name... a.out

checking for suffix of executables...

checking whether we are cross compiling... no

checking for suffix of object files... o

checking whether we are using the GNU C compiler... yes

checking whether gcc accepts -g... yes

checking for gcc option to accept ISO C89... none needed

checking for ocamlc... ocamlc

OCaml version is 4.01.0

OCaml library path is /usr/local/lib/ocaml

checking for ocamlopt... ocamlopt

checking for ocamlc.opt... ocamlc.opt

checking for ocamlopt.opt... ocamlopt.opt

checking for ocaml... ocaml

checking for ocamldep... ocamldep

checking for ocamlmktop... ocamlmktop

checking for ocamlmklib... ocamlmklib

checking for ocamldoc... ocamldoc

checking for ocamlbuild... ocamlbuild

checking for camlp4... camlp4

checking for camlp4o... camlp4o

checking for camlp4of... camlp4of

checking for camlp4oof... camlp4oof

checking for camlp4orf... camlp4orf

checking for camlp4prof... camlp4prof

checking for camlp4r... camlp4r

checking for camlp4rf... camlp4rf

checking for gawk... gawk

checking for curl... curl

configure: creating ./config.status

config.status: creating Makefile.config

config.status: creating src/core/opamVersion.ml

config.status: creating doc/man-ext/opam-check.md

Executables will be installed in /usr/local/bin

Manual pages will be installed in /usr/local/share/man



*It&#8217;s when I run Make that I get:*



make -C ocp-build

make[1]: Entering directory `/usr/local/src/opam-full-1.1.1/ocp-build'

awk '{ print &quot;external &quot;$1&quot;: unit -&gt; unit = \&quot;&quot; $1 &quot;\&quot;&quot; }' primitives &gt;
primitives.ml

ocamlc -o ocp-build.run -custom -make-runtime win32_c.c primitives.ml
unix.cma  -cclib -lunix

cat ocp-build.run ocp-build.boot &gt; ocp-build

chmod +x ocp-build

./ocp-build -help &gt;/dev/null 2&gt;&amp;1

make[1]: Leaving directory `/usr/local/src/opam-full-1.1.1/ocp-build'

make -C ocp-build

make[1]: Entering directory `/usr/local/src/opam-full-1.1.1/ocp-build'

make[1]: `ocp-build' is up to date.

make[1]: Leaving directory `/usr/local/src/opam-full-1.1.1/ocp-build'

sed 's/@VERSION@/1.1.1/g' &lt; META.in &gt; META

make clone

make[1]: Entering directory `/usr/local/src/opam-full-1.1.1'

make -C src_ext

make[2]: Entering directory `/usr/local/src/opam-full-1.1.1/src_ext'

curl  -OL <A HREF="https://gforge.inria.fr/frs/download.php/31910/cudf-0.6.3.tar.gz">https://gforge.inria.fr/frs/download.php/31910/cudf-0.6.3.tar.gz</A>

  % Total    % Received % Xferd  Average Speed   Time    Time     Time
Current

                                 Dload  Upload   Total   Spent    Left
Speed

100 52907  100 52907    0     0  27042      0  0:00:01  0:00:01 --:--:--
66051

ocaml ../shell/md5check.ml cudf-0.6.3.tar.gz
40c4e2c50ea96d0c9e565db16d20639a

cudf-0.6.3.tar.gz has the expected MD5.

tar xfz cudf-0.6.3.tar.gz

rm -rf cudf

mv cudf-0.6.3 cudf

curl  -OL <A HREF="http://ocaml-extlib.googlecode.com/files/extlib-1.5.3.tar.gz">http://ocaml-extlib.googlecode.com/files/extlib-1.5.3.tar.gz</A>

 % Total    % Received % Xferd  Average Speed   Time    Time     Time
Current

                                 Dload  Upload   Total   Spent    Left
Speed

100 70897  100 70897    0     0   200k      0 --:--:-- --:--:-- --:--:--
279k

ocaml ../shell/md5check.ml extlib-1.5.3.tar.gz
3de5f4e0a95fda7b2f3819c4a655b17c

extlib-1.5.3.tar.gz has the expected MD5.

tar xfz extlib-1.5.3.tar.gz

rm -rf extlib

mv extlib-1.5.3 extlib

curl  -OL <A HREF="https://github.com/ocaml/ocaml-re/archive/ocaml-re-1.2.0.tar.gz">https://github.com/ocaml/ocaml-re/archive/ocaml-re-1.2.0.tar.gz</A>

  % Total    % Received % Xferd  Average Speed   Time    Time     Time
Current

                                 Dload  Upload   Total   Spent    Left
Speed

100 82965  100 82965    0     0  88116      0 --:--:-- --:--:-- --:--:--
537k

ocaml ../shell/md5check.ml ocaml-re-1.2.0.tar.gz
5cbfc137683ef2b0e91f931577f2e673

ocaml-re-1.2.0.tar.gz has the expected MD5.

tar xfz ocaml-re-1.2.0.tar.gz

mv ocaml-re-ocaml-re-1.2.0 ocaml-re

# curl  -OL <A HREF="http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.1.tar.gz">http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.1.tar.gz</A>

curl  -OL
<A HREF="http://pkgs.fedoraproject.org/repo/pkgs/ocaml-ocamlgraph/ocamlgraph-1.8.1.tar.gz/5aa256e9587a6d264d189418230af698/ocamlgraph-1.8.1.tar.gz">http://pkgs.fedoraproject.org/repo/pkgs/ocaml-ocamlgraph/ocamlgraph-1.8.1.tar.gz/5aa256e9587a6d264d189418230af698/ocamlgraph-1.8.1.tar.gz</A>

  % Total    % Received % Xferd  Average Speed   Time    Time     Time
Current

                                 Dload  Upload   Total   Spent    Left
Speed

100  246k  100  246k    0     0   403k      0 --:--:-- --:--:-- --:--:--
561k

ocaml ../shell/md5check.ml ocamlgraph-1.8.1.tar.gz
5aa256e9587a6d264d189418230af698

ocamlgraph-1.8.1.tar.gz has the expected MD5.

tar xfz ocamlgraph-1.8.1.tar.gz

rm -rf ocamlgraph

mv ocamlgraph-1.8.1 ocamlgraph

curl  -OL <A HREF="https://gforge.inria.fr/frs/download.php/31595/dose3-3.1.2.tar.gz">https://gforge.inria.fr/frs/download.php/31595/dose3-3.1.2.tar.gz</A>

  % Total    % Received % Xferd  Average Speed   Time    Time     Time
Current

                                 Dload  Upload   Total   Spent    Left
Speed

100  244k  100  244k    0     0   119k      0  0:00:02  0:00:02 --:--:--
174k

ocaml ../shell/md5check.ml dose3-3.1.2.tar.gz
e98ff720fcc3873def46c85c6a980a1b

dose3-3.1.2.tar.gz has the expected MD5.

tar xfz dose3-3.1.2.tar.gz

cd dose3-3.1.2 &amp;&amp; patch -p1  &lt; ../dose-pcre2re.diff &amp;&amp; patch -p1 &lt;
../dose-mktemp.diff &amp;&amp; patch -p1 &lt; ../dose-quotecriteria.diff &amp;&amp; cd ..

patching file common/cudfAdd.ml

patching file common/extBenchmark.ml

patching file common/tests.ml

patching file deb/apt.ml

patching file deb/version.ml

patching file eclipse/version.ml

patching file opencsw/packages.ml

patching file rpm/packages.ml

patching file deb/edsp.ml

patching file opencsw/version.ml

patching file common/cudfSolver.ml

Hunk #1 succeeded at 27 with fuzz 1.

patch unexpectedly ends in middle of line

patch unexpectedly ends in middle of line

patching file common/cudfSolver.ml

patching file common/cudfSolver.ml

rm -rf dose

mv dose3-3.1.2 dose

curl  -OL <A HREF="http://erratique.ch/software/cmdliner/releases/cmdliner-0.9.3.tbz">http://erratique.ch/software/cmdliner/releases/cmdliner-0.9.3.tbz</A>

  % Total    % Received % Xferd  Average Speed   Time    Time     Time
Current

                                 Dload  Upload   Total   Spent    Left
Speed

100 75031  100 75031    0     0  90394      0 --:--:-- --:--:-- --:--:--
128k

ocaml ../shell/md5check.ml cmdliner-0.9.3.tbz
d63dd3b03966d65fc242246859c831c7

cmdliner-0.9.3.tbz has the expected MD5.

tar xfj cmdliner-0.9.3.tbz

rm -rf cmdliner

mv cmdliner-0.9.3 cmdliner

cp depends.ocp.boot depends.ocp

make[2]: Leaving directory `/usr/local/src/opam-full-1.1.1/src_ext'

make[1]: Leaving directory `/usr/local/src/opam-full-1.1.1'

make compile

make[1]: Entering directory `/usr/local/src/opam-full-1.1.1'

make -C ocp-build

make[2]: Entering directory `/usr/local/src/opam-full-1.1.1/ocp-build'

make[2]: `ocp-build' is up to date.

make[2]: Leaving directory `/usr/local/src/opam-full-1.1.1/ocp-build'

ocaml shell/get-git-id.ml src/core/opamGitVersion.ml

ocaml shell/crunch.ml &quot;complete&quot;     &lt; shell/opam_completion.sh &gt;
src/core/opamScript.ml

ocaml shell/crunch.ml &quot;complete_zsh&quot; &lt; shell/opam_completion_zsh.sh &gt;&gt;
src/core/opamScript.ml

ocaml shell/crunch.ml &quot;switch_eval&quot;  &lt; shell/opam_switch_eval.sh &gt;&gt;
src/core/opamScript.ml

./ocp-build/ocp-build -no-use-ocamlfind -init -scan

Updating ocp-build.root

File &quot;/usr/local/src/opam-full-1.1.1/opam/src/core/core.ocp&quot;, line 1,
characters -1--1:

Error: in project &quot;opam-core&quot;, the source filename

        &quot;opam/src/core/opamScript.ml&quot; does not exist

RULE 980 (state active)

                SOURCE opam/src/core/opamScript.ml(not available)

                SOURCE _obuild/opam-core/opamScript.mlmods ok(not available)

        /usr/local/bin/ocamlopt.opt -g -g -w +a-4-9-32-41-44-45 -warn-error
+1..45 -bin-annot -c -o ${temp}/opamScript.cmx -I ./_obuild/opam-core -I
./opam/src/core -I ./_obuild/dose -I ./src_ext -I ./_obuild/cudf -I
./_obuild/re_str -I ./_obuild/re_pcre -I ./_obuild/re_perl -I
./_obuild/re_emacs -I ./_obuild/re_glob -I ./_obuild/re -I ./_obuild/graph
-I /usr/local/lib/ocaml -I ./_obuild/extlib opam/src/core/opamScript.ml

        Rename ${temp}/opamScript.cmi to _obuild/opam-core/opamScript.cmi

        Rename ${temp}/opamScript.cmx to _obuild/opam-core/opamScript.cmx

        Rename ${temp}/opamScript.o to _obuild/opam-core/opamScript.o

                TARGET _obuild/opam-core/opamScript.cmi

                TARGET _obuild/opam-core/opamScript.o

                TARGET _obuild/opam-core/opamScript.cmx

make[1]: *** [compile] Error 2

make[1]: Leaving directory `/usr/local/src/opam-full-1.1.1'

make: *** [all] Error 2



I&#8217;m not sure where to look for a solution and help would be very much
appreciated.



Best regards,



*Michael*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/platform/attachments/20140814/78cfaccd/attachment-0001.html">http://lists.ocaml.org/pipermail/platform/attachments/20140814/78cfaccd/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000505.html">[ocaml-platform] Centos 6 OPAM Make Madness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#504">[ date ]</a>
              <a href="thread.html#504">[ thread ]</a>
              <a href="subject.html#504">[ subject ]</a>
              <a href="author.html#504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
