<tt>
&gt;&nbsp;It&#39;s&nbsp;not&nbsp;evident&nbsp;to&nbsp;me&nbsp;that&nbsp;namespaces&nbsp;actually&nbsp;solve&nbsp;the&nbsp;problem&nbsp;<br>
either,&nbsp;they&nbsp;just&nbsp;seem&nbsp;to&nbsp;push&nbsp;the&nbsp;problem&nbsp;in&nbsp;the&nbsp;build&nbsp;system.&nbsp;The&nbsp;<br>
actual&nbsp;problem&nbsp;seems&nbsp;very&nbsp;related&nbsp;to&nbsp;the&nbsp;problem&nbsp;of&nbsp;hygienic&nbsp;macros&nbsp;<br>
(accidental&nbsp;name&nbsp;capture).&lt;br&gt;<br>
&lt;br&gt;Indeed.&lt;br&gt;&lt;br&gt;What&nbsp;you&nbsp;really&nbsp;want&nbsp;of&nbsp;Camlp4&nbsp;extensions&nbsp;is&nbsp;not&nbsp;&quot;namespaces&quot;,&nbsp;but&nbsp;*hygiene*.&nbsp;Hygiene&nbsp;in&nbsp;hygenic&nbsp;macro&nbsp;systems&nbsp;means&nbsp;two&nbsp;things:&lt;br&gt; <br>
&nbsp;1.&nbsp;having&nbsp;binders&nbsp;in&nbsp;macros&nbsp;not&nbsp;capture&nbsp;bound&nbsp;variables&nbsp;in&nbsp;expanded&nbsp;<br>
user-provided&nbsp;code&nbsp;(unless&nbsp;explicitly&nbsp;desired,&nbsp;to&nbsp;implement&nbsp;a&nbsp;new&nbsp;<br>
binding&nbsp;structure&nbsp;as&nbsp;macro)&lt;br&gt; &nbsp;2.&nbsp;having&nbsp;bound&nbsp;variables&nbsp;in&nbsp;macros&nbsp;not&nbsp;be&nbsp;captured&nbsp;by&nbsp;user-provided&nbsp;binders&lt;br&gt;&lt;br&gt;None<br>
&nbsp;of&nbsp;those&nbsp;two&nbsp;distinct&nbsp;aspects&nbsp;are&nbsp;specifically&nbsp;accounted&nbsp;for&nbsp;in&nbsp;the&nbsp;<br>
current&nbsp;OCaml+Camlp4&nbsp;combination.&nbsp;The&nbsp;lack&nbsp;of&nbsp;the&nbsp;first&nbsp;can&nbsp;be&nbsp;<br>
worked&nbsp;around&nbsp;by&nbsp;being&nbsp;careful&nbsp;in&nbsp;extension&nbsp;code&nbsp;(preserve&nbsp;the&nbsp;scope&nbsp;of&nbsp;<br>
user-provided&nbsp;code&nbsp;and&nbsp;not&nbsp;expand&nbsp;it&nbsp;under&nbsp;extension&nbsp;binders,&nbsp;which&nbsp;is&nbsp;<br>
possible&nbsp;thanks&nbsp;to&nbsp;OCaml&nbsp;expressive&nbsp;&quot;let&nbsp;...&nbsp;and&nbsp;..&quot;&nbsp;feature),&nbsp;the&nbsp;lack&nbsp;<br>
of&nbsp;the&nbsp;second&nbsp;is&nbsp;more&nbsp;problematic&nbsp;as&nbsp;it&nbsp;would&nbsp;require&nbsp;the&nbsp;extension&nbsp;<br>
*user*&nbsp;to&nbsp;be&nbsp;careful&nbsp;(not&nbsp;happening&nbsp;in&nbsp;practice).&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;related&nbsp;to&nbsp;this&nbsp;bug&nbsp;report&nbsp;by&nbsp;Hongbo:&lt;br&gt; &nbsp;&lt;a&nbsp;href=&quot;http://caml.inria.fr/mantis/view.php?id=5849&quot;&gt;http://caml.inria.fr/mantis/view.php?id=5849&lt;/a&gt;&lt;br&gt;&lt;br&gt;Namespaces<br>
&nbsp;are&nbsp;only&nbsp;an&nbsp;attempt&nbsp;to&nbsp;workaround&nbsp;the&nbsp;problem&nbsp;by&nbsp;adding&nbsp;an&nbsp;indirection&nbsp;<br>
in&nbsp;naming&nbsp;that&nbsp;would&nbsp;make&nbsp;lack&nbsp;of&nbsp;hygiene&nbsp;less&nbsp;visible.&nbsp;It&#39;s&nbsp;a&nbsp;<br>
reasonable&nbsp;side-effect&nbsp;of&nbsp;a&nbsp;namespace&nbsp;proposal,&nbsp;but&nbsp;that&nbsp;cannot&nbsp;<br>
reasonably&nbsp;be&nbsp;the&nbsp;main&nbsp;motivation&nbsp;for&nbsp;adding&nbsp;namespaces.&nbsp;&quot;Let&#39;s&nbsp;add&nbsp;<br>
this&nbsp;new&nbsp;feature&nbsp;so&nbsp;that&nbsp;this&nbsp;problem&nbsp;with&nbsp;that&nbsp;ugly&nbsp;tool&nbsp;can&nbsp;be&nbsp;<br>
partially&nbsp;fixed&nbsp;in&nbsp;this&nbsp;ugly&nbsp;way&quot;&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;fly.&lt;br&gt;&lt;br&gt;(Note&nbsp;that&nbsp;Lisp&nbsp;languages&nbsp;solve&nbsp;this&nbsp;by&nbsp;embedding&nbsp;the&nbsp;macro&nbsp;facility&nbsp;in&nbsp;the&nbsp;language&nbsp;itself,&nbsp;instead&nbsp;of&nbsp;having&nbsp;an&nbsp;up-front&nbsp;AST-generation&nbsp;model.&nbsp;This&nbsp;allows&nbsp;macro&nbsp;expansion&nbsp;to&nbsp;elaborate&nbsp;internal&nbsp;unique&nbsp;names&nbsp;instead&nbsp;of&nbsp;surface&nbsp;names,&nbsp;which&nbsp;solves&nbsp;this&nbsp;hygiene&nbsp;problem.&nbsp;An&nbsp;OCaml&nbsp;equivalent&nbsp;would&nbsp;be&nbsp;to&nbsp;give&nbsp;a&nbsp;way&nbsp;to&nbsp;address&nbsp;a&nbsp;module&nbsp;by&nbsp;its&nbsp;internal&nbsp;compilation&nbsp;unit&nbsp;name.)&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Feb&nbsp;22,&nbsp;2013&nbsp;at&nbsp;3:33&nbsp;PM,&nbsp;Daniel&nbsp;Bünzli&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:daniel.buenzli@erratique.ch&quot;&nbsp;target=&quot;_blank&quot;&gt;daniel.buenzli@erratique.ch&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
Le&nbsp;vendredi,&nbsp;22&nbsp;février&nbsp;2013&nbsp;à&nbsp;14:52,&nbsp;Malcolm&nbsp;Matalka&nbsp;a&nbsp;écrit&nbsp;:&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;&nbsp;So&nbsp;would&nbsp;a&nbsp;syntax&nbsp;extension&nbsp;always&nbsp;have&nbsp;to&nbsp;store&nbsp;the&nbsp;modules&nbsp;it&nbsp;wants&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;be&nbsp;sure&nbsp;to&nbsp;access&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;file&nbsp;it&nbsp;requires,&nbsp;making&nbsp;sure&lt;br&gt;<br>
&gt;&nbsp;not&nbsp;to&nbsp;choose&nbsp;overlapping&nbsp;names?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Why&nbsp;not&nbsp;?&nbsp;Each&nbsp;extension&nbsp;could&nbsp;have&nbsp;its&nbsp;own&nbsp;module&nbsp;against&nbsp;which&nbsp;you&nbsp;have&nbsp;to&nbsp;link&nbsp;to&nbsp;use&nbsp;the&nbsp;extension&nbsp;that&nbsp;has&nbsp;the&nbsp;module&nbsp;it&nbsp;uses&nbsp;in&nbsp;it&nbsp;(MyExt.List…).&lt;br&gt;<br>
&lt;br&gt;<br>
It&#39;s&nbsp;not&nbsp;evident&nbsp;to&nbsp;me&nbsp;that&nbsp;namespaces&nbsp;actually&nbsp;solve&nbsp;the&nbsp;problem&nbsp;either,&nbsp;they&nbsp;just&nbsp;seem&nbsp;to&nbsp;push&nbsp;the&nbsp;problem&nbsp;in&nbsp;the&nbsp;build&nbsp;system.&nbsp;The&nbsp;actual&nbsp;problem&nbsp;seems&nbsp;very&nbsp;related&nbsp;to&nbsp;the&nbsp;problem&nbsp;of&nbsp;hygienic&nbsp;macros&nbsp;(accidental&nbsp;name&nbsp;capture).&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
Besides&nbsp;I&#39;m&nbsp;not&nbsp;sure&nbsp;the&nbsp;example&nbsp;Anil&nbsp;gave&nbsp;is&nbsp;as&nbsp;widespread&nbsp;as&nbsp;it&nbsp;seems,&nbsp;it&nbsp;feels&nbsp;like&nbsp;a&nbsp;corner&nbsp;case&nbsp;that&nbsp;could&nbsp;be&nbsp;avoided,&nbsp;as&nbsp;he&nbsp;suggested,&nbsp;by&nbsp;having&nbsp;the&nbsp;ability&nbsp;to&nbsp;refer&nbsp;to&nbsp;stdlib&#39;s&nbsp;modules&nbsp;under&nbsp;a&nbsp;toplevel&nbsp;name&nbsp;(OCaml.List)&nbsp;and&nbsp;this&nbsp;still&nbsp;seems&nbsp;in&nbsp;the&nbsp;realm&nbsp;of&nbsp;the&nbsp;module&nbsp;system&nbsp;(and&nbsp;could&nbsp;be&nbsp;realized&nbsp;via&nbsp;something&nbsp;like&nbsp;cmia).&lt;br&gt;<br>
<br>
<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
Daniel&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Platform&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Platform@lists.ocaml.org&quot;&gt;Platform@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/platform&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/platform&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
