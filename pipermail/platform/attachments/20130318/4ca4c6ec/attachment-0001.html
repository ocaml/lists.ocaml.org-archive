<tt>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Can&nbsp;the&nbsp;case&nbsp;of&nbsp;both&nbsp;Core&nbsp;and&nbsp;Async&nbsp;(and&nbsp;opening&nbsp;both&nbsp;of&nbsp;their&nbsp;pervasives&nbsp;modules)&nbsp;be&nbsp;handled&nbsp;here? &nbsp;This&nbsp;seems&nbsp;to&nbsp;me&nbsp;to&nbsp;be&nbsp;of&nbsp;fundamental&nbsp;importance. &nbsp;If&nbsp;that&#39;s&nbsp;missing,&nbsp;then&nbsp;I&nbsp;misunderstood&nbsp;the&nbsp;proposal.&lt;/p&gt;<br>
<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mar&nbsp;18,&nbsp;2013&nbsp;7:38&nbsp;AM,&nbsp;&quot;Leo&nbsp;White&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:lpw25@cam.ac.uk&quot;&gt;lpw25@cam.ac.uk&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&nbsp;type=&quot;attribution&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&gt;&nbsp;The&nbsp;problem&nbsp;with&nbsp;this&nbsp;fixed-syntactic&nbsp;choice&nbsp;is&nbsp;that&nbsp;it&nbsp;hampers&lt;br&gt;<br>
&gt;&nbsp;composability&nbsp;of&nbsp;namespaces.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;by&nbsp;design.&nbsp;This&nbsp;feature&nbsp;is&nbsp;only&nbsp;meant&nbsp;to&nbsp;provide&nbsp;support&nbsp;to&lt;br&gt;<br>
specialised&nbsp;libraries,&nbsp;like&nbsp;Core,&nbsp;that&nbsp;wish&nbsp;to&nbsp;provide&nbsp;their&nbsp;own&lt;br&gt;<br>
equivalent&nbsp;of&nbsp;the&nbsp;standard&nbsp;library&#39;s&nbsp;Pervasives&nbsp;module.&nbsp;We&nbsp;probably&lt;br&gt;<br>
don&#39;t&nbsp;want&nbsp;to&nbsp;encourage&nbsp;its&nbsp;general&nbsp;use.&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;it&nbsp;will&nbsp;be&nbsp;a&lt;br&gt;<br>
problem&nbsp;that&nbsp;you&nbsp;can&#39;t&nbsp;easily&nbsp;compose&nbsp;the&nbsp;&quot;Core&quot;&nbsp;namespace&nbsp;with&nbsp;the&lt;br&gt;<br>
standard&nbsp;library&#39;s&nbsp;namespace.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Assume&nbsp;you&nbsp;want&nbsp;to&nbsp;work&nbsp;with&nbsp;namespaces&nbsp;Foo&nbsp;and&nbsp;Bar&nbsp;at&nbsp;the&nbsp;same&nbsp;time.&lt;br&gt;<br>
&gt;&nbsp;In&nbsp;a&nbsp;hierarchical&nbsp;setting&nbsp;you&nbsp;can&nbsp;build&nbsp;a&nbsp;namespace&nbsp;with&nbsp;two&lt;br&gt;<br>
&gt;&nbsp;namespaces&nbsp;for&nbsp;Foo&nbsp;and&nbsp;Bar&nbsp;(eg.&nbsp;{&nbsp;A&nbsp;=&gt;&nbsp;Foo,&nbsp;B&nbsp;=&gt;&nbsp;Bar&nbsp;}&nbsp;)&nbsp;and&nbsp;this&nbsp;has&lt;br&gt;<br>
&gt;&nbsp;very&nbsp;simple&nbsp;properties&nbsp;(no&nbsp;conflict/shadowing&nbsp;involved).&nbsp;In&nbsp;a&nbsp;flat&lt;br&gt;<br>
&gt;&nbsp;setting,&nbsp;or&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;avoid&nbsp;adding&nbsp;one&nbsp;level&nbsp;of&nbsp;depth,&nbsp;you&nbsp;will&lt;br&gt;<br>
&gt;&nbsp;rather&nbsp;use&nbsp;(A&nbsp;merge&nbsp;B).&nbsp;What&nbsp;happens&nbsp;then&nbsp;if&nbsp;both&nbsp;A&nbsp;and&nbsp;B&nbsp;have&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;Pervasives&nbsp;module?&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;would&nbsp;be&nbsp;handled&nbsp;like&nbsp;two&nbsp;compilation&nbsp;units&nbsp;with&nbsp;the&nbsp;same&nbsp;name:&nbsp;one&lt;br&gt;<br>
would&nbsp;shadow&nbsp;the&nbsp;other&nbsp;and&nbsp;so&nbsp;only&nbsp;one&nbsp;would&nbsp;be&nbsp;opened.&nbsp;This&nbsp;is&nbsp;safer&lt;br&gt;<br>
than&nbsp;having&nbsp;both&nbsp;modules&nbsp;opened,&nbsp;since&nbsp;opening&nbsp;both&nbsp;may&nbsp;result&nbsp;in&nbsp;one&lt;br&gt;<br>
module&nbsp;partially&nbsp;shadowing&nbsp;another,&nbsp;which&nbsp;is&nbsp;more&nbsp;likely&nbsp;to&nbsp;go&lt;br&gt;<br>
unnoticed.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Regarding&nbsp;the&nbsp;proposal&nbsp;as&nbsp;a&nbsp;whole:&lt;br&gt;<br>
&gt;&nbsp;-&nbsp;I&#39;m&nbsp;curious&nbsp;and&nbsp;not&nbsp;sure:&nbsp;what&nbsp;is&nbsp;the&nbsp;reason&nbsp;to&nbsp;remove&nbsp;hierarchical&lt;br&gt;<br>
&gt;&nbsp;namespaces&nbsp;from&nbsp;your&nbsp;proposal?&nbsp;At&nbsp;first&nbsp;I&nbsp;believed&nbsp;it&nbsp;was&nbsp;the&nbsp;ongoing&lt;br&gt;<br>
&gt;&nbsp;tooling&nbsp;discussion&nbsp;with&nbsp;Alain,&nbsp;but&nbsp;he&nbsp;actually&nbsp;objects&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;non-canonicity&nbsp;of&nbsp;names&nbsp;(as&nbsp;permitted&nbsp;by&nbsp;aliasing)&nbsp;more&nbsp;than&nbsp;your&lt;br&gt;<br>
&gt;&nbsp;foo-bar-baz&nbsp;hierarchical&nbsp;structure.&nbsp;Which&nbsp;perceived&nbsp;problems&nbsp;are&lt;br&gt;<br>
&gt;&nbsp;solved&nbsp;by&nbsp;this&nbsp;change?&lt;br&gt;<br>
&lt;br&gt;<br>
Despite&nbsp;Alain&#39;s&nbsp;concerns,&nbsp;I&nbsp;think&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;too&nbsp;difficult&nbsp;to&lt;br&gt;<br>
handle&nbsp;the&nbsp;tooling&nbsp;for&nbsp;hierarchical&nbsp;namespaces.&nbsp;However,&nbsp;I&nbsp;think&nbsp;it&nbsp;will&lt;br&gt;<br>
be&nbsp;easier&nbsp;to&nbsp;determine&nbsp;this&nbsp;once&nbsp;the&nbsp;tools&nbsp;have&nbsp;already&nbsp;been&nbsp;updated&nbsp;to&lt;br&gt;<br>
support&nbsp;flat&nbsp;namespaces.&lt;br&gt;<br>
&lt;br&gt;<br>
Similarly,&nbsp;the&nbsp;design&nbsp;choice&nbsp;of&nbsp;shallow&nbsp;merging&nbsp;vs.&nbsp;deep&nbsp;merging&nbsp;for&lt;br&gt;<br>
opening&nbsp;hierarchical&nbsp;namespaces&nbsp;may&nbsp;be&nbsp;easier&nbsp;to&nbsp;reason&nbsp;about&nbsp;once&lt;br&gt;<br>
namespaces&nbsp;have&nbsp;been&nbsp;included&nbsp;in&nbsp;the&nbsp;language.&lt;br&gt;<br>
&lt;br&gt;<br>
These&nbsp;two&nbsp;issues&nbsp;are&nbsp;important,&nbsp;and&nbsp;require&nbsp;some&nbsp;thought&nbsp;before&nbsp;making&nbsp;a&lt;br&gt;<br>
full&nbsp;proposal&nbsp;including&nbsp;hierarchical&nbsp;namespaces.&nbsp;Rather&nbsp;than&nbsp;waiting&nbsp;for&lt;br&gt;<br>
these&nbsp;issues&nbsp;to&nbsp;be&nbsp;resolved,&nbsp;I&nbsp;would&nbsp;rather&nbsp;proceed,&nbsp;in&nbsp;the&nbsp;short&nbsp;term,&lt;br&gt;<br>
with&nbsp;a&nbsp;proposal&nbsp;for&nbsp;flat&nbsp;namespaces.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;-&nbsp;I&nbsp;believe&nbsp;the&nbsp;proposal&nbsp;is&nbsp;still&nbsp;inadequate,&nbsp;or&nbsp;at&nbsp;least&lt;br&gt;<br>
&gt;&nbsp;underspecified,&nbsp;with&nbsp;regard&nbsp;to&nbsp;the&nbsp;internal&nbsp;name&nbsp;conflicts&nbsp;problem.&lt;br&gt;<br>
&gt;&nbsp;What&nbsp;kind&nbsp;of&nbsp;conventions&nbsp;do&nbsp;you&nbsp;envision&nbsp;around&nbsp;your&nbsp;proposal&nbsp;to&nbsp;avoid&lt;br&gt;<br>
&gt;&nbsp;such&nbsp;conflicts?&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;my&nbsp;proposal&nbsp;modules&nbsp;must&nbsp;still&nbsp;have&nbsp;a&nbsp;unique&nbsp;name.&nbsp;This&nbsp;name&nbsp;will&nbsp;be&lt;br&gt;<br>
reflected&nbsp;in&nbsp;the&nbsp;filename&nbsp;of&nbsp;the&nbsp;&quot;.cmi&quot;&nbsp;file&nbsp;(e.g.&nbsp;Foo#Bar&nbsp;as&lt;br&gt;<br>
foo-bar.cmi).&nbsp;To&nbsp;avoid&nbsp;long&nbsp;source&nbsp;file&nbsp;names,&nbsp;the&nbsp;name&nbsp;can&nbsp;be&nbsp;specified&lt;br&gt;<br>
with&nbsp;the&nbsp;&quot;-name&quot;&nbsp;command&nbsp;line&nbsp;argument.&lt;br&gt;<br>
&lt;br&gt;<br>
Since&nbsp;I&nbsp;expect&nbsp;people&nbsp;to&nbsp;provide&nbsp;a&nbsp;namespace&nbsp;for&nbsp;their&nbsp;package,&nbsp;I&nbsp;would&lt;br&gt;<br>
expect&nbsp;the&nbsp;interface&nbsp;for&nbsp;module&nbsp;bar&nbsp;from&nbsp;package&nbsp;foo&nbsp;to&nbsp;be&nbsp;called&lt;br&gt;<br>
&quot;foo-bar.cmi&quot;.&nbsp;If&nbsp;people&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;same&nbsp;names&nbsp;for&nbsp;their&nbsp;packages&lt;br&gt;<br>
then&nbsp;this&nbsp;should&nbsp;avoid&nbsp;all&nbsp;naming&nbsp;conflicts.&lt;br&gt;<br>
&lt;br&gt;<br>
An&nbsp;alternative&nbsp;mechanism,&nbsp;also&nbsp;supported&nbsp;by&nbsp;my&nbsp;proposal&nbsp;and&nbsp;useful&nbsp;for&lt;br&gt;<br>
libraries&nbsp;that&nbsp;are&nbsp;compatible&nbsp;with&nbsp;versions&nbsp;of&nbsp;OCaml&nbsp;without&nbsp;namespaces,&lt;br&gt;<br>
is&nbsp;to&nbsp;name&nbsp;the&nbsp;module&nbsp;bar&nbsp;in&nbsp;the&nbsp;package&nbsp;foo&nbsp;&quot;foo_bar.cmi&quot;&nbsp;and&nbsp;then&lt;br&gt;<br>
provide&nbsp;a&nbsp;search&nbsp;path&nbsp;file&nbsp;&quot;foo.mlpath&quot;&nbsp;that&nbsp;maps&nbsp;&quot;Foo#Bar&quot;&nbsp;to&lt;br&gt;<br>
&quot;foo_bar.cmi&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
Note&nbsp;that&nbsp;in&nbsp;both&nbsp;these&nbsp;solutions&nbsp;the&nbsp;source&nbsp;file&nbsp;can&nbsp;be&nbsp;named&nbsp;&quot;&lt;a&nbsp;href=&quot;http://bar.ml&quot;&nbsp;target=&quot;_blank&quot;&gt;bar.ml&lt;/a&gt;&quot;,&lt;br&gt;<br>
and&nbsp;the&nbsp;&quot;-name&quot;&nbsp;argument&nbsp;used&nbsp;to&nbsp;add&nbsp;the&nbsp;&quot;Foo#&quot;&nbsp;or&nbsp;&quot;Foo_&quot;&nbsp;prefix&nbsp;to&nbsp;the&lt;br&gt;<br>
name.&nbsp;Build&nbsp;systems&nbsp;could&nbsp;easily&nbsp;add&nbsp;automatic&nbsp;support&nbsp;for&nbsp;these&lt;br&gt;<br>
conventions.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;people&nbsp;wish&nbsp;to&nbsp;be&nbsp;extra&nbsp;careful&nbsp;then&nbsp;they&nbsp;can&nbsp;use&nbsp;the&nbsp;&quot;-name&quot;&lt;br&gt;<br>
argument&nbsp;to&nbsp;add&nbsp;whatever&nbsp;additional&nbsp;data&nbsp;they&nbsp;want&nbsp;to&nbsp;the&nbsp;module&nbsp;name&nbsp;to&lt;br&gt;<br>
ensure&nbsp;that&nbsp;it&nbsp;is&nbsp;unique.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Platform&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Platform@lists.ocaml.org&quot;&gt;Platform@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/platform&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/platform&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
