<tt>
In&nbsp;this&nbsp;post,&nbsp;I&#39;ll&nbsp;try&nbsp;to&nbsp;take&nbsp;a&nbsp;high-level&nbsp;view&nbsp;of&nbsp;the&nbsp;discussion&nbsp;that&nbsp;has&nbsp;happened&nbsp;so&nbsp;far.&nbsp;You&nbsp;can&nbsp;take&nbsp;this&nbsp;as&nbsp;an&nbsp;(opinionated)&nbsp;summary.&lt;br&gt;&lt;br&gt;The&nbsp;main&nbsp;ideas&nbsp;of&nbsp;my&nbsp;proposal&nbsp;linked&nbsp;at&nbsp;the&nbsp;top,&nbsp;or&nbsp;more&nbsp;generally&nbsp;my&nbsp;work&nbsp;on&nbsp;what&nbsp;people&nbsp;have&nbsp;been&nbsp;suggesting&nbsp;for&nbsp;namespaces,&nbsp;are&nbsp;the&nbsp;following:&lt;br&gt;<br>
<br>
<br>
<br>
<br>
&lt;br&gt;1.&nbsp;Namespaces&nbsp;are&nbsp;about&nbsp;the&nbsp;out-of-the-language-question&nbsp;of&nbsp;how&nbsp;a&nbsp;given&nbsp;in-source&nbsp;compilation&nbsp;unit&nbsp;name&nbsp;(masquerading&nbsp;as&nbsp;a&nbsp;module&nbsp;name)&nbsp;maps&nbsp;to&nbsp;an&nbsp;in-filesystem&nbsp;compilation&nbsp;unit.&lt;br&gt;2.&nbsp;I&nbsp;was&nbsp;suggesting&nbsp;new&nbsp;features&nbsp;that&nbsp;(mostly)&nbsp;do&nbsp;not&nbsp;change&nbsp;the&nbsp;OCaml&nbsp;language&nbsp;itself,&nbsp;but&nbsp;the&nbsp;semantics&nbsp;of&nbsp;this&nbsp;mapping&nbsp;and&nbsp;the&nbsp;way&nbsp;it&nbsp;is&nbsp;given&nbsp;to&nbsp;the&nbsp;type-checker.&nbsp;This&nbsp;is&nbsp;a&nbsp;choice&nbsp;that&nbsp;some&nbsp;people&nbsp;may&nbsp;not&nbsp;agree&nbsp;with&nbsp;(more&nbsp;on&nbsp;that&nbsp;later).&lt;br&gt;<br>
<br>
<br>
<br>
<br>
3.&nbsp;Actual&nbsp;OCaml&nbsp;implementations&nbsp;also&nbsp;have&nbsp;a&nbsp;notion&nbsp;of&nbsp;&quot;internal&nbsp;module&nbsp;name&quot;&nbsp;that&nbsp;is&nbsp;contained&nbsp;in&nbsp;compiled&nbsp;object&nbsp;files;&nbsp;two&nbsp;modules&nbsp;of&nbsp;the&nbsp;same&nbsp;internal&nbsp;name&nbsp;cannot&nbsp;be&nbsp;mixed&nbsp;together.&nbsp;This&nbsp;has&nbsp;important&nbsp;practical&nbsp;implication,&nbsp;and&nbsp;we&nbsp;can&nbsp;consider&nbsp;the&nbsp;implementation&nbsp;space&nbsp;for&nbsp;internal&nbsp;module&nbsp;names.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
&lt;br&gt;Alain&nbsp;has&nbsp;a&nbsp;large&nbsp;codebase&nbsp;with&nbsp;house-developed&nbsp;tools,&nbsp;unique&nbsp;build&nbsp;process&nbsp;conventions,&nbsp;and&nbsp;the&nbsp;ironically&nbsp;unusual&nbsp;constraint&nbsp;of&nbsp;compiling&nbsp;quickly&nbsp;on&nbsp;Windows.&nbsp;He&nbsp;pushes&nbsp;for&nbsp;having&nbsp;as&nbsp;few&nbsp;changes&nbsp;as&nbsp;possible.&nbsp;No&nbsp;change&nbsp;to&nbsp;the&nbsp;internal&nbsp;module&nbsp;names&nbsp;(this&nbsp;means&nbsp;developers&nbsp;should&nbsp;use&nbsp;long&nbsp;hopefully-unique&nbsp;filename&nbsp;to&nbsp;avoid&nbsp;conflicts),&nbsp;no&nbsp;change&nbsp;to&nbsp;the&nbsp;structure&nbsp;of&nbsp;compilation&nbsp;unit&nbsp;names&nbsp;(no&nbsp;hierarchy),&nbsp;and&nbsp;a&nbsp;simple&nbsp;compunit-name-to-compunit-name&nbsp;mapping&nbsp;to&nbsp;alleviate&nbsp;the&nbsp;pains.&nbsp;In&nbsp;my&nbsp;initial&nbsp;proposal,&nbsp;this&nbsp;corresponds&nbsp;to&nbsp;restricting&nbsp;the&nbsp;compilation&nbsp;environment&nbsp;descriptions&nbsp;to&nbsp;a&nbsp;flat&nbsp;mapping&nbsp;built&nbsp;by&nbsp;literals&nbsp;and&nbsp;merging&nbsp;only.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
&lt;br&gt;Leo&nbsp;has&nbsp;the&nbsp;fairly&nbsp;different&nbsp;use&nbsp;case&nbsp;of&nbsp;Janestreet&nbsp;Core&#39;s&nbsp;library&nbsp;in&nbsp;mind:&nbsp;hierarchy&nbsp;is&nbsp;important&nbsp;(Core.Foo&nbsp;looks&nbsp;better&nbsp;than&nbsp;Core_Foo&nbsp;and&nbsp;&quot;open&nbsp;namespace&nbsp;Core&quot;&nbsp;is&nbsp;important),&nbsp;changing&nbsp;the&nbsp;language&nbsp;for&nbsp;greater&nbsp;good&nbsp;is&nbsp;ok,&nbsp;and&nbsp;his&nbsp;particular&nbsp;suggestion&nbsp;is&nbsp;an&nbsp;in-language,&nbsp;compunit-wide&nbsp;&quot;in&nbsp;Core.Foo&quot;&nbsp;construct&nbsp;that&nbsp;would&nbsp;both&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;internal&nbsp;module&nbsp;name,&nbsp;and&nbsp;be&nbsp;used&nbsp;to&nbsp;generate&nbsp;the&nbsp;mapping&nbsp;from&nbsp;compunit&nbsp;names&nbsp;from&nbsp;compunit&nbsp;*on&nbsp;the&nbsp;developer&nbsp;side*,&nbsp;rather&nbsp;than&nbsp;on&nbsp;the&nbsp;user&nbsp;side&nbsp;(with&nbsp;then&nbsp;the&nbsp;simple&nbsp;semantics&nbsp;that&nbsp;all&nbsp;mappings&nbsp;from&nbsp;the&nbsp;search&nbsp;path&nbsp;are&nbsp;merged).&nbsp;This&nbsp;can&nbsp;against&nbsp;be&nbsp;seen&nbsp;as&nbsp;a&nbsp;way&nbsp;to&nbsp;define&nbsp;the&nbsp;compilation&nbsp;environment,&nbsp;giving&nbsp;slightly&nbsp;more&nbsp;control&nbsp;to&nbsp;the&nbsp;module&nbsp;provider&nbsp;(mostly&nbsp;a&nbsp;placement&nbsp;in&nbsp;a&nbsp;hierarchy).&nbsp;It&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;restriction&nbsp;of&nbsp;the&nbsp;way&nbsp;to&nbsp;define&nbsp;compilation&nbsp;environments&nbsp;that&nbsp;is&nbsp;even&nbsp;more&nbsp;severe,&nbsp;the&nbsp;user&nbsp;having&nbsp;no&nbsp;control&nbsp;(compilation&nbsp;environments&nbsp;are&nbsp;built&nbsp;as&nbsp;the&nbsp;merging&nbsp;of&nbsp;all&nbsp;developer-generated&nbsp;environments&nbsp;present&nbsp;in&nbsp;the&nbsp;search&nbsp;path).&lt;br&gt;<br>
<br>
&lt;br&gt;Daniel&nbsp;is&nbsp;opposed&nbsp;to&nbsp;the&nbsp;addition&nbsp;of&nbsp;a&nbsp;new&nbsp;&quot;namespace&quot;&nbsp;concept&nbsp;to&nbsp;the&nbsp;OCaml&nbsp;language.&nbsp;It&nbsp;is&nbsp;not&nbsp;completely&nbsp;clear&nbsp;to&nbsp;me&nbsp;whether&nbsp;he&nbsp;objects&nbsp;to:&lt;br&gt;1.&nbsp;the&nbsp;addition&nbsp;of&nbsp;more&nbsp;flexibility&nbsp;in&nbsp;the&nbsp;way&nbsp;compilation&nbsp;unit&nbsp;names&nbsp;are&nbsp;mapped&nbsp;to&nbsp;compilation&nbsp;units,&nbsp;outside&nbsp;the&nbsp;language&nbsp;(the&nbsp;mapping&nbsp;file&nbsp;Alain&nbsp;suggests,&nbsp;the&nbsp;more&nbsp;expressive&nbsp;mapping&nbsp;languages&nbsp;I&nbsp;have&nbsp;considered,&nbsp;or&nbsp;a&nbsp;compilation-option&nbsp;version&nbsp;of&nbsp;the&nbsp;&quot;in&nbsp;Foo.Bar&quot;&nbsp;proposed&nbsp;by&nbsp;Leo)&lt;br&gt;<br>
<br>
2.&nbsp;or&nbsp;only&nbsp;the&nbsp;addition&nbsp;of&nbsp;a&nbsp;new&nbsp;concept&nbsp;*in&nbsp;the&nbsp;language&nbsp;itself*,&nbsp;such&nbsp;as&nbsp;can&nbsp;be&nbsp;seen&nbsp;if&nbsp;we&nbsp;insist&nbsp;to&nbsp;write&nbsp;Core#Std#Map.Make&nbsp;rather&nbsp;than&nbsp;Core.Std.Map.Make&lt;br&gt;&lt;br&gt;I&nbsp;lament&nbsp;that,&nbsp;expect&nbsp;Alain,&nbsp;nobody&nbsp;gives&nbsp;a&nbsp;damn&nbsp;about&nbsp;letting&nbsp;users&nbsp;redefine&nbsp;their&nbsp;own&nbsp;names&nbsp;or&nbsp;paths&nbsp;in&nbsp;a&nbsp;different&nbsp;way&nbsp;that&nbsp;what&nbsp;the&nbsp;module&nbsp;provider&nbsp;planned&nbsp;for.&nbsp;I&nbsp;think&nbsp;it&#39;s&nbsp;an&nbsp;important&nbsp;part&nbsp;of&nbsp;the&nbsp;design&nbsp;space&nbsp;that&nbsp;may&nbsp;allow&nbsp;quite&nbsp;convenient&nbsp;things&nbsp;(eg.&nbsp;scenarios&nbsp;of&nbsp;companies&nbsp;maintaining&nbsp;a&nbsp;in-house&nbsp;repository&nbsp;of&nbsp;modules&nbsp;with&nbsp;pinned&nbsp;version,&nbsp;and&nbsp;still&nbsp;being&nbsp;to&nbsp;interact&nbsp;with&nbsp;non-curated&nbsp;module&nbsp;collections&nbsp;in&nbsp;the&nbsp;same&nbsp;programs),&nbsp;but&nbsp;apparently&nbsp;this&nbsp;is&nbsp;not&nbsp;something&nbsp;people&nbsp;care&nbsp;about.&nbsp;Well,&nbsp;that&#39;s&nbsp;how&nbsp;it&nbsp;is,&nbsp;and&nbsp;hopefully&nbsp;this&nbsp;won&#39;t&nbsp;turn&nbsp;out&nbsp;to&nbsp;be&nbsp;overly&nbsp;restrictive&nbsp;in&nbsp;the&nbsp;mid-term&nbsp;future.&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;br&gt;##&nbsp;A&nbsp;more&nbsp;detailed&nbsp;discussion&nbsp;of&nbsp;Daniel&#39;s&nbsp;arguments&lt;br&gt;&lt;br&gt;Daniel,&nbsp;I&nbsp;am&nbsp;glad&nbsp;that&nbsp;you&nbsp;defend&nbsp;this&nbsp;point&nbsp;of&nbsp;view,&nbsp;as&nbsp;I&nbsp;myself&nbsp;grow&nbsp;more&nbsp;and&nbsp;more&nbsp;conservative&nbsp;of&nbsp;language&nbsp;extension&nbsp;ideas&nbsp;(maybe&nbsp;it&#39;s&nbsp;a&nbsp;contagious&nbsp;effect&nbsp;of&nbsp;vicinity&nbsp;to&nbsp;OCaml&nbsp;designers...).&nbsp;I&nbsp;do&nbsp;completely&nbsp;agree&nbsp;that&nbsp;new&nbsp;language&nbsp;features&nbsp;should&nbsp;be&nbsp;motivated&nbsp;by&nbsp;a&nbsp;(expressivity&nbsp;vs.&nbsp;complexity&nbsp;/&nbsp;kludgeness)&nbsp;estimation,&nbsp;and&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;a&nbsp;priori&nbsp;clear&nbsp;that&nbsp;we&nbsp;need&nbsp;another&nbsp;&quot;programming&nbsp;in&nbsp;the&nbsp;large&quot;&nbsp;concept&nbsp;above&nbsp;modules.&lt;br&gt;<br>
<br>
&lt;br&gt;Regarding&nbsp;point&nbsp;(2):&nbsp;About&nbsp;a&nbsp;year&nbsp;ago,&nbsp;I&nbsp;have&nbsp;worked&nbsp;with&nbsp;Nicolas&nbsp;Pouillard&nbsp;on&nbsp;a&nbsp;way&nbsp;to&nbsp;make&nbsp;the&nbsp;objection&nbsp;go&nbsp;away,&nbsp;by&nbsp;seeing&nbsp;compilation&nbsp;unit&nbsp;names&nbsp;only&nbsp;as&nbsp;modules&nbsp;in&nbsp;the&nbsp;source&nbsp;code:&nbsp;given&nbsp;a&nbsp;hierarchical&nbsp;compilation&nbsp;environment,&nbsp;there&nbsp;is&nbsp;a&nbsp;principled&nbsp;way&nbsp;to&nbsp;turn&nbsp;any&nbsp;non-leaf&nbsp;path&nbsp;(that&nbsp;does&nbsp;not&nbsp;denote&nbsp;a&nbsp;compilation&nbsp;unit&nbsp;by&nbsp;itself)&nbsp;into&nbsp;a&nbsp;module.&nbsp;Instead&nbsp;of&nbsp;Core#Std#Map,&nbsp;we&nbsp;could&nbsp;write&nbsp;Core#Std.Map&nbsp;(seeing&nbsp;Core#Std&nbsp;as&nbsp;a&nbsp;module)&nbsp;or&nbsp;even&nbsp;Core.Std.Map&nbsp;(seeing&nbsp;Core&nbsp;as&nbsp;module)&nbsp;without&nbsp;changing&nbsp;the&nbsp;semantics&nbsp;of&nbsp;my&nbsp;proposal&nbsp;(or&nbsp;any&nbsp;consensual&nbsp;restriction&nbsp;of&nbsp;it).&nbsp;You&nbsp;can&nbsp;find&nbsp;this&nbsp;specified&nbsp;in&nbsp;an&nbsp;older&nbsp;design&nbsp;document,&lt;br&gt;<br>
<br>
 &nbsp;&lt;a&nbsp;href=&quot;http://gallium.inria.fr/~scherer/namespaces/pack_et_functor_pack.html&quot;&gt;http://gallium.inria.fr/~scherer/namespaces/pack_et_functor_pack.html&lt;/a&gt;&lt;br&gt;I&nbsp;had&nbsp;decided&nbsp;not&nbsp;to&nbsp;link&nbsp;it&nbsp;in&nbsp;my&nbsp;introductory&nbsp;mail&nbsp;because&nbsp;it&nbsp;add&nbsp;a&nbsp;bit&nbsp;more&nbsp;complexity&nbsp;to&nbsp;the&nbsp;semantics&nbsp;of&nbsp;mapping&nbsp;compilation&nbsp;unit&nbsp;names&nbsp;to&nbsp;compilation&nbsp;units,&nbsp;and&nbsp;my&nbsp;feeling&nbsp;was&nbsp;that&nbsp;discussing&nbsp;the&nbsp;design&nbsp;space&nbsp;of&nbsp;a&nbsp;simpler&nbsp;basis&nbsp;was&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;start&nbsp;a&nbsp;discussion&nbsp;that&nbsp;would&nbsp;certainly&nbsp;become&nbsp;unwieldy&nbsp;to&nbsp;the&nbsp;risk&nbsp;of&nbsp;being&nbsp;improductive.&lt;br&gt;<br>
<br>
&lt;br&gt;Summing&nbsp;things&nbsp;up:&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;hierarchical&nbsp;mapping&nbsp;outside&nbsp;the&nbsp;language,&nbsp;you&nbsp;can&nbsp;make&nbsp;it&nbsp;appear&nbsp;in&nbsp;OCaml&nbsp;source&nbsp;code&nbsp;as&nbsp;just&nbsp;as&nbsp;module&nbsp;hierarchy,&nbsp;as&nbsp;you&nbsp;suggest.&nbsp;I&nbsp;think&nbsp;it&nbsp;actually&nbsp;adds&nbsp;*complexity*&nbsp;to&nbsp;the&nbsp;underlying&nbsp;design,&nbsp;so&nbsp;there&nbsp;is&nbsp;a&nbsp;price&nbsp;to&nbsp;pay&nbsp;to&nbsp;hide&nbsp;this&nbsp;&nbsp;distinct&nbsp;notion&nbsp;of&nbsp;(structured)&nbsp;compilation&nbsp;unit&nbsp;name.&nbsp;I&nbsp;would&nbsp;be&nbsp;ready&nbsp;to&nbsp;pay&nbsp;that&nbsp;price&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;wide&nbsp;agreement&nbsp;it&nbsp;is&nbsp;the&nbsp;right&nbsp;thing&nbsp;to&nbsp;do,&nbsp;but&nbsp;I&nbsp;personally&nbsp;favor&nbsp;more&nbsp;explicit&nbsp;designs,&nbsp;at&nbsp;least&nbsp;as&nbsp;an&nbsp;experimentation&nbsp;and&nbsp;discussion&nbsp;device&nbsp;(I&nbsp;think&nbsp;we&nbsp;should&nbsp;make&nbsp;the&nbsp;difference&nbsp;explicit&nbsp;and&nbsp;have&nbsp;a&nbsp;(module&nbsp;Core#Std)&nbsp;construct&nbsp;turning&nbsp;a&nbsp;non-leaf&nbsp;compilation&nbsp;unit&nbsp;path&nbsp;into&nbsp;a&nbsp;module&nbsp;with&nbsp;submodules,&nbsp;with&nbsp;the&nbsp;shared&nbsp;understanding&nbsp;that&nbsp;we&nbsp;can&nbsp;decide&nbsp;to&nbsp;hide&nbsp;it&nbsp;under&nbsp;a&nbsp;syntactic&nbsp;ambiguity).&lt;br&gt;<br>
<br>
&lt;br&gt;(The&nbsp;documentation&nbsp;also&nbsp;discusses&nbsp;the&nbsp;possibility&nbsp;of&nbsp;having&nbsp;*functors*&nbsp;that&nbsp;span&nbsp;several&nbsp;compilation&nbsp;units,&nbsp;and&nbsp;that&nbsp;is&nbsp;something&nbsp;Yaron&nbsp;has&nbsp;requested&nbsp;in&nbsp;the&nbsp;past.&nbsp;It&nbsp;is&nbsp;more&nbsp;complex&nbsp;and&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;it&nbsp;is&nbsp;as&nbsp;ready,&nbsp;robust&nbsp;and&nbsp;canonical&nbsp;as&nbsp;the&nbsp;module&nbsp;part,&nbsp;so&nbsp;I&nbsp;encourage&nbsp;you&nbsp;to&nbsp;ignore&nbsp;it&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;this&nbsp;discussion.)&lt;br&gt;<br>
<br>
&lt;br&gt;Regarding&nbsp;point&nbsp;(1),&nbsp;your&nbsp;suggestion&nbsp;to&nbsp;use&nbsp;.cma&nbsp;as&nbsp;an&nbsp;already-existing&nbsp;grouping&nbsp;of&nbsp;modules&nbsp;in&nbsp;submodules&nbsp;that&nbsp;could&nbsp;help&nbsp;solve&nbsp;module&nbsp;name&nbsp;conflicts,&nbsp;I&nbsp;feel&nbsp;this&nbsp;is&nbsp;a&nbsp;more&nbsp;anecdotal&nbsp;part&nbsp;of&nbsp;your&nbsp;(still&nbsp;imprecise)&nbsp;proposal&nbsp;that&nbsp;is&nbsp;more&nbsp;in&nbsp;the&nbsp;&quot;you&nbsp;see&nbsp;it&nbsp;doesn&#39;t&nbsp;need&nbsp;to&nbsp;be&nbsp;that&nbsp;complex&quot;&nbsp;league&nbsp;that&nbsp;an&nbsp;actual&nbsp;principled&nbsp;design.&nbsp;I&nbsp;have&nbsp;a&nbsp;sympathy&nbsp;for&nbsp;the&nbsp;&quot;least&nbsp;effort&quot;&nbsp;design&nbsp;process&nbsp;that&nbsp;it&nbsp;shares&nbsp;with&nbsp;Alain&#39;s&nbsp;proposal,&nbsp;but&nbsp;I&nbsp;think&nbsp;it&nbsp;should&nbsp;not&nbsp;stop&nbsp;us&nbsp;from&nbsp;thinking&nbsp;about&nbsp;the&nbsp;whole&nbsp;design&nbsp;space&nbsp;in&nbsp;a&nbsp;scientific&nbsp;way.&nbsp;(For&nbsp;example:&nbsp;unless&nbsp;I&#39;m&nbsp;mistaken,&nbsp;.cma&nbsp;cannot&nbsp;currently&nbsp;embed&nbsp;.cma,&nbsp;so&nbsp;your&nbsp;proposal&nbsp;for&nbsp;implementation&nbsp;reasons&nbsp;cannot&nbsp;expression&nbsp;non-flat&nbsp;module&nbsp;hierarchies.)&nbsp;There&nbsp;are&nbsp;important&nbsp;technical&nbsp;details&nbsp;left&nbsp;to&nbsp;be&nbsp;defined,&nbsp;such&nbsp;as&nbsp;how&nbsp;to&nbsp;avoid&nbsp;internal&nbsp;name&nbsp;clashes&nbsp;between&nbsp;submodules&nbsp;of&nbsp;different&nbsp;.cma-packs.&nbsp;My&nbsp;intuition&nbsp;is&nbsp;that&nbsp;getting&nbsp;the&nbsp;details&nbsp;straightened&nbsp;out&nbsp;would&nbsp;amount&nbsp;to&nbsp;re-implementing&nbsp;-pack&nbsp;(in&nbsp;particular&nbsp;the&nbsp;-for-pack&nbsp;approach&nbsp;to&nbsp;internal&nbsp;module&nbsp;names&nbsp;prefixing)&nbsp;in&nbsp;terms&nbsp;of&nbsp;.cma&nbsp;rather&nbsp;than&nbsp;.cmo.&nbsp;So&nbsp;the&nbsp;mapping&nbsp;from&nbsp;compilation&nbsp;unit&nbsp;names&nbsp;to&nbsp;compilation&nbsp;units&nbsp;would&nbsp;still&nbsp;be&nbsp;entirely&nbsp;directed&nbsp;by&nbsp;the&nbsp;filesystem&nbsp;and&nbsp;search&nbsp;path&nbsp;as&nbsp;it&nbsp;currently&nbsp;is,&nbsp;but&nbsp;with&nbsp;link-economic&nbsp;module&nbsp;packs.&nbsp;Why&nbsp;not,&nbsp;that&#39;s&nbsp;an&nbsp;idea&nbsp;we&nbsp;could&nbsp;explore&nbsp;in&nbsp;more&nbsp;details,&nbsp;but&nbsp;note&nbsp;that&nbsp;its&nbsp;semantics&nbsp;would&nbsp;still&nbsp;be&nbsp;split&nbsp;in&nbsp;two&nbsp;different&nbsp;&quot;phases&quot;:&lt;br&gt;<br>
<br>
-&nbsp;a&nbsp;new&nbsp;notion&nbsp;of&nbsp;structured&nbsp;paths&nbsp;Foo#Bar&nbsp;that&nbsp;allows&nbsp;to&nbsp;denote&nbsp;a&nbsp;compilation&nbsp;unit&nbsp;for&nbsp;bar.cmo&nbsp;embedded&nbsp;into&nbsp;foo.cma&lt;br&gt;-&nbsp;a&nbsp;possible&nbsp;way&nbsp;to&nbsp;hide&nbsp;this&nbsp;additional&nbsp;structure&nbsp;to&nbsp;source&nbsp;code,&nbsp;masquerading&nbsp;Foo&nbsp;as&nbsp;a&nbsp;module,&nbsp;with&nbsp;a&nbsp;precise&nbsp;semantics&nbsp;when&nbsp;it&nbsp;is&nbsp;used&nbsp;for&nbsp;something&nbsp;else&nbsp;than&nbsp;a&nbsp;projection&nbsp;(as&nbsp;in&nbsp;the&nbsp;document&nbsp;linked&nbsp;above;&nbsp;in&nbsp;fact&nbsp;you&nbsp;could&nbsp;reuse&nbsp;the&nbsp;same&nbsp;proposal,&nbsp;I&nbsp;think)&lt;br&gt;<br>
<br>
&lt;br&gt;This&nbsp;particular&nbsp;implementation&nbsp;choice&nbsp;gives&nbsp;away&nbsp;on&nbsp;quite&nbsp;a&nbsp;few&nbsp;things&nbsp;we&nbsp;might&nbsp;want&nbsp;to&nbsp;have,&nbsp;such&nbsp;as:&lt;br&gt;-&nbsp;the&nbsp;ability&nbsp;to&nbsp;merge&nbsp;two&nbsp;sets&nbsp;of&nbsp;submodules&nbsp;that&nbsp;share&nbsp;a&nbsp;common&nbsp;parent&nbsp;name&nbsp;(admittedly&nbsp;this&nbsp;is&nbsp;not&nbsp;useful&nbsp;in&nbsp;a&nbsp;provenance-oriented&nbsp;view&nbsp;of&nbsp;compilation&nbsp;unit&nbsp;naming,&nbsp;but&nbsp;more&nbsp;in&nbsp;a&nbsp;Data.List&nbsp;view&nbsp;that&nbsp;is&nbsp;not&nbsp;necessarily&nbsp;the&nbsp;good&nbsp;one&nbsp;to&nbsp;start&nbsp;with)&lt;br&gt;<br>
<br>
-&nbsp;the&nbsp;ability&nbsp;for&nbsp;users&nbsp;to&nbsp;build&nbsp;new/distinct&nbsp;parallel&nbsp;module&nbsp;organizations&lt;br&gt;-&nbsp;more-than-depth-2&nbsp;hierarchies&nbsp;(implementation&nbsp;detail;&nbsp;might&nbsp;be&nbsp;fixed&nbsp;with&nbsp;non-neglectible&nbsp;amount&nbsp;of&nbsp;work)&lt;br&gt;-&nbsp;compilation&nbsp;unit&nbsp;name&nbsp;aliasing&nbsp;/&nbsp;redefinition&lt;br&gt;<br>
<br>
&lt;br&gt;But&nbsp;it&nbsp;looks&nbsp;interesting.&nbsp;Please&nbsp;go&nbsp;ahead&nbsp;with&nbsp;more&nbsp;detailed&nbsp;proposals!&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Feb&nbsp;25,&nbsp;2013&nbsp;at&nbsp;3:15&nbsp;PM,&nbsp;Anil&nbsp;Madhavapeddy&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:anil@recoil.org&quot;&nbsp;target=&quot;_blank&quot;&gt;anil@recoil.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;On&nbsp;24&nbsp;Feb&nbsp;2013,&nbsp;at&nbsp;19:26,&nbsp;Christophe&nbsp;TROESTLER&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:Christophe.Troestler@umons.ac.be&quot;&nbsp;target=&quot;_blank&quot;&gt;Christophe.Troestler@umons.ac.be&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Fri,&nbsp;22&nbsp;Feb&nbsp;2013&nbsp;11:41:10&nbsp;+0000,&nbsp;Anil&nbsp;Madhavapeddy&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;There&#39;s&nbsp;one&nbsp;scenario&nbsp;which&nbsp;absolutely&nbsp;requires&nbsp;the&nbsp;ability&nbsp;to&nbsp;explicitly&nbsp;open&nbsp;a&nbsp;particular&nbsp;namespace:&nbsp;camlp4&nbsp;code&nbsp;generation.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Right&nbsp;now,&nbsp;several&nbsp;camlp4&nbsp;extensions&nbsp;break&nbsp;because&nbsp;they&nbsp;use&nbsp;modules&nbsp;from&nbsp;the&nbsp;standard&nbsp;Pervasives&nbsp;library,&nbsp;and&nbsp;have&nbsp;no&nbsp;way&nbsp;to&nbsp;explicitly&nbsp;state&nbsp;that.&nbsp; If&nbsp;Core.Std&nbsp;is&nbsp;opened,&nbsp;then&nbsp;compilation&nbsp;fails.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;The&nbsp;two&nbsp;workarounds&nbsp;are:&lt;br&gt;<br>
&gt;&gt;&nbsp;-&nbsp;hack&nbsp;the&nbsp;build&nbsp;system&nbsp;to&nbsp;pass&nbsp;-pp&nbsp;options&nbsp;to&nbsp;the&nbsp;camlp4&nbsp;generator.&nbsp;Painful.&lt;br&gt;<br>
&gt;&gt;&nbsp;-&nbsp;have&nbsp;some&nbsp;facility&nbsp;to&nbsp;explicitly&nbsp;open&nbsp;&#39;Caml_std&#39;&nbsp;or&nbsp;&#39;Core_std&#39;&nbsp;locally,&nbsp;irrespective&nbsp;of&nbsp;the&nbsp;current&nbsp;module&nbsp;environment.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;I&nbsp;believe&nbsp;namespaces&nbsp;addresses&nbsp;the&nbsp;latter&nbsp;workaround.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Camlp4&nbsp;can&nbsp;insert&nbsp;some&nbsp;code&nbsp;to&nbsp;alias&nbsp;the&nbsp;standard&nbsp;modules&nbsp;needed&nbsp;by&nbsp;code&nbsp;generation&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;source&nbsp;files&nbsp;(not&nbsp;foolproof&nbsp;because&nbsp;a&nbsp;name&nbsp;needs&nbsp;to&nbsp;be&nbsp;generated&nbsp;but&nbsp;good&nbsp;enough&nbsp;in&nbsp;practice).&nbsp; It&nbsp;would&nbsp;be&nbsp;better&nbsp;if&nbsp;that&nbsp;facility&nbsp;was&nbsp;provided&nbsp;by&nbsp;a&nbsp;Camlp4&nbsp;module&nbsp;instead&nbsp;of&nbsp;needing&nbsp;to&nbsp;be&nbsp;redone&nbsp;by&nbsp;each&nbsp;extension.&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;<br>
&lt;/div&gt;That&#39;s&nbsp;an&nbsp;interesting&nbsp;idea.&nbsp; The&nbsp;only&nbsp;hitch&nbsp;is&nbsp;that&nbsp;it&#39;s&nbsp;a&nbsp;little&nbsp;hard&nbsp;to&nbsp;do&nbsp;in&nbsp;one&nbsp;pass,&nbsp;as&nbsp;the&nbsp;code&nbsp;generation&nbsp;is&nbsp;called&nbsp;on&nbsp;the&nbsp;local&nbsp;AST&nbsp;fragment.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;think&nbsp;it&nbsp;would&nbsp;work&nbsp;if&nbsp;placed&nbsp;as&nbsp;a&nbsp;feature&nbsp;into&nbsp;type_conv&nbsp;itself,&nbsp;as&nbsp;the&nbsp;individual&nbsp;generators&nbsp;(e.g.&nbsp;sexp/orm)&nbsp;all&nbsp;register&nbsp;themselves&nbsp;with&nbsp;it&nbsp;quite&nbsp;early.&nbsp; They&nbsp;could&nbsp;request&nbsp;global&nbsp;modules,&nbsp;which&nbsp;type_conv&nbsp;does&nbsp;in&nbsp;one&nbsp;pass&nbsp;(thus&nbsp;also&nbsp;avoiding&nbsp;duplicate&nbsp;requests&nbsp;for&nbsp;the&nbsp;original&nbsp;namespace).&lt;br&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;br&gt;<br>
CCing&nbsp;Markus&nbsp;Mottl&nbsp;to&nbsp;see&nbsp;what&nbsp;he&nbsp;thinks...&lt;br&gt;<br>
&lt;span&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
-anil&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Platform&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Platform@lists.ocaml.org&quot;&nbsp;target=&quot;_blank&quot;&gt;Platform@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/platform&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/platform&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
