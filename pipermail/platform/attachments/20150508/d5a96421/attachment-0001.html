<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Louis,&nbsp;thanks&nbsp;for&nbsp;your&nbsp;suggestions.&nbsp;I&#39;m&nbsp;trying&nbsp;them&nbsp;out,&nbsp;but&nbsp;one&nbsp;quick&nbsp;question:&nbsp;how&nbsp;can&nbsp;you&nbsp;query&nbsp;with&nbsp;tags.&nbsp;I&nbsp;tried&nbsp;`opam&nbsp;list&nbsp;-e&nbsp;foobar`,&nbsp;and&nbsp;I&nbsp;seem&nbsp;to&nbsp;get&nbsp;the&nbsp;same&nbsp;output&nbsp;no&nbsp;matter&nbsp;what&nbsp;I&nbsp;write&nbsp;for&nbsp;foobar.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also,&nbsp;is&nbsp;there&nbsp;some&nbsp;convention&nbsp;for&nbsp;tags?&nbsp;You&nbsp;put&nbsp;&quot;org:&quot;&nbsp;as&nbsp;a&nbsp;prefix.&nbsp;Is&nbsp;there&nbsp;any&nbsp;special&nbsp;interpretation&nbsp;of&nbsp;this,&nbsp;now&nbsp;or&nbsp;planned&nbsp;in&nbsp;the&nbsp;future?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;May&nbsp;7,&nbsp;2015&nbsp;at&nbsp;12:53&nbsp;AM,&nbsp;Louis&nbsp;Gesbert&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:louis.gesbert@ocamlpro.com&quot;&nbsp;target=&quot;_blank&quot;&gt;louis.gesbert@ocamlpro.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi&nbsp;all,&lt;br&gt;<br>
&lt;br&gt;<br>
At&nbsp;the&nbsp;moment,&nbsp;you&nbsp;have&nbsp;basically&nbsp;two&nbsp;solutions:&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp;use&nbsp;a&nbsp;repository&nbsp;with&nbsp;`url`&nbsp;files&nbsp;pointing&nbsp;to&nbsp;version&nbsp;control&nbsp;;&nbsp;this&nbsp;has&nbsp;been&nbsp;covered&nbsp;already.&nbsp;The&nbsp;repo-per-package&nbsp;trick&nbsp;is&nbsp;quite&nbsp;interesting&nbsp;though.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;gives&nbsp;you&nbsp;all&nbsp;the&nbsp;flexibility&nbsp;of&nbsp;a&nbsp;full&nbsp;repository,&nbsp;but&nbsp;may&nbsp;be&nbsp;a&nbsp;little&nbsp;bit&nbsp;of&nbsp;work&nbsp;to&nbsp;maintain.&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp;use&nbsp;pinning.&nbsp;The&nbsp;bug-tracker&nbsp;mentionned&nbsp;`pin-bundles`&nbsp;to&nbsp;get&nbsp;a&nbsp;dev&nbsp;environment&nbsp;quickly&nbsp;at&nbsp;some&nbsp;point,&nbsp;and&nbsp;we&nbsp;actually&nbsp;quite&nbsp;have&nbsp;those&nbsp;already:&nbsp;you&nbsp;can&nbsp;import&nbsp;a&nbsp;set&nbsp;of&nbsp;pinnings&nbsp;through&nbsp;`opam&nbsp;switch&nbsp;import&nbsp;&lt;file&gt;`.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;format&nbsp;is&nbsp;straight-forward:&nbsp;one&nbsp;line&nbsp;per&nbsp;package,&nbsp;with&nbsp;columns&nbsp;for&nbsp;name,&nbsp;version,&nbsp;&quot;root&quot;/&quot;installed&quot;/&quot;uninstalled&quot;,&nbsp;pinning&nbsp;kind,&nbsp;pinning&nbsp;URL.&nbsp;You&nbsp;can&nbsp;generate&nbsp;the&nbsp;file&nbsp;with&nbsp;`opam&nbsp;switch&nbsp;export&nbsp;&lt;file&gt;`&nbsp;and&nbsp;remove&nbsp;unneeded&nbsp;lines,&nbsp;or&nbsp;write&nbsp;it&nbsp;by&nbsp;hand,&nbsp;then&nbsp;distribute&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;this&nbsp;scheme,&nbsp;one&nbsp;could&nbsp;put&nbsp;all&nbsp;pins&nbsp;as&nbsp;&quot;uninstalled&quot;,&nbsp;and&nbsp;Thomas&#39;&nbsp;script&nbsp;would&nbsp;be&nbsp;replaced&nbsp;by:&lt;br&gt;<br>
```&lt;br&gt;<br>
opam&nbsp;switch&nbsp;import&nbsp;pinning-state&lt;br&gt;<br>
opam&nbsp;pin&nbsp;add&nbsp;-n&nbsp;project&nbsp;./&nbsp;-y&nbsp;#&nbsp;if&nbsp;not&nbsp;already&nbsp;in&nbsp;pinning-state&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;opam&nbsp;install&nbsp;--deps-only&nbsp;project&nbsp;-y&lt;br&gt;<br>
```&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;This&nbsp;is&nbsp;less&nbsp;flexible,&nbsp;but&nbsp;is&nbsp;probably&nbsp;ligher-weight&nbsp;maintenance&nbsp;wise.&nbsp;A&nbsp;major&nbsp;difference&nbsp;is&nbsp;that&nbsp;`opam`&nbsp;files&nbsp;in&nbsp;all&nbsp;the&nbsp;pinned&nbsp;project&#39;s&nbsp;sources&nbsp;will&nbsp;be&nbsp;used.&lt;br&gt;<br>
&lt;br&gt;<br>
Then&nbsp;you&nbsp;have&nbsp;the&nbsp;difference&nbsp;in&nbsp;usage&nbsp;between&nbsp;normal&nbsp;repo&nbsp;and&nbsp;pinned&nbsp;packages.&nbsp;For&nbsp;example,&nbsp;any&nbsp;install&nbsp;command&nbsp;mentionning&nbsp;pinned&nbsp;package&nbsp;`foo`&nbsp;will&nbsp;first&nbsp;update&nbsp;it&nbsp;to&nbsp;get&nbsp;the&nbsp;latest&nbsp;metadata.&nbsp;This&nbsp;won&#39;t&nbsp;really&nbsp;handle&nbsp;depending&nbsp;on&nbsp;dev&nbsp;versions,&nbsp;but&nbsp;you&nbsp;may&nbsp;declare&nbsp;your&nbsp;packages&#39;&nbsp;opam&nbsp;files&nbsp;with&nbsp;version&nbsp;&quot;dev&quot;&nbsp;and&nbsp;depend&nbsp;on&nbsp;this&nbsp;version&nbsp;in&nbsp;other&nbsp;packages:&nbsp;then&nbsp;installing&nbsp;with&nbsp;missing&nbsp;pins&nbsp;will&nbsp;fail,&nbsp;that&nbsp;version&nbsp;not&nbsp;being&nbsp;found.&nbsp;Another&nbsp;trick&nbsp;could&nbsp;be&nbsp;to&nbsp;use&nbsp;`available:&nbsp;[&nbsp;foo:pinned&nbsp;]`&nbsp;to&nbsp;make&nbsp;the&nbsp;package&nbsp;unavailable&nbsp;unless&nbsp;foo&nbsp;is&nbsp;pinned.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;this&nbsp;sounds&nbsp;useful,&nbsp;but&nbsp;would&nbsp;be&nbsp;more&nbsp;convenient&nbsp;with&nbsp;more&nbsp;support&nbsp;(e.g.&nbsp;export&nbsp;only&nbsp;pinning&nbsp;data&nbsp;?)&nbsp;--&nbsp;please&nbsp;ask&nbsp;(or&nbsp;contribute!)&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;pinning-related&nbsp;trick&nbsp;could&nbsp;be&nbsp;to&nbsp;mark&nbsp;all&nbsp;your&nbsp;packages&nbsp;with&nbsp;a&nbsp;given&nbsp;flag&nbsp;(e.g.&nbsp;&quot;org:foobar&quot;)&nbsp;and&nbsp;then&nbsp;filter&nbsp;them&nbsp;and&nbsp;call&nbsp;`opam&nbsp;pin&nbsp;add&nbsp;--dev-repo`&nbsp;on&nbsp;all.&nbsp;Would&nbsp;need&nbsp;to&nbsp;go&nbsp;through&nbsp;some&nbsp;shell-script&nbsp;at&nbsp;the&nbsp;moment&nbsp;though.&lt;br&gt;<br>
&lt;br&gt;<br>
NOTE:&nbsp;there&nbsp;is&nbsp;something&nbsp;called&nbsp;&quot;dev&nbsp;dependencies&quot;&nbsp;planned&nbsp;(which&nbsp;is&nbsp;a&nbsp;dependency&nbsp;marked&nbsp;with&nbsp;the&nbsp;flag&nbsp;&quot;dev&quot;,&nbsp;e.g.&nbsp;`depends:&nbsp;&quot;foo&quot;&nbsp;{dev&nbsp;&amp;&nbsp;&gt;=&nbsp;&quot;1.2&quot;}`),&nbsp;but&nbsp;it&#39;s&nbsp;different.&nbsp;It&nbsp;is&nbsp;planned&nbsp;to&nbsp;mean:&nbsp;ignore&nbsp;the&nbsp;dependency&nbsp;unless&nbsp;the&nbsp;package&nbsp;is&nbsp;pinned,&nbsp;and&nbsp;is&nbsp;to&nbsp;be&nbsp;used&nbsp;for&nbsp;processing&nbsp;artefacts&nbsp;that&nbsp;are&nbsp;usually&nbsp;in&nbsp;the&nbsp;tarball&nbsp;but&nbsp;not&nbsp;the&nbsp;git&nbsp;source&nbsp;(e.g.&nbsp;&lt;a&nbsp;href=&quot;http://setup.ml&quot;&nbsp;target=&quot;_blank&quot;&gt;setup.ml&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;`depends:&nbsp;[&nbsp;&quot;foo&quot;&nbsp;{&nbsp;git:&nbsp;&quot;path-to-git/foo#bar&quot;}&nbsp;]`&lt;br&gt;<br>
&lt;br&gt;<br>
`depends`&nbsp;is&nbsp;basically&nbsp;information&nbsp;that&nbsp;is&nbsp;fed&nbsp;to&nbsp;the&nbsp;solver;&nbsp;we&nbsp;could&nbsp;interpret&nbsp;this,&nbsp;though,&nbsp;as&nbsp;&quot;whenever&nbsp;this&nbsp;package&nbsp;is&nbsp;to&nbsp;be&nbsp;installed,&nbsp;make&nbsp;sure&nbsp;to&nbsp;pin&nbsp;&#39;foo&#39;&nbsp;first&quot;.&nbsp;The&nbsp;issue&nbsp;with&nbsp;this&nbsp;is&nbsp;that&nbsp;pinning&nbsp;imports&nbsp;the&nbsp;package&#39;s&nbsp;metadata&nbsp;from&nbsp;its&nbsp;source&nbsp;--&nbsp;and&nbsp;that&nbsp;metadata&nbsp;is&nbsp;needed&nbsp;by&nbsp;the&nbsp;solver.&nbsp;I&nbsp;don&#39;t&nbsp;see&nbsp;a&nbsp;way&nbsp;to&nbsp;handle&nbsp;this&nbsp;that&#39;s&nbsp;not&nbsp;too&nbsp;ad-hoc&nbsp;and&nbsp;wouldn&#39;t&nbsp;lead&nbsp;to&nbsp;a&nbsp;confusing&nbsp;interface:&nbsp;it&nbsp;would&nbsp;be&nbsp;easy&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;explicitely&nbsp;installing&nbsp;the&nbsp;package&nbsp;that&nbsp;has&nbsp;this&nbsp;dependency,&nbsp;but&nbsp;otherwise&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;-&nbsp;Ashish&nbsp;Agarwal,&nbsp;05/05/2015&nbsp;15:13&nbsp;-&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&gt;&nbsp;&gt;&nbsp;Has&nbsp;anyone&nbsp;else&nbsp;encountered&nbsp;this&nbsp;situation&nbsp;before?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Yes,&nbsp;and&nbsp;I&nbsp;also&nbsp;would&nbsp;be&nbsp;interested&nbsp;in&nbsp;a&nbsp;good&nbsp;solution.&nbsp;One&nbsp;idea&nbsp;we&nbsp;had&nbsp;was&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;share&nbsp;switch&nbsp;configurations.&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;say&nbsp;here&#39;s&nbsp;a&nbsp;whole&nbsp;switch:&nbsp;it&lt;br&gt;<br>
&gt;&nbsp;has&nbsp;this&nbsp;name,&nbsp;these&nbsp;remotes&nbsp;(if&nbsp;remotes&nbsp;were&nbsp;switch&nbsp;specific),&nbsp;these&nbsp;pins,&lt;br&gt;<br>
&gt;&nbsp;etc.&nbsp;Then,&nbsp;I&nbsp;want&nbsp;to&nbsp;share&nbsp;this&nbsp;config&nbsp;with&nbsp;my&nbsp;team,&nbsp;and&nbsp;declare&nbsp;that&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;build&nbsp;machine&nbsp;should&nbsp;switch&nbsp;to&nbsp;this&nbsp;particular&nbsp;config.&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;how&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;do&nbsp;this&nbsp;though,&nbsp;other&nbsp;than&nbsp;hacking&nbsp;some&nbsp;shell&nbsp;script.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Tue,&nbsp;May&nbsp;5,&nbsp;2015&nbsp;at&nbsp;2:58&nbsp;PM,&nbsp;Trevor&nbsp;Smith&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:trevorsummerssmith@gmail.com&quot;&gt;trevorsummerssmith@gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Hi&nbsp;all,&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;We&#39;re&nbsp;using&nbsp;opam&nbsp;internally&nbsp;at&nbsp;work.&nbsp;I&nbsp;have&nbsp;two&nbsp;use&nbsp;cases&nbsp;for&nbsp;our&nbsp;internal&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;libraries:&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;1)&nbsp;&quot;dev&nbsp;dependencies&quot;&nbsp;--&nbsp;I&nbsp;want&nbsp;what&nbsp;is&nbsp;in&nbsp;the&nbsp;repo.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;2)&nbsp;&quot;explicit&nbsp;dependency&quot;&nbsp;--&nbsp;I&nbsp;want&nbsp;a&nbsp;given&nbsp;version.&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;opam&nbsp;has&nbsp;#2&nbsp;covered.&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;However&nbsp;it&nbsp;is&nbsp;not&nbsp;clear&nbsp;to&nbsp;me&nbsp;how&nbsp;to&nbsp;do&nbsp;#1&nbsp;correctly.&nbsp;I&nbsp;can,&nbsp;on&nbsp;a&nbsp;given&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;machine&nbsp;(ie&nbsp;not&nbsp;on&nbsp;an&nbsp;opam&nbsp;repository),&nbsp;pin&nbsp;a&nbsp;given&nbsp;package&nbsp;to&nbsp;a&nbsp;git&nbsp;repo.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;But&nbsp;locally&nbsp;pinning&nbsp;isn&#39;t&nbsp;what&nbsp;I&nbsp;want.&nbsp;I&nbsp;want&nbsp;a&nbsp;package&nbsp;in&nbsp;an&nbsp;opam&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;repository&nbsp;to&nbsp;say&nbsp;&quot;I&nbsp;depend&nbsp;upon&nbsp;this&nbsp;other&nbsp;dev&nbsp;package&quot;&nbsp;so&nbsp;that&nbsp;our&nbsp;build&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;boxes,&nbsp;and&nbsp;various&nbsp;developer&nbsp;machines&nbsp;will&nbsp;all&nbsp;do&nbsp;the&nbsp;same&nbsp;thing,&nbsp;and&nbsp;I&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;separately&nbsp;pin&nbsp;everything&nbsp;on&nbsp;each&nbsp;box.&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Has&nbsp;anyone&nbsp;else&nbsp;encountered&nbsp;this&nbsp;situation&nbsp;before?&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Thoughts?&nbsp;Thanks.&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Trevor&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Platform&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Platform@lists.ocaml.org&quot;&gt;Platform@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/platform&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/platform&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
