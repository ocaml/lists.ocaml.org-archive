<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] Problem with the lib directory in opam's directory hierarchy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Problem%20with%20the%20lib%20directory%20in%20opam%27s%0A%20directory%20hierarchy&In-Reply-To=%3CCAJCP7wFYpToGchCwY3JHR1SpH0eSZhy9hBiJXz6FPyVvWumpew%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000560.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] Problem with the lib directory in opam's directory hierarchy</H1>
    <B>Kim Nguy&#7877;n</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20Problem%20with%20the%20lib%20directory%20in%20opam%27s%0A%20directory%20hierarchy&In-Reply-To=%3CCAJCP7wFYpToGchCwY3JHR1SpH0eSZhy9hBiJXz6FPyVvWumpew%40mail.gmail.com%3E"
       TITLE="[ocaml-platform] Problem with the lib directory in opam's directory hierarchy">kim at nguyen.vg
       </A><BR>
    <I>Wed Apr 22 18:50:34 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000560.html">[ocaml-platform] Problem with the lib directory in opam's	directory hierarchy
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#561">[ date ]</a>
              <a href="thread.html#561">[ thread ]</a>
              <a href="subject.html#561">[ subject ]</a>
              <a href="author.html#561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Apr 22, 2015 at 5:31 PM, Daniel B&#252;nzli
&lt;<A HREF="http://lists.ocaml.org/listinfo/platform">daniel.buenzli at erratique.ch</A>&gt; wrote:
&gt;<i> Le mercredi, 22 avril 2015 &#224; 17:20, Kim Nguy&#7877;n a &#233;crit :
</I>&gt;&gt;<i> Is there a better way to do this ? (I'm not asking to change the opam
</I>&gt;&gt;<i> directory structure, I just want to understand the best way to be
</I>&gt;&gt;<i> compatible with both distrib packagers and opam packagers).
</I>&gt;<i>
</I>&gt;<i> I think the simple answer (but other may want to confirm) is to not use `ocamlfind remove` at all. Once you removed the directory you are done. `ocamlfind remove` doesn't do anything more than removing the META file which you already destroyed.
</I>
I see. But this works for an opam setting. Imagine my program is
installed from source &quot;a la mano&quot;. I certainly don't want to leave a
META file and the cma/cmxa lying around, furthermore, I imagine (but I
could be wrong) that e.g. Debian or Fedora packages configure findlib
to look for META files in specific directories (say /usr/lib/ocaml/
instead of the default /usr/local/lib/ocaml/x.y/) and the only way to
install/remove my META file in such a place is to use ocamlfind
install/remove.

&gt;&gt;<i> Also, is it considered good practice to put in an ocamlfind package
</I>&gt;&gt;<i> directory files or subdirectory that were not installed via ocamlfind
</I>&gt;&gt;<i> install ?
</I>&gt;<i>
</I>&gt;<i> There should be no problem with that. You should really see ocamlfind as something that simply reads and interprets META file wherever they are. For example all my packages are usable with ocamlfind but I install them and remove them without using `ocamlfind` *at all* (I use opam's .install file, which opam handles automatically).
</I>
My question was more that my program has a ./configure script which
accepts the usual --prefix switch (plus the others, bindir, docdir
etc.) to know where to install stuff, and I also wish to publish a
META. Can I make a Makefile that is not overly convoluted (for that
part) and that will work for source install, distrib packagers and
opam ?

Best,
-- 
Kim
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000560.html">[ocaml-platform] Problem with the lib directory in opam's	directory hierarchy
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#561">[ date ]</a>
              <a href="thread.html#561">[ thread ]</a>
              <a href="subject.html#561">[ subject ]</a>
              <a href="author.html#561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
