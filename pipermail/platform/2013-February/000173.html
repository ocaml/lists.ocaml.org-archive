<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-platform] on the need and design of OCaml namespaces
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20on%20the%20need%20and%20design%20of%20OCaml%20namespaces&In-Reply-To=%3C20130227.105543.1788852644925393142.Christophe.Troestler%40umons.ac.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000175.html">
   <LINK REL="Next"  HREF="000167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-platform] on the need and design of OCaml namespaces</H1>
    <B>Christophe TROESTLER</B> 
    <A HREF="mailto:platform%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-platform%5D%20on%20the%20need%20and%20design%20of%20OCaml%20namespaces&In-Reply-To=%3C20130227.105543.1788852644925393142.Christophe.Troestler%40umons.ac.be%3E"
       TITLE="[ocaml-platform] on the need and design of OCaml namespaces">Christophe.Troestler at umons.ac.be
       </A><BR>
    <I>Wed Feb 27 09:55:43 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000175.html">[ocaml-platform] on the need and design of OCaml namespaces
</A></li>
        <LI>Next message: <A HREF="000167.html">[ocaml-platform] on the need and design of OCaml namespaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#173">[ date ]</a>
              <a href="thread.html#173">[ thread ]</a>
              <a href="subject.html#173">[ subject ]</a>
              <a href="author.html#173">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 27 Feb 2013 07:58:41 +0100, Gabriel Scherer wrote:
&gt;<i> 
</I>&gt;<i> I don't like your lazy initialization scheme because it changes the
</I>&gt;<i> observable semantics of the the OCaml language when modules have
</I>&gt;<i> global side-effects. Currently, the effects are evaluated in the
</I>&gt;<i> linking order of the modules, not the use order.
</I>
For practical purposes this lazy initialization scheme may be
restricted to packed modules and module aliasing (&quot;module A = B&quot; where
neither A nor B is not used by other values &#8212; this is already
detected&#160;&#8212; in the module and B belongs to a packed unit).  I do not
think that people rely on the command line order for packed modules or
even for .cm[x]a libraries.  In the case order matters because of
dependencies, this would be tracked and compilations units would be
topologically ordered w.r.t. this dependency graph so this would be an
added bonus for the user.

&gt;<i> Note that the main difficulty of your proposal is to track
</I>&gt;<i> dependencies at a structure item level, rather than at a compilation
</I>&gt;<i> unit level as is currently done.
</I>
Not if we limit it to packed modules &#8212; you already have the cmo/cmx
and in this context I see packing as putting them in a .cm[x]a and
adding a module with submodules pointing to (aliasing) these
compilation units.  These pointers would actually be initialized (and
trigger linking) on actual usage.  [If this was adopted, I think
nobody would object if packing generated a cm[x]a instead of a
cmo/cmx.]

&gt;<i> Lazyness is arguably bad and in any case not needed if you have this
</I>&gt;<i> finer granularity
</I>
Would you mind to explain?

&gt;<i> -- but as I argued this would have large, and possibly unpleasant,
</I>&gt;<i> implementation implications.
</I>
I can't argue on that &#8212; not knowing much about the compiler internals.
However, it naively seems to me that the proposal relies on many
things that already exist.  Is is possible to have a more detailed
description of why the changes would be so invasive?
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000175.html">[ocaml-platform] on the need and design of OCaml namespaces
</A></li>
	<LI>Next message: <A HREF="000167.html">[ocaml-platform] on the need and design of OCaml namespaces
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#173">[ date ]</a>
              <a href="thread.html#173">[ thread ]</a>
              <a href="subject.html#173">[ subject ]</a>
              <a href="author.html#173">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/platform">More information about the Platform
mailing list</a><br>
</body></html>
