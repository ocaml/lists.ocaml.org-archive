<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-windows] [opam-devel] OPAM on Native Windows - Status update
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-windows%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-windows%5D%20%5Bopam-devel%5D%20OPAM%20on%20Native%20Windows%20-%20Status%20update&In-Reply-To=%3C9752EA39-D1F3-4E67-BDDE-8FBB20BAE651%40metastack.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000051.html">
   <LINK REL="Next"  HREF="000053.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-windows] [opam-devel] OPAM on Native Windows - Status update</H1>
    <B>David Allsopp</B> 
    <A HREF="mailto:wg-windows%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-windows%5D%20%5Bopam-devel%5D%20OPAM%20on%20Native%20Windows%20-%20Status%20update&In-Reply-To=%3C9752EA39-D1F3-4E67-BDDE-8FBB20BAE651%40metastack.com%3E"
       TITLE="[wg-windows] [opam-devel] OPAM on Native Windows - Status update">dra-news at metastack.com
       </A><BR>
    <I>Tue Sep 15 13:04:44 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000051.html">[wg-windows] [opam-devel] OPAM on Native Windows - Status update
</A></li>
        <LI>Next message: <A HREF="000053.html">[wg-windows] Interim solution for OPAM on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52">[ date ]</a>
              <a href="thread.html#52">[ thread ]</a>
              <a href="subject.html#52">[ subject ]</a>
              <a href="author.html#52">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15 Sep 2015, at 12:46, Gabriel Scherer &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-windows">gabriel.scherer at gmail.com</A>&lt;mailto:<A HREF="http://lists.ocaml.org/listinfo/wg-windows">gabriel.scherer at gmail.com</A>&gt;&gt; wrote:
Could you provide more information on what changes/fixes you need from upstream? By looking at the slides I see that you mention
  <A HREF="http://caml.inria.fr/mantis/view.php?id=4034">http://caml.inria.fr/mantis/view.php?id=4034</A>
  <A HREF="http://caml.inria.fr/mantis/view.php?id=6120">http://caml.inria.fr/mantis/view.php?id=6120</A>

Are both equally important? Is it easy to workaround not having them, or a deal-breaker for your work? Which other upstream issues would you need solved?

4034 is complicated which is why it's sat unfixed - it doesn't need fixing for OPAM, I simply wrapped the Windows API call in OPAM directly to solve its use case.

6120 is critical for building dose3 directly (if you compile using lib-ext, it doesn't matter) but not critical, therefore. I was going to update its Mantis page with a note that I expect to finish the patch in October (and so hopefully get it into 4.03). The make compiler route of my Windows OPAM port already includes this patch.

I'm not aware of any other OCaml fixes needed - I don't expect any, either, as OCaml of course works well on Windows already!


David




On Tue, Sep 15, 2015 at 1:31 PM, David Allsopp &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-windows">dra-news at metastack.com</A>&lt;mailto:<A HREF="http://lists.ocaml.org/listinfo/wg-windows">dra-news at metastack.com</A>&gt;&gt; wrote:
As previously mentioned, I've been devoting a little time to porting the
master branch of OPAM to work on native Windows (i.e. in a Command or
PowerShell Prompt rather than in Cygwin).

I had the chance to sync with a few people in Cambridge at the end of
August, and as a result a few of us had a presentation/discussion at
Microsoft Research Cambridge yesterday about the work I've done so far and
what still needs doing. The (PDF) slides from my talk are available at
<A HREF="http://1drv.ms/1QeD746">http://1drv.ms/1QeD746</A>

I refer in the slides to various things where Proof-of-Concept (PoC) work
has been done, and I've now shared these on GitHub at
<A HREF="https://github.com/dra27/opam-experiments">https://github.com/dra27/opam-experiments</A>

I mention at the end that the port is not particularly exciting at this
stage, as you can only get as far as a not terribly polished opam init. My
plan is by mid-October to have opam config env working so that we have a
very, very pre-alpha &quot;release&quot; which may be able to install some packages
into the system switch only.

Anyone is of course welcome to try building what's on the windows branch in
the meantime, and I'm very happy to provide assistance/receive bug reports
on the build process so far. There's documentation on the detailed
requirements for the build environment in README.md (see
<A HREF="https://github.com/dra27/opam/blob/windows/README.md#compiling-on-native-win">https://github.com/dra27/opam/blob/windows/README.md#compiling-on-native-win</A>
dows)

I have also shared my OneNote scribblings and notes on the port at
<A HREF="http://1drv.ms/1QeDkV0">http://1drv.ms/1QeDkV0</A> (opens in OneNote Online). Please be aware that this
document contains paged-out portions of my brain, which is both a
highly-disorganised place and also sometimes expresses opinions more
strongly than are necessary!

Continuing towards the OCaml/OPAM Windows Dream...


David

_______________________________________________
opam-devel mailing list
<A HREF="http://lists.ocaml.org/listinfo/wg-windows">opam-devel at lists.ocaml.org</A>&lt;mailto:<A HREF="http://lists.ocaml.org/listinfo/wg-windows">opam-devel at lists.ocaml.org</A>&gt;
<A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/wg-windows/attachments/20150915/d16f10ed/attachment.html">http://lists.ocaml.org/pipermail/wg-windows/attachments/20150915/d16f10ed/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000051.html">[wg-windows] [opam-devel] OPAM on Native Windows - Status update
</A></li>
	<LI>Next message: <A HREF="000053.html">[wg-windows] Interim solution for OPAM on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52">[ date ]</a>
              <a href="thread.html#52">[ thread ]</a>
              <a href="subject.html#52">[ subject ]</a>
              <a href="author.html#52">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-windows">More information about the wg-windows
mailing list</a><br>
</body></html>
