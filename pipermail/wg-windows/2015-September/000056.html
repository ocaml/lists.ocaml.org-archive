<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-windows] Interim solution for OPAM on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-windows%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-windows%5D%20Interim%20solution%20for%20OPAM%20on%20Windows&In-Reply-To=%3CE51C5B015DBD1348A1D85763337FB6D9E9E98886%40Remus.metastack.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000055.html">
   <LINK REL="Next"  HREF="000057.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-windows] Interim solution for OPAM on Windows</H1>
    <B>David Allsopp</B> 
    <A HREF="mailto:wg-windows%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-windows%5D%20Interim%20solution%20for%20OPAM%20on%20Windows&In-Reply-To=%3CE51C5B015DBD1348A1D85763337FB6D9E9E98886%40Remus.metastack.local%3E"
       TITLE="[wg-windows] Interim solution for OPAM on Windows">dra-news at metastack.com
       </A><BR>
    <I>Wed Sep 16 10:08:34 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000055.html">[wg-windows] Interim solution for OPAM on Windows
</A></li>
        <LI>Next message: <A HREF="000057.html">[wg-windows] Fwd: [Caml-list] User Report: Cygwin32 OPAM for MinGW	OCaml 64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56">[ date ]</a>
              <a href="thread.html#56">[ thread ]</a>
              <a href="subject.html#56">[ subject ]</a>
              <a href="author.html#56">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mr. Herr wrote:
&gt;<i> On 16.09.2015 09:45, David Allsopp wrote:
</I>&gt;<i> &gt; Jonathan Protzenko wrote:
</I>&gt;<i> &gt;&gt; David's email reminded me that I forgot to tell the world about this
</I>&gt;<i> &gt;&gt; horrible hack that I did a while ago.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; <A HREF="http://protz.github.io/ocaml-installer/">http://protz.github.io/ocaml-installer/</A> now offers an installer with
</I>&gt;<i> OPAM.
</I>&gt;<i> &gt;&gt; The toolchain is the usual one (native compilers / generating native
</I>&gt;<i> &gt;&gt; windows programs / using mingw64 32-bit compilers). However, the
</I>&gt;<i> &gt;&gt; installer now installs an &quot;opam&quot; program in c:\ocaml\bin. The opam
</I>&gt;<i> &gt;&gt; program is a *cygwin 32-bit binary*, so it only works within a cygwin
</I>&gt;<i> 32-bit terminal.
</I>&gt;<i> &gt;&gt; I got as far as doing &quot;opam init&quot; and &quot;opam install a-whole-bunch-of-
</I>&gt;<i> &gt;&gt; packages&quot;, including mezzo and all its dependencies, batteries, and a
</I>&gt;<i> &gt;&gt; couple others.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; All in all, I hope it'll provide a good enough interim solution until
</I>&gt;<i> &gt;&gt; David finishes everything and I can, eventually, retire my installer
</I>&gt;<i> :).
</I>&gt;<i> &gt; It's not (necessarily) the case that the installer would want retiring
</I>&gt;<i> (but it may well change shape, especially where installing Cygwin is
</I>&gt;<i> concerned). OPAM expects the system already to have an OCaml compiler
</I>&gt;<i> (usually installed by the operating system's package manager) - one of the
</I>&gt;<i> minor changes I have yet to make is to relax this requirement for OPAM on
</I>&gt;<i> Windows, as it is less reasonable.
</I>&gt;<i> 
</I>&gt;<i> Opam has an ocaml-less install procedure, see list &quot;ocaml_beginners&quot;::[]
</I>&gt;<i> Conflicting installation advice&quot; 16.08.2015 14:09 CEST, and
</I>&gt;<i> <A HREF="http://opam.ocaml.org/doc/Install.html">http://opam.ocaml.org/doc/Install.html</A> &quot;Binary Installer&quot;.
</I>
I'm aware of that - however, if you forget to specify --comp, I'm fairly certain you get an exception at the moment (it certainly did when I last looked)...

&gt;<i> &gt; However, the existence of the &quot;system&quot; switch means I was imagining that
</I>&gt;<i> there would still want to be an installer which installs OCaml (and OPAM)
</I>&gt;<i> &quot;for all users&quot;. Apart from anything else, it would improve the first-time
</I>&gt;<i> OCaml user's experience as installing OPAM on a system without OCaml must
</I>&gt;<i> necessarily add a 10 minute or so delay while OPAM builds OCaml.
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> There is no system distribution in Windows, right? So opam must do it, and
</I>&gt;<i> it does it well on *nix.
</I>
Yes there is - anything you install at a system level (i.e. for all users) is the &quot;system distribution&quot;. That said, &quot;system&quot;, as far as OPAM is concerned, simply means an OCaml compiler that it found in PATH.

&gt;<i> With all the progress opam has made and brought, a general scripting setup
</I>&gt;<i> like perl / tcl / python is still lacking IMO, it would make ocaml more
</I>&gt;<i> accessible for ad hoc scripting.
</I>
I'm not sure what you mean here?


David 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000055.html">[wg-windows] Interim solution for OPAM on Windows
</A></li>
	<LI>Next message: <A HREF="000057.html">[wg-windows] Fwd: [Caml-list] User Report: Cygwin32 OPAM for MinGW	OCaml 64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56">[ date ]</a>
              <a href="thread.html#56">[ thread ]</a>
              <a href="subject.html#56">[ subject ]</a>
              <a href="author.html#56">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-windows">More information about the wg-windows
mailing list</a><br>
</body></html>
