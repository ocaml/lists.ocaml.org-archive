<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-windows] Improving the state of OCaml on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-windows%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-windows%5D%20Improving%20the%20state%20of%20OCaml%20on%20Windows&In-Reply-To=%3CCAN6ygO%3DqX2yCY0s6Qk8-r8yPtStK-5JKg9ctM%3DyWPa9jst_k2w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000013.html">
   <LINK REL="Next"  HREF="000015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-windows] Improving the state of OCaml on Windows</H1>
    <B>Yotam Barnoy</B> 
    <A HREF="mailto:wg-windows%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-windows%5D%20Improving%20the%20state%20of%20OCaml%20on%20Windows&In-Reply-To=%3CCAN6ygO%3DqX2yCY0s6Qk8-r8yPtStK-5JKg9ctM%3DyWPa9jst_k2w%40mail.gmail.com%3E"
       TITLE="[wg-windows] Improving the state of OCaml on Windows">yotambarnoy at gmail.com
       </A><BR>
    <I>Mon Jun  1 19:01:33 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000013.html">[wg-windows] Improving the state of OCaml on Windows
</A></li>
        <LI>Next message: <A HREF="000015.html">[wg-windows] Improving the state of OCaml on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14">[ date ]</a>
              <a href="thread.html#14">[ thread ]</a>
              <a href="subject.html#14">[ subject ]</a>
              <a href="author.html#14">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ideally, a simple pure OCaml package should be buildable by a simple
</I>&gt;<i> invocation of (native) ocamlbuild.exe without requiring a cygwin
</I>&gt;<i> environment.
</I>&gt;<i>
</I>&gt;<i>
</I>I completely agree with this.

I've been looking more into the different build options for OCaml over the
last couple of days, and it's a shame ocamlbuild punted on the job of task
multiplexing (installing different configurations and options and such) and
left it to makefiles and shell scripts. It seems like myocamlbuild.ml can
sometimes do part of this task, but projects that use myocamlbuild.ml also
have shell scripts or makefiles to multiplex different build options.

You then get some projects using OASIS, where some multiplexing is done
from the declarative layer, and all other files are built automatically,
but even then a Makefile is usually created by OASIS as the entry point.

It appears that there's no way to get around this issue. We need some
scripting language as a compilation front-end, but we don't want to invent
a new one (like OMake) since that's another cognitive burden. At the same
time, everyone agrees that Makefile rules are painful, as is bash
scripting, and worst of all, they're not cross-platform compatible.

For the front end, one option is to do the scripting inside something like
myocamlbuild.ml, which ocamlbuild makes sure to only compile when needed.
If the right cross-platform libraries are automatically imported, this can
be made relatively painless. But another option is to use something like
python scripting. Python is available on just about every system, and the
python devs have already dealt with cross-platform issues, which means a
python layer over ocamlbuild or python generated by OASIS and customized
could be much cleaner and more cross-platform compatible than the current
situation with Makefiles and shell scripts.

For the backend, ocamlbuild seems to be inadequate on its own once complex
C integration is required, mostly because its automatic dependency search
is really targeted at ocaml only. I've seen a claim that ocamlbuild can
build the entire ocaml compiler, and I'd like to see if that's really
possible. If so, perhaps a switch-over is worth considering for
simplicity's sake?

-Yotam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/wg-windows/attachments/20150601/1db64493/attachment.html">http://lists.ocaml.org/pipermail/wg-windows/attachments/20150601/1db64493/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000013.html">[wg-windows] Improving the state of OCaml on Windows
</A></li>
	<LI>Next message: <A HREF="000015.html">[wg-windows] Improving the state of OCaml on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14">[ date ]</a>
              <a href="thread.html#14">[ thread ]</a>
              <a href="subject.html#14">[ subject ]</a>
              <a href="author.html#14">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-windows">More information about the wg-windows
mailing list</a><br>
</body></html>
