<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] A few questions debugging packages &amp; opam
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20A%20few%20questions%20debugging%20packages%20%26%20opam&In-Reply-To=%3C007201d114b4%24b3deb1c0%241b9c1540%24%40metastack.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] A few questions debugging packages &amp; opam</H1>
    <B>David Allsopp</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20A%20few%20questions%20debugging%20packages%20%26%20opam&In-Reply-To=%3C007201d114b4%24b3deb1c0%241b9c1540%24%40metastack.com%3E"
       TITLE="[opam-devel] A few questions debugging packages &amp; opam">dra-news at metastack.com
       </A><BR>
    <I>Sun Nov  1 14:50:50 GMT 2015</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001256.html">[opam-devel] A few questions debugging packages &amp; opam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1255">[ date ]</a>
              <a href="thread.html#1255">[ thread ]</a>
              <a href="subject.html#1255">[ subject ]</a>
              <a href="author.html#1255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a few questions regarding the debugging of package installation in
OPAM. I have the additional challenge that not only do package installations
fail quite regularly for me, but they're often failing because of OPAM
crashing (i.e. uncaught exceptions, unexpected conditions) as I work through
native Windows support, and it's proving a little cumbersome at the moment!

Some quick fire answers to these few questions from an opam expert or two
would be very much appreciated, please :o)

1. Are there any circumstances in which opam (re)install -b deletes the
build directory?

I'm fairly sure that while doing an opam reinstall which crashed (i.e. opam
suffered an exception) during the install bit that the handler deleted the
build directory, despite -b being specified.

If opam really did delete the build directory in this instance, is that a
bug? (in which case I'll add it to my ToDo list)

2. What's the correct set of flags to keep and obtain as much information as
possible for debugging package building?

-b gives me the build directory. Is the only way to get the
.{env,info,out,err} files kept to specify --debug?

3. Is there a tool or better way to view the output of each command (i.e.
the aforementioned files) than going through the .info files to find the
right one and then looking at the appropriate other file?

Would it be appreciated if opam were patched to give the files a canonical
order (i.e. so that ls displays the log files in the order they were
executed)?

4. When changing opam source files which are part of the .cmxa/.cma
libraries (e.g. opam-core, opam-format), I'm frequently forced to do make
clean; make all as otherwise I get &quot;inconsistent assumption&quot; errors over
.cmx implementation (I'm building with 4.02.2).

Is that affecting anyone else, or is there something weird going on with the
Windows Makefile dependencies that I should look into?

Thanks!


David

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001256.html">[opam-devel] A few questions debugging packages &amp; opam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1255">[ date ]</a>
              <a href="thread.html#1255">[ thread ]</a>
              <a href="subject.html#1255">[ subject ]</a>
              <a href="author.html#1255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
