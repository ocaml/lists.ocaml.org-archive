<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Using binaries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Using%20binaries&In-Reply-To=%3CCBD55955-B26B-4C1F-899A-70BC31770C85%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001329.html">
   <LINK REL="Next"  HREF="001331.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Using binaries</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Using%20binaries&In-Reply-To=%3CCBD55955-B26B-4C1F-899A-70BC31770C85%40recoil.org%3E"
       TITLE="[opam-devel] Using binaries">anil at recoil.org
       </A><BR>
    <I>Fri Jan 22 13:53:53 GMT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="001329.html">[opam-devel] Using binaries
</A></li>
        <LI>Next message: <A HREF="001331.html">[opam-devel] Using binaries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1330">[ date ]</a>
              <a href="thread.html#1330">[ thread ]</a>
              <a href="subject.html#1330">[ subject ]</a>
              <a href="author.html#1330">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22 Jan 2016, at 05:47, Louis Gesbert &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> Le vendredi 22 janvier 2016, 08:34:34 Gabriel Scherer a &#233;crit :
</I>&gt;&gt;<i> I would be interested in some more information on this. This seems very
</I>&gt;&gt;<i> simple as you say it, but I had not thought about the fact that OPAM
</I>&gt;&gt;<i> already has the capacities to act as a binary distribution platform -- I
</I>&gt;&gt;<i> somehow thought that there would be an announcement of some new extra
</I>&gt;&gt;<i> features at some point designed for binary distribution.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Louis, you are saying that this is feasible. Are you aware of this actually
</I>&gt;&gt;<i> having been done? For example, is anyone working on providing a, say, opam
</I>&gt;&gt;<i> repository for x86-64 binaries corresponding to the packages available on
</I>&gt;&gt;<i> opam-repository?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I suppose that if people proposed that, they would probably pre-build
</I>&gt;&gt;<i> binaries for only a subset of the possible packages or configurations.
</I>&gt;&gt;<i> Would it work to mix a &quot;binary repository&quot; that provides only a subset of
</I>&gt;&gt;<i> the packages, and the official source repository, and would package query
</I>&gt;&gt;<i> solvers have a way to do the right thing there? Or would it be the
</I>&gt;&gt;<i> responsibility of the alternate repository provider to include a
</I>&gt;&gt;<i> source-only fallback for the non-distributed packages? (This would make it
</I>&gt;&gt;<i> harder to have a single repository with binary packages for several
</I>&gt;&gt;<i> architectures.)
</I>&gt;<i> 
</I>&gt;<i> `ocp-bin` was an experiment to provide such a cache of pre-built packages, 
</I>&gt;<i> falling back to building from source when unavailable for the current setup.
</I>&gt;<i> With the official OCaml distribution, you would hit issues of relocation 
</I>&gt;<i> though, although there are some hacks around that 
</I>&gt;<i> (<A HREF="https://github.com/OCamlPro/ocp-reloc">https://github.com/OCamlPro/ocp-reloc</A>)
</I>&gt;<i> 
</I>&gt;<i> So although there are no real barriers in Opam for a binary repository, doing 
</I>&gt;<i> something like a conversion from source repo to binary repo, especially with 
</I>&gt;<i> OCaml, raises some challenges.
</I>
How about an OPAM switch that uses the compiler relocation patch and musl libc and the right CFLAGS to link everything statically by default?  That should provide an experience similar to Go, with an output binary that is standalone (including libc).

Anil

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001329.html">[opam-devel] Using binaries
</A></li>
	<LI>Next message: <A HREF="001331.html">[opam-devel] Using binaries
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1330">[ date ]</a>
              <a href="thread.html#1330">[ thread ]</a>
              <a href="subject.html#1330">[ subject ]</a>
              <a href="author.html#1330">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
