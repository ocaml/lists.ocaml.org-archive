<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Fwd: AUR Comment for aspcud-svn
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Fwd%3A%20AUR%20Comment%20for%20aspcud-svn&In-Reply-To=%3C58BF7C83-1220-4133-ABFF-45AB377D8E6B%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000644.html">
   <LINK REL="Next"  HREF="000647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Fwd: AUR Comment for aspcud-svn</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Fwd%3A%20AUR%20Comment%20for%20aspcud-svn&In-Reply-To=%3C58BF7C83-1220-4133-ABFF-45AB377D8E6B%40recoil.org%3E"
       TITLE="[opam-devel] Fwd: AUR Comment for aspcud-svn">anil at recoil.org
       </A><BR>
    <I>Wed Sep 10 10:41:30 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000644.html">[opam-devel] Fwd: AUR Comment for aspcud-svn
</A></li>
        <LI>Next message: <A HREF="000647.html">[opam-devel] Fwd: AUR Comment for aspcud-svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#645">[ date ]</a>
              <a href="thread.html#645">[ thread ]</a>
              <a href="subject.html#645">[ subject ]</a>
              <a href="author.html#645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for pointing out this patch!  Also CCing Vsevolod in case
it affects the FreeBSD port of aspcud (used by pkgng now optionally,
I believe).

-anil

On 10 Sep 2014, at 10:00, Vincent B. &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">vb at luminar.eu.org</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -------- Forwarded Message --------
</I>&gt;<i> Subject: AUR Comment for aspcud-svn
</I>&gt;<i> Date: Tue,  9 Sep 2014 18:10:17 +0000 (UTC)
</I>&gt;<i> From: <A HREF="http://lists.ocaml.org/listinfo/opam-devel">notify at aur.archlinux.org</A>
</I>&gt;<i> Reply-To: <A HREF="http://lists.ocaml.org/listinfo/opam-devel">noreply at aur.archlinux.org</A>
</I>&gt;<i> To: undisclosed-recipients: ;
</I>&gt;<i> 
</I>&gt;<i> from <A HREF="https://aur.archlinux.org/pkgbase/aspcud-svn/">https://aur.archlinux.org/pkgbase/aspcud-svn/</A>
</I>&gt;<i> zhenya1007 wrote:
</I>&gt;<i> 
</I>&gt;<i> From af83aff2dae812bdcf8086b5ef642c52186abd86 Mon Sep 17 00:00:00
</I>&gt;<i> 2001
</I>&gt;<i> From: Evgeny Roubinchtein &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">zhenya1007 at gmail.com</A>&gt;
</I>&gt;<i> Date: Tue, 9 Sep 2014 10:53:36 -0700
</I>&gt;<i> Subject: [PATCH] A compilation fix.
</I>&gt;<i> 
</I>&gt;<i> Needed this patch to get the source to compile with.
</I>&gt;<i> boost 1.56.0-1
</I>&gt;<i> gcc 4.9.1-1
</I>&gt;<i> ---
</I>&gt;<i> aspcud-svn/PKGBUILD             | 13 ++++++++++---
</I>&gt;<i> aspcud-svn/dependency.cpp.patch | 11 +++++++++++
</I>&gt;<i> 2 files changed, 21 insertions(+), 3 deletions(-)
</I>&gt;<i> create mode 100644 aspcud-svn/dependency.cpp.patch
</I>&gt;<i> 
</I>&gt;<i> diff --git a/aspcud-svn/PKGBUILD b/aspcud-svn/PKGBUILD
</I>&gt;<i> index 5929cb1..a29e97d 100644
</I>&gt;<i> --- a/aspcud-svn/PKGBUILD
</I>&gt;<i> +++ b/aspcud-svn/PKGBUILD
</I>&gt;<i> @@ -2,7 +2,7 @@
</I>&gt;<i> 
</I>&gt;<i> pkgname=aspcud-svn
</I>&gt;<i> groups=('potassco')
</I>&gt;<i> -pkgver=r8385
</I>&gt;<i> +pkgver=r8738
</I>&gt;<i> pkgrel=1
</I>&gt;<i> pkgdesc=&quot;Solver for package dependencies&quot;
</I>&gt;<i> arch=('x86_64' 'i686' 'armv6h' 'armv7h')
</I>&gt;<i> @@ -12,8 +12,10 @@ depends=('clasp&gt;=2.1.3' 'gringo&gt;=4.2.1')
</I>&gt;<i> conflicts=('aspcud')
</I>&gt;<i> provides=('aspcud')
</I>&gt;<i> makedepends=('boost' 'cmake' 're2c')
</I>&gt;<i> -source=(&quot;$pkgname&quot;::'svn+<A HREF="svn://svn.code.sf.net/p/potassco/code/trunk/aspcud">svn://svn.code.sf.net/p/potassco/code/trunk/aspcud</A>')
</I>&gt;<i> -md5sums=('SKIP')
</I>&gt;<i> +source=(&quot;$pkgname&quot;::'svn+<A HREF="svn://svn.code.sf.net/p/potassco/code/trunk/aspcud">svn://svn.code.sf.net/p/potassco/code/trunk/aspcud</A>'
</I>&gt;<i> +	dependency.cpp.patch)
</I>&gt;<i> +md5sums=('SKIP'
</I>&gt;<i> +	'c417b8aff0c290e07e6be27d68efe48a')
</I>&gt;<i> 
</I>&gt;<i> pkgver() {
</I>&gt;<i>     cd &quot;$srcdir/$pkgname&quot;
</I>&gt;<i> @@ -21,6 +23,11 @@ pkgver() {
</I>&gt;<i>     printf &quot;r%s&quot; &quot;${ver//[[:alpha:]]}&quot;
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> +prepare() {
</I>&gt;<i> +    cd &quot;$srcdir/$pkgname&quot;
</I>&gt;<i> +    patch -p3 -i $srcdir/dependency.cpp.patch
</I>&gt;<i> +}
</I>&gt;<i> +
</I>&gt;<i> build() {
</I>&gt;<i>     cd &quot;$srcdir/$pkgname&quot;
</I>&gt;<i>     mkdir -p build/release
</I>&gt;<i> diff --git a/aspcud-svn/dependency.cpp.patch
</I>&gt;<i> b/aspcud-svn/dependency.cpp.patch
</I>&gt;<i> new file mode 100644
</I>&gt;<i> index 0000000..15b05b8
</I>&gt;<i> --- /dev/null
</I>&gt;<i> +++ b/aspcud-svn/dependency.cpp.patch
</I>&gt;<i> @@ -0,0 +1,11 @@
</I>&gt;<i> +--- ./src/aspcud-svn/libcudf/src/dependency.cpp.orig	2014-09-08
</I>&gt;<i> 17:35:55.375674302 -0700
</I>&gt;<i> ++++ ./src/aspcud-svn/libcudf/src/dependency.cpp	2014-09-08
</I>&gt;<i> 18:09:00.832366212 -0700
</I>&gt;<i> +@@ -49,7 +49,7 @@
</I>&gt;<i> +
</I>&gt;<i> +     struct CudfPackageRefFilter {
</I>&gt;<i> +         CudfPackageRefFilter(const Cudf::PackageRef &amp;ref) :
</I>&gt;<i> ref(&amp;ref) { }
</I>&gt;<i> +-        bool operator()(const Entity *entity) {
</I>&gt;<i> ++        bool operator()(const Entity *entity) const {
</I>&gt;<i> +             switch (ref-&gt;op) {
</I>&gt;<i> +                 case Cudf::PackageRef::EQ:
</I>&gt;<i> +                     return (entity-&gt;version == ref-&gt;version ||
</I>&gt;<i> entity-&gt;allVersions()) &amp;&amp; ref-&gt;version != 0;
</I>&gt;<i> -- 
</I>&gt;<i> 2.1.0
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ---
</I>&gt;<i> If you no longer wish to receive notifications about this package,
</I>&gt;<i> please go the the above package page and click the UnNotify button.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> opam-devel mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;<i> 
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000644.html">[opam-devel] Fwd: AUR Comment for aspcud-svn
</A></li>
	<LI>Next message: <A HREF="000647.html">[opam-devel] Fwd: AUR Comment for aspcud-svn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#645">[ date ]</a>
              <a href="thread.html#645">[ thread ]</a>
              <a href="subject.html#645">[ subject ]</a>
              <a href="author.html#645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
