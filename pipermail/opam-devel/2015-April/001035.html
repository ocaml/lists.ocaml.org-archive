<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] opam bulk builds linked in experimentally to	opam.ocaml.org
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20opam%20bulk%20builds%20linked%20in%20experimentally%20to%0A%09opam.ocaml.org&In-Reply-To=%3CC6A8959D-07C1-43E4-BCCA-CFACE3EEA207%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001034.html">
   <LINK REL="Next"  HREF="001036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] opam bulk builds linked in experimentally to	opam.ocaml.org</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20opam%20bulk%20builds%20linked%20in%20experimentally%20to%0A%09opam.ocaml.org&In-Reply-To=%3CC6A8959D-07C1-43E4-BCCA-CFACE3EEA207%40recoil.org%3E"
       TITLE="[opam-devel] opam bulk builds linked in experimentally to	opam.ocaml.org">anil at recoil.org
       </A><BR>
    <I>Fri Apr  3 16:54:09 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001034.html">[opam-devel] opam bulk builds linked in experimentally to	opam.ocaml.org
</A></li>
        <LI>Next message: <A HREF="001036.html">[opam-devel] opam bulk builds linked in experimentally to opam.ocaml.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1035">[ date ]</a>
              <a href="thread.html#1035">[ thread ]</a>
              <a href="subject.html#1035">[ subject ]</a>
              <a href="author.html#1035">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3 Apr 2015, at 15:06, T&#246;r&#246;k Edwin &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">edwin+ml-ocaml at etorok.net</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> On 04/03/2015 04:35 PM, Anil Madhavapeddy wrote:
</I>&gt;&gt;<i> I've left the OPAM bulk builder rsyncing to a new logging volume on opam.ocaml.org (separate volume so if it gets full, it wont affect the rest of the infrastructure at all):
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>    <A HREF="http://opam.ocaml.org/builds/">http://opam.ocaml.org/builds/</A>
</I>&gt;<i> 
</I>&gt;<i> Quite a lot of failures on centos-7, looks like you are missing a '-y' from the yum invocation, for example:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://opam.ocaml.org/builds/9dca6ff98e94c70115863c7f4de47d18ca5a7a93/logs/local-centos-7-ocaml-4.02.1/raw/xapi-netdev.html">http://opam.ocaml.org/builds/9dca6ff98e94c70115863c7f4de47d18ca5a7a93/logs/local-centos-7-ocaml-4.02.1/raw/xapi-netdev.html</A>
</I>&gt;<i> Is this ok [y/d/N]: Exiting on user command
</I>&gt;<i> 
</I>&gt;<i> Your transaction was saved, rerun it with:
</I>&gt;<i> 
</I>&gt;<i> yum load-transaction /tmp/yum_save_tx.2015-04-01.07-56.DJFz0P.yumtx
</I>
It should have `-y` in there, so I'm a bit stumped.
<A HREF="https://github.com/ocaml/opam-depext/blob/master/depext.ml#L166">https://github.com/ocaml/opam-depext/blob/master/depext.ml#L166</A>

I've swapped the next run to use `opam depext -d` to log the exact command being run...

&gt;<i> Also beware of yum's exitcode, I was surprised to find out that if you ask it to install multiple packages and some succeed and others fail (perhaps because they don't even exist) then (not sure if all versions) it still exits with code 0.
</I>&gt;<i> In my scripts I usually do this then to be sure:
</I>&gt;<i> yum -y install $PKG &amp;&amp; rpm -q $PKG
</I>
That's useful, thanks! I've created:
<A HREF="https://github.com/ocaml/opam-depext/issues/9">https://github.com/ocaml/opam-depext/issues/9</A>

-anil
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001034.html">[opam-devel] opam bulk builds linked in experimentally to	opam.ocaml.org
</A></li>
	<LI>Next message: <A HREF="001036.html">[opam-devel] opam bulk builds linked in experimentally to opam.ocaml.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1035">[ date ]</a>
              <a href="thread.html#1035">[ thread ]</a>
              <a href="subject.html#1035">[ subject ]</a>
              <a href="author.html#1035">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
