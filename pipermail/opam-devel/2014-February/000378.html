<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] How to manage a package manager (Was: Re: [opam]	Build clarification (#1149))
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20How%20to%20manage%20a%20package%20manager%20%28Was%3A%20Re%3A%20%5Bopam%5D%0A%09Build%20clarification%20%28%231149%29%29&In-Reply-To=%3CF14122E4-9346-48EC-8620-D21379419199%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000377.html">
   <LINK REL="Next"  HREF="000379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] How to manage a package manager (Was: Re: [opam]	Build clarification (#1149))</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20How%20to%20manage%20a%20package%20manager%20%28Was%3A%20Re%3A%20%5Bopam%5D%0A%09Build%20clarification%20%28%231149%29%29&In-Reply-To=%3CF14122E4-9346-48EC-8620-D21379419199%40recoil.org%3E"
       TITLE="[opam-devel] How to manage a package manager (Was: Re: [opam]	Build clarification (#1149))">anil at recoil.org
       </A><BR>
    <I>Sat Feb  1 13:53:06 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000377.html">[opam-devel] How to manage a package manager (Was: Re: [opam]	Build clarification (#1149))
</A></li>
        <LI>Next message: <A HREF="000379.html">[opam-devel] How to manage a package manager (Was: Re: [opam] Build clarification (#1149))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#378">[ date ]</a>
              <a href="thread.html#378">[ thread ]</a>
              <a href="subject.html#378">[ subject ]</a>
              <a href="author.html#378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1 Feb 2014, at 14:40, Roberto Di Cosmo &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">roberto at dicosmo.org</A>&gt; wrote:
&gt;<i> 
</I>&gt;&gt;<i> This is a very tricky interaction to get right, 
</I>&gt;<i> 
</I>&gt;<i> Really? I would like to know more about this; please add the factual elements
</I>&gt;<i> to #1150
</I>
I think the overall problem element is obvious: the opam binary within the
opam installation will be picked up very suddenly during package installation
and upgrades.

Rather than me listing why every single feature of OPAM would potentially break
(consider the 'repo upgrade' step that OPAM 1.0 -&gt; 1.1 does), I would again
suggest that you provide a strong motivation for why you want the feature in the
first place.

&gt;<i> 
</I>&gt;<i> Now, that's a tricky issue: with dozens of platforms to support, getting the
</I>&gt;<i> opam platform-specific package rolled out in a timely manner, and without
</I>&gt;<i> too much skew is definitely far from easy.
</I>
Yes, which is why we should focus on getting it done smoothly, rather than
worry about updating OPAM from within OPAM. I've already started on Launchpad,
and have investigated the excellent SUSE open build farm.  My efforts there
have stalled due to the complexity of packaging the existing OPAM tree with
ocp-build, and also because we now essentially depend on aspcud (which is
also rather challenging to package on non-Linux, non-x86, although that is
improving).

&gt;<i> 
</I>&gt;<i> Again, I'd like to see more precise arguments about this: I'm surely too
</I>&gt;<i> optimistic, but it might just be a matter of adding some specific metadata
</I>&gt;<i> for the opam package.
</I>
&quot;some specific metadata&quot;?  That's a very long way from a patch :-)

&gt;<i> 
</I>&gt;&gt;<i> and the new one will disappear if the
</I>&gt;&gt;<i> ~/.opam is destroyed by the user, therefore downgrading their version of OPAM).
</I>&gt;<i> 
</I>&gt;<i> Sure, but if I shoot myself in the foot and destroy ~/.opam, that's my proble, right?
</I>
No, it'll turn out to be our problem when the user sends us bug reports.
There were a number of these going from the OPAM beta to 1.0, which you should
be able to find against the relevant closed milestones on the bug tracker.
OPAM upgrading OPAM is very confusing behaviour without an explicit 'dist-upgrade'
step.

-anil
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000377.html">[opam-devel] How to manage a package manager (Was: Re: [opam]	Build clarification (#1149))
</A></li>
	<LI>Next message: <A HREF="000379.html">[opam-devel] How to manage a package manager (Was: Re: [opam] Build clarification (#1149))
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#378">[ date ]</a>
              <a href="thread.html#378">[ thread ]</a>
              <a href="subject.html#378">[ subject ]</a>
              <a href="author.html#378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
