<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Globally-installed OPAM Packages?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Globally-installed%20OPAM%20Packages%3F&In-Reply-To=%3C20130905173924.GA15650%40caesar.elte.hu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Globally-installed OPAM Packages?</H1>
    <B>PALI Gabor Janos</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Globally-installed%20OPAM%20Packages%3F&In-Reply-To=%3C20130905173924.GA15650%40caesar.elte.hu%3E"
       TITLE="[opam-devel] Globally-installed OPAM Packages?">pgj at elte.hu
       </A><BR>
    <I>Thu Sep  5 18:39:24 BST 2013</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000194.html">[opam-devel] Globally-installed OPAM Packages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#193">[ date ]</a>
              <a href="thread.html#193">[ thread ]</a>
              <a href="subject.html#193">[ subject ]</a>
              <a href="author.html#193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>[cross-posting for both Mirage and OPAM developers]
Hi there,

I am working on a FreeBSD/amd64 kernel module backend for Mirage, which
requires a dedicated cross-compiler due to some special requirements on the
generated code.  One of the consequences of those requirements that the
compiler cannot create ELF binaries for some of the dependent packages or
the unit tests fail.  This is fine, as binaries are usually not needed,
only the libraries.

Hence I have started to submit changes to the package maintainers, like
in case of dyntype [1].  However, Anil suggested to generalize this into
the concept of &quot;no executables&quot; which is basically an environment variable
which, when set, implies disabling building binaries for the given package.
This could be then set for the Mirage/kFreeBSD cross-compiler so no binaries
are built in that case.

However, there are some packages, for it would need binaries still in order
to be able to work.  An example of this is mirari [2], the Mirage build tool.
Anil recommended to use mirari of the host system instead, but the problem
is that mirari (and executables for OPAM packages, in general, I think) can
only be installed per toolchain.  That is, even if I install mirari with the
standard compiler, it becomes hidden once I switch back to the Mirage/kFreeBSD
cross-compiler to build the rest of the packages.

Apparently a host mirari cannot be installed on the system globally, unless
it is compiled from the sources manually, probably.  (Mirari is not available
as a binary package on FreeBSD unlike the OCaml compiler or OPAM.)  I cannot
build and install mirari to some global location either, as other packages,
e.g. mirage-www, depend on it as a package.

Are there any (non-hackish) solutions for this issue in the OPAM world? 

[1] <A HREF="https://github.com/mirage/dyntype/pull/4">https://github.com/mirage/dyntype/pull/4</A>
[2] <A HREF="http://opam.ocamlpro.com/pkg/mirari.0.9.7.html">http://opam.ocamlpro.com/pkg/mirari.0.9.7.html</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000194.html">[opam-devel] Globally-installed OPAM Packages?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#193">[ date ]</a>
              <a href="thread.html#193">[ thread ]</a>
              <a href="subject.html#193">[ subject ]</a>
              <a href="author.html#193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
