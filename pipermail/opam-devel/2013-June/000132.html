<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Does pin git:// really make sense ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Does%20pin%20git%3A//%20really%20make%20sense%20%3F&In-Reply-To=%3C3060DA93-D7A3-46DA-B11E-FA076FF10307%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000131.html">
   <LINK REL="Next"  HREF="000133.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Does pin git:// really make sense ?</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Does%20pin%20git%3A//%20really%20make%20sense%20%3F&In-Reply-To=%3C3060DA93-D7A3-46DA-B11E-FA076FF10307%40recoil.org%3E"
       TITLE="[opam-devel] Does pin git:// really make sense ?">anil at recoil.org
       </A><BR>
    <I>Mon Jun  3 09:38:36 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000131.html">[opam-devel] Does pin git:// really make sense ?
</A></li>
        <LI>Next message: <A HREF="000133.html">[opam-devel] Does pin git:// really make sense ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#132">[ date ]</a>
              <a href="thread.html#132">[ thread ]</a>
              <a href="subject.html#132">[ subject ]</a>
              <a href="author.html#132">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30 May 2013, at 15:35, Daniel B&#252;nzli &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">daniel.buenzli at erratique.ch</A>&gt; wrote:

&gt;<i> Le jeudi, 30 mai 2013 &#224; 14:45, Anil Madhavapeddy a &#233;crit :
</I>&gt;&gt;<i> That's precisely what it's intended to do. It's easy to extend the pin to add version numbers too (which may already be in trunk). i.e.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> $ opam pin atdgen.1.2.3 <A HREF="git://github.com/mjambon/atdgen">git://github.com/mjambon/atdgen</A> (<A HREF="http://github.com/mjambon/atdgen">http://github.com/mjambon/atdgen</A>)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> which would ensure that the 1.2.3 constraints are used with the source from the git remote.
</I>&gt;<i> 
</I>&gt;<i> If that's what its intended to do why not. I still think that it is quite confusing since the whole system will tell you that you installed 1.2.3 while it's not and as witnessed in my first email, it doesn't seem to work well in practice.  
</I>&gt;<i> 
</I>&gt;&gt;<i> What you want sounds like the job for an OPAM remote such as:
</I>&gt;&gt;<i> <A HREF="https://github.com/xen-org/opam-repo-dev">https://github.com/xen-org/opam-repo-dev</A>
</I>&gt;<i> 
</I>&gt;<i> Actually what I want at the moment is an easy way to install the repo version of ocp-indent. I guess since it doesn't install at the moment with pin the package description will have to be updated anyway. The idea is to avoid these things of becoming desynchronized.
</I>
I wonder if an upstream opam-repository-unstable makes sense here, which always points to the bleeding-edge version of a package.  This would also be useful for OCamlot to test, although very prone to breakage.  @dsheets, any thoughts on this?

The issue is that adding that remote would pull in every single bleeding edge package, without having a apt-style pin to only pull in a selected one.

On the other hand, it's quite common for bleeding-edge packages to depend on other unreleased packages, so this is necessary in the general case.

&gt;<i> 
</I>&gt;<i> Because it's overkill for what I want to do now. And in fact I think these ideas could have lead to simpler workflows (to distribute your software just tell people to `opam add-pkg url-to-git-repo`) and a simpler design for opam (suppress the notion of opam repository, leaving only the notion of package and if your package descriptions differ from what upstream provides you fork the package with an automatic rebase on pull).  
</I>
I agree with the desire for simpler workflows.  For the moment though (given that the core of OPAM's design is unlikely to change drastically), it would be good to assemble these over what's already in OPAM 1.0.

For instance, you can create an opam-add-pkg shell script that creates a local filesystem hierarchy with just one package entry.   That maps to 'opam add-pkg &lt;args&gt;' if it's on your PATH when you invoke the opam binary.

-anil
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000131.html">[opam-devel] Does pin git:// really make sense ?
</A></li>
	<LI>Next message: <A HREF="000133.html">[opam-devel] Does pin git:// really make sense ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#132">[ date ]</a>
              <a href="thread.html#132">[ thread ]</a>
              <a href="subject.html#132">[ subject ]</a>
              <a href="author.html#132">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
