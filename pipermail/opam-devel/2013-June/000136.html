<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Does pin git:// really make sense ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Does%20pin%20git%3A//%20really%20make%20sense%20%3F&In-Reply-To=%3C26A03747-0014-43B5-9205-941AC4DBCCE0%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000135.html">
   <LINK REL="Next"  HREF="000137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Does pin git:// really make sense ?</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Does%20pin%20git%3A//%20really%20make%20sense%20%3F&In-Reply-To=%3C26A03747-0014-43B5-9205-941AC4DBCCE0%40recoil.org%3E"
       TITLE="[opam-devel] Does pin git:// really make sense ?">anil at recoil.org
       </A><BR>
    <I>Mon Jun  3 14:39:02 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000135.html">[opam-devel] Does pin git:// really make sense ?
</A></li>
        <LI>Next message: <A HREF="000137.html">[opam-devel] next opam release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#136">[ date ]</a>
              <a href="thread.html#136">[ thread ]</a>
              <a href="subject.html#136">[ subject ]</a>
              <a href="author.html#136">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3 Jun 2013, at 14:22, Daniel B&#252;nzli &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">daniel.buenzli at erratique.ch</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> Le lundi, 3 juin 2013 &#224; 11:59, Anil Madhavapeddy a &#233;crit :
</I>&gt;<i> 
</I>&gt;&gt;<i> In general, it's preferable to separate the packaging from the sources since they change at different rates. For instance, Debian packages recommend the same thing:
</I>&gt;&gt;<i> <A HREF="https://github.com/OCamlPro/opam/issues/149#issuecomment-16041625">https://github.com/OCamlPro/opam/issues/149#issuecomment-16041625</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I'm not sure I'm really convinced by that argument for me a package manager like debian (end-user oriented) is still something quite different from opam (developer oriented).  
</I>&gt;<i> 
</I>&gt;<i> Besides it's not because they are in the git repo that they need to be tied to the corresponding version checkout (keep in the repo a map from versions to checkout that have the correct metadata for the version). I quite like this idea of self-describing repos that you can navigate by following references to commits, it looks a lot like the web where you gradually follows references that are returned in the representations you ask.  Anyways.
</I>
Note that you can already do this if you really want. 

You just need the OPAM files in your repository in a packages/&lt;version&gt; directory, and you can just add the repo as a remote.  It used to work in early OPAM, but I stopped doing that a while back, and so haven't tested it recently.  Reports welcome...

&gt;<i> 
</I>&gt;&gt;<i> (Either way, I'd record your use case as a bug on the OPAM tracker to ensure we don't forget this conversation).
</I>&gt;<i> 
</I>&gt;<i> Tried to do that here:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://github.com/OCamlPro/opam/issues/637">https://github.com/OCamlPro/opam/issues/637</A>
</I>&gt;<i> 
</I>&gt;<i> Initially I was planning to have an erratique-unstable repo with git package of all my software with special opam files to build them from a checkout. So that I could easily point to that for people to try the HEAD of one of my packages. I now realize that, as you mentioned before it's a little bit problematic, as it would force them to use the HEAD of all my packages.
</I>
It's still quite useful to have this around for the automatic testing system though.  We could easily configure OCamlot to 'subscribe' to your bleeding edge repo and attempt package builds whenever it has spare resources.  This way you get early notification of breakage rather than waiting for a release.

On the other hand, we need to be careful not to spam the hell out of people when they deliberately break interfaces :-)

-anil

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000135.html">[opam-devel] Does pin git:// really make sense ?
</A></li>
	<LI>Next message: <A HREF="000137.html">[opam-devel] next opam release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#136">[ date ]</a>
              <a href="thread.html#136">[ thread ]</a>
              <a href="subject.html#136">[ subject ]</a>
              <a href="author.html#136">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
