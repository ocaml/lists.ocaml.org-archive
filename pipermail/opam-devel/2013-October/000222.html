<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Ideas from Node.js
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Ideas%20from%20Node.js&In-Reply-To=%3CCABADE77-24B0-453E-A708-CFD33112C698%40gazagnaire.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000221.html">
   <LINK REL="Next"  HREF="000223.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Ideas from Node.js</H1>
    <B>Thomas Gazagnaire</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Ideas%20from%20Node.js&In-Reply-To=%3CCABADE77-24B0-453E-A708-CFD33112C698%40gazagnaire.org%3E"
       TITLE="[opam-devel] Ideas from Node.js">thomas at gazagnaire.org
       </A><BR>
    <I>Fri Oct 11 18:27:44 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000221.html">[opam-devel] Ideas from Node.js
</A></li>
        <LI>Next message: <A HREF="000223.html">[opam-devel] Ideas from Node.js
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#222">[ date ]</a>
              <a href="thread.html#222">[ thread ]</a>
              <a href="subject.html#222">[ subject ]</a>
              <a href="author.html#222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>  Instead of three files &quot;descr&quot;, &quot;opam&quot; and &quot;url&quot; they have just one &quot;package.json&quot; file.
</I>&gt;<i> 
</I>&gt;<i>  They directly use the JSON syntax to describe the packages. The syntax is heavier than the one of &quot;opam&quot; files so the advantage is not clear, but this syntax is already known by most programmers / text editors, easily described with a JSON schema and can be parsed by any programming language.
</I>
I've already explained the current design in [1]. Again, the current design is not perfect but I am not really convinced by having a fully JSON-compliant format. However, I you think that's important, feel free to send us patches to add a new supported format and we can discuss how to integrate it properly.

&gt;<i>  Finally, the &quot;package.json&quot; file is located at the root of the sources of a project. This is a more self-contained approach. Someone can even install a package giving the repository Git's url, without registering it on a repository.
</I>
This is done on purpose: package metadata are supposed to change often (because you don't really control the release cycle of libraries a given package depends on) -- if you want to fix a version constraint or if you want to add missing configuration options -- so metadata are better stored in a different place than the package contents (otherwise you have to make a release for every metadata change). Moreover, it let you fix package descriptions when new metadata appear (the best example is the &quot;new&quot; 'depext' field that we will start to populate quite soon in all the already existing packages).

However, for packages being developed, I understand it is more flexible to have both metadata and contents in your package tree. This is not yet possible with OPAM, although you can add an 'opam' file at the root of any pinned package and it will be used instead of the one in the metadata repository. See for instance [2]. The way I would go with this would be to create a local repository with all your dev packages and do what you want with them, but I agree that what you ask could make the life of package developer easier. I'm opening [3] to keep track of that.

--
Thomas

[1] <A HREF="https://github.com/OCamlPro/opam/issues/884">https://github.com/OCamlPro/opam/issues/884</A>
[2] <A HREF="https://github.com/OCamlPro/opam/issues/671">https://github.com/OCamlPro/opam/issues/671</A>
<A HREF="https://github.com/OCamlPro/opam/issues/941">https://github.com/OCamlPro/opam/issues/941</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000221.html">[opam-devel] Ideas from Node.js
</A></li>
	<LI>Next message: <A HREF="000223.html">[opam-devel] Ideas from Node.js
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#222">[ date ]</a>
              <a href="thread.html#222">[ thread ]</a>
              <a href="subject.html#222">[ subject ]</a>
              <a href="author.html#222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
