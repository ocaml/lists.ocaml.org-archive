<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Repository format tools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Repository%20format%20tools&In-Reply-To=%3C207C0738-581F-4FF1-B58A-07F662F1B84D%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000064.html">
   <LINK REL="Next"  HREF="000074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Repository format tools</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Repository%20format%20tools&In-Reply-To=%3C207C0738-581F-4FF1-B58A-07F662F1B84D%40recoil.org%3E"
       TITLE="[opam-devel] Repository format tools">anil at recoil.org
       </A><BR>
    <I>Thu Mar 28 16:42:29 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000064.html">[opam-devel] binary installer 1.0.0 under Cygwin
</A></li>
        <LI>Next message: <A HREF="000074.html">[opam-devel] Repository format tools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65">[ date ]</a>
              <a href="thread.html#65">[ thread ]</a>
              <a href="subject.html#65">[ subject ]</a>
              <a href="author.html#65">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A number of us are assembling quite a few repositories for proper open-source releases. In particular, between Mirage and Xen, I think we have about 40 to work through in the next couple of months.

One thing I'd like to have is some tooling to make it easier to manipulate these groups of repositories.  I've started a repository here:

<A HREF="https://github.com/avsm/opam-repo-tools">https://github.com/avsm/opam-repo-tools</A>

...which builds an opam-changelog binary that can connect to Github and parses the CHANGES file from the repository.  For example:

&gt;<i> $ opam-changelog OCamlPro opam
</I>&gt;<i> 
</I>&gt;<i> 1.0.1
</I>&gt;<i> * By default, turn-on checking of certificates for downloaded dependency archives: use `./configure --disable-certificate-check` to go back to the previous behavior
</I>&gt;<i> * Check the md5sum of downloaded archives when compiling OPAM
</I>&gt;<i> * Improved `opam info` command (more information, non-zero error code when no patterns match)
</I>&gt;<i> * Display OS and OPAM version on internal errors to ease error reporting
</I>&gt;<i> * Fix `opam reinstall` when reinstalling a package wich is a dependency of installed packages (regression introduced in 0.9.5)
</I>&gt;<i> * Export and read `OPAMSWITCH` to be able to call OPAM in different switches
</I>&gt;<i> * `opam-client` can now be used in a toplevel
</I>&gt;<i> * `-n` now means `--no-setup` and not `--no-checksums` anymore
</I>&gt;<i> * Fix stupid typo in detection of FreeBSD archs
</I>&gt;<i> * Fix installation of local compilers with local paths endings with `.../ocaml/`
</I>&gt;<i> 
</I>&gt;<i> 1.0.0
</I>&gt;<i> * Improve the lexer performance (thx to @oandrieu)
</I>&gt;<i> * Fix various typos (thx to @chaudhuri)
</I>&gt;<i> * Fix build issue (thx to @avsm)
</I>&gt;<i> 
</I>
I wanted to find out what else people want.  I'd like to know:

* README: What a repository is for
* TODO: &quot;There be dragons here&quot;
* CONTRIBUTING: Guidelines for sending pull requests, see <A HREF="https://github.com/blog/1184-contributing-guidelines">https://github.com/blog/1184-contributing-guidelines</A>
* CHANGES: See above -- this would be particularly useful to display after an OPAM update, for example.

Some of these are subsumed by various metadata files such as _oasis, but not all the repositories use OASIS, so I'd prefer simple text files in Markdown where possible.

So, does anyone have any strong opinions on this?  I'm inclined to go for the simple CHANGES format that OPAM currently uses (and several Mirage libraries).  But I also notice the Debian changelog format is quite simple and we could adopt that: <A HREF="http://www.debian.org/doc/debian-policy/ch-source.html">http://www.debian.org/doc/debian-policy/ch-source.html</A>

     package (version) distribution(s); urgency=urgency
     [optional blank line(s), stripped]
       * change details
       more change details    
       [blank line(s), included in output of dpkg-parsechangelog]
       * even more change details
     [optional blank line(s), stripped]
      -- maintainer name &lt;email address&gt;[two spaces]  date


-anil
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000064.html">[opam-devel] binary installer 1.0.0 under Cygwin
</A></li>
	<LI>Next message: <A HREF="000074.html">[opam-devel] Repository format tools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65">[ date ]</a>
              <a href="thread.html#65">[ thread ]</a>
              <a href="subject.html#65">[ subject ]</a>
              <a href="author.html#65">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
