<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] One (or more) opam root per projet?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20One%20%28or%20more%29%20opam%20root%20per%20projet%3F&In-Reply-To=%3C54910709-7D28-445C-9158-53302BFEB941%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000918.html">
   <LINK REL="Next"  HREF="000920.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] One (or more) opam root per projet?</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20One%20%28or%20more%29%20opam%20root%20per%20projet%3F&In-Reply-To=%3C54910709-7D28-445C-9158-53302BFEB941%40recoil.org%3E"
       TITLE="[opam-devel] One (or more) opam root per projet?">anil at recoil.org
       </A><BR>
    <I>Mon Jan 26 21:14:44 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000918.html">[opam-devel] One (or more) opam root per projet?
</A></li>
        <LI>Next message: <A HREF="000920.html">[opam-devel] One (or more) opam root per projet?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#919">[ date ]</a>
              <a href="thread.html#919">[ thread ]</a>
              <a href="subject.html#919">[ subject ]</a>
              <a href="author.html#919">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The major difference between switch and roots is that remotes are shared across switches. Pins are already per-switch.

There's a good case to be made for a per-project OPAM installation, especially for OCaml applications that just want to build a binary with the minimum hassle (such as Facebook's Flow static analyser).  See here for a discussion on the topic:
<A HREF="https://github.com/ocaml/opam/issues/1372">https://github.com/ocaml/opam/issues/1372</A> &lt;<A HREF="https://github.com/ocaml/opam/issues/1372">https://github.com/ocaml/opam/issues/1372</A>&gt;

I'd quite like to see an `opam-local` script as discussed in that issue.  It should be a lot easier now that OPAM 1.2 has been released.

-anil

&gt;<i> On 26 Jan 2015, at 20:58, Gabriel Scherer &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">gabriel.scherer at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Dear opam-devel,
</I>&gt;<i> 
</I>&gt;<i> Guillaume Claret (one of the Coq developpers) has been experimenting with using one OPAM root for each of his software projects, instead of using global switches.
</I>&gt;<i> 
</I>&gt;<i>   <A HREF="http://coq-blog.clarus.me/use-opam-for-coq.html">http://coq-blog.clarus.me/use-opam-for-coq.html</A> &lt;<A HREF="http://coq-blog.clarus.me/use-opam-for-coq.html">http://coq-blog.clarus.me/use-opam-for-coq.html</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> I have a personal preference for keeping using switches that I'm familiar with and seem more idiomatic in OCaml usage (and also compiling Coq in each project would remind me too much of my Gentoo years), but Guillaume points out that it has evolved to be standard usage in the Node/npm community (and with Python/virtualenv I think), and that it can solve incompatible-version headaches by having a finer granularity. More generally the rationale seems to be &quot;local is better than global&quot;, which sounds reasonable.
</I>&gt;<i> 
</I>&gt;<i> (Besides compilation time and duplication of efforts -- that could be partially solved if/when binary packages where to see the light -- a good argument in favor of switches would be the ability to install programs across multiple switches in the same root, eg. opam compiler-conf and similiar scripts.)
</I>&gt;<i> 
</I>&gt;<i> Do you know of other users having converged towards that per-project scheme? Is there tool support, or interest in eventually supporting, for this mode of use in upstream OPAM?
</I>&gt;<i> _______________________________________________
</I>&gt;<i> opam-devel mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/opam-devel/attachments/20150126/ca544b3d/attachment.html">http://lists.ocaml.org/pipermail/opam-devel/attachments/20150126/ca544b3d/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000918.html">[opam-devel] One (or more) opam root per projet?
</A></li>
	<LI>Next message: <A HREF="000920.html">[opam-devel] One (or more) opam root per projet?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#919">[ date ]</a>
              <a href="thread.html#919">[ thread ]</a>
              <a href="subject.html#919">[ subject ]</a>
              <a href="author.html#919">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
