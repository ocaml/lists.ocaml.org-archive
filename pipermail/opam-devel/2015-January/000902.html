<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] OPAM 1.1 backwards-compatibility
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.1%20backwards-compatibility&In-Reply-To=%3C2144244.3KogYr9aJ3%40agaric%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000904.html">
   <LINK REL="Next"  HREF="000908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] OPAM 1.1 backwards-compatibility</H1>
    <B>Louis Gesbert</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.1%20backwards-compatibility&In-Reply-To=%3C2144244.3KogYr9aJ3%40agaric%3E"
       TITLE="[opam-devel] OPAM 1.1 backwards-compatibility">louis.gesbert at ocamlpro.com
       </A><BR>
    <I>Tue Jan 20 00:47:29 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000904.html">[opam-devel] OPAM 1.1 backwards-compatibility
</A></li>
        <LI>Next message: <A HREF="000908.html">[opam-devel] adding OPAM pkg-config path to env
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#902">[ date ]</a>
              <a href="thread.html#902">[ thread ]</a>
              <a href="subject.html#902">[ subject ]</a>
              <a href="author.html#902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the follow-ups. What I'm advocating is _not_ dropping 1.1 support at the moment, but switching from a state where 'opam init' outputs tens of errors, later fixed by 'opam update', to one where it fails. I think most users would get scared enough in any case to either look up the issue or run away, and in either case there is a very simple workaround: `opam init <A HREF="https://opam.ocaml.org/1.1`.">https://opam.ocaml.org/1.1`.</A> There is no known issue if initialisation is already done.

On the other hand, if this is deemed critical, it's still possible to make the errors go away by swapping the repos. I'm a bit short on feedback to reliably judge how important it may be.

&gt;<i> I think the priority is to update <A HREF="https://github.com/ocaml/opam/wiki/Distributions">https://github.com/ocaml/opam/wiki/Distributions</A>
</I>
Indeed, it's largely outdated. I'll take care of it / ping the maintainers.

&gt;<i> Also, I know it never seems like the right time to do this, but testing that
</I>&gt;<i> OPAM 1.3dev does *not* have this problem is extremely important.  It would
</I>&gt;<i> be nice if the trunk branch of OPAM had a deliberate syntax mismatch and
</I>&gt;<i> was doing this redirection/rewrite dance as a matter of course.
</I>
I second, we can never be careful enough in these matters. The 'init' bug is fixed in 1.2, it has a better parser, and it attempts to be tolerant on files declared with a newer version... but all that gives no guarantee that things won't go wrong. Without that bug, though, OPAM 1.1 should never have had to read 1.2 opam files.

I'll setup a <A HREF="https://opam.ocaml.org/1.3">https://opam.ocaml.org/1.3</A> mirror, without changes at the moment, for the dev version to point to. The version I'm working on at the moment is still 1.2.1 beta though, with no difference in file format. Let's take this chance to ensure the 1.2.1-&gt;1.3 migration with be smooth.

Cheers,
Louis



</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000904.html">[opam-devel] OPAM 1.1 backwards-compatibility
</A></li>
	<LI>Next message: <A HREF="000908.html">[opam-devel] adding OPAM pkg-config path to env
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#902">[ date ]</a>
              <a href="thread.html#902">[ thread ]</a>
              <a href="subject.html#902">[ subject ]</a>
              <a href="author.html#902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
