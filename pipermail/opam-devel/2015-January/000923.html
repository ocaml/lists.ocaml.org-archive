<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] One (or more) opam root per projet?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20One%20%28or%20more%29%20opam%20root%20per%20projet%3F&In-Reply-To=%3C3889466.0yNLLFqpuz%40agaric%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000920.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] One (or more) opam root per projet?</H1>
    <B>Louis Gesbert</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20One%20%28or%20more%29%20opam%20root%20per%20projet%3F&In-Reply-To=%3C3889466.0yNLLFqpuz%40agaric%3E"
       TITLE="[opam-devel] One (or more) opam root per projet?">louis.gesbert at ocamlpro.com
       </A><BR>
    <I>Wed Jan 28 01:33:43 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000920.html">[opam-devel] One (or more) opam root per projet?
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#923">[ date ]</a>
              <a href="thread.html#923">[ thread ]</a>
              <a href="subject.html#923">[ subject ]</a>
              <a href="author.html#923">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>An important prerequisite for this kind of feature would be tracking of a package's files by OPAM, so let's put first things first: if this is indeed important, let's try to give OPAM more control over what is done at installation/removal of packages in the next version.

On the locality of OPAM installations, the more I think about it, the more it seems to me that the best would be to simply allow specifying a custom prefix at switch creation time. All archives, caches and configuration files of OPAM stay in .opam, but packages' installed files, on the other hand, are allowed at a global location, or locally in a subdir of your project. You get the best of both worlds, don't have as much overhead (space, time, network and maintainance wise) as with multiple roots, and npm users aren't too disoriented.

We could imagine that, some day in the future, it'll be possible to detect that a package has already been installed in another switch, with the exact same dependencies, and link it rather than rebuild it. That would also make a very cheap &quot;clone switch&quot; feature available.

&gt;<i> - Daniel B&#252;nzli, 26/01/2015 22:26 -
</I>&gt;<i> Le lundi, 26 janvier 2015 &#224; 21:58, Gabriel Scherer a &#233;crit :
</I>&gt;<i> &gt; (Besides compilation time and duplication of efforts -- that could be partially solved if/when binary packages where to see the light
</I>&gt;<i> 
</I>&gt;<i> For that I'd rather like to have the ability to install multiple version of a package in opam. Locally installed packages could then just be hard links to packages installed in ~/.opam.  
</I>&gt;<i> 
</I>&gt;<i> In general, I would also be interested in managing the free variables of my projects locally.  
</I>&gt;<i> 
</I>&gt;<i> Daniel
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> opam-devel mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;<i> 
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000920.html">[opam-devel] One (or more) opam root per projet?
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#923">[ date ]</a>
              <a href="thread.html#923">[ thread ]</a>
              <a href="subject.html#923">[ subject ]</a>
              <a href="author.html#923">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
