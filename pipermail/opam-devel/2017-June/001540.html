<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] [Caml-list] [rfc] deprecating opam 1.2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20%5BCaml-list%5D%20%5Brfc%5D%20deprecating%20opam%201.2.0&In-Reply-To=%3CF1036FE3-514D-4269-920C-8C272A489E30%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001539.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] [Caml-list] [rfc] deprecating opam 1.2.0</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20%5BCaml-list%5D%20%5Brfc%5D%20deprecating%20opam%201.2.0&In-Reply-To=%3CF1036FE3-514D-4269-920C-8C272A489E30%40recoil.org%3E"
       TITLE="[opam-devel] [Caml-list] [rfc] deprecating opam 1.2.0">anil at recoil.org
       </A><BR>
    <I>Sun Jun 11 19:27:25 BST 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="001539.html">[opam-devel] [Caml-list] [rfc] deprecating opam 1.2.0
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1540">[ date ]</a>
              <a href="thread.html#1540">[ thread ]</a>
              <a href="subject.html#1540">[ subject ]</a>
              <a href="author.html#1540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2 Jun 2017, at 11:09, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">anil at recoil.org</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> [ this is cross-posted from <A HREF="https://discuss.ocaml.org/t/rfc-deprecating-opam-1-2-0/332">https://discuss.ocaml.org/t/rfc-deprecating-opam-1-2-0/332</A> ]
</I>&gt;<i> 
</I>&gt;<i> This is all for remaining users of OPAM 1.2.0, to see if it can be actively deprecated in favour of OPAM 1.2.2 and higher. 
</I>&gt;<i> 
</I>&gt;<i> ### Why deprecate opam 1.2.0
</I>&gt;<i> 
</I>&gt;<i> OPAM 1.2.0 was released in October 2014, and saw rapid uptake from the community.  We did some rapid bugfixing to solve common problems, and OPAM 1.2.2 was released in April 2015.  Since then, 1.2.2 has been a very solid release and has been the stable version in use to date.
</I>&gt;<i> 
</I>&gt;<i> Unfortunately, part of the bugfixes in the 1.2.2 series resulted in an `opam` file format that is not fully backwards compatible with the 1.2.0 syntax, and the net effect is that users of 1.2.0 now see a broken package repository.  Our CI tests for new packages regularly fail on 1.2.0, even if they succeed on 1.2.2 and higher.
</I>&gt;<i> 
</I>&gt;<i> As we prepare the plan for [1.2.2 -&gt; 2.0 migration](<A HREF="https://github.com/ocaml/opam/issues/2918">https://github.com/ocaml/opam/issues/2918</A>), it is clear that we need a &quot;one-in one-out&quot; policy on releases in order to preserve the overall health of the package repository -- maintaining three separate releases and formats of the repository is not practical.  Therefore the 1.2.0 release needs to be actively deprecated, and we could use some help from the community to make this happen.
</I>&gt;<i> 
</I>&gt;<i> ### Who is still using opam 1.2.0?
</I>&gt;<i> 
</I>&gt;<i> I found that the Debian Jessie (stable) release includes 1.2.0, and this is probably the last major distribution including it.  The [Debian Stretch](<A HREF="https://wiki.debian.org/DebianStretch">https://wiki.debian.org/DebianStretch</A>) is due to become the stable release on the 17th June 2017, and so at that point there will hopefully be no distributions actively sending opam 1.2.0 out.
</I>&gt;<i> 
</I>&gt;<i> Is there anyone else that is still packaging 1.2.0?  Please comment here if so, and we should move them away.
</I>&gt;<i> 
</I>&gt;<i> ### How do we deprecate it?
</I>&gt;<i> 
</I>&gt;<i> Due to the format changes happening in a minor version, it's a bit difficult to give opam 1.2.0 users a smooth transition experience, to my knowledge (Louis Gesbert or Thomas Gazagnaire may correct me here).  I would propose:
</I>&gt;<i> 
</I>&gt;<i> - putting a notice on opam.ocaml.org that 1.2.2 is the only supported stable release.
</I>&gt;<i> - can we somehow put in a request to debian-stable to add a post-installation message that the upstream package will no longer work since the repository? 
</I>
Thank you all for the helpful feedback. Since there have been no more messages or objections, I have started the process off here:

<A HREF="https://github.com/ocaml/opam-repository/pull/9477">https://github.com/ocaml/opam-repository/pull/9477</A> &lt;<A HREF="https://github.com/ocaml/opam-repository/pull/9477">https://github.com/ocaml/opam-repository/pull/9477</A>&gt;

When I merge it, I will also update opam.ocaml.org &lt;<A HREF="http://opam.ocaml.org/">http://opam.ocaml.org/</A>&gt; with a deprecation notice.  If you do spot any distributions packaging opam 1.2.0, please do feel free to contact them to request an upgrade to a supported release such as 1.2.2.

regards,
Anil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/opam-devel/attachments/20170611/dfbc2419/attachment.html">http://lists.ocaml.org/pipermail/opam-devel/attachments/20170611/dfbc2419/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001539.html">[opam-devel] [Caml-list] [rfc] deprecating opam 1.2.0
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1540">[ date ]</a>
              <a href="thread.html#1540">[ thread ]</a>
              <a href="subject.html#1540">[ subject ]</a>
              <a href="author.html#1540">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
