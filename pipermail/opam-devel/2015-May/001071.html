<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] On the new mixed mode pins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20On%20the%20new%20mixed%20mode%20pins&In-Reply-To=%3CCBB65E25D9CE4670BC1C6D167C80272E%40erratique.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001070.html">
   <LINK REL="Next"  HREF="001072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] On the new mixed mode pins</H1>
    <B>Daniel B&#252;nzli</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20On%20the%20new%20mixed%20mode%20pins&In-Reply-To=%3CCBB65E25D9CE4670BC1C6D167C80272E%40erratique.ch%3E"
       TITLE="[opam-devel] On the new mixed mode pins">daniel.buenzli at erratique.ch
       </A><BR>
    <I>Sat May 16 12:20:19 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001070.html">[opam-devel] On the new mixed mode pins
</A></li>
        <LI>Next message: <A HREF="001072.html">[opam-devel] On the new mixed mode pins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1071">[ date ]</a>
              <a href="thread.html#1071">[ thread ]</a>
              <a href="subject.html#1071">[ subject ]</a>
              <a href="author.html#1071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le samedi, 16 mai 2015 &#224; 12:11, Thomas Leonard a &#233;crit :
&gt;<i> The problems with the two previous modes were:
</I>&gt;<i>  
</I>&gt;<i> - In VCS mode, you make a change, recompile everything (which often
</I>&gt;<i> takes ages), test it and eventually reaslise your change wasn't
</I>&gt;<i> included because you didn't commit.
</I>&gt;<i>  
</I>
I'm not sure I understand this. If you forget to commit, the pin will not update, so nothing will recompile when you do an `opam update -u` and hence I don't see what takes ages here.  

It seems to me that the desire for mixed-mode was rather to avoid going through the pain of staging/committing/reamending a fix until you are sure it actually works. With that respect it seems to me that the &#8212;dirty flags solves that problem quite well without the brittles of mixed-mode (and actually something I would be keen to use myself).

I will also add that in practice mixed-mode can end up wasting a lot of your time as it can quickly ruin your opam install if you are not careful about the working directory of the pinned repo and that the package has many dependencies (case in point: cmdliner). Again, making sure that the working repo of each of your pin is in the right state whenever you `opam update -u` is unreasonable and cannot scale beyond a few pins.

&gt;<i> Since the old mode is still available, the question is just about
</I>&gt;<i> choosing a default, which comes down to user expectations. My
</I>&gt;<i> expectation is that pinning a directory gets you the directory, not a
</I>&gt;<i> branch in its VCS, but only a user survey would reveal what other
</I>&gt;<i> people expect.
</I>&gt;<i>  
</I>
I don't think we need a user survey here. Consistency can be our guide. The fact that at the moment:

opam pin -k git $PATH
opam pin -k git $URL

differ widely in the operational end results should raise some flags.

Best,

Daniel
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001070.html">[opam-devel] On the new mixed mode pins
</A></li>
	<LI>Next message: <A HREF="001072.html">[opam-devel] On the new mixed mode pins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1071">[ date ]</a>
              <a href="thread.html#1071">[ thread ]</a>
              <a href="subject.html#1071">[ subject ]</a>
              <a href="author.html#1071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
