<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] mailing liste for opam-repo maintainers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20mailing%20liste%20for%20opam-repo%20maintainers&In-Reply-To=%3C9992BD70-07AB-4A73-B164-442990E3E437%40gazagnaire.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001388.html">
   <LINK REL="Next"  HREF="001375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] mailing liste for opam-repo maintainers</H1>
    <B>Thomas Gazagnaire</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20mailing%20liste%20for%20opam-repo%20maintainers&In-Reply-To=%3C9992BD70-07AB-4A73-B164-442990E3E437%40gazagnaire.org%3E"
       TITLE="[opam-devel] mailing liste for opam-repo maintainers">thomas at gazagnaire.org
       </A><BR>
    <I>Tue Feb 23 09:02:40 GMT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="001388.html">[opam-devel] mailing liste for opam-repo maintainers
</A></li>
        <LI>Next message: <A HREF="001375.html">[opam-devel] mailing liste for opam-repo maintainers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1391">[ date ]</a>
              <a href="thread.html#1391">[ thread ]</a>
              <a href="subject.html#1391">[ subject ]</a>
              <a href="author.html#1391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> Indeed -- GitHub does seem to repack archives with different distribution checksums, quite probably when they change their.
</I>&gt;<i> 
</I>&gt;<i> I was not aware of this -- I assumed archives were built deterministically.
</I>&gt;<i> 
</I>&gt;<i> Do you know how often that happens? Is it ok for maintainers to rely
</I>&gt;<i> on those release archives, if they are ready to update the checksum
</I>&gt;<i> whenever it changes? Or is that inherently unstable and should we add
</I>&gt;<i> an &quot;opam lint&quot; rule to warn about these URLs?
</I>&gt;<i> 
</I>&gt;<i> I use this for the ocamlbuild package, because it is extremely
</I>&gt;<i> convenient. I don't have another static hosting page than the github
</I>&gt;<i> repo right now (not even a .github.io page), and I would rather avoid
</I>&gt;<i> it if reasonable.
</I>
GH archives are in practice stable. Bitbucket ones seem to be re-generated regularly.

Thomas

&gt;<i> 
</I>&gt;<i> On Mon, Feb 22, 2016 at 10:59 AM, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">anil at recoil.org</A>&gt; wrote:
</I>&gt;&gt;<i> On 22 Feb 2016, at 15:41, David Allsopp &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">dra-news at metastack.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> No they would not &#8211; getting people on the conversation thread of a PR is vastly superior; it groups the information and discussion in the place where it&#8217;s merged and archives it there. I have certainly had to bisect opam-repository before, so being able to go from a SHA1-&gt;Merge-&gt;PR-&gt;Conversation is very useful.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'm in complete agreement with David here.  We already have an established process for submitting a PR, and I'd strongly prefer that we do not create another out-of-band mechanism (email) to contact people.  Why not just create an issue in opam-repository and assign to the submitter, for instance?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Fabrice: I think in the short term, not CCing opam-devel for such e-mails would be appreciated.  I tend to just e-mail people directly if they really don't respond.
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On this string of PRs, I&#8217;m wondering if you&#8217;re treating the symptom, and not the cause. Each PR so far is to do with an altered checksum from a code service&#8217;s binary release system which suggests that they&#8217;re not canonical (i.e. that they&#8217;ve changed the zip in what should be a trivial manner &#8211; e.g. putting the files in a different order). Rather than fixing the checksums, and causing this to happen again at the whim of a zip library, would it not be better to put in place a policy that zip links should not be to GitHub/BitBucket/Whatever auto-generating URLs but to actual static files (e.g. on github.io)?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Indeed -- GitHub does seem to repack archives with different distribution checksums, quite probably when they change their.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On the broader question that Fabrice raises about access rights to individual packages, it's probably worth bisecting the contributors and why packages need to be affected:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> - individual package maintainers: submit a single package, and tend not to get regular updates about its health, for instance when a related package is upgraded.  We do need a mechanism to update a maintainer about when a package is broken by an unrelated change.  Right now, if this happens we add an upper bound constraint, but this doesn't remind the package maintainer to release a version compatible with the new related package.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> - distribution porters: adding depexts to a lot of packages (I've just rolled through and added Alpine and Fedora for instance), or minor patches hidden behind an `os` constraint.  For this work, blocking on 10-20 package maintainers would be very onerous and hold back the health of the repository for that work.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> - architecture porters: often have a number of short-term fixes for (e.g.) ARM, and these are placed behind patch constraints so that for an x86 user, the OPAM experience is unmodified.  These then need to be rolled upstream.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'm struggling a little to see what the specific problem that Fabrice is raising is, which appears to be the desire to &quot;lock&quot; a package against commits until he approves it.  This is a reasonable request and should be as simple as the current active repository maintainers not merging requests that touch OCamlPro packages until approved by Fabrice (and/or other OCamlPro staff?).  If this results in a hanging PR (as has happened in the past with ocp-build errors due to a lack of resources upstream to maintain it), then we need to just take an executive decision and either commit it or close the PR.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I don't see anyone else who wants this: I am quite happy for people doing bulk builds to generate and improve constraints against my packages.  More generally, lightweight tooling to make it easier to enforce such constraints locally would be very useful -- for instance, something to probe for disparities in source archives and the `opam` metadata in the repository and alert for inconsistencies.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> regards,
</I>&gt;&gt;<i> Anil
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> opam-devel mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> opam-devel mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001388.html">[opam-devel] mailing liste for opam-repo maintainers
</A></li>
	<LI>Next message: <A HREF="001375.html">[opam-devel] mailing liste for opam-repo maintainers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1391">[ date ]</a>
              <a href="thread.html#1391">[ thread ]</a>
              <a href="subject.html#1391">[ subject ]</a>
              <a href="author.html#1391">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
