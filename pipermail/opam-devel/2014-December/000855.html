<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] OPAM Roadmap -- what next ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%20Roadmap%20--%20what%20next%20%3F&In-Reply-To=%3CCAG4opy_%2BtOEU4L5_2ZqSEG1tYJot%3DOB4jrcrVEynKHYbGKnnDA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000854.html">
   <LINK REL="Next"  HREF="000858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] OPAM Roadmap -- what next ?</H1>
    <B>Thomas Leonard</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%20Roadmap%20--%20what%20next%20%3F&In-Reply-To=%3CCAG4opy_%2BtOEU4L5_2ZqSEG1tYJot%3DOB4jrcrVEynKHYbGKnnDA%40mail.gmail.com%3E"
       TITLE="[opam-devel] OPAM Roadmap -- what next ?">talex5 at gmail.com
       </A><BR>
    <I>Sun Dec 21 13:37:34 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000854.html">[opam-devel] OPAM Roadmap -- what next ?
</A></li>
        <LI>Next message: <A HREF="000858.html">[opam-devel] OPAM Roadmap -- what next ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#855">[ date ]</a>
              <a href="thread.html#855">[ thread ]</a>
              <a href="subject.html#855">[ subject ]</a>
              <a href="author.html#855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21 December 2014 at 13:26, Peter Zotov &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">whitequark at whitequark.org</A>&gt; wrote:
&gt;<i> On 2014-12-21 16:19, Daniel B&#252;nzli wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Le dimanche, 21 d&#233;cembre 2014 &#224; 13:43, Peter Zotov a &#233;crit :
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Imagine four packages installed:
</I>&gt;&gt;&gt;<i> * B.1
</I>&gt;&gt;&gt;<i> * B.2
</I>&gt;&gt;&gt;<i> * A.1 depends: B&lt;2
</I>&gt;&gt;&gt;<i> * A.2 depends B&gt;=2
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Now if you request A.1, the wrong version of B will get pulled in.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Request through what ? I think your scenario is underspecified. If
</I>&gt;&gt;<i> A.1's META file specifies that it requires B.1 then B.1 will be pulled
</I>&gt;&gt;<i> in.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Through ocamlfind, of course, there's nothing else now.
</I>&gt;<i>
</I>&gt;<i> Sure. But note that ocamlfind explicitly refuses to deal with versioning
</I>&gt;<i> constraints; it's even in the manual. So the dependencies of neither
</I>&gt;<i> A.1 nor A.2 are not expressible in META.
</I>&gt;<i>
</I>&gt;<i> Additionally, this requires more work from package maintainers, and
</I>&gt;<i> I can't imagine how to convince them to do it. (I do not think
</I>&gt;<i> it is possible to automatically infer those from opam fields.)
</I>
If the information can't be inferred from opam fields, then how can
things even work now? Somehow, there must be valid and invalid
combinations, and it must be possible to know what they are. e.g. a
valid (per-build) combination in a world of parallel installs is any
combination that could be installed now.

FWIW, 0install has always done parallel installs and it hasn't been a
problem, except that you always have to start your build from a
0install-aware tool (or an environment created by one). The problem is
mainly that people want to continue with their current habbits (e.g.
unpack source archive and run make). Some change in tools or habits is
needed.


-- 
Dr Thomas Leonard        <A HREF="http://0install.net/">http://0install.net/</A>
GPG: 9242 9807 C985 3C07 44A6  8B9A AE07 8280 59A5 3CC1
GPG: DA98 25AE CAD0 8975 7CDA  BD8E 0713 3F96 CA74 D8BA
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000854.html">[opam-devel] OPAM Roadmap -- what next ?
</A></li>
	<LI>Next message: <A HREF="000858.html">[opam-devel] OPAM Roadmap -- what next ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#855">[ date ]</a>
              <a href="thread.html#855">[ thread ]</a>
              <a href="subject.html#855">[ subject ]</a>
              <a href="author.html#855">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
