<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] What context do install an remove run in?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20What%20context%20do%20install%20an%20remove%20run%20in%3F&In-Reply-To=%3C86d1xtdifs.fsf%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001206.html">
   <LINK REL="Next"  HREF="001208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] What context do install an remove run in?</H1>
    <B>Malcolm Matalka</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20What%20context%20do%20install%20an%20remove%20run%20in%3F&In-Reply-To=%3C86d1xtdifs.fsf%40gmail.com%3E"
       TITLE="[opam-devel] What context do install an remove run in?">mmatalka at gmail.com
       </A><BR>
    <I>Mon Sep  7 22:32:23 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001206.html">[opam-devel] What context do install an remove run in?
</A></li>
        <LI>Next message: <A HREF="001208.html">[opam-devel] What context do install an remove run in?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1207">[ date ]</a>
              <a href="thread.html#1207">[ thread ]</a>
              <a href="subject.html#1207">[ subject ]</a>
              <a href="author.html#1207">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">anil at recoil.org</A>&gt; writes:

&gt;<i> On 6 Sep 2015, at 19:49, Malcolm Matalka &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">mmatalka at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> This is unclear to be from the documentation, but what context to the
</I>&gt;&gt;<i> commands `install` and `remove` sections of an opam file run in?  I
</I>&gt;&gt;<i> would assume `install` runs in the directory of the built source, but
</I>&gt;&gt;<i> does `remove` have that same guarantee?  Would that also mean that the
</I>&gt;&gt;<i> built source is kept around with the package?  I ask because I would
</I>&gt;&gt;<i> like to simplify my opam files by having a 'make remove' entry.
</I>&gt;<i>
</I>&gt;<i> They run in an unpacked source tree as the pwd.  However, this is not
</I>&gt;<i> cached across build runs -- instead, the source is freshly unpacked and
</I>&gt;<i> made available to the remove target.  So you just need to make sure
</I>&gt;<i> that you run the `configure` script if relevant.
</I>&gt;<i>
</I>&gt;<i> There's a special case for `ocamlfind remove` that doesn't do this;
</I>&gt;<i> this will likely have to be generalised as OPAM moves the OCaml-specific
</I>&gt;<i> logic into a separate plugin.
</I>
Can I tell opam to figure this out via ocamlfind on its own or do is the
special case just checking if the command is &quot;ocamlfind remove ...&quot;?
Basically, I'm trying to make all of my opam files almost exactly the
same, except for deps, and push the unique actions into the package
itself, like install and remove.  The hope is to simplify making opam
packages of my tools.

&gt;<i>
</I>&gt;<i> -anil
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001206.html">[opam-devel] What context do install an remove run in?
</A></li>
	<LI>Next message: <A HREF="001208.html">[opam-devel] What context do install an remove run in?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1207">[ date ]</a>
              <a href="thread.html#1207">[ thread ]</a>
              <a href="subject.html#1207">[ subject ]</a>
              <a href="author.html#1207">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
