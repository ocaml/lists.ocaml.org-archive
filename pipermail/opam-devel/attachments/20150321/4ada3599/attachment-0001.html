<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Le sam.&nbsp;21&nbsp;mars&nbsp;2015&nbsp;à 00:22,&nbsp;Török&nbsp;Edwin&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:edwin%2Bml-ocaml@etorok.net&quot;&gt;edwin+ml-ocaml@etorok.net&lt;/a&gt;&gt;&nbsp;a&nbsp;écrit :&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
[On&nbsp;Anil&#39;s&nbsp;suggestion&nbsp;I&#39;m&nbsp;moving&nbsp;the&nbsp;discussion&nbsp;to&nbsp;opam-devel.&lt;br&gt;<br>
TL;DR:&nbsp;I&nbsp;am&nbsp;about&nbsp;to&nbsp;start&nbsp;writing&nbsp;opam2{rpm,deb}&nbsp;for&nbsp;my&nbsp;package&nbsp;and&nbsp;its&nbsp;dependencies.&nbsp;Does&nbsp;anyone&nbsp;else&nbsp;need&nbsp;such&nbsp;a&nbsp;tool&nbsp;or&nbsp;want&nbsp;to&nbsp;help?]&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;about&nbsp;to&nbsp;package&nbsp;my&nbsp;own&nbsp;OCaml&nbsp;application&nbsp;for&nbsp;Fedora&nbsp;and&nbsp;Debian,&nbsp;which&nbsp;indirectly&nbsp;depends&nbsp;on&nbsp;12&nbsp;opam&nbsp;packages&lt;br&gt;<br>
(3&nbsp;of&nbsp;which&nbsp;already&nbsp;review&nbsp;requests&nbsp;on&nbsp;Fedora&#39;s&nbsp;bugzilla&nbsp;as&nbsp;they&nbsp;are&nbsp;shared&nbsp;dependencies&nbsp;with&nbsp;opam&nbsp;itself).&lt;br&gt;<br>
I&nbsp;am&nbsp;looking&nbsp;for&nbsp;some&nbsp;automation&nbsp;in&nbsp;preparing&nbsp;spec&nbsp;and&nbsp;Debian&nbsp;templates,&nbsp;for&nbsp;checking&nbsp;their&nbsp;quality,&nbsp;and&nbsp;tracking&nbsp;the&nbsp;packages&nbsp;through&nbsp;their&nbsp;lifecycle,&lt;br&gt;<br>
and&nbsp;to&nbsp;avoid&nbsp;making&nbsp;the&nbsp;same&nbsp;common&nbsp;mistakes&nbsp;for&nbsp;each&nbsp;package.&lt;br&gt;<br>
&lt;br&gt;<br>
Since&nbsp;such&nbsp;a&nbsp;tool&nbsp;(opam2rpm/opam2deb)&nbsp;doesn&#39;t&nbsp;exist&nbsp;now,&nbsp;I&#39;ll&nbsp;describe&nbsp;what&nbsp;my&nbsp;idea/requirements&nbsp;are.&lt;br&gt;<br>
Please&nbsp;let&nbsp;me&nbsp;know&nbsp;what&nbsp;you&nbsp;think&nbsp;and&nbsp;if&nbsp;you&nbsp;have&nbsp;new&nbsp;/&nbsp;different&nbsp;requirements.&nbsp;Perhaps&nbsp;together&nbsp;we&nbsp;can&nbsp;design/create&nbsp;an&nbsp;opam2rpm&nbsp;tool&nbsp;that&nbsp;will&nbsp;be&nbsp;useful&nbsp;for&nbsp;more&nbsp;than&nbsp;just&nbsp;a&nbsp;oneshot&nbsp;conversion.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;quite&nbsp;new&nbsp;to&nbsp;packaging,&nbsp;have&nbsp;just&nbsp;recently&nbsp;went&nbsp;through&nbsp;packaging&nbsp;another&nbsp;(non-OCaml)&nbsp;application&nbsp;for&nbsp;Fedora&nbsp;so&nbsp;I&#39;ve&lt;br&gt;<br>
documented&nbsp;a&nbsp;package&#39;s&nbsp;(and&nbsp;package&nbsp;maintainer&#39;s)&nbsp;states&nbsp;here:&nbsp;&lt;a&nbsp;href=&quot;https://fedoraproject.org/wiki/Fedora_Package_Lifecycle_notes&quot;&nbsp;target=&quot;_blank&quot;&gt;https://fedoraproject.org/&lt;u&gt;&lt;/u&gt;wiki/Fedora_Package_Lifecycle_&lt;u&gt;&lt;/u&gt;notes&lt;/a&gt;.&lt;br&gt;<br>
This&nbsp;is&nbsp;still&nbsp;rather&nbsp;incomplete&nbsp;and&nbsp;rough,&nbsp;take&nbsp;it&nbsp;with&nbsp;a&nbsp;grain&nbsp;of&nbsp;salt&nbsp;and&nbsp;consult&nbsp;the&nbsp;official&nbsp;docs&nbsp;when&nbsp;in&nbsp;doubt.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;we&nbsp;have&nbsp;now:&lt;br&gt;<br>
*&nbsp;opam&nbsp;metadata:&nbsp;depexts,&nbsp;conf-*&nbsp;opam&nbsp;packages,&nbsp;build&nbsp;rules,&nbsp;constraints,&nbsp;etc.&lt;br&gt;<br>
*&nbsp;opam-lib&lt;br&gt;<br>
*&nbsp;opam-repository,&nbsp;where&nbsp;some&nbsp;packages&nbsp;implicitly&nbsp;assume&nbsp;a&nbsp;&quot;modern&quot;&nbsp;Linux&nbsp;environment&nbsp;(has&nbsp;native&nbsp;compiler,&nbsp;dynlink,&nbsp;certain&nbsp;tools&nbsp;and&nbsp;C&nbsp;headers,&nbsp;etc.).&lt;br&gt;<br>
For&nbsp;distribution&nbsp;packages&nbsp;all&nbsp;these&nbsp;dependencies&nbsp;will&nbsp;have&nbsp;to&nbsp;be&nbsp;made&nbsp;explicit&lt;br&gt;<br>
*&nbsp;oasis2deb,&nbsp;generates&nbsp;decent&nbsp;starting&nbsp;point&nbsp;for&nbsp;a&nbsp;Debian&nbsp;package,&nbsp;but&nbsp;fails&nbsp;#3&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Not&nbsp;sure&nbsp;to&nbsp;understand&nbsp;how&nbsp;oasis2deb&nbsp;fails&nbsp;#3&nbsp;(test&nbsp;that&nbsp;build&nbsp;requirement&nbsp;is&nbsp;complete).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;actually&nbsp;declares&nbsp;build&nbsp;dependencies&nbsp;for&nbsp;the&nbsp;source&nbsp;package,&nbsp;but&nbsp;it&nbsp;doesn&#39;t&nbsp;embed&nbsp;the&nbsp;source&nbsp;of&nbsp;the&nbsp;dependencies&nbsp;(which&nbsp;is&nbsp;by&nbsp;the&nbsp;way&nbsp;forbidden&nbsp;by&nbsp;Debian&nbsp;policy)&nbsp;but&nbsp;depends&nbsp;on&nbsp;what&nbsp;should&nbsp;be&nbsp;the&nbsp;package&nbsp;to&nbsp;do&nbsp;it.&nbsp;I.e.&nbsp;it&nbsp;integrates&nbsp;into&nbsp;the&nbsp;target&nbsp;build&nbsp;system.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Example&nbsp;on&nbsp;my&nbsp;dlnasync&nbsp;generated&nbsp;package:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Source:&nbsp;dlnasync&lt;/div&gt;&lt;div&gt;Section:&nbsp;ocaml&lt;/div&gt;&lt;div&gt;Priority:&nbsp;optional&lt;/div&gt;&lt;div&gt;Maintainer:&nbsp;Debian&nbsp;OCaml&nbsp;Maintainers&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:debian-ocaml-maint@lists.debian.org&quot;&gt;debian-ocaml-maint@lists.debian.org&lt;/a&gt;&gt;&lt;/div&gt;&lt;div&gt;Uploaders:&lt;/div&gt;&lt;div&gt; &nbsp;Sylvain&nbsp;Le&nbsp;Gall&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:sylvain@le-gall.net&quot;&gt;sylvain@le-gall.net&lt;/a&gt;&gt;&lt;/div&gt;&lt;div&gt;Build-Depends:&lt;/div&gt;&lt;div&gt; &nbsp;ocaml-nox&nbsp;(&gt;=&nbsp;3.11.1-3~),&lt;/div&gt;&lt;div&gt; &nbsp;ocaml-findlib,&lt;/div&gt;&lt;div&gt; &nbsp;ocaml-base-nox,&lt;/div&gt;&lt;div&gt; &nbsp;libsekred-ocaml-dev&nbsp;(&gt;=&nbsp;0.2.0),&lt;/div&gt;&lt;div&gt; &nbsp;libounit-ocaml-dev&nbsp;(&gt;=&nbsp;2.0.0),&lt;/div&gt;&lt;div&gt; &nbsp;libocamlnet-ocaml-dev&nbsp;(&gt;=&nbsp;3.5.1),&lt;/div&gt;&lt;div&gt; &nbsp;libfileutils-ocaml-dev&nbsp;(&gt;=&nbsp;0.4.2),&lt;/div&gt;&lt;div&gt; &nbsp;libbatteries-ocaml-dev,&lt;/div&gt;&lt;div&gt; &nbsp;libav-tools,&lt;/div&gt;&lt;div&gt; &nbsp;dh-ocaml&nbsp;(&gt;=&nbsp;0.9~),&lt;/div&gt;&lt;div&gt; &nbsp;debhelper&nbsp;(&gt;=&nbsp;7.0.50~)&lt;/div&gt;&lt;div&gt;Standards-Version:&nbsp;3.9.1&lt;/div&gt;&lt;div&gt;Homepage:&nbsp;&lt;a&nbsp;href=&quot;http://forge.ocamlcore.org/projects/dlnasync&quot;&gt;http://forge.ocamlcore.org/projects/dlnasync&lt;/a&gt;&lt;/div&gt;&lt;div&gt;Vcs-Git:&nbsp;git://&lt;a&nbsp;href=&quot;http://git.debian.org/git/pkg-ocaml-maint/packages/dlnasync.git&quot;&gt;git.debian.org/git/pkg-ocaml-maint/packages/dlnasync.git&lt;/a&gt;&lt;/div&gt;&lt;div&gt;Vcs-Browser:&lt;/div&gt;&lt;div&gt; &nbsp;&lt;a&nbsp;href=&quot;http://git.debian.org/?p=pkg-ocaml-maint/packages/dlnasync.git&quot;&gt;http://git.debian.org/?p=pkg-ocaml-maint/packages/dlnasync.git&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;can&nbsp;see&nbsp;that&nbsp;all&nbsp;build&nbsp;dependencies&nbsp;are&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;made&nbsp;this&nbsp;decision&nbsp;on&nbsp;purpose.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;push&nbsp;this&nbsp;kind&nbsp;of&nbsp;tools&nbsp;to&nbsp;build&nbsp;packages&nbsp;to&nbsp;be&nbsp;distributed&nbsp;by&nbsp;the&nbsp;normal&nbsp;RPM/Deb&nbsp;scheme&nbsp;of&nbsp;your&nbsp;distribution,&nbsp;they&nbsp;need&nbsp;to&nbsp;somehow&nbsp;comply&nbsp;with&nbsp;policy.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(I&nbsp;also&nbsp;created&nbsp;tools&nbsp;that&nbsp;DON&#39;T&nbsp;do&nbsp;that&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;publish&nbsp;them&nbsp;because&nbsp;they&nbsp;are&nbsp;basic&nbsp;hacks)&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
What&nbsp;are&nbsp;my&nbsp;requirements?&lt;br&gt;<br>
#1&nbsp;(local)&nbsp;opam&nbsp;repository&nbsp;as&nbsp;input,&nbsp;.spec/Debian&nbsp;as&nbsp;output&lt;br&gt;<br>
#2&nbsp;lint&nbsp;the&nbsp;output&nbsp;(both&nbsp;opam&nbsp;and&nbsp;possibly&nbsp;manually&nbsp;edited&nbsp;spec/Debian),&nbsp;there&nbsp;are&nbsp;already&nbsp;external&nbsp;tools&nbsp;for&nbsp;this&lt;br&gt;<br>
#3&nbsp;test&nbsp;that&nbsp;the&nbsp;build&nbsp;requirements&nbsp;are&nbsp;complete,&nbsp;i.e.&nbsp;it&nbsp;builds&nbsp;in&nbsp;a&nbsp;minimal&nbsp;environment.&nbsp;there&nbsp;are&nbsp;external&nbsp;tools&nbsp;mock/pbuilder&nbsp;for&nbsp;a&nbsp;clean/official&nbsp;solution,&lt;br&gt;<br>
or&nbsp;docker&nbsp;for&nbsp;an&nbsp;insecure&nbsp;and&nbsp;somewhat&nbsp;faster&nbsp;solution&lt;br&gt;<br>
#4&nbsp;allow&nbsp;to&nbsp;manually&nbsp;modify&nbsp;the&nbsp;generated&nbsp;.spec&nbsp;and&nbsp;debian/&nbsp;files&nbsp;and&nbsp;still&nbsp;keep&nbsp;track&nbsp;of&nbsp;changes&nbsp;in&nbsp;opam&nbsp;metadata&lt;br&gt;<br>
#5&nbsp;allow&nbsp;incremental&nbsp;refinement&nbsp;of&nbsp;the&nbsp;spec/debian&nbsp;rules,&nbsp;don&#39;t&nbsp;require&nbsp;everything&nbsp;to&nbsp;be&nbsp;100%&nbsp;compliant/correct&nbsp;syntax&lt;br&gt;<br>
#6&nbsp;allow&nbsp;to&nbsp;override&nbsp;opam&nbsp;metadata&nbsp;(could&nbsp;just&nbsp;git&nbsp;clone&nbsp;the&nbsp;opam&nbsp;repo&nbsp;and&nbsp;use&nbsp;that)&lt;br&gt;<br>
#7&nbsp;opam2rpm&nbsp;and&nbsp;opam2deb&nbsp;should&nbsp;be&nbsp;similar&nbsp;to&nbsp;use&nbsp;(i.e.&nbsp;maybe&nbsp;it&nbsp;should&nbsp;be&nbsp;opam2pkg&nbsp;rpm&nbsp;and&nbsp;opam2pkg&nbsp;deb),&nbsp;and&nbsp;I&nbsp;don&#39;t&nbsp;necesarely&nbsp;want&nbsp;to&nbsp;limit&nbsp;this&nbsp;to&nbsp;rpm&nbsp;and&nbsp;deb,&lt;br&gt;<br>
someone&nbsp;is&nbsp;welcome&nbsp;to&nbsp;create&nbsp;an&nbsp;opam2openbsd&nbsp;or&nbsp;opam2brew,&nbsp;etc.&lt;br&gt;<br>
#8&nbsp;developing&nbsp;the&nbsp;automation&nbsp;tool&nbsp;shouldn&#39;t&nbsp;take&nbsp;(significanlty)&nbsp;longer&nbsp;than&nbsp;manually&nbsp;writing&nbsp;the&nbsp;packaging&nbsp;for&nbsp;those&nbsp;9&nbsp;packages&nbsp;:)&lt;br&gt;<br>
#9&nbsp;the&nbsp;goal&nbsp;would&nbsp;also&nbsp;be&nbsp;to&nbsp;make&nbsp;it&nbsp;easier&nbsp;for&nbsp;upstream&nbsp;reviewers&nbsp;to&nbsp;review&nbsp;all&nbsp;these&nbsp;packages,&nbsp;at&nbsp;some&nbsp;point&nbsp;we&nbsp;should&nbsp;consider&nbsp;involving&nbsp;them&nbsp;in&nbsp;the&nbsp;discussion&nbsp;once&nbsp;we&nbsp;have&nbsp;some&nbsp;draft&nbsp;tool&lt;br&gt;<br>
to&nbsp;make&nbsp;sure&nbsp;we&nbsp;generate&nbsp;good&nbsp;quality&nbsp;packages&nbsp;:)&lt;br&gt;<br>
&lt;br&gt;<br>
Most&nbsp;(but&nbsp;not&nbsp;all)&nbsp;of&nbsp;the&nbsp;packages&nbsp;I&nbsp;need&nbsp;to&nbsp;write&nbsp;spec&nbsp;files&nbsp;for&nbsp;are&nbsp;based&nbsp;on&nbsp;OASIS,&nbsp;so&nbsp;we&nbsp;could&nbsp;try&nbsp;to&nbsp;load&nbsp;the&nbsp;missing&nbsp;metadata&nbsp;from&nbsp;oasis,&nbsp;or&nbsp;detect&nbsp;that&nbsp;oasis&nbsp;is&nbsp;used&lt;br&gt;<br>
and&nbsp;simplify&nbsp;some&nbsp;steps,&nbsp;however&nbsp;not&nbsp;all&nbsp;packages&nbsp;use&nbsp;it&nbsp;so&nbsp;I&nbsp;think&nbsp;that&nbsp;starting&nbsp;at&nbsp;the&nbsp;opam&nbsp;metadata&nbsp;is&nbsp;still&nbsp;the&nbsp;right&nbsp;way.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;kind&nbsp;of&nbsp;automation&nbsp;is&nbsp;needed&nbsp;for&nbsp;opam2rpm&nbsp;and&nbsp;opam2deb&nbsp;for&nbsp;me:&lt;br&gt;<br>
 *&nbsp;mapping&nbsp;of&nbsp;opam&nbsp;to&nbsp;Fedora/Debian&nbsp;naming&nbsp;conventions&nbsp;(some&nbsp;opam&nbsp;packages&nbsp;have&nbsp;ocaml-&nbsp;already&nbsp;in&nbsp;them,&nbsp;so&nbsp;take&nbsp;care&nbsp;not&nbsp;to&nbsp;duplicate&nbsp;that)&lt;br&gt;<br>
 *&nbsp;generate&nbsp;.spec&nbsp;and&nbsp;debian/&nbsp;file&nbsp;templates&nbsp;from&nbsp;opam&nbsp;metadata&nbsp;+&nbsp;some&nbsp;overrides.&nbsp;If&nbsp;this&nbsp;was&nbsp;just&nbsp;a&nbsp;one-way/one-time&nbsp;conversion&nbsp;I&#39;d&nbsp;go&nbsp;with&lt;br&gt;<br>
something&nbsp;simple&nbsp;(perhaps&nbsp;like&nbsp;ocaml-mustache),&nbsp;however&nbsp;see&nbsp;below&lt;br&gt;<br>
 *&nbsp;check&nbsp;license&nbsp;name&nbsp;compliance&nbsp;(Fedora&nbsp;and&nbsp;Debian&nbsp;have&nbsp;their&nbsp;standard&nbsp;name&nbsp;lists),&nbsp;and&nbsp;make&nbsp;sure&nbsp;the&nbsp;package&nbsp;actually&nbsp;has&nbsp;a&nbsp;license&nbsp;*file*&lt;br&gt;<br>
 *&nbsp;don&#39;t&nbsp;need&nbsp;full&nbsp;roundtrip&nbsp;capability&nbsp;between&nbsp;opam&nbsp;and&nbsp;spec/debian,&nbsp;the&nbsp;tool&nbsp;should&nbsp;serve&nbsp;three&nbsp;purposes&nbsp;only:&lt;br&gt;<br>
 &nbsp;*&nbsp;generate&nbsp;initial&nbsp;templates&lt;br&gt;<br>
 &nbsp;*&nbsp;show&nbsp;a&nbsp;smart&nbsp;diff&lt;br&gt;<br>
 &nbsp;*&nbsp;lint&nbsp;the&nbsp;opam&nbsp;metadata&nbsp;/&nbsp;spec&nbsp;file&lt;br&gt;<br>
 *&nbsp;shouldn&#39;t&nbsp;require&nbsp;to&nbsp;update&nbsp;the&nbsp;conversion&nbsp;tool&nbsp;just&nbsp;to&nbsp;support&nbsp;an&nbsp;obscure&nbsp;corner-case&nbsp;that&nbsp;can&nbsp;be&nbsp;fixed&nbsp;more&nbsp;easily&nbsp;by&nbsp;hand&nbsp;in&nbsp;the&nbsp;spec&nbsp;file&lt;br&gt;<br>
 *&nbsp;doesn&#39;t&nbsp;have&nbsp;to&nbsp;be&nbsp;perfect&nbsp;or&nbsp;support&nbsp;the&nbsp;full&nbsp;features&nbsp;of&nbsp;spec/debian/opam&nbsp;files.&nbsp;lets&nbsp;start&nbsp;with&nbsp;the&nbsp;minimum&nbsp;requirements&nbsp;and&nbsp;add&nbsp;fields/features&nbsp;as&nbsp;we&nbsp;need&nbsp;them&lt;br&gt;<br>
 *&nbsp;its&nbsp;not&nbsp;a&nbsp;substitute&nbsp;for&nbsp;human&nbsp;review,&nbsp;the&nbsp;final&nbsp;output&nbsp;always&nbsp;has&nbsp;to&nbsp;be&nbsp;tested&nbsp;and&nbsp;reviewed&nbsp;by&nbsp;a&nbsp;human&lt;br&gt;<br>
&lt;br&gt;<br>
Implementation&nbsp;thoughts:&lt;br&gt;<br>
 *&nbsp;ocaml&nbsp;module&nbsp;describing&nbsp;spec&nbsp;file&nbsp;an&nbsp;debian&nbsp;rules&nbsp;with&nbsp;a&nbsp;toplevel&nbsp;type&nbsp;t&nbsp;and&nbsp;nested&nbsp;records,&nbsp;with&nbsp;type&nbsp;&#39;a&nbsp;field&lt;br&gt;<br>
 *&nbsp;some&nbsp;form&nbsp;of&nbsp;conversion&nbsp;to/from&nbsp;a&nbsp;string&nbsp;-&gt;&nbsp;string&nbsp;map&lt;br&gt;<br>
 *&nbsp;a&nbsp;lexer&nbsp;that&nbsp;loads&nbsp;that&nbsp;map&nbsp;from&nbsp;the&nbsp;spec/debian&nbsp;files,&nbsp;and&nbsp;a&nbsp;formatter&nbsp;that&nbsp;generates&nbsp;it&nbsp;(ocamllex&nbsp;+&nbsp;format,&nbsp;or&nbsp;just&nbsp;ocaml-re&nbsp;+&nbsp;printf?)&lt;br&gt;<br>
 *&nbsp;please&nbsp;if&nbsp;we&nbsp;can&nbsp;lets&nbsp;avoid&nbsp;camlp4&nbsp;for&nbsp;this,&nbsp;I&#39;d&nbsp;suggest&nbsp;ppx_deriving+cconv&nbsp;or&nbsp;just&nbsp;manually&nbsp;writing&nbsp;the&nbsp;parse/generate&nbsp;calls&nbsp;for&nbsp;the&nbsp;record&nbsp;fields&lt;br&gt;<br>
 *&nbsp;validation&nbsp;should&nbsp;be&nbsp;optional&lt;br&gt;<br>
 *&nbsp;fields&nbsp;should&nbsp;be&nbsp;easy&nbsp;to&nbsp;declare&nbsp;(name,&nbsp;of_string,&nbsp;to_string,&nbsp;validate,&nbsp;smart_diff),&nbsp;initially&nbsp;all&nbsp;would&nbsp;be&nbsp;raw&nbsp;strings,&nbsp;more&nbsp;parsing/diffing&nbsp;can&nbsp;be&nbsp;added&nbsp;as&nbsp;needed&lt;br&gt;<br>
 *&nbsp;some&nbsp;way&nbsp;to&nbsp;fill&nbsp;the&nbsp;&#39;t&#39;&nbsp;type&nbsp;from&nbsp;opam&nbsp;metadata&lt;br&gt;<br>
 *&nbsp;certain&nbsp;files&nbsp;may&nbsp;not&nbsp;need&nbsp;all&nbsp;this&nbsp;advanced&nbsp;conversion,&nbsp;and&nbsp;might&nbsp;be&nbsp;easier&nbsp;to&nbsp;generate&nbsp;from&nbsp;a&nbsp;text&nbsp;template&nbsp;with&nbsp;substitutions&nbsp;(ocaml-mustache,&nbsp;or&nbsp;mpp?),&nbsp;and&nbsp;just&nbsp;show&nbsp;a&nbsp;textual&nbsp;diff&lt;br&gt;<br>
(docdiff&nbsp;at&nbsp;character/word&nbsp;level&nbsp;is&nbsp;quite&nbsp;nice)&lt;br&gt;<br>
&lt;br&gt;<br>
Automation&nbsp;for&nbsp;tracking&nbsp;a&nbsp;package&nbsp;through&nbsp;its&nbsp;lifecycle&nbsp;(separate&nbsp;tool):&lt;br&gt;<br>
Since&nbsp;packaging&nbsp;an&nbsp;OCaml&nbsp;application&nbsp;can&nbsp;involve&nbsp;packaging/tracking&nbsp;a&nbsp;large&nbsp;number&nbsp;of&nbsp;dependant&nbsp;libraries&nbsp;some&nbsp;tool&nbsp;to&nbsp;track&nbsp;the&nbsp;status&nbsp;of&nbsp;each&nbsp;package&nbsp;(lifecycle)&lt;br&gt;<br>
would&nbsp;be&nbsp;useful.&nbsp;This&nbsp;is&nbsp;not&nbsp;specific&nbsp;to&nbsp;OCaml,&nbsp;I&#39;m&nbsp;surprised&nbsp;that&nbsp;upstream&nbsp;distros&nbsp;don&#39;t&nbsp;have&nbsp;this&nbsp;already,&nbsp;but&nbsp;anyway&nbsp;using&nbsp;Fedora&nbsp;terminology&nbsp;I&nbsp;want&nbsp;a&nbsp;single&nbsp;CLI&nbsp;tool&nbsp;that&nbsp;can:&lt;br&gt;<br>
 *&nbsp;query&nbsp;yum&nbsp;repo&nbsp;for&nbsp;stable&nbsp;packages&lt;br&gt;<br>
 *&nbsp;query&nbsp;pkgdb&nbsp;for&nbsp;existence&nbsp;of&nbsp;package&nbsp;in&nbsp;other&nbsp;releases&lt;br&gt;<br>
 *&nbsp;query&nbsp;bodhi&nbsp;for&nbsp;pending/testing&nbsp;packages&lt;br&gt;<br>
 *&nbsp;query&nbsp;koji&nbsp;for&nbsp;builds&nbsp;submitted/completed&lt;br&gt;<br>
 *&nbsp;query&nbsp;for&nbsp;existence&nbsp;of&nbsp;scm&nbsp;(git)&nbsp;repo&lt;br&gt;<br>
 *&nbsp;query&nbsp;bugzilla&nbsp;for&nbsp;package&nbsp;review&nbsp;and&nbsp;find&nbsp;out&nbsp;its&nbsp;state&nbsp;(submitted,&nbsp;under&nbsp;review,&nbsp;approved,&nbsp;waiting&nbsp;for&nbsp;scm&nbsp;repo,&nbsp;scm&nbsp;repo&nbsp;created)&lt;br&gt;<br>
For&nbsp;Debian&nbsp;a&nbsp;similar&nbsp;tool&nbsp;that:&lt;br&gt;<br>
 *&nbsp;query&nbsp;&lt;a&nbsp;href=&quot;http://bugs.debian.org&quot;&nbsp;target=&quot;_blank&quot;&gt;bugs.debian.org&lt;/a&gt;&nbsp;for&nbsp;RFP&nbsp;(request&nbsp;for&nbsp;packaging),&nbsp;ITP&nbsp;(intent&nbsp;to&nbsp;package)&nbsp;and&nbsp;its&nbsp;status&lt;br&gt;<br>
 *&nbsp;query&nbsp;NEW&nbsp;queue&nbsp;for&nbsp;uploaded&nbsp;source&nbsp;package&lt;br&gt;<br>
 *&nbsp;query&nbsp;package&nbsp;tracker&nbsp;for&nbsp;buildd&nbsp;status&lt;br&gt;<br>
 *&nbsp;this&nbsp;can&nbsp;also&nbsp;avoid&nbsp;duplicating&nbsp;work,&nbsp;i.e.&nbsp;finding&nbsp;out&nbsp;that&nbsp;someone&nbsp;else&nbsp;is&nbsp;already&nbsp;packaging&nbsp;my&nbsp;package&nbsp;or&nbsp;its&nbsp;dependencies&lt;br&gt;<br>
 *&nbsp;might&nbsp;also&nbsp;be&nbsp;useful&nbsp;for&nbsp;other&nbsp;packages&lt;br&gt;<br>
 *&nbsp;can&nbsp;be&nbsp;done&nbsp;manually&nbsp;by&nbsp;visiting&nbsp;a&nbsp;bunch&nbsp;of&nbsp;webpages&nbsp;in&nbsp;turn&nbsp;and&nbsp;searching&nbsp;on&nbsp;each,&nbsp;but&nbsp;there&nbsp;ought&nbsp;to&nbsp;be&nbsp;some&nbsp;CLI&nbsp;tools&nbsp;to&nbsp;help&nbsp;or&nbsp;at&nbsp;least&nbsp;some&nbsp;(web)API&lt;br&gt;<br>
 *&nbsp;doesn&#39;t&nbsp;have&nbsp;to&nbsp;be&nbsp;necesarely&nbsp;written&nbsp;in&nbsp;Ocaml,&nbsp;if&nbsp;we&nbsp;can&nbsp;reuse&nbsp;existing&nbsp;tools&nbsp;and&nbsp;have&nbsp;this&nbsp;just&nbsp;as&nbsp;a&nbsp;shell/python&nbsp;script&nbsp;the&nbsp;better&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;wanted&nbsp;to&nbsp;go&nbsp;through&nbsp;the&nbsp;policy&nbsp;docs&nbsp;and&nbsp;write&nbsp;some&nbsp;details&nbsp;here&nbsp;on&nbsp;what&nbsp;is&nbsp;missing&nbsp;from&nbsp;opam&nbsp;metadata,&nbsp;but&nbsp;this&nbsp;mail&nbsp;is&nbsp;long&nbsp;enough&nbsp;and&nbsp;it&nbsp;is&nbsp;late&nbsp;enough&nbsp;already,&lt;br&gt;<br>
that&nbsp;I&nbsp;thought&nbsp;to&nbsp;start&nbsp;the&nbsp;discussion&nbsp;with&nbsp;what&nbsp;I&nbsp;have&nbsp;so&nbsp;far,&nbsp;and&nbsp;discuss&nbsp;the&nbsp;details&nbsp;as&nbsp;we&nbsp;go.&lt;br&gt;<br>
&lt;br&gt;<br>
Once&nbsp;we&nbsp;agree&nbsp;on&nbsp;the&nbsp;major&nbsp;design&nbsp;points&nbsp;of&nbsp;this&nbsp;tool&nbsp;I&nbsp;plan&nbsp;on&nbsp;starting&nbsp;with&nbsp;opam2rpm,&nbsp;but&nbsp;if&nbsp;someone&nbsp;else&nbsp;wants&nbsp;to&nbsp;own&nbsp;it&nbsp;I&#39;d&nbsp;be&nbsp;more&nbsp;than&nbsp;happy&nbsp;with&nbsp;that&nbsp;as&nbsp;well.&lt;br&gt;<br>
&lt;br&gt;<br>
Anil&nbsp;also&nbsp;suggested&nbsp;to &nbsp;look&nbsp;at:&lt;br&gt;<br>
On&nbsp;03/19/2015&nbsp;10:15&nbsp;AM,&nbsp;Anil&nbsp;Madhavapeddy&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;annotated&nbsp;changeset&nbsp;about&nbsp;a&nbsp;recent&nbsp;update&nbsp;from&nbsp;Jon&nbsp;might&nbsp;be&nbsp;useful&nbsp;as&nbsp;well:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://github.com/jonludlam/ocaml4021-buildroot/commit/9ef9554c283ea1cda8f64742b73bb63807b791c7#commitcomment-10071274&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/jonludlam/&lt;u&gt;&lt;/u&gt;ocaml4021-buildroot/commit/&lt;u&gt;&lt;/u&gt;9ef9554c283ea1cda8f64742b73bb6&lt;u&gt;&lt;/u&gt;3807b791c7#commitcomment-&lt;u&gt;&lt;/u&gt;10071274&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards,&lt;br&gt;<br>
--Edwin&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
opam-devel&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:opam-devel@lists.ocaml.org&quot;&nbsp;target=&quot;_blank&quot;&gt;opam-devel@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/opam-devel&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/&lt;u&gt;&lt;/u&gt;listinfo/opam-devel&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
