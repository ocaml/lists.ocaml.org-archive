<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;One&nbsp;thing&nbsp;that&nbsp;worries&nbsp;me&nbsp;is&nbsp;that&nbsp;some&nbsp;people&nbsp;did&nbsp;not&nbsp;see&nbsp;the&nbsp;repo&nbsp;redirection&nbsp;for&nbsp;OPAM&nbsp;1.1,&nbsp;and&nbsp;this&nbsp;might&nbsp;happen&nbsp;again&nbsp;for&nbsp;1.2&nbsp;until&nbsp;we&nbsp;figure&nbsp;out&nbsp;why&nbsp;(I&nbsp;think&nbsp;it&nbsp;might&nbsp;be&nbsp;just&nbsp;that&nbsp;they&nbsp;did&nbsp;a&nbsp;Git&nbsp;init&nbsp;instead&nbsp;of&nbsp;the&nbsp;default).&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Would&nbsp;it&nbsp;make&nbsp;sense&nbsp;to&nbsp;activate&nbsp;the&nbsp;repo&nbsp;redirect&nbsp;to&nbsp;the&nbsp;new&nbsp;branch&nbsp;ahead&nbsp;of&nbsp;the&nbsp;release?&nbsp;&nbsp;The&nbsp;only&nbsp;way&nbsp;we&nbsp;will&nbsp;know&nbsp;if&nbsp;people&nbsp;have&nbsp;moved&nbsp;over&nbsp;is&nbsp;via&nbsp;the&nbsp;HTTP&nbsp;remote&nbsp;(since&nbsp;the&nbsp;Git&nbsp;remote&nbsp;is&nbsp;hosted&nbsp;on&nbsp;GitHub&nbsp;without&nbsp;direct&nbsp;logs).&nbsp;&nbsp;Which&nbsp;leads&nbsp;on&nbsp;to&nbsp;my&nbsp;next&nbsp;question&nbsp;--&nbsp;will&nbsp;there&nbsp;be&nbsp;a&nbsp;separate&nbsp;HTTP&nbsp;URL&nbsp;space&nbsp;for&nbsp;1.1&nbsp;and&nbsp;1.2&nbsp;for&nbsp;the&nbsp;HTTP&nbsp;remote?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cheers,&lt;/div&gt;&lt;div&gt;Anil&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;19&nbsp;Sep&nbsp;2014,&nbsp;at&nbsp;16:02,&nbsp;Louis&nbsp;Gesbert&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:louis.gesbert@ocamlpro.com&quot;&gt;louis.gesbert@ocamlpro.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;400;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;start;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;font-family:&nbsp;monospace;&nbsp;font-size:&nbsp;8pt;&quot;&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;Hi&nbsp;all,&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;As&nbsp;you&nbsp;may&nbsp;know,&nbsp;the&nbsp;1.2.0&nbsp;RC2&nbsp;has&nbsp;just&nbsp;been&nbsp;tagged&nbsp;[1].&nbsp;However,&nbsp;as&nbsp;discussed&nbsp;at&nbsp;[2],&nbsp;planning&nbsp;the&nbsp;migration&nbsp;of&nbsp;the&nbsp;repository&nbsp;is&nbsp;quite&nbsp;a&nbsp;delicate&nbsp;matter&nbsp;;&nbsp;this&nbsp;doesn't&nbsp;have&nbsp;to&nbsp;be&nbsp;done&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;as&nbsp;the&nbsp;release&nbsp;itself,&nbsp;but&nbsp;some&nbsp;confusion&nbsp;may&nbsp;arise&nbsp;if&nbsp;we&nbsp;advertise&nbsp;a&nbsp;new&nbsp;workflow&nbsp;that&nbsp;leads&nbsp;to&nbsp;packages&nbsp;that&nbsp;get&nbsp;refused&nbsp;from&nbsp;the&nbsp;main&nbsp;repo&nbsp;because&nbsp;they're&nbsp;not&nbsp;1.1&nbsp;compatible.&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;We&nbsp;tried&nbsp;to&nbsp;improve&nbsp;compatibility&nbsp;for&nbsp;the&nbsp;next&nbsp;release,&nbsp;but&nbsp;for&nbsp;1.2&nbsp;there&nbsp;are&nbsp;just&nbsp;too&nbsp;many&nbsp;changes&nbsp;and&nbsp;opam&nbsp;1.1&nbsp;_won't_&nbsp;nicely&nbsp;handle&nbsp;them.&nbsp;So&nbsp;here&nbsp;is&nbsp;how&nbsp;I&nbsp;have&nbsp;been&nbsp;preparing:&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;-&nbsp;a&nbsp;batch&nbsp;conversion&nbsp;of&nbsp;the&nbsp;existing&nbsp;repo&nbsp;[7]:&nbsp;not&nbsp;required&nbsp;but&nbsp;useful&nbsp;for&nbsp;1.2&nbsp;(adding&nbsp;dev&nbsp;repos&nbsp;for&nbsp;archives&nbsp;held&nbsp;on&nbsp;github,&nbsp;setting&nbsp;ocamlfind&nbsp;deps&nbsp;as&nbsp;build-only,&nbsp;turning&nbsp;depopts&nbsp;constraints&nbsp;to&nbsp;conflicts&nbsp;[3]...).&nbsp;This&nbsp;is&nbsp;useful&nbsp;as&nbsp;a&nbsp;starting&nbsp;point&nbsp;for&nbsp;repo&nbsp;extension&nbsp;and&nbsp;example,&nbsp;and&nbsp;done&nbsp;using&nbsp;scripts&nbsp;in&nbsp;`admin-scripts/`&nbsp;[4]&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;-&nbsp;a&nbsp;`admin-scripts/to_1_1.ml`&nbsp;script&nbsp;in&nbsp;opam&nbsp;[5]&nbsp;that&nbsp;can&nbsp;convert&nbsp;a&nbsp;package&nbsp;back&nbsp;to&nbsp;1.1&nbsp;format.&nbsp;I&nbsp;successfully&nbsp;tested&nbsp;it&nbsp;on&nbsp;the&nbsp;above&nbsp;repo&nbsp;and&nbsp;with&nbsp;opam&nbsp;1.1&nbsp;;&nbsp;there&nbsp;may&nbsp;be&nbsp;corner&nbsp;cases&nbsp;on&nbsp;new&nbsp;1.2&nbsp;opam&nbsp;files&nbsp;that&nbsp;this&nbsp;didn't&nbsp;get&nbsp;into,&nbsp;but&nbsp;these&nbsp;can&nbsp;be&nbsp;caught&nbsp;by&nbsp;Travis&nbsp;before&nbsp;they&nbsp;break.&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;-&nbsp;updated&nbsp;admin&nbsp;scripts&nbsp;on&nbsp;the&nbsp;11-bridge&nbsp;branch&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://opam.ocaml.org/&quot;&gt;opam.ocaml.org&lt;/a&gt;&nbsp;[6].&nbsp;The&nbsp;new&nbsp;scripts&nbsp;create&nbsp;a&nbsp;duplicate&nbsp;of&nbsp;the&nbsp;repo&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;http://opam.ocaml.org/1.1/&quot;&gt;opam.ocaml.org/1.1/&lt;/a&gt;,&nbsp;branch&nbsp;version-triggered&nbsp;redirects&nbsp;between&nbsp;the&nbsp;two,&nbsp;and&nbsp;apply&nbsp;the&nbsp;above&nbsp;script&nbsp;to&nbsp;the&nbsp;1.1&nbsp;repo&nbsp;mirror&nbsp;at&nbsp;every&nbsp;update.&nbsp;This&nbsp;should&nbsp;make&nbsp;it&nbsp;transparent&nbsp;whichever&nbsp;opam&nbsp;version&nbsp;is&nbsp;used.&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;-&nbsp;tested&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://opam.ocaml.org/&quot;&gt;opam.ocaml.org&lt;/a&gt;&nbsp;scripts&nbsp;on&nbsp;a&nbsp;local&nbsp;mirror&nbsp;I&nbsp;set&nbsp;up,&nbsp;and&nbsp;they&nbsp;seem&nbsp;to&nbsp;work&nbsp;fine&nbsp;(after&nbsp;_a&nbsp;lot_&nbsp;of&nbsp;tweaking)&nbsp;;&nbsp;note&nbsp;that&nbsp;these&nbsp;can&nbsp;be&nbsp;pushed&nbsp;live&nbsp;beforehand,&nbsp;they'll&nbsp;set&nbsp;up&nbsp;the&nbsp;redirects&nbsp;but&nbsp;the&nbsp;translation&nbsp;script&nbsp;doesn't&nbsp;change&nbsp;opam&nbsp;files&nbsp;with&nbsp;`opam-version`&nbsp;&lt;&nbsp;&quot;1.2&quot;&nbsp;so&nbsp;it&nbsp;won't&nbsp;cause&nbsp;any&nbsp;user-visible&nbsp;changes&nbsp;until&nbsp;we&nbsp;actually&nbsp;accept&nbsp;1.2&nbsp;opam&nbsp;files&nbsp;in&nbsp;the&nbsp;repo&nbsp;(except&nbsp;for&nbsp;the&nbsp;&quot;permanently&nbsp;redirected&quot;&nbsp;message)&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;What&nbsp;remains&nbsp;to&nbsp;do:&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;-&nbsp;setup&nbsp;the&nbsp;opam-repository&nbsp;travis&nbsp;scripts&nbsp;to&nbsp;apply&nbsp;the&nbsp;1.1&nbsp;rewrite&nbsp;before&nbsp;testing,&nbsp;for&nbsp;opam&nbsp;versions&nbsp;&lt;&nbsp;1.2.&nbsp;Only&nbsp;tricky&nbsp;part&nbsp;is&nbsp;to&nbsp;get&nbsp;hold&nbsp;of&nbsp;a&nbsp;recent&nbsp;enough&nbsp;opam-lib&nbsp;to&nbsp;run&nbsp;the&nbsp;script&nbsp;(maybe&nbsp;we&nbsp;could&nbsp;cheat&nbsp;and&nbsp;put&nbsp;a&nbsp;standalone&nbsp;bytecode&nbsp;exe&nbsp;on&nbsp;opam-repository&nbsp;for&nbsp;that&nbsp;;&nbsp;well&nbsp;one&nbsp;for&nbsp;4.01&nbsp;and&nbsp;one&nbsp;for&nbsp;4.02&nbsp;since&nbsp;the&nbsp;format&nbsp;changed...).&nbsp;This&nbsp;way&nbsp;PRs&nbsp;to&nbsp;opam-repo&nbsp;containing&nbsp;1.2&nbsp;opam&nbsp;files&nbsp;will&nbsp;be&nbsp;correctly&nbsp;tested,&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;rewrite.&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;-&nbsp;release&nbsp;!&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;Finally,&nbsp;note&nbsp;that&nbsp;I'll&nbsp;be&nbsp;moving&nbsp;across&nbsp;the&nbsp;globe&nbsp;next&nbsp;week,&nbsp;and&nbsp;won't&nbsp;be&nbsp;available&nbsp;for&nbsp;two&nbsp;weeks&nbsp;or&nbsp;so.&nbsp;Everything&nbsp;should&nbsp;be&nbsp;ready&nbsp;to&nbsp;release&nbsp;as&nbsp;soon&nbsp;as&nbsp;I&nbsp;get&nbsp;back.&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;Cheers,&lt;/div&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;Louis&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;[1]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam/releases/tag/1.2.0-rc2&quot;&gt;https://github.com/ocaml/opam/releases/tag/1.2.0-rc2&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;[2]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam/issues/1662&quot;&gt;https://github.com/ocaml/opam/issues/1662&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;[3]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam/pull/1325&quot;&gt;https://github.com/ocaml/opam/pull/1325&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;[4]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam/tree/master/admin-scripts&quot;&gt;https://github.com/ocaml/opam/tree/master/admin-scripts&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;[5]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam/pull/1743&quot;&gt;https://github.com/ocaml/opam/pull/1743&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;[6]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam.ocaml.org/tree/11-bridge&quot;&gt;https://github.com/ocaml/opam.ocaml.org/tree/11-bridge&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;[7]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam-repository/tree/1.2-test&quot;&gt;https://github.com/ocaml/opam-repository/tree/1.2-test&lt;/a&gt;&lt;/div&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;p&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;&nbsp;&lt;/p&gt;&lt;div&nbsp;style=&quot;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;text-indent:&nbsp;0px;&quot;&gt;PS:&nbsp;during&nbsp;the&nbsp;course&nbsp;of&nbsp;these&nbsp;tests,&nbsp;I&nbsp;sadly&nbsp;found&nbsp;out&nbsp;that&nbsp;repo&nbsp;redirect&nbsp;handling&nbsp;in&nbsp;1.1&nbsp;wasn't&nbsp;that&nbsp;good:&nbsp;it&nbsp;works&nbsp;at&nbsp;update&nbsp;but&nbsp;not&nbsp;straight-away&nbsp;at&nbsp;init.&nbsp;See&nbsp;comment&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;https://github.com/ocaml/opam/pull/1744&quot;&gt;https://github.com/ocaml/opam/pull/1744&lt;/a&gt;&lt;/div&gt;_______________________________________________&lt;br&gt;opam-devel&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:opam-devel@lists.ocaml.org&quot;&gt;opam-devel@lists.ocaml.org&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/opam-devel&quot;&gt;http://lists.ocaml.org/listinfo/opam-devel&lt;/a&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
