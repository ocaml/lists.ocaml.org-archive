<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] docker hub update?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20docker%20hub%20update%3F&In-Reply-To=%3C20160411121935.GA13981%40venema.ocamlpro.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001432.html">
   <LINK REL="Next"  HREF="001434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] docker hub update?</H1>
    <B>Gr&#233;goire Henry</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20docker%20hub%20update%3F&In-Reply-To=%3C20160411121935.GA13981%40venema.ocamlpro.com%3E"
       TITLE="[opam-devel] docker hub update?">gregoire.henry at ocamlpro.com
       </A><BR>
    <I>Mon Apr 11 13:19:35 BST 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="001432.html">[opam-devel] docker hub update?
</A></li>
        <LI>Next message: <A HREF="001434.html">[opam-devel] docker hub update?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1433">[ date ]</a>
              <a href="thread.html#1433">[ thread ]</a>
              <a href="subject.html#1433">[ subject ]</a>
              <a href="author.html#1433">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Anil,

&gt;<i> To fix this and address every usecase, I'd like to break up the container layers to be more fine-grained:
</I>&gt;<i> 
</I>&gt;<i> - ocaml/ocaml - remains as it is right now
</I>&gt;<i> - ocaml/opam-base - provides an installed OPAM binary, but _not_ initialised, and has the capability to volume mount an OPAM repository from which it can initialise the local base without any data being held in the container.
</I>&gt;<i> - ocaml/opam - embeds an OPAM repository checkout and works as-is right now
</I>&gt;<i> - ocaml/opam-archive: also volume mounts in an external archive/ directory so we do not have to embed the volume in a container
</I>
What about including in `ocaml/opam-base` a &quot;partial&quot; OPAM repository
with only the (some) compilers and initialize OPAM with it. Then
`ocaml/opam` (or CI tools based on `ocaml/opam-base`) will replace the
&quot;partial&quot; OPAM repository with the real one. If done correctly, they
shouldn't have to recompile OCaml.

The partial OPAM repository could either be manually updated (e.g. at
each OCaml release) or may be extracted from the official repository
by a bot.

Gr&#233;goire
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001432.html">[opam-devel] docker hub update?
</A></li>
	<LI>Next message: <A HREF="001434.html">[opam-devel] docker hub update?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1433">[ date ]</a>
              <a href="thread.html#1433">[ thread ]</a>
              <a href="subject.html#1433">[ subject ]</a>
              <a href="author.html#1433">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
