<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] opam 1.3 status
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20opam%201.3%20status&In-Reply-To=%3CCAMu2m2%2BqA%3DTwL5dYNodca1-v3Fpa-bRmdH1LDsLO1iaqtmQVTw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001284.html">
   <LINK REL="Next"  HREF="001286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] opam 1.3 status</H1>
    <B>Ashish Agarwal</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20opam%201.3%20status&In-Reply-To=%3CCAMu2m2%2BqA%3DTwL5dYNodca1-v3Fpa-bRmdH1LDsLO1iaqtmQVTw%40mail.gmail.com%3E"
       TITLE="[opam-devel] opam 1.3 status">agarwal1975 at gmail.com
       </A><BR>
    <I>Fri Dec 18 15:36:08 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001284.html">[opam-devel] opam 1.3 status
</A></li>
        <LI>Next message: <A HREF="001286.html">[opam-devel] opam 1.3 status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1285">[ date ]</a>
              <a href="thread.html#1285">[ thread ]</a>
              <a href="subject.html#1285">[ subject ]</a>
              <a href="author.html#1285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi. Thanks for this nice summary and ongoing work. Is there any support
planned for installing binaries? What is needed is a way to specify a
different tarball depending on the detected architecture. I know some
people want this for OCaml packages, but actually I'm interested in it for
our non-OCaml biopam repo [1].

[1] <A HREF="https://github.com/solvuu/biopam">https://github.com/solvuu/biopam</A>


On Fri, Dec 18, 2015 at 10:30 AM, Thomas Gazagnaire &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">thomas at gazagnaire.org</A>&gt;
wrote:

&gt;<i> Hi Louis.
</I>&gt;<i>
</I>&gt;<i> all of this sounds very good. I'd just like to report 3 more features that
</I>&gt;<i> various people have told me about this last months:
</I>&gt;<i>
</I>&gt;<i> 1/ `opam bundle`: it seems that a few existing projects don't want to tell
</I>&gt;<i> their users to install OCaml and opam. They just want a stand-alone tarball
</I>&gt;<i> that you can decompress and run `configure &amp;&amp; make &amp;&amp; make install`. There
</I>&gt;<i> are already some patches from @ygrek doing this, that would be very cool to
</I>&gt;<i> integrate the tool upstream
</I>&gt;<i>
</I>&gt;<i> 2/ local switch/root. few people reported that they would like to use a
</I>&gt;<i> per-project opam root. This could be done easily by making the CLI check
</I>&gt;<i> for a `.opam` directory in parent directories. Or it could work with a
</I>&gt;<i> local config switch file (now that we have only one config file per
</I>&gt;<i> switch), stored in the repository.
</I>&gt;<i>
</I>&gt;<i> 3/ local remotes. Currently the remote are per-switch which make them a
</I>&gt;<i> bit annoying when you have a repo with dev packages. Currently it's easier
</I>&gt;<i> to share a list of pins that a remote. So maybe extend `opam pin` to allow
</I>&gt;<i> to take file of packages to pin -- actually it could already work with
</I>&gt;<i> `opam switch import`, so maybe it's just a matter of documentation.
</I>&gt;<i>
</I>&gt;<i> And last big item, that I haven't seen in your list: windows support: is
</I>&gt;<i> this still on the map?
</I>&gt;<i>
</I>&gt;<i> Thomas
</I>&gt;<i>
</I>&gt;<i> &gt; On 18 Dec 2015, at 08:47, Louis Gesbert &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This is a summary of what's going on for 1.3, for all those who were
</I>&gt;<i> wondering.
</I>&gt;<i> &gt; This is not complete, and I may have forgotten stuff, don't hesitate to
</I>&gt;<i> complete
</I>&gt;<i> &gt; and comment.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think a more redacted version of this would have its place on the
</I>&gt;<i> platform
</I>&gt;<i> &gt; blog, to show there is activity.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Note that I've also been busy helping out on the flambda compiler patch,
</I>&gt;<i> which
</I>&gt;<i> &gt; explains that things have been a bit slower on opam lately, but I am
</I>&gt;<i> getting
</I>&gt;<i> &gt; back on it full-time soon.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # Ongoing changes for 1.3
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Lots has been going on, signature of the repository was the main goal
</I>&gt;<i> for this
</I>&gt;<i> &gt; release but it was then decided to prioritise some architectural changes
</I>&gt;<i> and
</I>&gt;<i> &gt; improvements and add signature on top of that for the release just
</I>&gt;<i> after. So I
</I>&gt;<i> &gt; feel there is a need to clarify all that's going on and what to expect
</I>&gt;<i> for
</I>&gt;<i> &gt; 1.3.0.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Simplification of the ~/.opam architecture, store switch state in a
</I>&gt;<i> single
</I>&gt;<i> &gt;  file (done, but more changes pending)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Refactoring of file handling, for better error reporting, more
</I>&gt;<i> reliable code
</I>&gt;<i> &gt;  and ease to extend (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Much cleaner and flexible URL handling (including VC targets and
</I>&gt;<i> specific
</I>&gt;<i> &gt;  transports) (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Refactoring of OpamState, lots of simplification on state loading,
</I>&gt;<i> pinned
</I>&gt;<i> &gt;  package handling. This should make it much easier to understand and
</I>&gt;<i> maintain,
</I>&gt;<i> &gt;  and also much more efficient (ongoing)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Compilers as packages and disappearance of the .comp files, through
</I>&gt;<i> making the
</I>&gt;<i> &gt;  opam files much more generic. In practice, switch creation and compiler
</I>&gt;<i> &gt;  installation are now internally treated as two different operations
</I>&gt;<i> (ongoing,
</I>&gt;<i> &gt;  most of it done but lacks a proper interface at the moment)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Tracking of package installed files and reliable automatic removal
</I>&gt;<i> (planned,
</I>&gt;<i> &gt;  but the hard part is done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Setup of package configuration variables (planned)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ### Package definitions
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Inclusion of url and descr in the opam file format, to describe a
</I>&gt;<i> package with
</I>&gt;<i> &gt;  a single file (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Better definition of package variables, self-references (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Support for &quot;dev&quot; dependencies (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Allow packages to define environment variables, possibly depending on
</I>&gt;<i> other
</I>&gt;<i> &gt;  variables or features (`setenv:` field) (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Allow fields for use by external tools: `x-fieldname:` (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Conflicts now consistently treated as disjunction (i.e. a formula that
</I>&gt;<i> must
</I>&gt;<i> &gt;  not be true) (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Add `extra-sources:` for packages needing more than a single archive
</I>&gt;<i> (e.g.
</I>&gt;<i> &gt;  compiler packages) (planned)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Allow to quote strings with pythonesque `&quot;&quot;&quot;` delimiters, for easier
</I>&gt;<i> &gt;  integration of package descriptions (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Possibility to depend on the hash on an arbitrary file on the system
</I>&gt;<i> and
</I>&gt;<i> &gt;  trigger reinstallation, e.g. to detect an updated system compiler
</I>&gt;<i> (ongoing)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - New &quot;canonical&quot; and &quot;format-preserving&quot; printers, resp. for signing and
</I>&gt;<i> &gt;  batch-editing files (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ### Other, smaller changes
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Ability to override switch default dirs using
</I>&gt;<i> &gt;  switch/config/global-config.config. `opam config set` command (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Support (and doc) for many different external solvers besides aspcud
</I>&gt;<i> (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - Json output including command logs that could be usedd to browse the
</I>&gt;<i> status
</I>&gt;<i> &gt;  (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - More flexibility for install, reinstall, upgrade commands when the
</I>&gt;<i> package
</I>&gt;<i> &gt;  isn't in the expected state (already installed or not installed) (done)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; There are also plans on easing cross-compilation and allowing operations
</I>&gt;<i> across
</I>&gt;<i> &gt; switches which are well underway (in large part thanks to Pietro Abate's
</I>&gt;<i> &gt; efforts), but these are intended for the next minor release (e.g. 1.3.1).
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; opam-devel mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> opam-devel mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/opam-devel/attachments/20151218/4c09c103/attachment.html">http://lists.ocaml.org/pipermail/opam-devel/attachments/20151218/4c09c103/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001284.html">[opam-devel] opam 1.3 status
</A></li>
	<LI>Next message: <A HREF="001286.html">[opam-devel] opam 1.3 status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1285">[ date ]</a>
              <a href="thread.html#1285">[ thread ]</a>
              <a href="subject.html#1285">[ subject ]</a>
              <a href="author.html#1285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
