<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Start of an opam multi-architecture proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Start%20of%20an%20opam%20multi-architecture%20proposal&In-Reply-To=%3C78F9D00D9A4B41DFAA2DA66B5820A77C%40erratique.ch%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001244.html">
   <LINK REL="Next"  HREF="001249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Start of an opam multi-architecture proposal</H1>
    <B>Daniel B&#252;nzli</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Start%20of%20an%20opam%20multi-architecture%20proposal&In-Reply-To=%3C78F9D00D9A4B41DFAA2DA66B5820A77C%40erratique.ch%3E"
       TITLE="[opam-devel] Start of an opam multi-architecture proposal">daniel.buenzli at erratique.ch
       </A><BR>
    <I>Tue Oct 13 11:46:00 BST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001244.html">[opam-devel] Start of an opam multi-architecture proposal
</A></li>
        <LI>Next message: <A HREF="001249.html">[opam-devel] Start of an opam multi-architecture proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1246">[ date ]</a>
              <a href="thread.html#1246">[ thread ]</a>
              <a href="subject.html#1246">[ subject ]</a>
              <a href="author.html#1246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le mardi, 13 octobre 2015 &#224; 11:23, Thomas Gazagnaire a &#233;crit :
&gt;<i> One thing what I'd like is the system to stay simple when people don't use cross-compilation.
</I>
I would put it differently. We don't want to bother people with cross-compilation if they don't need to be, which is slightly different. As mentioned in my last message the goal is to avoid to have to maintain separate repositories for cross compilation so from the package repository point of view (i.e. package files) there should be no such thing as people who don't use cross-compilation.
  
&gt;<i> That might mean maybe renaming `build-os` to `os` so that things stays as they are when build-os = host-os = os.  
</I>
This is actually mentioned in the proposal but your thinking is wrong: non prefixed variable must have host semantics &#8212; host is the thing you install, e.g. the variable lib should be equal to host-lib.
  
&gt;<i> About the automatic installation of packages when adding a new architecture to the switch: I'm not very found of that. I usually misspell my `git remote add` commands and I'm happy to have `git remote set-url` and `git fetch` as separate commands. So maybe in this case, just lazily install the missing packages for the new arch on `opam upgrade` and `opam install`.  
</I>
Well it can simply ask for confirmation. I think we should avoid a discrepancy between what `opam switch arch list` tells you and install reality (see below).
  
&gt;<i> So I think that the constraint: &quot;all installed packages should have the same version for all the architectures&quot; is fine, but the constraint &quot;all installed packages should be installed on all architectures&quot; is too strong.  
</I>
I disagree. I want to be able to treat the switch as an entity regardless of architecture so that a `PKG:installed` variable is `true` iff it is installed in all architecture. If you don't do this then you need to be able to introduce architecture specifiers in variables (e.g. PKG:$(ARCH):installed) which I think we should avoid.

Best,

Daniel


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001244.html">[opam-devel] Start of an opam multi-architecture proposal
</A></li>
	<LI>Next message: <A HREF="001249.html">[opam-devel] Start of an opam multi-architecture proposal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1246">[ date ]</a>
              <a href="thread.html#1246">[ thread ]</a>
              <a href="subject.html#1246">[ subject ]</a>
              <a href="author.html#1246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
