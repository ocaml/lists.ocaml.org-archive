<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Start of an opam multi-architecture proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Start%20of%20an%20opam%20multi-architecture%20proposal&In-Reply-To=%3C20151030153602.GA7840%40pps.univ-paris-diderot.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001248.html">
   <LINK REL="Next"  HREF="001251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Start of an opam multi-architecture proposal</H1>
    <B>Pietro Abate</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Start%20of%20an%20opam%20multi-architecture%20proposal&In-Reply-To=%3C20151030153602.GA7840%40pps.univ-paris-diderot.fr%3E"
       TITLE="[opam-devel] Start of an opam multi-architecture proposal">Pietro.Abate at pps.univ-paris-diderot.fr
       </A><BR>
    <I>Fri Oct 30 15:36:02 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001248.html">[opam-devel] Start of an opam multi-architecture proposal
</A></li>
        <LI>Next message: <A HREF="001251.html">[opam-devel] opam does not uninstall menhir properly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1254">[ date ]</a>
              <a href="thread.html#1254">[ thread ]</a>
              <a href="subject.html#1254">[ subject ]</a>
              <a href="author.html#1254">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

On 13/10/15 01:31, Daniel B&#252;nzli wrote:
&gt;<i> Feedback and discussion about the general approach is better done on
</I>&gt;<i> this list I think. And this should start with whether the support
</I>&gt;<i> should be handled as an inter or intra switch feature; this proposal
</I>&gt;<i> being the latter (for these reasons [1]). I know there were attempts
</I>&gt;<i> at the former so it would be nice if we could reach consensus on
</I>&gt;<i> this first.
</I>
A few months ago I started working with Fabrice and Roberto on the
extension multi-arch of opam. I started from solver side to tackle
this problem, and for the moment I've completely ignored many other
details related to the user interface (and specified in your
document). 

I've just committed a working prototype of opam that uses dose to
handle multi-arch (or we should say multi-switch) universes and you
can find my work here : <A HREF="https://github.com/abate/opam">https://github.com/abate/opam</A>

To compile this version of opam you need first to compile and install
dose from git [1] .

The internal protocol used between opam and dose is described here : 
<A HREF="https://raw.githubusercontent.com/abate/opam/master/doc/design/multi-switch.txt">https://raw.githubusercontent.com/abate/opam/master/doc/design/multi-switch.txt</A>
(clearly the interface between opam and dose does not use the textual
form)

For the moment the implementation does not do anything more then opam
1.3 : all the changes are transparent to the final user (and I've not
widely tested). The idea is to start from here and push upward these
modifications and to integrate them to the machinery needed to handle
a multi-switch environment. I think the first simple feature I'm going
to add is an --upgrade-all option to upgrade all packages of all
switches at once (invoking the solver only once).

pietro

[1]: git clone <A HREF="https://scm.gforge.inria.fr/anonscm/git/dose/dose.git">https://scm.gforge.inria.fr/anonscm/git/dose/dose.git</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001248.html">[opam-devel] Start of an opam multi-architecture proposal
</A></li>
	<LI>Next message: <A HREF="001251.html">[opam-devel] opam does not uninstall menhir properly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1254">[ date ]</a>
              <a href="thread.html#1254">[ thread ]</a>
              <a href="subject.html#1254">[ subject ]</a>
              <a href="author.html#1254">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
