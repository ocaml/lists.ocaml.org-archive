<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] [ocaml-platform] OPAM 1.1.1 RC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20%5Bocaml-platform%5D%20OPAM%201.1.1%20RC&In-Reply-To=%3C025C47AC-6380-47B5-ACC8-78D1478C33E9%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000335.html">
   <LINK REL="Next"  HREF="000337.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] [ocaml-platform] OPAM 1.1.1 RC</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20%5Bocaml-platform%5D%20OPAM%201.1.1%20RC&In-Reply-To=%3C025C47AC-6380-47B5-ACC8-78D1478C33E9%40recoil.org%3E"
       TITLE="[opam-devel] [ocaml-platform] OPAM 1.1.1 RC">anil at recoil.org
       </A><BR>
    <I>Wed Jan 15 10:03:29 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000335.html">[opam-devel] [ocaml-platform]  OPAM 1.1.1 RC
</A></li>
        <LI>Next message: <A HREF="000337.html">[opam-devel] [ocaml-platform]  OPAM 1.1.1 RC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15 Jan 2014, at 09:27, Louis Gesbert &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt; wrote:

&gt;<i> On Tuesday 14 January 2014 17:34:55 Anil Madhavapeddy wrote:
</I>&gt;&gt;<i> On 14 Jan 2014, at 17:11, Louis Gesbert &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Last addition was the possibility for packagers to specify `archive: [&quot;upstream-url&quot; &quot;mirror1&quot; &quot;mirror2&quot;]` in the url files, so that we have a way to circumvent downtime of package hosting servers -- like recently happened for camlcity with dire consequences for new OPAM installations (ocamlfind could not be installed). We are working on a more general mirroring solution for the next release.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I don't think this should be included in 1.1.1, since it changes the repository format.  For instance, is there a clear backwards compatibility story for 1.1.0 clients that connect to a repository that includes multiple archives?
</I>&gt;<i> 
</I>&gt;<i> Indeed, that would break (quite badly) -- Thomas thought that the url file already supported (unused) archive lists, but that must have been removed at some point.
</I>&gt;<i> If it's very important to have this now, I can modify the patch so that it only changes the repo in a 1.1.0-compatible way, by adding a `mirror` field instead of changing the current type of the `archive` and similar fields. I tend to think that the smoothness of upgrade may be worth the slightly less clear resulting file format.
</I>
It's not critical to have it right now.  Unplanned outages happen, and this one might have happened right after the 1.1.1 release and the world won't end.  Let's pull it and implement the feature more thoroughly in 1.2.0 rather than cram it into a point release.

&gt;<i> Any opinions on this ? The problem still exists even if we shift that after release.
</I>
Not necessarily.  We could bump the repo version in 1.2.0 and think about a compatibility shim for 1.1.0 (via opam-admin rewrites).

-anil


&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> Louis
</I>&gt;<i> 
</I>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000335.html">[opam-devel] [ocaml-platform]  OPAM 1.1.1 RC
</A></li>
	<LI>Next message: <A HREF="000337.html">[opam-devel] [ocaml-platform]  OPAM 1.1.1 RC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
