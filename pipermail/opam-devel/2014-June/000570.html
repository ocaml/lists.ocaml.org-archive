<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] On self-upgrade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20On%20self-upgrade&In-Reply-To=%3CF0862585-EC53-4E05-9878-D5B2A9D01AEF%40gazagnaire.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000569.html">
   <LINK REL="Next"  HREF="000571.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] On self-upgrade</H1>
    <B>Thomas Gazagnaire</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20On%20self-upgrade&In-Reply-To=%3CF0862585-EC53-4E05-9878-D5B2A9D01AEF%40gazagnaire.org%3E"
       TITLE="[opam-devel] On self-upgrade">thomas at gazagnaire.org
       </A><BR>
    <I>Wed Jun 25 20:15:27 BST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000569.html">[opam-devel] On self-upgrade
</A></li>
        <LI>Next message: <A HREF="000571.html">[opam-devel] On self-upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#570">[ date ]</a>
              <a href="thread.html#570">[ thread ]</a>
              <a href="subject.html#570">[ subject ]</a>
              <a href="author.html#570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for you message Louis, it's useful to get some insight of you design.

&gt;<i> We've had all sorts of problems in Mirage with having the tool (opam package 'mirage') invoke OPAM to satisfy package dependencies, resulting in OPAM trying to recompile Mirage itself (due to a depopt showing up), but then resulting in a failure due to the classic 'text file busy' error when trying to move the old binary out of the way.
</I>&gt;<i> 
</I>&gt;<i> Is there an RT test that goes through the above sequence to simulate an upgrade and downgrade?  I really fear that this route will cause us to ignore system/OS packaging, which is really important to keep up-to-date for a package manager.  The self-upgrade route from within OPAM should never be the primary way to obtain the latest version of the package manager.
</I>
Self-upgrade is indeed kind of simple when you have only one channel to get the software you are updating. Louis, do you have any idea in mind on how this will interact with system upgrade (for instance someone doing `brew update` which will install a newer/incompatible version of your self-upgraded package) ?

I fear that this feature will force us to support all kind of tricky upgrade scenario (1.2 -&gt; 1.3 is ok, but what about 1.2 -&gt; 2.0, or 1.2 -&gt; pin -&gt; 1.1 ?). It's easy to limit these kind of scenario when you control the update channels. When you don't it can quickly become a nightmare.

Thomas


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000569.html">[opam-devel] On self-upgrade
</A></li>
	<LI>Next message: <A HREF="000571.html">[opam-devel] On self-upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#570">[ date ]</a>
              <a href="thread.html#570">[ thread ]</a>
              <a href="subject.html#570">[ subject ]</a>
              <a href="author.html#570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
