<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] CommonML: An opinionated build/package/develop	workflow on top of CommonJS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20CommonML%3A%20An%20opinionated%20build/package/develop%0A%09workflow%20on%20top%20of%20CommonJS&In-Reply-To=%3C433C17A8-E598-46DA-A459-74CB2BF37C1E%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000963.html">
   <LINK REL="Next"  HREF="000981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] CommonML: An opinionated build/package/develop	workflow on top of CommonJS</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20CommonML%3A%20An%20opinionated%20build/package/develop%0A%09workflow%20on%20top%20of%20CommonJS&In-Reply-To=%3C433C17A8-E598-46DA-A459-74CB2BF37C1E%40recoil.org%3E"
       TITLE="[opam-devel] CommonML: An opinionated build/package/develop	workflow on top of CommonJS">anil at recoil.org
       </A><BR>
    <I>Thu Feb 26 15:19:52 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000963.html">[opam-devel] CommonML: An opinionated build/package/develop	workflow on top of CommonJS
</A></li>
        <LI>Next message: <A HREF="000981.html">[opam-devel] CommonML: An opinionated build/package/develop workflow on top of CommonJS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#975">[ date ]</a>
              <a href="thread.html#975">[ thread ]</a>
              <a href="subject.html#975">[ subject ]</a>
              <a href="author.html#975">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24 Feb 2015, at 08:28, Jordan W &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">jordojw at gmail.com</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> Another thing I like about the `CommonJS` workflow is that developing packages locally is virtually the same as developing against remote dependencies. (`npm link` is much like `opam pin` I'm told). When you `npm install` dependencies, everything is pulled down into a local sandbox(node_modules directory) instead of being installed globally by default. If you want to see what versions your local package is seeing, just traverse the file system! If you want to reinstall, just delete the node_modules directory and then `npm install` again. I believe there is a way to get it to use a global package cache so the node_modules might contain symlinks to those shared packages - but that's just an optimization. There isn't any notion of building in `npm`, so there wouldn't be a build cache I believe.
</I>
I very much enjoyed reading through the CommonML code; thanks for documenting it so well!  While I digest the rest, I uploaded a simple prototype of an `opam-boot` tool that does what you describe above.  You can just run `opam-boot` in a directory containing an OPAM file, and it will take care of the rest via a local .opam installation.  This works even if OCaml and OPAM are not installed systemwide.

The tool is available at <A HREF="https://github.com/avsm/opam-boot">https://github.com/avsm/opam-boot</A> &lt;<A HREF="https://github.com/avsm/opam-boot">https://github.com/avsm/opam-boot</A>&gt;.  It needs a few more minor improvements before release, such as depext support and specifying compiler constraints so that it ensures that the right OCaml version is installed (perhaps via opam-query).

-anil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/opam-devel/attachments/20150226/68f9c219/attachment.html">http://lists.ocaml.org/pipermail/opam-devel/attachments/20150226/68f9c219/attachment.html</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000963.html">[opam-devel] CommonML: An opinionated build/package/develop	workflow on top of CommonJS
</A></li>
	<LI>Next message: <A HREF="000981.html">[opam-devel] CommonML: An opinionated build/package/develop workflow on top of CommonJS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#975">[ date ]</a>
              <a href="thread.html#975">[ thread ]</a>
              <a href="subject.html#975">[ subject ]</a>
              <a href="author.html#975">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
