<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] OPAM 1.3 roadmap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3CCAPFanBFhHsynidEEuLgGB5EwWi4ZmUOCJi7GvOWSy1sXFGA_xg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000948.html">
   <LINK REL="Next"  HREF="000944.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] OPAM 1.3 roadmap</H1>
    <B>Gabriel Scherer</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3CCAPFanBFhHsynidEEuLgGB5EwWi4ZmUOCJi7GvOWSy1sXFGA_xg%40mail.gmail.com%3E"
       TITLE="[opam-devel] OPAM 1.3 roadmap">gabriel.scherer at gmail.com
       </A><BR>
    <I>Mon Feb 23 09:18:37 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000948.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
        <LI>Next message: <A HREF="000944.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#954">[ date ]</a>
              <a href="thread.html#954">[ thread ]</a>
              <a href="subject.html#954">[ subject ]</a>
              <a href="author.html#954">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Feb 23, 2015 at 1:26 AM, Louis Gesbert &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt;
wrote:
&gt;<i> That's good to know. I have a question: do [Coq users] have, or at least
</I>know about cygwin ? Does it scare them ?

The tech-savvy ones know about it, and I suspect that for the others we
could distribute it along with OPAM (as Jonathan Protzenko did in his
ocaml-on-windows installer) and they wouldn't mind.

Quoting here the message Jason Gross (definitely in the first category)
sent about OPAM+Coq's status on Windows.

Opam now seems to work fine for me, in that &quot;opam install
&gt;<i> coq.8.4.dev+ltacprof&quot; worked fine, and now &quot;(eval `opam config env`;
</I>&gt;<i> coqtop)&quot; works fine and gives me the relevant coq version.  (I haven't
</I>&gt;<i> figured out opam switches yet, though.)
</I>&gt;<i> If I recall correctly, I downloaded the sources for opam 1.2.0 from
</I>&gt;<i> <A HREF="http://opam.ocaml.org/doc/Install.html,">http://opam.ocaml.org/doc/Install.html,</A> and built it within cygwin.
</I>&gt;<i>  (Again, I recall needing to do some PATH mangling, but I don't recall what
</I>&gt;<i> I had to do in particular.  I may try to set up a VM and see if I can
</I>&gt;<i> re-create the process, taking notes this time.)
</I>

It seems you're quite close, but &quot;official&quot; support and some documentation
would be very helpful.

&gt;<i>
</I>&gt;&gt;<i> - Gabriel Scherer, 21/02/2015 09:43 -
</I>&gt;&gt;<i> I'd like to add my voice in favor of Windows support -- I found that to
</I>be
&gt;&gt;<i> a more important issue when discussing with the Coq people and their use
</I>of
&gt;&gt;<i> OPAM. We in the OCaml community have been quite good at scaring away
</I>&gt;&gt;<i> Windows developers (and because it's mostly a crowd of software
</I>developers
&gt;&gt;<i> which often use other systems we didn't notice much), but the Coq
</I>userbase
&gt;&gt;<i> is much more diverse and contains non-programmers (or at least people
</I>that
&gt;&gt;<i> don't know they are programming), they do have Windows users.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sat, Feb 21, 2015 at 9:37 AM, Simon Cruanes &lt;
</I><A HREF="http://lists.ocaml.org/listinfo/opam-devel">simon.cruanes.2007 at m4x.org</A>&gt;
&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; Sandboxing the build would also be a big security improvement. I think
</I>&gt;&gt;<i> &gt; cabal now does it, and signing packages doesn't protect against
</I>malicious
&gt;&gt;<i> &gt; or buggy packages (see: bumblebee's uninstall target). That also goes
</I>hand
&gt;&gt;<i> &gt; in hand with file tracking. I don't know how difficult it is, though.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Cheers!
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Le 21 f&#233;vrier 2015 05:01:56 UTC+01:00, Louis Gesbert &lt;
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt; a &#233;crit :
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; With 1.2.1 almost out of the door, time has come to review the
</I>roadmap discussed back in December and choose where we'll be going for 1.3.
Original mail attached for reference.
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; The topic that is burning hot at the moment is, specially after the
</I>Debian Haskell build host has been compromised, security: we have no
signing at all at the moment, and we need to improve on this before it
becomes a problem. TUF [1] has devised a sane amount of rules for
repository management and signing that should make it easier to get it
right in OPAM. Hannes has mentionned writing an OCaml implementation for
TUF, which could get very helpful.
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Also of importance is Windows support. It should at least be
</I>straighforward and documented to get a basic Cygwin setup working. That
goes with adding automated tests (appveyor can now be added in Github
alongside Travis). Related is cleaning up external command usage (even if
not really justified by a Windows
&gt;&gt;<i> &gt;&gt; port only, as David Allsopp pointed out) -- replacing curl calls by
</I>cohttp, use ocaml-fileutils...
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; These are the other main features, that'll probably take more time if
</I>we are to focus eg. on security:
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; * a plugin mechanism with plugins for example for OCaml (for better
</I>agnosticity), external dependency handling [2], documentation generation...
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; * a 'provides:' field in OPAM files [3]. This is a loose requirement
</I>if we want to switch the repository to have OCaml itself in a package
(which is already possible, but the system compiler may yet be an issue).
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; * More flexible switch handling (multi-switch packages, per-switch
</I>remotes, layered switches for cross-compilation...)
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; * Tracking of files installed by packages. While unrelated to repo
</I>signing, this might have some security implications, so we might want to
bring it in.
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; * With file tracking, generating a binary repo (with some
</I>limitations) could be quite
&gt;&gt;<i> &gt;&gt; straight-forward.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Which of these do you think is most important ? Have I forgotten
</I>anything ?
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Cheers,
</I>&gt;&gt;<i> &gt;&gt; Louis
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; [1] <A HREF="http://theupdateframework.com/">http://theupdateframework.com/</A>
</I>&gt;&gt;<i> &gt;&gt; [2]
</I><A HREF="https://github.com/ocaml/opam/blob/master/doc/design/depexts-plugins">https://github.com/ocaml/opam/blob/master/doc/design/depexts-plugins</A>
&gt;&gt;<i> &gt;&gt; [3] <A HREF="https://github.com/ocaml/opam/blob/master/doc/design/provides.md">https://github.com/ocaml/opam/blob/master/doc/design/provides.md</A>
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; message suivi
</I>&gt;&gt;<i> &gt;&gt; De :Louis Gesbert &#192; :<A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.orgEnvoy</A>&#233; :Wed Dec 17
</I>&gt;&gt;<i> &gt;&gt; 11:07:40 UTC+01:00 2014Objet :[opam-devel] OPAM Roadmap -- what next ?
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Hi all,
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; with some lag after the 1.2 release, I'd like to open some space for a
</I>&gt;&gt;<i> &gt;&gt; collective discussion of the priorities for where the energies should
</I>go
&gt;&gt;<i> &gt;&gt; next. We have mainly 3 directions for improvements: first,
</I>portability,
&gt;&gt;<i> &gt;&gt; with the main goal of a Windows version. Second, agnosticity, with
</I>the goal
&gt;&gt;<i> &gt;&gt; to make OPAM more generic, and try and open it to users outside of the
</I>&gt;&gt;<i> &gt;&gt; OCaml community (wouldn't OPAM for Haskell be fun ?). Third, there are
</I>&gt;&gt;<i> &gt;&gt; always lots of features and improvements that have been asked for, and
</I>&gt;&gt;<i> &gt;&gt; would improve the experience of current users.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; So here is a summary of what I've gathered. Feel free to add your own.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; ## Portability
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Rewrite parallel command engine.** / done.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Native system manipulation (cp, rm, curl...).**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; These are mostly done through calls to the shell or external programs.
</I>&gt;&gt;<i> &gt;&gt; It's
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; not very pretty but quite pragmatic actually... until we want to run
</I>on
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Windows without Cygwin. Anyway, this wouldn't be the end of
</I>portability
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; issues.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Windows support.**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; for OPAM itself to begin with. This should be pretty close.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Packages on Windows.**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Locate common issues and attempt to find generic fixes.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - Allow **direct use of more solvers** or solver servers.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Support cross-compilation**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; This is quite an open issue at the moment.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; ## Agnosticity
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Isolate OCaml-specific stuff.**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; E.g. specific opam-file variables. See ocaml-specific.md
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Separate as plugins**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; To open the gate to OPAM without these plugins, or with other ones
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Compilers as packages.**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; This should mostly work now, but needs some tests and strengthening.
</I>The
&gt;&gt;<i> &gt;&gt; main
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; thing still to do is to handle the system compiler changes properly ;
</I>that
&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; part should be made more generic anyway (see discussion on hooks)
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; ## Features
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - A **provides** field. Generally useful, but particulary so with
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; compilers-as-packages
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - Releasing the **&quot;features&quot; field** for easier package configuration
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Track installed files**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Improve security**: just checking md5s is quite light ; package
</I>&gt;&gt;<i> &gt;&gt; scripts can
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; write anywhere
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **OS-specific handling of dependencies** (eg dependencies on
</I>packages
&gt;&gt;<i> &gt;&gt; from the
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; OS) with plugins (#1519)
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - Specify and implement **hooks**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - Find a nicer way to **share dev repos** / undoable &quot;pinning sources&quot;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Per-switch remotes**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - **Multi-switch packages**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - Support for (automatic generation of) **binary packages**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; - Nicer **ocamlfind interaction**
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Cheers,
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Louis Gesbert
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; ------------------------------
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; opam-devel mailing list
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; ------------------------------
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; opam-devel mailing list
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;&gt;<i> &gt;&gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Simon
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; opam-devel mailing list
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/opam-devel/attachments/20150223/a95ccd9f/attachment.html">http://lists.ocaml.org/pipermail/opam-devel/attachments/20150223/a95ccd9f/attachment.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000948.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
	<LI>Next message: <A HREF="000944.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#954">[ date ]</a>
              <a href="thread.html#954">[ thread ]</a>
              <a href="subject.html#954">[ subject ]</a>
              <a href="author.html#954">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
