<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] OPAM 1.3 roadmap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3C2120222.tjS6U7p4tx%40agaric%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000958.html">
   <LINK REL="Next"  HREF="000942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] OPAM 1.3 roadmap</H1>
    <B>Louis Gesbert</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3C2120222.tjS6U7p4tx%40agaric%3E"
       TITLE="[opam-devel] OPAM 1.3 roadmap">louis.gesbert at ocamlpro.com
       </A><BR>
    <I>Tue Feb 24 01:06:33 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000958.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
        <LI>Next message: <A HREF="000942.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#959">[ date ]</a>
              <a href="thread.html#959">[ thread ]</a>
              <a href="subject.html#959">[ subject ]</a>
              <a href="author.html#959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Indeed, the obvious case being the consequences of e.g. the variable `ocaml-native` on the presence and installation of .cmx etc. files. All depopts potentially have an effect on installed files, which may propagate along the reverse dependencies, so computing all possible combinations doesn't seem realistic -- that's mostly why I wrote &quot;binary repo (_with some limitations_)&quot;.

But without being too ambitious, we could already:
* compute the diff of files as they are installed on the user system (assuming, for now, that files are only installed within the prefix...)
* use a similar trick to generate .install files and push towards a wider use within the repository. Given the right tools, packagers should be able to do this.

Each of these makes the `remove:` field unneeded (and it's the one most likely to contain `rm -rf`s that could go wild)

&gt;<i> - Roberto Di Cosmo, 23/02/2015 20:36 -
</I>&gt;<i> Hmmm... a word of warning on all this, though: the list of files installed by a
</I>&gt;<i> package _may_ depend on the particular choice of other packages (and versions of
</I>&gt;<i> packages) present in the system at build time.
</I>&gt;<i> 
</I>&gt;<i> This is not a problem for distributions like Debian/RedHat/OpenSuse etc. because
</I>&gt;<i> the build is done only once to produce a binary package, that is then installed
</I>&gt;<i> by all users.
</I>&gt;<i> 
</I>&gt;<i> Opam is not working as a standard GNU/Linux distribution right now: it is
</I>&gt;<i> not binary based, and it has no notion of &quot;release&quot; (all version are there at
</I>&gt;<i> once!), so the intuition coming from other environments we are used to may be
</I>&gt;<i> misleading... the &quot;list of installed files&quot; may not be well defined in general.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Roberto
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Sat, Feb 21, 2015 at 08:24:00AM +0000, Anil Madhavapeddy wrote:
</I>&gt;<i> &gt; &gt; * Tracking of files installed by packages. While unrelated to repo signing, this might have some security implications, so we might want to bring it in.
</I>&gt;<i> &gt; &lt;...&gt;
</I>&gt;<i> &gt; - Registering the files that are installed is going to be quite a large
</I>&gt;<i> undertaking within the repository, but also makes eventual binary distributions much easier. 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> opam-devel mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000958.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
	<LI>Next message: <A HREF="000942.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#959">[ date ]</a>
              <a href="thread.html#959">[ thread ]</a>
              <a href="subject.html#959">[ subject ]</a>
              <a href="author.html#959">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
