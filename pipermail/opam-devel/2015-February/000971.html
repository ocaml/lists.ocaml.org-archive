<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] OPAM 1.3 roadmap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3Cf43fd1ddb1450f54ca3886b9c39a3982%40whitequark.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000970.html">
   <LINK REL="Next"  HREF="000976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] OPAM 1.3 roadmap</H1>
    <B>Peter Zotov</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3Cf43fd1ddb1450f54ca3886b9c39a3982%40whitequark.org%3E"
       TITLE="[opam-devel] OPAM 1.3 roadmap">whitequark at whitequark.org
       </A><BR>
    <I>Wed Feb 25 11:23:21 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000970.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
        <LI>Next message: <A HREF="000976.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#971">[ date ]</a>
              <a href="thread.html#971">[ thread ]</a>
              <a href="subject.html#971">[ subject ]</a>
              <a href="author.html#971">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2015-02-25 14:20, Thomas Gazagnaire wrote:
&gt;&gt;&gt;&gt;<i> I'm less sure about the viability of recording installed files
</I>&gt;&gt;&gt;&gt;<i> strictly -- I view thatas an advisory rather than enforcement-based
</I>&gt;&gt;&gt;&gt;<i> mechanism.  The reason I like the &quot;make ~/.opam a git store&quot; is that
</I>&gt;&gt;&gt;&gt;<i> its possible for applications to write directly into the store as 
</I>&gt;&gt;&gt;&gt;<i> they
</I>&gt;&gt;&gt;&gt;<i> do right now, but still let us track changes precisely.  In fact, if
</I>&gt;&gt;&gt;&gt;<i> we forbid subshells from writing into `~/.opam/.git`, this would be
</I>&gt;&gt;&gt;&gt;<i> a production grade solution that also offers instant-rollback in 
</I>&gt;&gt;&gt;&gt;<i> case
</I>&gt;&gt;&gt;&gt;<i> of compilation errors (no more waiting for a full recompilation of
</I>&gt;&gt;&gt;&gt;<i> the original dependencies!).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Please don't make .opam a git store. Even with one snapshot, it means
</I>&gt;&gt;<i> that my .opam would be 11G instead of 5.5G it currently is. What's 
</I>&gt;&gt;<i> worse
</I>&gt;&gt;<i> is that every recompilation or upgrade would balloon the store even 
</I>&gt;&gt;<i> more.
</I>&gt;&gt;<i> I can easily anticipate it filling the entirety of my 500GB drive,
</I>&gt;&gt;<i> for example. That's absurd.
</I>&gt;<i> 
</I>&gt;<i> It's not so simple, Git uses implicit hash-consing to share as much
</I>&gt;<i> blobs as possible, so snapshotting is free. This also means that
</I>&gt;<i> switches will be able to share binary blobs (a long-standing request).
</I>&gt;<i> All of this needs to be evaluated properly.
</I>
I know. The issue is that reinstalls tend to change large amounts of
files. Imagine upgrading Core, or even worse, the compiler. Even
with delta compression there would be no, or almost no, sharing
among the biggest blobs; without it, less so.

-- 
Peter Zotov
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000970.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
	<LI>Next message: <A HREF="000976.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#971">[ date ]</a>
              <a href="thread.html#971">[ thread ]</a>
              <a href="subject.html#971">[ subject ]</a>
              <a href="author.html#971">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
