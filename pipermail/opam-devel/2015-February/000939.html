<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] Opam ocsigen repository
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Opam%20ocsigen%20repository&In-Reply-To=%3C9393CE5E-AEEE-41C2-9181-902C2B91E1EF%40cam.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000936.html">
   <LINK REL="Next"  HREF="000940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] Opam ocsigen repository</H1>
    <B>Amir Chaudhry</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20Opam%20ocsigen%20repository&In-Reply-To=%3C9393CE5E-AEEE-41C2-9181-902C2B91E1EF%40cam.ac.uk%3E"
       TITLE="[opam-devel] Opam ocsigen repository">amc79 at cam.ac.uk
       </A><BR>
    <I>Fri Feb 20 14:01:34 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000936.html">[opam-devel] Opam ocsigen repository
</A></li>
        <LI>Next message: <A HREF="000940.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#939">[ date ]</a>
              <a href="thread.html#939">[ thread ]</a>
              <a href="subject.html#939">[ subject ]</a>
              <a href="author.html#939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 19 Feb 2015, at 17:21, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">anil at recoil.org</A>&gt; wrote:

&gt;<i> On 19 Feb 2015, at 17:05, Drup &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">drupyog+caml at zoho.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Out of curiosity, what was tedious to maintain there?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> One thing that's come up in both Mirage and XAPI is to have a script that 'splices' a released package from one remote to another.  That would let us upload stable cuts to a working remote, and then move them over to opam-repository.  Would that sort of thing help Ocsigen as well?
</I>&gt;&gt;<i> The opam ocsigen was never done for stable packages, opam-repository is already there for that. We did it when eliom 4.0 was cooking, and the previous eliom version of eliom was very old, so it was necessary even for beginners to use the dev versions of all the packages. opam pin was not very mature at the time.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Now, with opam pin, we have opam files in each package repository, and we would need a mostly-the-same but slightly-different set of opam files in the opam repository. In practice, the opam repository was never updated and was kept out of sync all the time, confusing everyone.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Also, the need to use dev versions is far less important, since the released versions are much closer to the dev versions. And with `--dev-version`, pinning dev versions is really easy.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Basically, it's a mix of inconvenience to maintain and lack of necessity. We could probably have automate it (probably not completely, though), but in the end, it's not really worth it.
</I>&gt;<i> 
</I>&gt;<i> Makes sense.  The use of the remote is useful for stable packages when you need to 'gang schedule' a bunch of constraints and have a place to put them to test for breakage in the broader repository.  I'm considering a model like this for the Core/Async package updates, since they typically break a few of the dependent packages in the OPAM repository after they are merged.  It would be nice to have a consistent staging area where such errors could be sorted out ahead of merging into mainline.
</I>&gt;<i> 
</I>&gt;<i> This problem may come up for Ocsigen as well as its number of libraries grows&#8230;
</I>
To add some more context to Anil's comment, we've also discussed this kind of model for MirageOS.  It would create a staging area for some wider testing to take place, beyond the current tests on individual libraries.  It might also allow a place for developers to get 'cutting-edge' package sets, by adding the remote -- as opposed to 'bleeding-edge' :) 

Some notes on the discussion are at: <A HREF="http://openmirage.org/wiki/weekly-2015-02-11#ImprovingQuality">http://openmirage.org/wiki/weekly-2015-02-11#ImprovingQuality</A>

Amir

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000936.html">[opam-devel] Opam ocsigen repository
</A></li>
	<LI>Next message: <A HREF="000940.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#939">[ date ]</a>
              <a href="thread.html#939">[ thread ]</a>
              <a href="subject.html#939">[ subject ]</a>
              <a href="author.html#939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
