<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [opam-devel] OPAM 1.3 roadmap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3CB039BA3F-CBE5-49A4-9B5B-EF77F440BB5E%40m4x.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000959.html">
   <LINK REL="Next"  HREF="000943.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[opam-devel] OPAM 1.3 roadmap</H1>
    <B>Simon Cruanes</B> 
    <A HREF="mailto:opam-devel%40lists.ocaml.org?Subject=Re%3A%20%5Bopam-devel%5D%20OPAM%201.3%20roadmap&In-Reply-To=%3CB039BA3F-CBE5-49A4-9B5B-EF77F440BB5E%40m4x.org%3E"
       TITLE="[opam-devel] OPAM 1.3 roadmap">simon.cruanes.2007 at m4x.org
       </A><BR>
    <I>Sat Feb 21 08:37:07 GMT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000959.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
        <LI>Next message: <A HREF="000943.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#942">[ date ]</a>
              <a href="thread.html#942">[ thread ]</a>
              <a href="subject.html#942">[ subject ]</a>
              <a href="author.html#942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sandboxing the build would also be a big security improvement. I think cabal now does it, and signing packages doesn't protect against malicious or buggy packages (see: bumblebee's uninstall target). That also goes hand in hand with file tracking. I don't know how difficult it is, though.

Cheers! 

Le 21 f&#233;vrier 2015 05:01:56 UTC+01:00, Louis Gesbert &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt; a &#233;crit :
&gt;<i>With 1.2.1 almost out of the door, time has come to review the roadmap
</I>&gt;<i>discussed back in December and choose where we'll be going for 1.3.
</I>&gt;<i>Original mail attached for reference.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>The topic that is burning hot at the moment is, specially after the
</I>&gt;<i>Debian Haskell build host has been compromised, security: we have no
</I>&gt;<i>signing at all at the moment, and we need to improve on this before it
</I>&gt;<i>becomes a problem. TUF [1] has devised a sane amount of rules for
</I>&gt;<i>repository management and signing that should make it easier to get it
</I>&gt;<i>right in OPAM. Hannes has mentionned writing an OCaml implementation
</I>&gt;<i>for TUF, which could get very helpful.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Also of importance is Windows support. It should at least be
</I>&gt;<i>straighforward and documented to get a basic Cygwin setup working. That
</I>&gt;<i>goes with adding automated tests (appveyor can now be added in Github
</I>&gt;<i>alongside Travis). Related is cleaning up external command usage (even
</I>&gt;<i>if not really justified by a Windows port only, as David Allsopp
</I>&gt;<i>pointed out) -- replacing curl calls by cohttp, use ocaml-fileutils...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>These are the other main features, that'll probably take more time if
</I>&gt;<i>we are to focus eg. on security:
</I>&gt;<i>
</I>&gt;<i>* a plugin mechanism with plugins for example for OCaml (for better
</I>&gt;<i>agnosticity), external dependency handling [2], documentation
</I>&gt;<i>generation...
</I>&gt;<i>
</I>&gt;<i>* a 'provides:' field in OPAM files [3]. This is a loose requirement if
</I>&gt;<i>we want to switch the repository to have OCaml itself in a package
</I>&gt;<i>(which is already possible, but the system compiler may yet be an
</I>&gt;<i>issue).
</I>&gt;<i>
</I>&gt;<i>* More flexible switch handling (multi-switch packages, per-switch
</I>&gt;<i>remotes, layered switches for cross-compilation...)
</I>&gt;<i>
</I>&gt;<i>* Tracking of files installed by packages. While unrelated to repo
</I>&gt;<i>signing, this might have some security implications, so we might want
</I>&gt;<i>to bring it in.
</I>&gt;<i>
</I>&gt;<i>* With file tracking, generating a binary repo (with some limitations)
</I>&gt;<i>could be quite straight-forward.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Which of these do you think is most important ? Have I forgotten
</I>&gt;<i>anything ?
</I>&gt;<i>
</I>&gt;<i>Cheers,
</I>&gt;<i>Louis
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>[1] <A HREF="http://theupdateframework.com/">http://theupdateframework.com/</A>
</I>&gt;<i>[2]
</I>&gt;<i><A HREF="https://github.com/ocaml/opam/blob/master/doc/design/depexts-plugins">https://github.com/ocaml/opam/blob/master/doc/design/depexts-plugins</A>
</I>&gt;<i>[3] <A HREF="https://github.com/ocaml/opam/blob/master/doc/design/provides.md">https://github.com/ocaml/opam/blob/master/doc/design/provides.md</A>
</I>&gt;<i>
</I>&gt;<i>----- message suivi
</I>&gt;<i>----------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>De&#160;: Louis Gesbert &lt;<A HREF="http://lists.ocaml.org/listinfo/opam-devel">louis.gesbert at ocamlpro.com</A>&gt;
</I>&gt;<i>&#192;&#160;: <A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i>Envoy&#233;&#160;: Wed Dec 17 11:07:40 UTC+01:00 2014
</I>&gt;<i>Objet&#160;: [opam-devel] OPAM Roadmap -- what next ?
</I>&gt;<i>
</I>&gt;<i>Hi all,
</I>&gt;<i>
</I>&gt;<i>with some lag after the 1.2 release, I'd like to open some space for a
</I>&gt;<i>collective discussion of the priorities for where the energies should
</I>&gt;<i>go next. We have mainly 3 directions for improvements: first,
</I>&gt;<i>portability, with the main goal of a Windows version. Second,
</I>&gt;<i>agnosticity, with the goal to make OPAM more generic, and try and open
</I>&gt;<i>it to users outside of the OCaml community (wouldn't OPAM for Haskell
</I>&gt;<i>be fun ?). Third, there are always lots of features and improvements
</I>&gt;<i>that have been asked for, and would improve the experience of current
</I>&gt;<i>users.
</I>&gt;<i>
</I>&gt;<i>So here is a summary of what I've gathered. Feel free to add your own.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>## Portability
</I>&gt;<i>
</I>&gt;<i>- **Rewrite parallel command engine.** / done.
</I>&gt;<i>
</I>&gt;<i>- **Native system manipulation (cp, rm, curl...).**
</I>&gt;<i>These are mostly done through calls to the shell or external programs.
</I>&gt;<i>It's
</I>&gt;<i>not very pretty but quite pragmatic actually... until we want to run on
</I>&gt;<i>Windows without Cygwin. Anyway, this wouldn't be the end of portability
</I>&gt;<i>  issues.
</I>&gt;<i>
</I>&gt;<i>- **Windows support.**
</I>&gt;<i>  for OPAM itself to begin with. This should be pretty close.
</I>&gt;<i>
</I>&gt;<i>- **Packages on Windows.**
</I>&gt;<i>  Locate common issues and attempt to find generic fixes.
</I>&gt;<i>
</I>&gt;<i>- Allow **direct use of more solvers** or solver servers.
</I>&gt;<i>
</I>&gt;<i>- **Support cross-compilation**
</I>&gt;<i>  This is quite an open issue at the moment.
</I>&gt;<i>
</I>&gt;<i>## Agnosticity
</I>&gt;<i>
</I>&gt;<i>- **Isolate OCaml-specific stuff.**
</I>&gt;<i>  E.g. specific opam-file variables. See ocaml-specific.md
</I>&gt;<i>
</I>&gt;<i>- **Separate as plugins**
</I>&gt;<i>  To open the gate to OPAM without these plugins, or with other ones
</I>&gt;<i>
</I>&gt;<i>- **Compilers as packages.**
</I>&gt;<i>This should mostly work now, but needs some tests and strengthening.
</I>&gt;<i>The main
</I>&gt;<i>thing still to do is to handle the system compiler changes properly ;
</I>&gt;<i>that
</I>&gt;<i>  part should be made more generic anyway (see discussion on hooks)
</I>&gt;<i>
</I>&gt;<i>## Features
</I>&gt;<i>
</I>&gt;<i>- A **provides** field. Generally useful, but particulary so with
</I>&gt;<i>  compilers-as-packages
</I>&gt;<i>
</I>&gt;<i>- Releasing the **&quot;features&quot; field** for easier package configuration
</I>&gt;<i>
</I>&gt;<i>- **Track installed files**
</I>&gt;<i>
</I>&gt;<i>- **Improve security**: just checking md5s is quite light ; package
</I>&gt;<i>scripts can
</I>&gt;<i>  write anywhere
</I>&gt;<i>
</I>&gt;<i>- **OS-specific handling of dependencies** (eg dependencies on packages
</I>&gt;<i>from the
</I>&gt;<i>  OS) with plugins (#1519)
</I>&gt;<i>
</I>&gt;<i>- Specify and implement **hooks**
</I>&gt;<i>
</I>&gt;<i>- Find a nicer way to **share dev repos** / undoable &quot;pinning sources&quot;
</I>&gt;<i>
</I>&gt;<i>- **Per-switch remotes**
</I>&gt;<i>
</I>&gt;<i>- **Multi-switch packages**
</I>&gt;<i>
</I>&gt;<i>- Support for (automatic generation of) **binary packages**
</I>&gt;<i>
</I>&gt;<i>- Nicer **ocamlfind interaction**
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Cheers,
</I>&gt;<i>Louis Gesbert
</I>&gt;<i>
</I>&gt;<i>------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>opam-devel mailing list
</I>&gt;<i><A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i><A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>opam-devel mailing list
</I>&gt;<i><A HREF="http://lists.ocaml.org/listinfo/opam-devel">opam-devel at lists.ocaml.org</A>
</I>&gt;<i><A HREF="http://lists.ocaml.org/listinfo/opam-devel">http://lists.ocaml.org/listinfo/opam-devel</A>
</I>
-- 
Simon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/opam-devel/attachments/20150221/c4bd8ff3/attachment.html">http://lists.ocaml.org/pipermail/opam-devel/attachments/20150221/c4bd8ff3/attachment.html</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000959.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
	<LI>Next message: <A HREF="000943.html">[opam-devel] OPAM 1.3 roadmap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#942">[ date ]</a>
              <a href="thread.html#942">[ thread ]</a>
              <a href="subject.html#942">[ subject ]</a>
              <a href="author.html#942">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/opam-devel">More information about the opam-devel
mailing list</a><br>
</body></html>
