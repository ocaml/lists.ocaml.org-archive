<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Status of extension_points extensions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Status%20of%20extension_points%20extensions&In-Reply-To=%3C51ADAE94.1050106%40inria.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000447.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Status of extension_points extensions</H1>
    <B>Romain Bardou</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Status%20of%20extension_points%20extensions&In-Reply-To=%3C51ADAE94.1050106%40inria.fr%3E"
       TITLE="[wg-camlp4] Status of extension_points extensions">romain.bardou at inria.fr
       </A><BR>
    <I>Tue Jun  4 10:08:36 BST 2013</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000447.html">[wg-camlp4] Status of extension_points extensions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#446">[ date ]</a>
              <a href="thread.html#446">[ thread ]</a>
              <a href="subject.html#446">[ subject ]</a>
              <a href="author.html#446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear wg-camlp4,

Recently Alain has impressively shown great examples of extension_points
in action.

- An extension to generate .mli files from .ml files with annotations
such as &quot;this type should be abstract&quot;:

[@@mli abstract]

(Alain does *not* endorse the idea of generating .mli files
automatically, this is just a proof-of-concept!)

- an extension to put ocamldoc-like comments, added not as comments but
as extension points (making it more clear that the comment is attached
to a given node in the parsetree):

[@@doc &quot;This is an internal module.&quot;]

- an extension to copy a type definition from the .mli to the .ml

type t = [%copy_typedef]

The syntax makes it very clear that extensions are not part of the
language and are extensions. This is good. However, it also means that
if the extension proves so useful that we want it part of the actual
language, we are left with the following choices:
- provide the extension as-is;
- reprogram the extension with a dedicated syntax.

If we provide the extension as-is, the fact that the syntax says it is
an extension suddenly is a problem because it is not actually an
extension anymore if it is part of the language. Moreover the syntax may
not be ideal. And if this approach is used, and several extensions are
included, we may end up with programs which are cluttered with brackets,
so to speak.

If, on the other hand, we reprogram the extension, we are able to
provide a nicer syntax. For instance, just write &quot;abstract&quot; instead of
&quot;[@@mli abstract]&quot;. But it means more work and we would not know what to
do with programs that used the extension before: rewrite them with the
new syntax? Keep using the extension, which will probably no longer be
maintained if it is part of the language?

Until now, I saw extension_points as a very nice way to experiment with
language extensions, and to provide custom, project-local extensions.
But Alain just showed how powerful it is and my fear is now that,
paradoxically, we and up with a lot of very useful extensions that would
almost become need-to-haves&#8230; and with the drawback that for many of them
the syntax would not be ideal.

Has this issue already been discussed?

That being said, it is a problem which is rather good to have.

Cheers,

-- 
Romain Bardou
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000447.html">[wg-camlp4] Status of extension_points extensions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#446">[ date ]</a>
              <a href="thread.html#446">[ thread ]</a>
              <a href="subject.html#446">[ subject ]</a>
              <a href="author.html#446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
