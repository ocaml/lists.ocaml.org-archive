<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;are&nbsp;the&nbsp;things&nbsp;I&nbsp;do&nbsp;with&nbsp;CamlP4.&nbsp;Lots&nbsp;are&nbsp;just&nbsp;simple&nbsp;variants&nbsp;of&lt;/div&gt;&lt;div&gt;the&nbsp;already&nbsp;reported&nbsp;things,&nbsp;though.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;pa_monad&nbsp;for&nbsp;&quot;perform&quot;&nbsp;notation&lt;/div&gt;<br>
&lt;div&gt;===================================&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;URL:&nbsp;&lt;a&nbsp;href=&quot;https://bitbucket.org/camlspotter/pa_monad_custom&quot;&gt;https://bitbucket.org/camlspotter/pa_monad_custom&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;modified&nbsp;the&nbsp;original&nbsp;pa_monad&nbsp;so&nbsp;that&nbsp;I&nbsp;can&nbsp;write&nbsp;I/O&nbsp;code&nbsp;easily&nbsp;inside&nbsp;perform:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;perform&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;...;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;let&nbsp;()&nbsp;=&nbsp;prerr_endline&nbsp;&quot;debug&quot;&nbsp;in&nbsp; &nbsp; &nbsp;(*&nbsp;Writing&nbsp; let&nbsp;()&nbsp;=&nbsp;...&nbsp;in&nbsp; is&nbsp;boring&nbsp;*)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;...;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;peform&lt;/div&gt;&lt;div&gt;<br>
 &nbsp; &nbsp; &nbsp;...;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;\&nbsp;prerr_endline&nbsp;&quot;debug&quot;;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (*&nbsp;It&nbsp;is&nbsp;not&nbsp;unit&nbsp;monad,&nbsp;but&nbsp;a&nbsp;simple&nbsp;unit&nbsp;*)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp;...;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;\&nbsp;behaves&nbsp;like&nbsp;a&nbsp;prefix&nbsp;operator&nbsp;with&nbsp;very&nbsp;low&nbsp;power, &lt;/div&gt;<br>
&lt;div&gt;less&nbsp;than&nbsp;function&nbsp;application. &lt;/div&gt;&lt;div&gt;I&nbsp;wish&nbsp;-ppx&nbsp;could&nbsp;provide&nbsp;an&nbsp;easy&nbsp;way&nbsp;to&nbsp;handle&nbsp;those&nbsp;operators&nbsp;with&lt;/div&gt;&lt;div&gt;custom&nbsp;connectivity&nbsp;configurations,&nbsp;including&nbsp;pa_monad&#39;s&nbsp;&lt;--.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
Code&nbsp;generations&nbsp;from&nbsp;data&nbsp;type&nbsp;definitions&lt;/div&gt;&lt;div&gt;======================================================&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;bunch&nbsp;of&nbsp;type_conv&nbsp;based&nbsp;pa&nbsp;modules,&nbsp;such&nbsp;as&nbsp;meta_conv,&nbsp;and&nbsp;other &lt;/div&gt;&lt;div&gt;iterator/visitor/mapper&nbsp;generators.&nbsp;I&nbsp;believe&nbsp;they&nbsp;can&nbsp;be&nbsp;easily&nbsp;ported&nbsp;from &lt;/div&gt;<br>
&lt;div&gt;type_conv&nbsp;to&nbsp;-ppx,&nbsp;if&nbsp;we&nbsp;could&nbsp;do&nbsp;for&nbsp;sexplib.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Record&nbsp;like&nbsp;syntax&lt;/div&gt;&lt;div&gt;======================================================&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;URL:&nbsp;&lt;a&nbsp;href=&quot;https://bitbucket.org/camlspotter/ocaml-pure-polyrecord&quot;&gt;https://bitbucket.org/camlspotter/ocaml-pure-polyrecord&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;introduced&nbsp;record&nbsp;like&nbsp;syntax&nbsp;for&nbsp;pure&nbsp;polymorphic&nbsp;records&lt;/div&gt;&lt;div&gt;(they&nbsp;are&nbsp;not&nbsp;objects&nbsp;so&nbsp;they&nbsp;can&nbsp;be&nbsp;marshalled).&nbsp;The&nbsp;syntax&nbsp;is&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;let&nbsp;r&nbsp;=&nbsp;{|&nbsp;x&nbsp;=&nbsp;1;&nbsp;y&nbsp;=&nbsp;&quot;hello&quot;;&nbsp;|}&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;let&nbsp;x&nbsp;=&nbsp;r..x&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;this&nbsp;is&nbsp;a&nbsp;variant&nbsp;of&nbsp;js_of_ocaml&#39;s&nbsp;javascript&nbsp;object&nbsp;syntax.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Perl/Python/Shell&nbsp;like&nbsp;string&nbsp;literals&lt;/div&gt;&lt;div&gt;======================================================&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;URL:&nbsp;&lt;a&nbsp;href=&quot;https://bitbucket.org/camlspotter/orakuda&quot;&gt;https://bitbucket.org/camlspotter/orakuda&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ORakuda&nbsp;provides&nbsp;some&nbsp;scripting&nbsp;language&nbsp;like&nbsp;string&nbsp;literals&nbsp;like:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;$/^(.*)\.mli$/&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(*&nbsp;Regexp.&nbsp;See&nbsp;\&nbsp;is&nbsp;not&nbsp;doubled.&nbsp;*)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;$s/template/replace/g&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;let&nbsp;myname&nbsp;=&nbsp;&quot;Jun&quot;&nbsp;in&nbsp;$&quot;My&nbsp;name&nbsp;is&nbsp;$myname&nbsp;and&nbsp;my&nbsp;age&nbsp;is&nbsp;%d&quot;&nbsp;42&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (*&nbsp;printf&nbsp;*)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;let&nbsp;dir&nbsp;=&nbsp;Sys.getenv&nbsp;&quot;HOME&quot;&nbsp;in&nbsp;$`ls&nbsp;$dir`&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;is&nbsp;very&nbsp;useful&nbsp;to&nbsp;write&nbsp;quick&nbsp;one&nbsp;time&nbsp;OCaml&nbsp;scripts,&nbsp;however,&nbsp;it&nbsp;requires &lt;/div&gt;&lt;div&gt;a&nbsp;patch&nbsp;to&nbsp;CamlP4&nbsp;to&nbsp;modify&nbsp;its&nbsp;lexer.&nbsp;CamlP4&nbsp;can&nbsp;actually&nbsp;replace&nbsp;its&nbsp;lexer,&nbsp;but&lt;/div&gt;<br>
&lt;div&gt;it&nbsp;is&nbsp;not&nbsp;integrated&nbsp;into&nbsp;pa_*.cmo&nbsp;framework.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;without&nbsp;the&nbsp;patch,&nbsp;the&nbsp;above&nbsp;must&nbsp;be&nbsp;written:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;:m&lt;^(.*)\.mli$&gt;&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;&lt;:s&lt;template/replace/g&gt;&gt;&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;let&nbsp;myname&nbsp;=&nbsp;&quot;Jun&quot;&nbsp;in&nbsp;&lt;:qq&lt;My&nbsp;name&nbsp;is&nbsp;$myname&nbsp;and&nbsp;my&nbsp;age&nbsp;is&nbsp;%d&gt;&gt;&nbsp;42&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;let&nbsp;dir&nbsp;=&nbsp;Sys.getenv&nbsp;&quot;HOME&quot;&nbsp;in&nbsp;&lt;:qx&lt;ls&nbsp;$dir&gt;&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;is&nbsp;a&nbsp;bit&nbsp;cumbersome&nbsp;to&nbsp;type&nbsp;&lt;:&lt;&nbsp;&gt;&gt;&nbsp;around,&nbsp;but&nbsp;still&nbsp;they&nbsp;are&nbsp;useful&nbsp;to&nbsp;me.&lt;/div&gt;<br>
&lt;div&gt;Note&nbsp;that&nbsp;$&nbsp;is&nbsp;NOT&nbsp;used&nbsp;as&nbsp;anti-quotation&nbsp;for&nbsp;these&nbsp;quotes.&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;think&nbsp;fixing&nbsp;anti-quotation&nbsp;symbol&nbsp;to&nbsp;some&nbsp;character&nbsp;like&nbsp;$&lt;/div&gt;&lt;div&gt;uniformly&nbsp;is&nbsp;a&nbsp;bad&nbsp;idea.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;do&nbsp;not&nbsp;expect&nbsp;-ppx&nbsp;is&nbsp;going&nbsp;to&nbsp;handle&nbsp;lexer&nbsp;hacks&nbsp;like&nbsp;$/.../,&nbsp;however,&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;hope&nbsp;it&nbsp;could&nbsp;be&nbsp;simple&nbsp;enough&nbsp;to&nbsp;write&nbsp;a&nbsp;patch&nbsp;to&nbsp;support&nbsp;$/.../.&nbsp;:-)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Partial&nbsp;evaluation&lt;/div&gt;&lt;div&gt;======================================================&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;Planck&nbsp;LL&nbsp;parser&nbsp;library,&nbsp;I&nbsp;wrote&nbsp;a&nbsp;small&nbsp;pa&nbsp;module&nbsp;to&nbsp;partial-evaluate&lt;/div&gt;<br>
&lt;div&gt;monadic&nbsp;binds&nbsp;for&nbsp;optimzation.&nbsp;This&nbsp;is&nbsp;purely&nbsp;a&nbsp;program&nbsp;transformation, &lt;/div&gt;&lt;div&gt;so&nbsp;there&nbsp;should&nbsp;be&nbsp;no&nbsp;problem&nbsp;to&nbsp;do&nbsp;the&nbsp;same&nbsp;thing&nbsp;in&nbsp;-ppx.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
