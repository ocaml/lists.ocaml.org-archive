<tt>
Hi&nbsp;Sebastien,&lt;div&gt; &nbsp; I&nbsp;agree&nbsp;with&nbsp;you&nbsp;that&nbsp;adding&nbsp;run-time&nbsp;types.&nbsp;To&nbsp;clarify&nbsp;a&nbsp;bit,&nbsp;Fan&nbsp;is&nbsp;not&nbsp;invasive&nbsp;as&nbsp;Camlp*&nbsp;or&nbsp;ppx(the&nbsp;current&nbsp;ppx&nbsp;proposal&nbsp;seems&nbsp;to&nbsp;be&nbsp;quite&nbsp;large&nbsp;change&nbsp;to&nbsp;the&nbsp;compiler),&nbsp;it&nbsp;does&nbsp;not&nbsp;need&nbsp;any&nbsp;change&nbsp;to&nbsp;the&nbsp;compiler,&nbsp;so&nbsp;it&nbsp;does&nbsp;not&nbsp;impose&nbsp;you&nbsp;to&nbsp;use&nbsp;it.&lt;/div&gt;<br>
&lt;div&gt;For&nbsp;the&nbsp;deriving&nbsp;and&nbsp;type_conv&nbsp;syntax&nbsp;extension&nbsp;conflict,&nbsp;this&nbsp;is&nbsp;not&nbsp;the&nbsp;Fault&nbsp;of&nbsp;Camlp*,&nbsp;you&nbsp;can&nbsp;avoid &lt;/div&gt;&lt;div&gt;it&nbsp;while&nbsp;still&nbsp;using&nbsp;Camlp*,&nbsp;the&nbsp;solution&nbsp;is&nbsp;adopted&nbsp;by&nbsp;Fan&lt;/div&gt;&lt;div&gt;{:ocaml|&lt;/div&gt;&lt;div&gt;type&nbsp;u&nbsp;=&nbsp;A&nbsp;of&nbsp;int &lt;/div&gt;<br>
&lt;div&gt;|}&lt;br&gt;{:derive|&nbsp;whatever&nbsp;you&nbsp;like|}&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Feb&nbsp;5,&nbsp;2013&nbsp;at&nbsp;10:29&nbsp;AM,&nbsp;Sebastien&nbsp;Mondet&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:sebastien.mondet@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;sebastien.mondet@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Hi&lt;br&gt;&lt;br&gt;&lt;/div&gt;Yet&nbsp;Another&nbsp;Proposal&nbsp;™ &nbsp;:)&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;Here,&nbsp;at&nbsp;NYU-Bio&nbsp;we&nbsp;use&nbsp;camlp4&nbsp;in&nbsp;two&nbsp;ways:&lt;br&gt;&lt;br&gt;&lt;/div&gt;1.&nbsp;All&nbsp;the&nbsp;code&nbsp;is&nbsp;JaneSt-Core-styled&nbsp;and&nbsp;uses&nbsp;sexplib.syntax&nbsp;and &nbsp;bin_prot.syntax&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;br&gt;We&nbsp;also&nbsp;use&nbsp;an&nbsp;(&#39;a,&nbsp;&#39;b)&nbsp;Result.t&nbsp;Lwt.t &nbsp;monad&nbsp;everywhere&nbsp;but&nbsp;there&nbsp;is&nbsp;no&nbsp;need&nbsp;for&nbsp;camlp4,&nbsp;monadic&nbsp;programming&nbsp;is&nbsp;perfectly&nbsp;fine&nbsp;with&nbsp;normal&nbsp;OCaml&nbsp;syntax.&lt;br&gt;&lt;br&gt;&lt;/div&gt;2.&nbsp;The&nbsp;web-app&nbsp;is&nbsp;fully&nbsp;Eliom-based:&nbsp;it&nbsp;uses&nbsp;the&nbsp;eliom{dep,c,opt}&nbsp;tool-chain,&nbsp;so&nbsp;it&nbsp;is&nbsp;incompatible&nbsp;with&nbsp;sexplib.syntax&nbsp;(because&nbsp;it&nbsp;imposes&nbsp;deriving)&nbsp;and&nbsp;takes&nbsp;ages&nbsp;to&nbsp;compile.&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;(if&nbsp;I&nbsp;had&nbsp;to&nbsp;start&nbsp;again&nbsp;the&nbsp;project,&nbsp;I&nbsp;think&nbsp;I&nbsp;would&nbsp;not&nbsp;use&nbsp;the&nbsp;syntax&nbsp;part&nbsp;of&nbsp;ocsigen&nbsp;or&nbsp;at&nbsp;least&nbsp;limit&nbsp;it&nbsp;to&nbsp;one&nbsp;single&nbsp;file).&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;I&nbsp;have&nbsp;already&nbsp;lost&nbsp;too&nbsp;many&nbsp;hours&nbsp;of&nbsp;my&nbsp;life&nbsp;fixing&nbsp;camlp4-related&nbsp;problems&nbsp;just&nbsp;for&nbsp;using&nbsp;type_conv,&nbsp;so:&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;proposal:&lt;br&gt;&lt;br&gt;&lt;/div&gt;Get&nbsp;something&nbsp;like&nbsp;dyntype&nbsp;[1]&nbsp;or&nbsp;what&nbsp;Pierre&nbsp;Chambart&nbsp;and&nbsp;Grégoire&nbsp;Henry&nbsp;presented&nbsp;at&nbsp;OUD&nbsp;[2],&nbsp;into&nbsp;the&nbsp;main&nbsp;compiler.&nbsp;&lt;br&gt;&lt;br&gt;type_conv&nbsp;and&nbsp;deriving&nbsp;will&nbsp;become&nbsp;obsolete.&lt;br&gt;<br>
<br>
<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then,&nbsp;most&nbsp;people&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;any&nbsp;kind&nbsp;of&nbsp;syntactic&nbsp;preprocessing&nbsp;for&nbsp;95%&nbsp;of&nbsp;their&nbsp;problems.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;the&nbsp;remaining&nbsp;5%,&nbsp;they&nbsp;can&nbsp;use&nbsp;camlp4,&nbsp;camlp5,&nbsp;Fan,&nbsp;or&nbsp;write&nbsp;their&nbsp;own&nbsp;code&nbsp;generator&nbsp;without&nbsp;imposing&nbsp;it&nbsp;to&nbsp;anyone&nbsp;else.&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers&lt;br&gt;&lt;/div&gt;&lt;div&gt;Seb&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1]&nbsp;&lt;a&nbsp;href=&quot;https://github.com/mirage/dyntype&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/mirage/dyntype&lt;/a&gt;&lt;br&gt;[2]&nbsp;&lt;a&nbsp;href=&quot;http://oud.ocaml.org/2012/#program&quot;&nbsp;target=&quot;_blank&quot;&gt;http://oud.ocaml.org/2012/#program&lt;/a&gt;&lt;br&gt;<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
wg-camlp4&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:wg-camlp4@lists.ocaml.org&quot;&gt;wg-camlp4@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/wg-camlp4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/wg-camlp4&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;--&nbsp;Regards,&nbsp;Hongbo<br>
&lt;/div&gt;<br>

</tt>
