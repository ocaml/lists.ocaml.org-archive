<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;I&nbsp;would&nbsp;count&nbsp;as&nbsp;one&nbsp;of&nbsp;the&nbsp;people&nbsp;not&nbsp;being&nbsp;fond&nbsp;of&nbsp;&#39;;;&#39;.&nbsp;However,&nbsp;there&nbsp;is&nbsp;something&nbsp;I&nbsp;don&#39;t&nbsp;understand&nbsp;about&nbsp;your&nbsp;proposal:&nbsp;where&nbsp;in&nbsp;the&nbsp;AST&nbsp;tree&nbsp;would&nbsp;you&nbsp;attach&nbsp;those&nbsp;floating&nbsp;attributes?&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;My&nbsp;understanding&nbsp;of&nbsp;Alain&#39;s&nbsp;&quot;;;[@..]&quot;&nbsp;was&nbsp;that&nbsp;he&nbsp;introduced&nbsp;a&nbsp;specific&nbsp;&quot;empty&nbsp;item&quot;&nbsp;in&nbsp;the&nbsp;AST&nbsp;of&nbsp;the&nbsp;current&nbsp;structure/signature.&nbsp;Extending&nbsp;this&nbsp;technique&nbsp;to&nbsp;the&nbsp;example&nbsp;you&#39;ve&nbsp;shown&nbsp;would&nbsp;require&nbsp;adding&nbsp;such&nbsp;phony&nbsp;items&nbsp;in&nbsp;a&nbsp;few&nbsp;more&nbsp;syntactic&nbsp;positions,&nbsp;which&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;be&nbsp;a&nbsp;good&nbsp;idea.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Oct&nbsp;11,&nbsp;2013&nbsp;at&nbsp;6:39&nbsp;PM,&nbsp;Leo&nbsp;White&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:lpw25@cam.ac.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;lpw25@cam.ac.uk&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;ve&nbsp;been&nbsp;looking&nbsp;recently&nbsp;at&nbsp;encoding&nbsp;inline&nbsp;documentation&lt;br&gt;<br>
(i.e.&nbsp;ocamldoc&nbsp;comments)&nbsp;within&nbsp;attributes,&nbsp;as&nbsp;part&nbsp;of&nbsp;my&nbsp;work&nbsp;on&lt;br&gt;<br>
opam-doc.&nbsp;Mostly&nbsp;this&nbsp;works&nbsp;fine,&nbsp;but&nbsp;there&nbsp;is&nbsp;an&nbsp;issue&nbsp;with&nbsp;comments&lt;br&gt;<br>
that&nbsp;are&nbsp;not&nbsp;attached&nbsp;to&nbsp;any&nbsp;item&nbsp;(e.g.&nbsp;section&nbsp;headers).&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;had&nbsp;thought&nbsp;that&nbsp;the&nbsp;existing&nbsp;support&nbsp;for&nbsp;&quot;structure/signature&lt;br&gt;<br>
attributes&quot;&nbsp;would&nbsp;be&nbsp;sufficient.&nbsp;By&nbsp;these&nbsp;I&nbsp;mean&nbsp;attributes&nbsp;like:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;;;[@@doc&nbsp;&quot;Hello&nbsp;World&quot;]&lt;br&gt;<br>
&lt;br&gt;<br>
which&nbsp;are&nbsp;parsed&nbsp;as&nbsp;separate&nbsp;structure/signature&nbsp;items&nbsp;rather&nbsp;than&lt;br&gt;<br>
attached&nbsp;to&nbsp;an&nbsp;existing&nbsp;structure/signature&nbsp;item.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;problem&nbsp;is&nbsp;that&nbsp;unattached&nbsp;attributes&nbsp;can&nbsp;appear&nbsp;in&nbsp;a&nbsp;number&nbsp;of&lt;br&gt;<br>
places&nbsp;that&nbsp;structure&nbsp;attributes&nbsp;cannot.&nbsp;Some&nbsp;examples:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;type&nbsp;t&nbsp;=&nbsp;Foo&nbsp;of&nbsp;s&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;(**&nbsp;{3&nbsp;Section}&nbsp;*)&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;and&nbsp;s&nbsp;=&nbsp;Bin&nbsp;of&nbsp;t&nbsp;option&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;class&nbsp;type&nbsp;foo&nbsp;=&nbsp;object&lt;br&gt;<br>
 &nbsp; &nbsp;method&nbsp;a&nbsp;:&nbsp;int&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;(**&nbsp;Some&nbsp;comment&nbsp;*)&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;method&nbsp;b&nbsp;:&nbsp;int&lt;br&gt;<br>
 &nbsp;end&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;so&nbsp;on.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;both&nbsp;these&nbsp;cases&nbsp;it&nbsp;is&nbsp;hard&nbsp;to&nbsp;add&nbsp;support&nbsp;for&nbsp;structure&nbsp;items&nbsp;in&lt;br&gt;<br>
those&nbsp;locations&nbsp;because&nbsp;that&nbsp;would&nbsp;require&nbsp;supporting&nbsp;&#39;;;&#39;&nbsp;in&nbsp;those&lt;br&gt;<br>
locations&nbsp;as&nbsp;well.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;also&nbsp;heard&nbsp;a&nbsp;number&nbsp;of&nbsp;complaints&nbsp;about&nbsp;the&nbsp;&quot;;;[@@&nbsp;foo]&quot;&lt;br&gt;<br>
syntax.&nbsp;Firstly,&nbsp;that&nbsp;it&nbsp;is&nbsp;ugly&nbsp;and&nbsp;its&nbsp;meaning&nbsp;is&nbsp;not&nbsp;particularly&lt;br&gt;<br>
obvious,&nbsp;and&nbsp;secondly&nbsp;that&nbsp;users&nbsp;may&nbsp;be&nbsp;confused&nbsp;when&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;type&nbsp;t;;&lt;br&gt;<br>
 &nbsp;[@@&nbsp;sexp]&lt;br&gt;<br>
&lt;br&gt;<br>
silently&nbsp;does&nbsp;not&nbsp;work.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;my&nbsp;suggestion&nbsp;would&nbsp;be&nbsp;to&nbsp;(reluctantly)&nbsp;add&nbsp;a&nbsp;third&nbsp;form&nbsp;of&lt;br&gt;<br>
attribute:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;[@@@&nbsp;foo]&lt;br&gt;<br>
&lt;br&gt;<br>
which&nbsp;means&nbsp;basically&nbsp;the&nbsp;same&nbsp;as:&lt;br&gt;<br>
&lt;br&gt;<br>
 ;;[@@&nbsp;foo]&lt;br&gt;<br>
&lt;br&gt;<br>
does&nbsp;now.&nbsp;This&nbsp;could&nbsp;be&nbsp;supported&nbsp;in&nbsp;the&nbsp;additional&nbsp;locations&nbsp;that&nbsp;I&lt;br&gt;<br>
mentioned&nbsp;above,&nbsp;and&nbsp;would&nbsp;allow&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error&nbsp;for&nbsp;the&nbsp;&quot;;;[@@sexp]&quot;&lt;br&gt;<br>
mistake.&lt;br&gt;<br>
&lt;br&gt;<br>
Since&nbsp;this&nbsp;follows&nbsp;the&nbsp;existing&nbsp;pattern&nbsp;of&nbsp;[@...]&nbsp;and&nbsp;[@@...],&nbsp;it&nbsp;should&lt;br&gt;<br>
not&nbsp;be&nbsp;too&nbsp;much&nbsp;trouble&nbsp;to&nbsp;tell&nbsp;users&nbsp;about&nbsp;[@@@&nbsp;...],&nbsp;and&nbsp;certainly&nbsp;no&lt;br&gt;<br>
worse&nbsp;than&nbsp;explaining&nbsp;&quot;;;[@@...]&quot;&nbsp;to&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Leo&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
wg-camlp4&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:wg-camlp4@lists.ocaml.org&quot;&gt;wg-camlp4@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/wg-camlp4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/wg-camlp4&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
