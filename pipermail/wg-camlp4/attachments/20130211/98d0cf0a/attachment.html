<tt>
Some&nbsp;statistics&nbsp;about&nbsp;Fan.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Fan&nbsp;has&nbsp;a&nbsp;mirror&nbsp;directory&nbsp;cold&nbsp;which&nbsp;shares&nbsp;the&nbsp;same&nbsp;structure&nbsp;as&nbsp;src,&nbsp;it&#39;s&nbsp;the&nbsp;expanded&nbsp;code&nbsp;of&nbsp;src&nbsp;for&nbsp;distribution&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;the&nbsp;user&nbsp;time&lt;/div&gt;&lt;div&gt;ocamlbuild&nbsp;cold/FanDriver.native&lt;/div&gt;<br>
&lt;div&gt;user&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;0m28.494s&lt;/div&gt;&lt;div&gt;ocamlbuild&nbsp;src/FanDriver.native&lt;/div&gt;&lt;div&gt;user&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;0m30.680s&lt;/div&gt;&lt;div&gt;For&nbsp;the&nbsp;system&nbsp;time&lt;/div&gt;<br>
&lt;div&gt;the&nbsp;cold&nbsp;directory&nbsp;takes&lt;/div&gt;&lt;div&gt;sys&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;0m3.843s&lt;/div&gt;&lt;div&gt;while&nbsp;the&nbsp;src&nbsp;directory&nbsp;takes&lt;/div&gt;&lt;div&gt;sys&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;0m4.657s&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Feb&nbsp;11,&nbsp;2013&nbsp;at&nbsp;7:20&nbsp;AM,&nbsp;Gabriel&nbsp;Scherer&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:gabriel.scherer@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;gabriel.scherer@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;the&nbsp;other&nbsp;hand,&nbsp;build&nbsp;systems&nbsp;come&nbsp;and&nbsp;go&nbsp;(and&nbsp;./configure&nbsp;is&nbsp;like&lt;br&gt;<br>
the&nbsp;most&nbsp;horrible&nbsp;part&nbsp;to&nbsp;add&nbsp;logic&nbsp;to&nbsp;in&nbsp;most&nbsp;cases),&nbsp;while&nbsp;ocamlfind&lt;br&gt;<br>
has&nbsp;proved&nbsp;a&nbsp;reliable&nbsp;tool&nbsp;as&nbsp;a&nbsp;basis&nbsp;for&nbsp;any&nbsp;OCaml&nbsp;ecosystem&nbsp;so&nbsp;far.&lt;br&gt;<br>
If&nbsp;I&nbsp;can&nbsp;shelve&nbsp;some&nbsp;logic&nbsp;there&nbsp;without&nbsp;making&nbsp;the&nbsp;tool&nbsp;more&nbsp;complex&lt;br&gt;<br>
or&nbsp;less&nbsp;elegant&nbsp;I&nbsp;think&nbsp;that&nbsp;would&nbsp;be&nbsp;better&nbsp;for&nbsp;everyone.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;Feb&nbsp;11,&nbsp;2013&nbsp;at&nbsp;11:56&nbsp;AM,&nbsp;Anil&nbsp;Madhavapeddy&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:anil@recoil.org&quot;&gt;anil@recoil.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;11&nbsp;Feb&nbsp;2013,&nbsp;at&nbsp;10:45,&nbsp;Gabriel&nbsp;Scherer&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:gabriel.scherer@gmail.com&quot;&gt;gabriel.scherer@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;On&nbsp;Mon,&nbsp;Feb&nbsp;11,&nbsp;2013&nbsp;at&nbsp;11:31&nbsp;AM,&nbsp;Anil&nbsp;Madhavapeddy&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:anil@recoil.org&quot;&gt;anil@recoil.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;It&nbsp;should&nbsp;work&nbsp;just&nbsp;fine&nbsp;with&nbsp;ppx,&nbsp;and&nbsp;has&nbsp;the&nbsp;advantage&nbsp;of&nbsp;reducing&nbsp;the&nbsp;number&nbsp;of&nbsp;ocamlfind&nbsp;calls&nbsp;per-file&nbsp;(which&nbsp;is&nbsp;a&nbsp;considerable&nbsp;overhead&nbsp;on&nbsp;large&nbsp;projects,&nbsp;since&nbsp;it&nbsp;has&nbsp;to&nbsp;scan&nbsp;the&nbsp;META&nbsp;directories&nbsp;on&nbsp;every&nbsp;invocation).&lt;br&gt;<br>
<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;That&#39;s&nbsp;of&nbsp;course&nbsp;rather&nbsp;orthogonal&nbsp;to&nbsp;the&nbsp;present&nbsp;discussion,&nbsp;but&nbsp;have&lt;br&gt;<br>
&gt;&gt;&nbsp;you&nbsp;been&nbsp;in&nbsp;contact&nbsp;with&nbsp;Gerd&nbsp;to&nbsp;see&nbsp;if&nbsp;some&nbsp;caching&nbsp;solution&nbsp;would&nbsp;be&lt;br&gt;<br>
&gt;&gt;&nbsp;possible?&nbsp;Intuitively&nbsp;it&nbsp;feels&nbsp;like&nbsp;ocamlfind&nbsp;could&nbsp;easily&nbsp;maintain&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;cache&nbsp;in&nbsp;/var/run/blah&nbsp;and&nbsp;only&nbsp;clean&nbsp;it&nbsp;on&nbsp;install/remove&nbsp;commands.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;(An&nbsp;external&nbsp;process&nbsp;invocation&nbsp;would&nbsp;still&nbsp;make&nbsp;some&nbsp;overhead&nbsp;so&nbsp;in&lt;br&gt;<br>
&gt;&gt;&nbsp;you&#39;re&nbsp;case&nbsp;you&#39;d&nbsp;still&nbsp;have&nbsp;to&nbsp;go&nbsp;all&nbsp;the&nbsp;way,&nbsp;but&nbsp;that&nbsp;could&nbsp;improve&lt;br&gt;<br>
&gt;&gt;&nbsp;the&nbsp;threshold&nbsp;at&nbsp;which&nbsp;such&nbsp;~hacks&nbsp;become&nbsp;interesting.)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;it&#39;s&nbsp;necessary&nbsp;to&nbsp;put&nbsp;this&nbsp;in&nbsp;ocamlfind,&nbsp;which&nbsp;does&nbsp;the&nbsp;job&lt;br&gt;<br>
&gt;&nbsp;it&#39;s&nbsp;designed&nbsp;to&nbsp;do&nbsp;very&nbsp;well.&nbsp;Just&nbsp;fix&nbsp;your&nbsp;build&nbsp;systems&nbsp;to&nbsp;run&nbsp;ocamlfind&lt;br&gt;<br>
&gt;&nbsp;at&nbsp;configure&nbsp;time,&nbsp;save&nbsp;the&nbsp;results,&nbsp;and&nbsp;apply&nbsp;them&nbsp;to&nbsp;the&nbsp;compiler&nbsp;flags&lt;br&gt;<br>
&gt;&nbsp;during&nbsp;the&nbsp;build&nbsp;phase.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;-anil&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
wg-camlp4&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:wg-camlp4@lists.ocaml.org&quot;&gt;wg-camlp4@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/wg-camlp4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/wg-camlp4&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;--&nbsp;Regards,&nbsp;Hongbo<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
