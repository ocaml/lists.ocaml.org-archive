<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
This&nbsp;might&nbsp;be&nbsp;a&nbsp;matter&nbsp;of&nbsp;taste,&nbsp;but&nbsp;I&nbsp;prefer&nbsp;the&nbsp;PPX&nbsp;version,&nbsp;which&nbsp;I&nbsp;can&nbsp;read&nbsp;only&nbsp;by&nbsp;knowing&nbsp;about&nbsp;the&nbsp;Parsetree&nbsp;(which&nbsp;is&nbsp;required&nbsp;anyway&nbsp;to&nbsp;write&nbsp;any&nbsp;such&nbsp;code),&nbsp;a&nbsp;normal&nbsp;OCaml&nbsp;library.&nbsp; The&nbsp;quotation&nbsp;and&nbsp;anti-quotations&nbsp;in&nbsp;the&nbsp;Camlp4&nbsp;version&nbsp;look&nbsp;very&nbsp;noisy,&nbsp;and&nbsp;it&nbsp;relies&nbsp;on&nbsp;a&nbsp;syntax&nbsp;I&#39;m&nbsp;not&nbsp;familiar&nbsp;with&nbsp;(revised&nbsp;syntax)&nbsp;and&nbsp;syntactic&nbsp;extensions&nbsp;(quotations/antiquotations),&nbsp;with&nbsp;their&nbsp;own&nbsp;conventions&nbsp;(&quot;&lt;:match_case&lt;&quot;,&nbsp;$lid:$). &lt;/blockquote&gt;<br>
&lt;div&nbsp;style&gt;This&nbsp;is&nbsp;an&nbsp;interesting&nbsp;point.&nbsp;Actually&nbsp;I&nbsp;have&nbsp;an&nbsp;idea&nbsp;to&nbsp;make&nbsp;it&nbsp;more&nbsp;named&nbsp;antiquotation&nbsp;more&nbsp;tractable,&nbsp;that&#39;s&nbsp;instead&nbsp;of&nbsp;allowing&nbsp;antiquote&nbsp;everything,&nbsp;only&nbsp;a&nbsp;lower&nbsp;identifier&nbsp;is&nbsp;allowed&nbsp;to&nbsp;be&nbsp;antiquoted.&nbsp;so&lt;/div&gt;<br>
&lt;div&nbsp;style&gt;{:exp|&nbsp;....&nbsp;$x&nbsp;....|}&nbsp;(*allowed&nbsp;*)&lt;/div&gt;&lt;div&nbsp;style&gt;{:exp|&nbsp;...&nbsp; $(arbitrary&nbsp;expression&nbsp;)&nbsp;||}&nbsp;(*&nbsp;Disallowed*)&lt;/div&gt;&lt;div&nbsp;style&gt;let&nbsp;a&nbsp;=&nbsp;(arbitrary&nbsp;expression)&nbsp;in &lt;/div&gt;&lt;div&nbsp;style&gt;{:exp|&nbsp;...&nbsp; &nbsp; $a&nbsp;....&nbsp;|}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(*&nbsp;written&nbsp;this&nbsp;way*) &lt;/div&gt;<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Based&nbsp;on&nbsp;such&nbsp;simplified&nbsp;antiquotation,&nbsp;named&nbsp;antiquotation&nbsp;is&nbsp;no&nbsp;longer&nbsp;context-sensitive,&nbsp;which&nbsp;means&nbsp;for&nbsp;all&nbsp;syntax&nbsp;categories:&lt;/div&gt;&lt;div&nbsp;style&gt;$lid:x&nbsp; &nbsp; -&gt;&nbsp;`Lid&nbsp;(_loc,x)&lt;/div&gt;&lt;div&nbsp;style&gt;<br>
$uid:x&nbsp; &nbsp;-&gt;&nbsp;`Uid&nbsp;(_loc,x)&lt;/div&gt;&lt;div&nbsp;style&gt;....&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Such&nbsp;rules&nbsp;should&nbsp;not&nbsp;be&nbsp;hard&nbsp;to&nbsp;remember&nbsp;and&nbsp;quite&nbsp;intuitive.&nbsp;In&nbsp;terms&nbsp;of&nbsp;implementation,&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;already&nbsp;available&nbsp;in&nbsp;Fan,&nbsp;Camlp4&#39;s&nbsp;antiquotation&nbsp;uses&nbsp;both&nbsp;Ant&nbsp;constructor&nbsp;and&nbsp;string&nbsp;mangling,&nbsp;it&nbsp;make&nbsp;some&nbsp;time&nbsp;to&nbsp;implement,&nbsp;but&nbsp;should&nbsp;not&nbsp;be&nbsp;too&nbsp;difficult.&lt;/div&gt;<br>
&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
--&nbsp;Alain&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
wg-camlp4&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:wg-camlp4@lists.ocaml.org&quot;&nbsp;target=&quot;_blank&quot;&gt;wg-camlp4@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/wg-camlp4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/&lt;u&gt;&lt;/u&gt;listinfo/wg-camlp4&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;--&nbsp;Regards,&nbsp;Hongbo<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
