<tt>
Summarize&nbsp;of&nbsp;my&nbsp;suggestions:&lt;div&gt; &nbsp; I&nbsp;wrote&nbsp;3&nbsp;blogs(&lt;a&nbsp;href=&quot;http://hongboz.wordpress.com/&quot;&gt;http://hongboz.wordpress.com/&lt;/a&gt;)&nbsp;explaining&nbsp; why&nbsp;Parsetree&nbsp;is&nbsp;not&nbsp;an&nbsp;ideal&nbsp;candidate&nbsp;for&nbsp;meta-programming.&lt;/div&gt;&lt;div&gt; &nbsp; I&nbsp;express&nbsp;my&nbsp;worries&nbsp;if&nbsp;ppx&nbsp;is&nbsp;widely&nbsp;used&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &lt;a&nbsp;href=&quot;http://lists.ocaml.org/pipermail/wg-camlp4/2013-January/000140.html&quot;&gt;http://lists.ocaml.org/pipermail/wg-camlp4/2013-January/000140.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt; &nbsp; Some&nbsp;arguments&nbsp;why&nbsp;Fan&nbsp;is&nbsp;a&nbsp;better&nbsp;candidate&nbsp;than&nbsp;ppx&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 1.&nbsp;Fan&nbsp;is&nbsp;much&nbsp;much&nbsp;faster&nbsp;than&nbsp;P4&nbsp;(10~20&nbsp;times)&lt;/div&gt;&lt;div&gt; &nbsp; 2.&nbsp;Fan&nbsp;does&nbsp;not&nbsp;require&nbsp;any&nbsp;compiler&nbsp;change,&nbsp;easy&nbsp;to&nbsp;distribute,&nbsp;on&nbsp;the&nbsp;contrary&nbsp;the&nbsp;pervasive&nbsp;change&nbsp;to&nbsp;compiler&nbsp;is&nbsp;close&nbsp;to&nbsp;kill&nbsp;P4,&nbsp;Fan&nbsp;or&nbsp;any&nbsp;other&nbsp;advanced&nbsp;external&nbsp;tools,&nbsp;unlike&nbsp;P4,&nbsp;it&nbsp;will&lt;/div&gt;<br>
&lt;div&gt;not&nbsp;inhibit&nbsp;OCaml&#39;s&nbsp;compiler&#39;s&nbsp;progress.&lt;/div&gt;&lt;div&gt; &nbsp; 3.&nbsp;It&#39;s&nbsp;easy&nbsp;to&nbsp;build&nbsp;in&nbsp;Fan,&nbsp;Fan&nbsp;can&nbsp;recognize&nbsp;its&nbsp;syntax&nbsp;on&nbsp;its&nbsp;own,&nbsp;without&nbsp;external&nbsp;tool&#39;s&nbsp;help&lt;/div&gt;&lt;div&gt; &nbsp; 4.&nbsp;It&#39;s&nbsp;easy&nbsp;to&nbsp;port&nbsp;P4&#39;s&nbsp;code&nbsp;base&nbsp;to&nbsp;Fan,&nbsp;it&nbsp;only&nbsp;takes&nbsp;me&nbsp;2&nbsp;hours&nbsp;to&nbsp;port&nbsp;Alain&#39;s&nbsp;ulex&nbsp;to&nbsp;Fan(I&nbsp;also&nbsp;make&nbsp;it&nbsp;available&nbsp;on&nbsp;the&nbsp;toplevel,&nbsp;this&nbsp;feature&nbsp;is&nbsp;not&nbsp;available&nbsp;in&nbsp;sedlex&nbsp;or&nbsp;ulex)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 5.&nbsp;Global&nbsp;Ast&nbsp;Rewriter&nbsp;is&nbsp;available&nbsp;but&nbsp;discouraged&lt;/div&gt;&lt;div&gt; &nbsp; 6.&nbsp;Local&nbsp;Ast&nbsp;Rewriter&nbsp;is&nbsp;provided(deriving&nbsp;and&nbsp;type_conv&nbsp;conflicts&nbsp;will&nbsp;never&nbsp;happen&nbsp;in&nbsp;Fan)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; {:ocaml|&nbsp;type&nbsp;u&nbsp;=&nbsp;A&nbsp;of&nbsp;int&nbsp;|}&lt;/div&gt;&lt;div&gt;<br>
 &nbsp; &nbsp; &nbsp; {:derive|&nbsp;(sexp,json)&nbsp;|}&lt;br&gt; &nbsp; 7.&nbsp;Fan&#39;s&nbsp;notation&nbsp;is&nbsp;uniform&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; only&nbsp;{:|&nbsp;|}&nbsp;is&nbsp;introduced,&nbsp;I&nbsp; am&nbsp;a&nbsp;bit&nbsp;headache&nbsp;when&nbsp;seeing&nbsp;so&nbsp;many&nbsp;notations&lt;/div&gt;&lt;div&gt; &nbsp; 8.&nbsp;Fan&nbsp;provides&nbsp;first&nbsp;class&nbsp;parser&nbsp;lexer(or&nbsp;in-line&nbsp;parser/lexer)&nbsp;as&nbsp;a&nbsp;library&lt;/div&gt;<br>
&lt;div&gt; &nbsp; 9.&nbsp;Last&nbsp;but&nbsp;not&nbsp;least,&nbsp;Compatibility&nbsp;is&nbsp;important&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; If&nbsp;we&nbsp;are&nbsp;un-satisfied&nbsp;with&nbsp;a&nbsp;tool,&nbsp;the&nbsp;right&nbsp;approach&nbsp;is&nbsp;to&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;repair&nbsp;it,&nbsp;building&nbsp;something&nbsp;from&nbsp;scratch&nbsp;and&nbsp;discard&nbsp;the&nbsp;old&nbsp;tool&nbsp;may&nbsp;not&nbsp;be&nbsp;wise.&lt;br&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Feb&nbsp;6,&nbsp;2013&nbsp;at&nbsp;1:11&nbsp;PM,&nbsp;Leo&nbsp;White&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:lpw25@cam.ac.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;lpw25@cam.ac.uk&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Maybe&nbsp;a&nbsp;single&nbsp;post&lt;br&gt;<br>
summarizing&nbsp;the&nbsp;main&nbsp;proposals&nbsp;and&nbsp;points&nbsp;of&nbsp;contention?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
I&nbsp;will&nbsp;attempt&nbsp;a&nbsp;summary&nbsp;of&nbsp;the&nbsp;parts&nbsp;of&nbsp;the&nbsp;discussion&nbsp;that&nbsp;I&nbsp;remember.&nbsp;In&nbsp;no&nbsp;particular&nbsp;order&nbsp;the&nbsp;following&nbsp;has&nbsp;been&nbsp;discussed:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
1.&nbsp;Current&nbsp;uses&nbsp;of&nbsp;camlp4&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;were&nbsp;many&nbsp;examples&nbsp;of&nbsp;current&nbsp;uses&nbsp;of&nbsp;camlp4&nbsp;given.&nbsp;Gabriel&nbsp;put&nbsp;a&nbsp;summary&nbsp;of&nbsp;them&nbsp;on&nbsp;a&nbsp;wiki:&lt;br&gt;<br>
&lt;br&gt;<br>
 &lt;a&nbsp;href=&quot;https://github.com/gasche/ocaml-syntax-extension-discussion/wiki/Use-Cases&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/gasche/&lt;u&gt;&lt;/u&gt;ocaml-syntax-extension-&lt;u&gt;&lt;/u&gt;discussion/wiki/Use-Cases&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Anil&nbsp;also&nbsp;posted&nbsp;a&nbsp;list&nbsp;of&nbsp;all&nbsp;the&nbsp;extensions&nbsp;used&nbsp;by&nbsp;OPAM&nbsp;packages:&lt;br&gt;<br>
&lt;br&gt;<br>
 &lt;a&nbsp;href=&quot;https://github.com/avsm/opam-camlp4-analysis/wiki&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/avsm/opam-&lt;u&gt;&lt;/u&gt;camlp4-analysis/wiki&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;don&#39;t&nbsp;think&nbsp;anyone&nbsp;has&nbsp;systematically&nbsp;gone&nbsp;through&nbsp;these&nbsp;yet,&nbsp;but&nbsp;I&nbsp;think&nbsp;that&nbsp;it&nbsp;is&nbsp;important,&nbsp;before&nbsp;any&nbsp;concrete&nbsp;proposal&nbsp;is&nbsp;made&nbsp;by&nbsp;this&nbsp;working&nbsp;group,&nbsp;to&nbsp;make&nbsp;clear&nbsp;which&nbsp;of&nbsp;these&nbsp;extensions&nbsp;we&nbsp;intend&nbsp;to&nbsp;support&nbsp;and&nbsp;how&nbsp;we&nbsp;intend&nbsp;to&nbsp;support&nbsp;them.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
2.&nbsp;New&nbsp;syntaxes&nbsp;needed&nbsp;for&nbsp;ppx:&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;seems&nbsp;to&nbsp;be&nbsp;general&nbsp;agreement&nbsp;that,&nbsp;for&nbsp;ppx&nbsp;to&nbsp;replace&nbsp;camlp4&nbsp;for&nbsp;its&lt;br&gt;<br>
most&nbsp;common&nbsp;uses,&nbsp;at&nbsp;least&nbsp;the&nbsp;following&nbsp;three&nbsp;kinds&nbsp;of&nbsp;syntax&nbsp;are&nbsp;needed:&lt;br&gt;<br>
&lt;br&gt;<br>
a)&nbsp;A&nbsp;&quot;template&quot;&nbsp;syntax&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;(:longid&nbsp;expr).&nbsp;This&nbsp;syntax&nbsp; &nbsp; could&nbsp;be&nbsp;used&nbsp;as&nbsp;an&nbsp;expression,&nbsp;a&nbsp;pattern,&nbsp;a&nbsp;structure&nbsp;item,&nbsp;etc.&lt;br&gt;<br>
 &nbsp; For&nbsp;example&nbsp;Sedlex&nbsp;could&nbsp;be:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;(:sedlex&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; match&nbsp;buf&nbsp;with&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;number&nbsp;-&gt;&nbsp;..&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp;letter,&nbsp;Star&nbsp;(&#39;A&#39;..&#39;Z&#39;&nbsp;|&nbsp;&#39;a&#39;..&#39;z&#39;&nbsp;|&nbsp;digit)&nbsp;-&gt;&nbsp;..&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;)&lt;br&gt;<br>
b)&nbsp;An&nbsp;&quot;attribute&quot;&nbsp;syntax&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;(@&nbsp;expr).&nbsp;This&nbsp;syntax&nbsp;allows&nbsp; &nbsp; you&nbsp;to&nbsp;attach&nbsp;expressions&nbsp;to&nbsp;other&nbsp;expressions,&nbsp;patterns,&nbsp;etc.&nbsp;Unlike&nbsp; &nbsp; the&nbsp;template&nbsp;syntax,&nbsp;the&nbsp;type-checker&nbsp;can&nbsp;silently&nbsp;ignore&nbsp;any&nbsp;of&nbsp;these&nbsp; &nbsp; that&nbsp;don&#39;t&nbsp;get&nbsp;translated.&nbsp;For&nbsp;example&nbsp;Bisect&nbsp;could&nbsp;be:&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; let&nbsp;f&nbsp;x&nbsp;=&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; match&nbsp;List.map&nbsp;foo&nbsp;[x;&nbsp;a&nbsp;x;&nbsp;b&nbsp;x]&nbsp;with&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; |&nbsp;[y1;&nbsp;y2;&nbsp;y3]&nbsp;-&gt;&nbsp;tata&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; |&nbsp;_&nbsp;-&gt;&nbsp;(@&nbsp;Bisect.visit)&nbsp;assert&nbsp;false&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; (@&nbsp;Bisect.ignore)&lt;br&gt;<br>
 &nbsp; &nbsp; let&nbsp;unused&nbsp;=&nbsp;()&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;It&nbsp;has&nbsp;also&nbsp;been&nbsp;suggested&nbsp;that&nbsp;there&nbsp;might&nbsp;need&nbsp;to&nbsp;be&nbsp;different&nbsp;syntax&nbsp; &nbsp; for&nbsp;&quot;post-fix&quot;&nbsp;and&nbsp;&quot;pre-fix&quot;.&nbsp;Gabriel&nbsp;suggested&nbsp;that&nbsp;whether&nbsp;an&nbsp; &nbsp; attribute&nbsp;in&nbsp;a&nbsp;particular&nbsp;syntactic&nbsp;position&nbsp;is&nbsp;pre-fix&nbsp;or&nbsp;post-fix&nbsp;be&nbsp; &nbsp; decided&nbsp;on&nbsp;a&nbsp;case&nbsp;by&nbsp;case&nbsp;basis.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
c)&nbsp;A&nbsp;quotation&nbsp;syntax&nbsp;like&nbsp;{x{&nbsp;..&nbsp;}x}&nbsp;(where&nbsp;x&nbsp;is&nbsp;any&nbsp;operator&nbsp;symbol)&nbsp; &nbsp; that&nbsp;could&nbsp;be&nbsp;used&nbsp;for&nbsp;quoting&nbsp;non-OCaml&nbsp;syntax.&nbsp;For&nbsp;example&nbsp;sedlex&nbsp; &nbsp; with&nbsp;a&nbsp;more&nbsp;compact&nbsp;notation&nbsp;for&nbsp;regular&nbsp;expressions:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; (:sedlex&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;match&nbsp;lexbuf&nbsp;with&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;{{&nbsp;xml_letter+&nbsp;}}&nbsp;-&gt;&nbsp;...&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;{{&nbsp;&quot;with&quot;&nbsp;}}&nbsp;-&gt;&nbsp;...&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;...&lt;br&gt;<br>
 &nbsp; &nbsp; )&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;has&nbsp;also&nbsp;been&nbsp;some&nbsp;agreement,&nbsp;and&nbsp;no&nbsp;strong&nbsp;objection,&nbsp;to&nbsp;including&nbsp;some&nbsp;abbreviated&nbsp;forms&nbsp;of&nbsp;the&nbsp;above&nbsp;syntaxes.&nbsp;Some&nbsp;of&nbsp;the&nbsp;suggested&nbsp;forms&nbsp;include:&lt;br&gt;<br>
&lt;br&gt;<br>
a)&nbsp;Template&nbsp;+&nbsp;quotation:&nbsp; &nbsp; &nbsp;{:id&nbsp;x{&nbsp;str&nbsp;}x}&nbsp; ==&nbsp; (:id&nbsp;{x{&nbsp;str&nbsp;}x})&lt;br&gt;<br>
&lt;br&gt;<br>
b)&nbsp;Template&nbsp;+&nbsp;let:&nbsp; &nbsp; &nbsp; let:id&nbsp;x&nbsp;=&nbsp;..&nbsp;in&nbsp;...&nbsp; ==&nbsp; (:id&nbsp;let&nbsp;x&nbsp;=&nbsp;..&nbsp;in&nbsp;...&nbsp;)&lt;br&gt;<br>
&lt;br&gt;<br>
c)&nbsp;Template&nbsp;+&nbsp;match:&lt;br&gt;<br>
 &nbsp; &nbsp; match:id&nbsp;exp&nbsp;with&nbsp;..&nbsp; ==&nbsp; (:id&nbsp;match&nbsp;exp&nbsp;with&nbsp;..&nbsp;)&lt;br&gt;<br>
&lt;br&gt;<br>
d)&nbsp;Type-conv&nbsp;style&nbsp;attribute:&lt;br&gt;<br>
 &nbsp; &nbsp; type&nbsp;t&nbsp;=&nbsp;...&nbsp;with&nbsp;foo,&nbsp;bar(&nbsp;expr&nbsp;)&nbsp;==&nbsp;type&nbsp;t&nbsp;=&nbsp;...&nbsp;(@foo)&nbsp;(@bar&nbsp;expr)&lt;br&gt;<br>
&lt;br&gt;<br>
e)&nbsp;Anonymous&nbsp;template:&lt;br&gt;<br>
 &nbsp; &nbsp; (#&nbsp;expr)&nbsp; ==&nbsp; (:(*no&nbsp;id*)&nbsp;expr)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
3.&nbsp;Anti-quotations&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;has&nbsp;been&nbsp;some&nbsp;discussion&nbsp;about&nbsp;how&nbsp;to&nbsp;support&nbsp;anti-quotations:&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp;Fabrice&nbsp;suggested&nbsp;using&nbsp;a&nbsp;standardised&nbsp;format&nbsp;for&nbsp;anti-quotations,&nbsp;but&nbsp; &nbsp;some&nbsp;people&nbsp;were&nbsp;against&nbsp;that&nbsp;because&nbsp;they&nbsp;use&nbsp;&quot;$&quot;&nbsp;in&nbsp;their&nbsp;camlp4&nbsp; &nbsp;quotation&nbsp;extensions.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;I&nbsp;suggested&nbsp;that&nbsp;if&nbsp;we&nbsp;provided&nbsp;functions&nbsp;which&nbsp;took&nbsp;a&nbsp;predicate&nbsp; &nbsp;function&nbsp;and&nbsp;then&nbsp;parsed&nbsp;an&nbsp;OCaml&nbsp;phrase&nbsp;up&nbsp;until&nbsp;the&nbsp;next&nbsp;*unnested*&nbsp; &nbsp;location&nbsp;that&nbsp;made&nbsp;the&nbsp;predicate&nbsp;true,&nbsp;then&nbsp;we&nbsp;could&nbsp;support&nbsp;general&nbsp; &nbsp;anti-quotations&nbsp;for&nbsp;ppx.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
-&nbsp;Hongbo&nbsp;suggested&nbsp;that&nbsp;AST&nbsp;lifting&nbsp;was&nbsp;necessary&nbsp;for&nbsp;supporting&nbsp; &nbsp;anti-quotations,&nbsp;citing&nbsp;this&nbsp;paper:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://dl.acm.org/citation.cfm?id=1291211&quot;&nbsp;target=&quot;_blank&quot;&gt;http://dl.acm.org/citation.&lt;u&gt;&lt;/u&gt;cfm?id=1291211&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;I&nbsp;suggested&nbsp;that&nbsp;it&nbsp;isn&#39;t&nbsp;necessarily&nbsp;needed,&nbsp;and&nbsp;that&nbsp;if&nbsp;people&nbsp;wanted&nbsp; &nbsp;it&nbsp;then&nbsp;it&nbsp;could&nbsp;be&nbsp;provided&nbsp;using&nbsp;a&nbsp;type-conv&nbsp;style&nbsp;extension&nbsp;or&nbsp; &nbsp;run-time&nbsp;types.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
4.&nbsp;On&nbsp;the&nbsp;use&nbsp;of&nbsp;&quot;quotations&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;has&nbsp;also&nbsp;been&nbsp;some&nbsp;discussion&nbsp;about&nbsp;when&nbsp;it&nbsp;is&nbsp;a&nbsp;good&nbsp;idea&nbsp;to&nbsp;use&nbsp;a&nbsp;camlp4-style&nbsp;quasi-quotation:&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp;Alain&nbsp;suggested&nbsp;that&nbsp;they&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;for&nbsp;extensions&nbsp;that&nbsp;are&nbsp; &nbsp;&quot;mostly&nbsp;valid&nbsp;OCaml&nbsp;code&quot;.&nbsp;He&nbsp;pointed&nbsp;out&nbsp;that&nbsp;doing&nbsp;so&nbsp;causes&nbsp;you&nbsp;to&nbsp; &nbsp;lose&nbsp;all&nbsp;editor&nbsp;and&nbsp;tool&nbsp;support.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;Hongbo&nbsp;disagreed&nbsp;saying&nbsp;that&nbsp;in&nbsp;Fan&nbsp;extensions&nbsp;like&nbsp;sedlex&nbsp;would&nbsp;be&nbsp; &nbsp;implement&nbsp;as&nbsp;quasi-quotation&nbsp;and&nbsp;that&nbsp;editor&nbsp;support&nbsp;was&nbsp;fine.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;After&nbsp;this&nbsp;there&nbsp;seems&nbsp;to&nbsp;have&nbsp;been&nbsp;some&nbsp;agreement&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp; &nbsp;better&nbsp;to&nbsp;implement&nbsp;such&nbsp;extensions&nbsp;as&nbsp;&quot;templates&quot;&nbsp;(see&nbsp;section&nbsp;2&nbsp;of&nbsp; &nbsp;this&nbsp;post)&nbsp;rather&nbsp;than&nbsp;quasi-quotations.&lt;br&gt;<br>
&lt;br&gt;<br>
-&nbsp;Alain&nbsp;then&nbsp;went&nbsp;further,&nbsp;suggesting&nbsp;that&nbsp;quotations&nbsp;were&nbsp;not&nbsp;even&nbsp; &nbsp;suitable&nbsp;for&nbsp;encoding&nbsp;foreign&nbsp;languages&nbsp;in&nbsp;OCaml.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;Gabriel&nbsp;disagreed,&nbsp;saying&nbsp;that&nbsp;for&nbsp;domain-specific&nbsp;foreign&nbsp;languages&nbsp; &nbsp;(e.g.&nbsp;SQL)&nbsp;quotations&nbsp;allow&nbsp;you&nbsp;to&nbsp;have&nbsp;a&nbsp;domain&nbsp;expert&nbsp;maintain&nbsp;the&nbsp; &nbsp;foreign&nbsp;code&nbsp;even&nbsp;if&nbsp;they&nbsp;didn&#39;t&nbsp;know&nbsp;OCaml.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;Other&nbsp;people&nbsp;also&nbsp;said&nbsp;that&nbsp;they&nbsp;liked&nbsp;using&nbsp;quotations&nbsp;for&nbsp;foreign&nbsp; &nbsp;syntax.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
5.&nbsp;Alternatives&nbsp;to&nbsp;ppx&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;have&nbsp;been&nbsp;some&nbsp;proposals&nbsp;for&nbsp;alternatives&nbsp;and&nbsp;variations&nbsp;to&nbsp;using&nbsp;ppx&nbsp;for&nbsp;extensions:&lt;br&gt;<br>
&lt;br&gt;<br>
a)&nbsp;Hongbo&nbsp;suggests&nbsp;that&nbsp;his&nbsp;Fan&nbsp;project&nbsp;is&nbsp;a&nbsp;better&nbsp;alternative&nbsp;to&nbsp;camlp4&nbsp; &nbsp; than&nbsp;ppx:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &lt;a&nbsp;href=&quot;https://github.com/bobzhang/Fan&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/bobzhang/&lt;u&gt;&lt;/u&gt;Fan&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
b)&nbsp;Xavier&nbsp;Clerc&nbsp;suggested&nbsp;that&nbsp;attributes&nbsp;might&nbsp;be&nbsp;declared&nbsp;and&nbsp;typed,&nbsp;as&nbsp; &nbsp; in&nbsp;Java.&nbsp;So&nbsp;before&nbsp;an&nbsp;attribute&nbsp;could&nbsp;be&nbsp;used:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; (@&nbsp;MyAnnot&nbsp;{a=1,&nbsp;b=&quot;two&quot;})&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &quot;MyAnnot&quot;&nbsp;would&nbsp;have&nbsp;to&nbsp;be&nbsp;declared&nbsp;with&nbsp;fields&nbsp;&quot;a&quot;&nbsp;(of&nbsp;type&nbsp;&quot;int&quot;)&nbsp;and&nbsp; &nbsp; &quot;b&quot;&nbsp;(of&nbsp;type&nbsp;&quot;string&quot;).&nbsp;He&nbsp;points&nbsp;out&nbsp;that&nbsp;this&nbsp;may&nbsp;protect&nbsp;the&nbsp;user&nbsp; &nbsp; from&nbsp;some&nbsp;typos&nbsp;and&nbsp;other&nbsp;obvious&nbsp;errors.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
 &nbsp; Alain&nbsp;suggested&nbsp;that&nbsp;this&nbsp;would&nbsp;be&nbsp;a&nbsp;much&nbsp;more&nbsp;complicated&nbsp;system,&nbsp;and&nbsp; &nbsp; might&nbsp;be&nbsp;too&nbsp;restrictive&nbsp;for&nbsp;some&nbsp;uses&nbsp;of&nbsp;attributes.&lt;br&gt;<br>
&lt;br&gt;<br>
c)&nbsp;Sebastien&nbsp;Mondet&nbsp;suggested&nbsp;that&nbsp;run-time&nbsp;types&nbsp;or&nbsp;dyntype&nbsp;might&nbsp;be&nbsp; &nbsp; sufficient&nbsp;without&nbsp;ppx&nbsp;for&nbsp;many&nbsp;extensions.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; Markus&nbsp;Mottl&nbsp;pointed&nbsp;out&nbsp;that&nbsp;there&nbsp;are&nbsp;runtime&nbsp;performance&nbsp; &nbsp; implications&nbsp;for&nbsp;using&nbsp;those&nbsp;solutions.&lt;br&gt;<br>
&lt;br&gt;<br>
d)&nbsp;Jeremy&nbsp;suggested&nbsp;that&nbsp;rather&nbsp;than&nbsp;implementing&nbsp;extensions&nbsp;as&nbsp;AST&nbsp; &nbsp; transformers&nbsp;that&nbsp;operate&nbsp;over&nbsp;the&nbsp;whole&nbsp;AST&nbsp;they&nbsp;might&nbsp;be&nbsp;implemented&nbsp; &nbsp; as&nbsp;transformers&nbsp;only&nbsp;for&nbsp;the&nbsp;part&nbsp;of&nbsp;the&nbsp;AST&nbsp;that&nbsp;they&nbsp;were&nbsp;to&nbsp;operate&nbsp; &nbsp; on.&nbsp;So&nbsp;an&nbsp;extension&nbsp;used&nbsp;like&nbsp;this:&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; (:perform&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; x&nbsp;&lt;--&nbsp;m;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; y&nbsp;&lt;--&nbsp;n;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;(x&nbsp;y))&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; would&nbsp;be&nbsp;implemented&nbsp;as&nbsp;a&nbsp;function&nbsp;with&nbsp;type:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; val&nbsp;perform&nbsp;:&nbsp;Parsetree.expression&nbsp;-&gt;&nbsp;Parsetree.expression&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; He&nbsp;suggests&nbsp;that&nbsp;this&nbsp;may&nbsp;help&nbsp;with&nbsp;scoping,&nbsp;safety&nbsp;and&nbsp; &nbsp; compositionality.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; Alain&nbsp;pointed&nbsp;out&nbsp;that&nbsp;some&nbsp;legitimate&nbsp;uses&nbsp;of&nbsp;ppx&nbsp;don&#39;t&nbsp;work&nbsp;nicely&nbsp; &nbsp; with&nbsp;the&nbsp;constraint&nbsp;that&nbsp;they&nbsp;can&nbsp;operate&nbsp;only&nbsp;on&nbsp;a&nbsp;marked&nbsp;fragment.&nbsp;He&nbsp; &nbsp; also&nbsp;pointed&nbsp;out&nbsp;that&nbsp;handling&nbsp;extensions&nbsp;as&nbsp;those&nbsp;extensions&nbsp;are&nbsp;found&nbsp; &nbsp; within&nbsp;the&nbsp;source&nbsp;forces&nbsp;a&nbsp;top-down&nbsp;expansion&nbsp;order,&nbsp;which&nbsp;is&nbsp;not&nbsp; &nbsp; necessarily&nbsp;desirable.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
e)&nbsp;I&nbsp;suggested&nbsp;an&nbsp;extension&nbsp;to&nbsp;Jeremy&#39;s&nbsp;proposal.&nbsp;This&nbsp;involves&nbsp;giving&nbsp;the&nbsp; &nbsp; expansion&nbsp;functions&nbsp;in&nbsp;their&nbsp;own&nbsp;kind&nbsp;of&nbsp;file&nbsp;(&quot;.mlq&quot;&nbsp;-&nbsp;compiled&nbsp;to&nbsp; &nbsp; &quot;.cmq&quot;),&nbsp;referring&nbsp;to&nbsp;them&nbsp;using&nbsp;a&nbsp;namespace&nbsp;mechanism,&nbsp;and&nbsp;then&nbsp;having&nbsp; &nbsp; the&nbsp;compiler&nbsp;itself&nbsp;perform&nbsp;the&nbsp;expansion&nbsp;of&nbsp;the&nbsp;extensions.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
 &nbsp; There&nbsp;are&nbsp;more&nbsp;details&nbsp;in&nbsp;my&nbsp;blog&nbsp;post:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &lt;a&nbsp;href=&quot;http://www.lpw25.net/2013/02/05/camlp4-alternative-part-2.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.lpw25.net/2013/02/&lt;u&gt;&lt;/u&gt;05/camlp4-alternative-part-2.&lt;u&gt;&lt;/u&gt;html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; Since&nbsp;such&nbsp;a&nbsp;solution&nbsp;would&nbsp;take&nbsp;a&nbsp;while&nbsp;to&nbsp;implement,&nbsp;and&nbsp;since&nbsp;moving&nbsp; &nbsp; an&nbsp;extension&nbsp;from&nbsp;ppx&nbsp;to&nbsp;it&nbsp;would&nbsp;be&nbsp;trivial,&nbsp;I&nbsp;proposed&nbsp;using&nbsp;ppx&nbsp;for&nbsp; &nbsp; the&nbsp;short/medium&nbsp;term.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; I&nbsp;suggested&nbsp;that&nbsp;such&nbsp;a&nbsp;mechanism&nbsp;might&nbsp;improving&nbsp;tooling&nbsp;and&nbsp;make&nbsp;it&nbsp; &nbsp; easier&nbsp;for&nbsp;average&nbsp;users&nbsp;to&nbsp;use&nbsp;extensions.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; Both&nbsp;Gabriel&nbsp;and&nbsp;Alain&nbsp;suggested&nbsp;that&nbsp;the&nbsp;use&nbsp;of&nbsp;namespaces&nbsp;might&nbsp;be&nbsp; &nbsp; unnecessary&nbsp;and&nbsp;too&nbsp;heavyweight.&nbsp;Alain&nbsp;also&nbsp;questioned&nbsp;the&nbsp;need&nbsp;for&nbsp; &nbsp; special&nbsp;&quot;.mlq&quot;&nbsp;files.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;are&nbsp;probably&nbsp;other&nbsp;parts&nbsp;of&nbsp;the&nbsp;discussion&nbsp;that&nbsp;I&#39;ve&nbsp;forgotten.&nbsp;I&#39;m&nbsp;sure&nbsp;someone&nbsp;will&nbsp;fill-in&nbsp;any&nbsp;important&nbsp;details&nbsp;I&#39;ve&nbsp;missed.&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
wg-camlp4&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:wg-camlp4@lists.ocaml.org&quot;&nbsp;target=&quot;_blank&quot;&gt;wg-camlp4@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/wg-camlp4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/&lt;u&gt;&lt;/u&gt;listinfo/wg-camlp4&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;--&nbsp;Regards,&nbsp;Hongbo<br>
&lt;/div&gt;<br>

</tt>
