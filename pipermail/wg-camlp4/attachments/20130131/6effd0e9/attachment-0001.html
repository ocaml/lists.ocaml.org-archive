<tt>
Not&nbsp;much&nbsp;to&nbsp;add&nbsp;to&nbsp;this,&nbsp;I&nbsp;just&nbsp;wanted&nbsp;to&nbsp;emphasize&nbsp;that&nbsp;the&nbsp;point&nbsp;Gabriel&nbsp;makes&nbsp;is&nbsp;especially&nbsp;relevant&nbsp;in&nbsp;web&nbsp;programming&nbsp;or&nbsp;database&nbsp;interaction,&nbsp;because&nbsp;in&nbsp;those&nbsp;area&nbsp;ocaml&nbsp;is&nbsp;not&nbsp;often&nbsp;the&nbsp;first&nbsp;option&nbsp;that&nbsp;comes&nbsp;to&nbsp;mind.&nbsp;So&nbsp;being&nbsp;able&nbsp;to&nbsp;quote&nbsp;json,&nbsp;sql,&nbsp;html&nbsp;etc&nbsp;in&nbsp;an&nbsp;ocaml&nbsp;source&nbsp;without&nbsp;unplugging&nbsp;the&nbsp;type&nbsp;checker&nbsp;is&nbsp;real&nbsp;feature.&nbsp;Of&nbsp;course,&nbsp;there&nbsp;are&nbsp;cases&nbsp;when&nbsp;you&nbsp;build&nbsp;those&nbsp;&quot;foreign&quot;&nbsp;values&nbsp;programmatically,&nbsp;in&nbsp;that&nbsp;case&nbsp;I&nbsp;concur&nbsp;you&#39;re&nbsp;better&nbsp;off&nbsp;without&nbsp;the&nbsp;syntax&nbsp;extension&nbsp;(maybe&nbsp;not&nbsp;always,&nbsp;if&nbsp;the&nbsp;guest&nbsp;language&nbsp;has&nbsp;some&nbsp;real&nbsp;nice&nbsp;support&nbsp;than&nbsp;cannot&nbsp;be&nbsp;rendered&nbsp;concisely&nbsp;with&nbsp;ocaml),&nbsp;but&nbsp;there&nbsp;are&nbsp;many&nbsp;times&nbsp;when&nbsp;the&nbsp;antiquotation&nbsp;part&nbsp;is&nbsp;really&nbsp;small&nbsp;compared&nbsp;to&nbsp;the&nbsp;&quot;constant&quot;&nbsp;fragments.&nbsp;In&nbsp;that&nbsp;case,&nbsp;it&nbsp;may&nbsp;be&nbsp;desirable&nbsp;to&nbsp;have&nbsp;non-ocaml-programmers&nbsp;work&nbsp;directly&nbsp;on&nbsp;the&nbsp;ml&nbsp;source.&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2013/1/31&nbsp;Gabriel&nbsp;Scherer&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:gabriel.scherer@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;gabriel.scherer@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&gt;&nbsp;From&nbsp;all&nbsp;the&nbsp;uses&nbsp;of&nbsp;Camlp4&nbsp;I&#39;ve&nbsp;seen&nbsp;listed&nbsp;since&nbsp;the&nbsp;beginning&nbsp;of&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;discussion,&nbsp;I&nbsp;can&nbsp;imagine&nbsp;using&nbsp;at&nbsp;some&nbsp;point&nbsp;almost&nbsp;each&nbsp;of&nbsp;them,&nbsp;except&lt;br&gt;<br>
&gt;&nbsp;those&nbsp;which&nbsp;are&nbsp;basically&nbsp;&quot;just&quot;&nbsp;about&nbsp;quoting&nbsp;fragments&nbsp;of&nbsp;external&lt;br&gt;<br>
&gt;&nbsp;languages&nbsp;in&nbsp;their&nbsp;native&nbsp;syntax.&nbsp; I&nbsp;just&nbsp;don&#39;t&nbsp;see&nbsp;the&nbsp;real&nbsp;benefits.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;would&nbsp;be&nbsp;useful&nbsp;to&nbsp;get&nbsp;feedback&nbsp;from&nbsp;users:&nbsp;do&nbsp;people&nbsp;actually&nbsp;use&lt;br&gt;<br>
&gt;&nbsp;pa_tyxml,&nbsp;pa_json,&nbsp;etc,&nbsp;and&nbsp;do&nbsp;they&nbsp;consider&nbsp;this&nbsp;is&nbsp;really&nbsp;better&nbsp;than&lt;br&gt;<br>
&gt;&nbsp;proposed&nbsp;alternatives?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Alain&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;point&nbsp;of&nbsp;quoting&nbsp;foreign&nbsp;languages&nbsp;is&nbsp;to&nbsp;translate&nbsp;them&nbsp;into&nbsp;a&lt;br&gt;<br>
form&nbsp;that&nbsp;exercize&nbsp;the&nbsp;OCaml&nbsp;type-checker&nbsp;to&nbsp;produce&nbsp;rich&nbsp;typing&lt;br&gt;<br>
information.&nbsp;With&nbsp;(parse_json&nbsp;&quot;...&quot;)&nbsp;you&nbsp;have&nbsp;no&nbsp;static&nbsp;typing&lt;br&gt;<br>
information&nbsp;on&nbsp;the&nbsp;parsed&nbsp;value,&nbsp;while&nbsp;with&nbsp;a&nbsp;quotation&nbsp;you&nbsp;can&nbsp;expect&lt;br&gt;<br>
to&nbsp;get,&nbsp;say,&nbsp;a&nbsp;(&lt;&nbsp;streetAdress&nbsp;:&nbsp;string&nbsp;&gt;&nbsp;Json.t)&nbsp;expression.&lt;br&gt;<br>
Supporting&nbsp;antiquotations&nbsp;there&nbsp;allows&nbsp;you&nbsp;to&nbsp;write&nbsp;those&nbsp;foreign&lt;br&gt;<br>
values&nbsp;in&nbsp;a&nbsp;composable&nbsp;way,&nbsp;eg.&nbsp;using&nbsp;&lt;:json&lt;&nbsp;{&nbsp;streetAddress:&nbsp;$addr$&lt;br&gt;<br>
}&nbsp;&gt;&gt;&nbsp;with&nbsp;(addr&nbsp;:&nbsp;string&nbsp;Json.t).&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;essentially&nbsp;a&nbsp;nice&nbsp;concrete&nbsp;syntax&nbsp;on&nbsp;top&nbsp;of&nbsp;the&nbsp;typed&lt;br&gt;<br>
combinators&nbsp;(point&nbsp;1.&nbsp;in&nbsp;your&nbsp;message&nbsp;quoted&nbsp;below);&nbsp;indeed,&nbsp;good&lt;br&gt;<br>
extensions&nbsp;should&nbsp;embed&nbsp;as&nbsp;few&nbsp;domain&nbsp;knowledge&nbsp;as&nbsp;possible&nbsp;and&nbsp;defer&lt;br&gt;<br>
that&nbsp;to&nbsp;the&nbsp;pure-ocaml&nbsp;library&nbsp;providing&nbsp;the&nbsp;combinators.&nbsp;That&nbsp;is&nbsp;not&lt;br&gt;<br>
always&nbsp;possible,&nbsp;however,&nbsp;when&nbsp;you&nbsp;want&nbsp;to&nbsp;express&nbsp;rich&nbsp;binding&lt;br&gt;<br>
structures&nbsp;in&nbsp;a&nbsp;typed&nbsp;way&nbsp;(for&nbsp;example&nbsp;the&nbsp;support&nbsp;of&nbsp;GROUP&nbsp;BY&nbsp;in&nbsp;a&lt;br&gt;<br>
finely-typed&nbsp;way&nbsp;in&nbsp;Macaque&nbsp;relies&nbsp;on&nbsp;clever&nbsp;Camlp4&nbsp;expansion&lt;br&gt;<br>
strategies.&lt;br&gt;<br>
&lt;br&gt;<br>
Furthermore,&nbsp;the&nbsp;bare&nbsp;approach&nbsp;of&nbsp;using&nbsp;combinators&nbsp;directly&nbsp;is&nbsp;not&lt;br&gt;<br>
always&nbsp;desirable&nbsp;in&nbsp;situations&nbsp;where&nbsp;you&nbsp;want&nbsp;the&nbsp;code&nbsp;to&nbsp;be&nbsp;used&nbsp;by&lt;br&gt;<br>
non-domain-experts.&nbsp;&quot;Templates&quot;&nbsp;in&nbsp;web&nbsp;programming&nbsp;are&nbsp;an&nbsp;entire&lt;br&gt;<br>
cottage&nbsp;industry&nbsp;made&nbsp;of&nbsp;preprocessing&nbsp;HTML-looking&nbsp;quasiquotations,&lt;br&gt;<br>
to&nbsp;help&nbsp;the&nbsp;role&nbsp;separation&nbsp;between&nbsp;designers&nbsp;and&nbsp;programmers.&nbsp;More&lt;br&gt;<br>
generally,&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;widely&nbsp;accepted&nbsp;domain-specific&nbsp;notation,&lt;br&gt;<br>
your&nbsp;domain-specific&nbsp;library&nbsp;should&nbsp;have&nbsp;a&nbsp;way&nbsp;to&nbsp;support&nbsp;it&nbsp;(so&nbsp;that&lt;br&gt;<br>
you&nbsp;can,&nbsp;for&nbsp;example,&nbsp;call&nbsp;over&nbsp;SQL&nbsp;tuning&nbsp;experts&nbsp;to&nbsp;comment&nbsp;on&nbsp;the&lt;br&gt;<br>
performance&nbsp;optimization&nbsp;of&nbsp;the&nbsp;database&nbsp;queries&nbsp;embedded&nbsp;in&nbsp;your&lt;br&gt;<br>
OCaml&nbsp;code).&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;maybe&nbsp;less&nbsp;visible&nbsp;for&nbsp;non-programmable&nbsp;data&nbsp;description&lt;br&gt;<br>
languages&nbsp;such&nbsp;as&nbsp;JSON,&nbsp;but&nbsp;I&nbsp;suspect&nbsp;this&nbsp;still&nbsp;holds.&nbsp;For&nbsp;example,&lt;br&gt;<br>
if&nbsp;you&nbsp;distribute&nbsp;a&nbsp;protocol&nbsp;library&nbsp;built&nbsp;on&nbsp;top&nbsp;of&nbsp;JSON&nbsp;and&nbsp;bridging&lt;br&gt;<br>
over&nbsp;many&nbsp;programming&nbsp;languages,&nbsp;you&nbsp;want&nbsp;the&nbsp;same&nbsp;maintainer&nbsp;to&nbsp;be&lt;br&gt;<br>
able&nbsp;to&nbsp;quickly&nbsp;reflect&nbsp;changes&nbsp;to&nbsp;the&nbsp;protocol&nbsp;schema&nbsp;over&nbsp;all&lt;br&gt;<br>
implements.&nbsp;This&nbsp;is&nbsp;vastly&nbsp;easier&nbsp;if&nbsp;they&nbsp;respect&nbsp;the&nbsp;domain-specific&lt;br&gt;<br>
syntax&nbsp;instead&nbsp;of&nbsp;each&nbsp;having&nbsp;an&nbsp;embedding&nbsp;following&nbsp;the&nbsp;concrete&lt;br&gt;<br>
syntax&nbsp;of&nbsp;the&nbsp;corresponding&nbsp;language.&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Thu,&nbsp;Jan&nbsp;31,&nbsp;2013&nbsp;at&nbsp;1:28&nbsp;PM,&nbsp;Alain&nbsp;Frisch&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:alain@frisch.fr&quot;&gt;alain@frisch.fr&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;01/31/2013&nbsp;12:48&nbsp;PM,&nbsp;Leo&nbsp;White&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;&gt;&gt;&nbsp;and&nbsp;&lt;&lt;&nbsp;are&nbsp;really&nbsp;not&nbsp;keywords&nbsp;of&nbsp;OCaml,&nbsp;and&nbsp;I&nbsp;wouldn&#39;t&nbsp;be&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;surprised&nbsp;they&nbsp;are&nbsp;actually&nbsp;used&nbsp;as&nbsp;operators.&nbsp; I&nbsp;prefer&nbsp;breaking&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;compatibility&nbsp;with&nbsp;camlp4&nbsp;than&nbsp;with&nbsp;OCaml.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Thinking&nbsp;about&nbsp;it&nbsp;&quot;&lt;:&quot;&nbsp;is&nbsp;not&nbsp;entirely&nbsp;unproblematic.&nbsp;Since&nbsp;&quot;[&lt;&quot;&nbsp;is&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;single&nbsp;token,&nbsp;[&lt;:foo&lt;&nbsp;..&nbsp;&gt;&gt;]&nbsp;would&nbsp;be&nbsp;awkward&nbsp;for&nbsp;the&nbsp;lexer.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Even&nbsp;if&nbsp;we&nbsp;abandon&nbsp;the&nbsp;camlp4&nbsp;syntax&nbsp;for&nbsp;quotations&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Hurrah&nbsp;:-)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;,&nbsp;I&nbsp;still&nbsp;think&nbsp;that&lt;br&gt;<br>
&gt;&gt;&nbsp;{:lid&nbsp;{x{&nbsp;string&nbsp;}x}}&nbsp;is&nbsp;too&nbsp;heavy&nbsp;and&nbsp;inflexible&nbsp;for&nbsp;traditional&lt;br&gt;<br>
&gt;&gt;&nbsp;quotations.&nbsp;For&nbsp;example,&nbsp;a&nbsp;JSON&nbsp;quotation&nbsp;would&nbsp;look&nbsp;like:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;{:json&nbsp;{&lt;{&nbsp;{&quot;streetAddress&quot;:&nbsp;&quot;21&nbsp;2nd&nbsp;Street&quot;}&nbsp;}&gt;}}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;would&nbsp;write&nbsp;this:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;(:json&nbsp;{{&nbsp;{&quot;streetAddress&quot;:&nbsp;&quot;21&nbsp;2nd&nbsp;Street&quot;}&nbsp;}})&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;And&nbsp;if&nbsp;we&nbsp;keep&nbsp;the&nbsp;&quot;end&nbsp;marker&quot;&nbsp;in&nbsp;the&nbsp;AST,&nbsp;this&nbsp;could&nbsp;be:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;{json{&nbsp;{&quot;streetAddress&quot;:&nbsp;&quot;21&nbsp;2nd&nbsp;Street&quot;}&nbsp;}json}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;But&nbsp;maybe&nbsp;we&nbsp;should&nbsp;take&nbsp;a&nbsp;step&nbsp;back,&nbsp;and&nbsp;really&nbsp;ask&nbsp;ourselves&nbsp;why&nbsp;we&nbsp;should&lt;br&gt;<br>
&gt;&nbsp;use&nbsp;concrete&nbsp;JSON&nbsp;syntax&nbsp;here.&nbsp; Other&nbsp;possibilities:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;1.&nbsp;Write&nbsp;the&nbsp;JSON&nbsp;AST&nbsp;directly&nbsp;as&nbsp;regular&nbsp;OCaml&nbsp;code:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; Json.(M[&quot;streetAdress&quot;,&nbsp;S&nbsp;&quot;21&nbsp;2snd&nbsp;Street&quot;])&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; (assuming&nbsp;module&nbsp;Json&nbsp;export&nbsp;constructors&nbsp;M&nbsp;and&nbsp;S.)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;2.&nbsp;Use&nbsp;&quot;parsed&quot;&nbsp;OCaml&nbsp;syntax,&nbsp;with&nbsp;some&nbsp;-ppx&nbsp;filter&nbsp;mapping&nbsp;it&nbsp;to&nbsp;JSON&nbsp;AST:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; (:json&nbsp;{&nbsp;streetAddress:&nbsp;&quot;21&nbsp;2snd&nbsp;Street&quot;&nbsp;})&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;(which&nbsp;would&nbsp;expand&nbsp;to&nbsp;the&nbsp;version&nbsp;above)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;3.&nbsp;Use&nbsp;a&nbsp;JSON&nbsp;parser&nbsp;(if&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;&quot;anti-quotations&quot;):&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;parse_json&nbsp;&quot;{\&quot;streetAddress\&quot;:&nbsp;\&quot;21&nbsp;2nd&nbsp;Street\&quot;}&quot;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;or:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp;parse_json&nbsp;{{&nbsp;{&quot;streetAddress:&nbsp;&quot;21&nbsp;2nd&nbsp;Street&quot;}&nbsp;}}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;From&nbsp;all&nbsp;the&nbsp;uses&nbsp;of&nbsp;Camlp4&nbsp;I&#39;ve&nbsp;seen&nbsp;listed&nbsp;since&nbsp;the&nbsp;beginning&nbsp;of&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;discussion,&nbsp;I&nbsp;can&nbsp;imagine&nbsp;using&nbsp;at&nbsp;some&nbsp;point&nbsp;almost&nbsp;each&nbsp;of&nbsp;them,&nbsp;except&lt;br&gt;<br>
&gt;&nbsp;those&nbsp;which&nbsp;are&nbsp;basically&nbsp;&quot;just&quot;&nbsp;about&nbsp;quoting&nbsp;fragments&nbsp;of&nbsp;external&lt;br&gt;<br>
&gt;&nbsp;languages&nbsp;in&nbsp;their&nbsp;native&nbsp;syntax.&nbsp; I&nbsp;just&nbsp;don&#39;t&nbsp;see&nbsp;the&nbsp;real&nbsp;benefits.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;would&nbsp;be&nbsp;useful&nbsp;to&nbsp;get&nbsp;feedback&nbsp;from&nbsp;users:&nbsp;do&nbsp;people&nbsp;actually&nbsp;use&lt;br&gt;<br>
&gt;&nbsp;pa_tyxml,&nbsp;pa_json,&nbsp;etc,&nbsp;and&nbsp;do&nbsp;they&nbsp;consider&nbsp;this&nbsp;is&nbsp;really&nbsp;better&nbsp;than&lt;br&gt;<br>
&gt;&nbsp;proposed&nbsp;alternatives?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Alain&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;wg-camlp4&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:wg-camlp4@lists.ocaml.org&quot;&gt;wg-camlp4@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/wg-camlp4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/wg-camlp4&lt;/a&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
wg-camlp4&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:wg-camlp4@lists.ocaml.org&quot;&gt;wg-camlp4@lists.ocaml.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.ocaml.org/listinfo/wg-camlp4&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.ocaml.org/listinfo/wg-camlp4&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
