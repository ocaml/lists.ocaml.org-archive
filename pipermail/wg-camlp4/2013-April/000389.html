<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Changes to the parsetree
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Changes%20to%20the%20parsetree&In-Reply-To=%3C51656068.9060908%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000408.html">
   <LINK REL="Next"  HREF="000390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Changes to the parsetree</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Changes%20to%20the%20parsetree&In-Reply-To=%3C51656068.9060908%40lexifi.com%3E"
       TITLE="[wg-camlp4] Changes to the parsetree">alain.frisch at lexifi.com
       </A><BR>
    <I>Wed Apr 10 13:51:52 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000408.html">[wg-camlp4] About Ptyp_poly nodes in the Parsetree
</A></li>
        <LI>Next message: <A HREF="000390.html">[wg-camlp4] Changes to the parsetree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#389">[ date ]</a>
              <a href="thread.html#389">[ thread ]</a>
              <a href="subject.html#389">[ subject ]</a>
              <a href="author.html#389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/26/2013 08:56 PM, Leo White wrote:
&gt;&gt;<i> On 03/25/2013 03:05 PM, Leo White wrote:
</I>&gt;&gt;&gt;<i> Another small clean-up I'd like would be to change &quot;ptype_params&quot; from
</I>&gt;&gt;&gt;<i> &quot;string loc option list&quot; to &quot;core_type list&quot; and the first part of
</I>&gt;&gt;&gt;<i> &quot;pci_params&quot; from &quot;string loc list&quot; to &quot;core_type list&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Would you change the parser to accept arbitrary types (instead of _ and type variables), and enforce the previous
</I>&gt;&gt;<i> constraint in the type-checker?
</I>&gt;<i>
</I>&gt;<i> It might be better to get a syntax error there as it's probably
</I>&gt;<i> a common beginner mistake. On the other hand, if the error from the type
</I>&gt;<i> checker is nice and clear then it shouldn't be a problem. Either way, we
</I>&gt;<i> might as well support extensions and attributes there.
</I>
I think we should keep the Parsetree type as close as possible (at 
reasonable costs) to the set of ASTs that can be produced by the parser. 
  This will reduce the risk of generating Parsetree fragments which 
cannot be pretty-printed (as source code) faithfully.

So, if we want to move from &quot;string loc list&quot; to &quot;core_type list&quot; (which 
will give attributes for free on parameters), we should accept arbitrary 
types in the parser and fail in the type-checker.  (There is no real 
drawback for the end-user.)  The problem is that this  introduces 
conflicts in the grammar.  The simpler way I've found to address them 
without changing the parser too much is to add the variance prefixes (+ 
and -) as new constructors in core_type (with corresponding grammar 
rules), but this is not very nice.

Leo: do you have an opinion on what to do?

-- Alain
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000408.html">[wg-camlp4] About Ptyp_poly nodes in the Parsetree
</A></li>
	<LI>Next message: <A HREF="000390.html">[wg-camlp4] Changes to the parsetree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#389">[ date ]</a>
              <a href="thread.html#389">[ thread ]</a>
              <a href="subject.html#389">[ subject ]</a>
              <a href="author.html#389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
