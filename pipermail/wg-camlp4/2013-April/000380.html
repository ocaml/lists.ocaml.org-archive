<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Support for extension points in Camlp4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Support%20for%20extension%20points%20in%20Camlp4&In-Reply-To=%3C515C6D20.5000907%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000379.html">
   <LINK REL="Next"  HREF="000382.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Support for extension points in Camlp4</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Support%20for%20extension%20points%20in%20Camlp4&In-Reply-To=%3C515C6D20.5000907%40lexifi.com%3E"
       TITLE="[wg-camlp4] Support for extension points in Camlp4">alain.frisch at lexifi.com
       </A><BR>
    <I>Wed Apr  3 18:55:44 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000379.html">[wg-camlp4] Extension developers: we need you!
</A></li>
        <LI>Next message: <A HREF="000382.html">[wg-camlp4] Support for extension points in Camlp4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#380">[ date ]</a>
              <a href="thread.html#380">[ thread ]</a>
              <a href="subject.html#380">[ subject ]</a>
              <a href="author.html#380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Another topic where help would be much appreciated is the support of 
extension points in Camlp4.  Even if one of the goal of all this 
discussion is to replace some uses of Camlp4, there is no reason Camlp4 
could not support itself the three new syntactic features (attributes, 
extension nodes, quoted strings) in its parsers and its custom 
representation of the OCaml AST.  In addition to simplifying a migration 
phase (combining some Camp4 extensions and some -ppx rewriters), 
supporting extensions points in Camlp4 makes sense even for people who 
want (or will have) to continue using Camlp4:

  - AST mappers can then be written not only with -ppx but also as 
Camlp4 AST filters (which supports concrete syntax patterns and 
expressions).

  - It can be imagined that some extensions are split into an AST 
transformation part (to be processed by -ppx) and a change to the 
concrete syntax (with a Camlp4 extension which would only adds 
attributes and extension nodes to the AST).  This would make it possible 
to use the core feature of the extension without camlp4 and still 
provide ad hoc concrete syntax for those who insist on it.

  - Some external tools (a la Bisect) might start using attributes found 
in the parsetree or typedtree, and projects built with Camlp4 will need 
a way to embed such attributes in the source files.


The current state is that Camlp4 has been adapted to the new Parsetree 
(i.e. it generate valid fragments), but its internal representation of 
the OCaml AST and its parsers do not support the new features.  Adding 
this support should not be very difficult for someone familiar enough 
with the implementation of Camlp4.  Any volunteer?


Alain
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000379.html">[wg-camlp4] Extension developers: we need you!
</A></li>
	<LI>Next message: <A HREF="000382.html">[wg-camlp4] Support for extension points in Camlp4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#380">[ date ]</a>
              <a href="thread.html#380">[ thread ]</a>
              <a href="subject.html#380">[ subject ]</a>
              <a href="author.html#380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
