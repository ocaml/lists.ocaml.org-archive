<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Changes to the parsetree
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Changes%20to%20the%20parsetree&In-Reply-To=%3C51657648.2050509%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000390.html">
   <LINK REL="Next"  HREF="000394.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Changes to the parsetree</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Changes%20to%20the%20parsetree&In-Reply-To=%3C51657648.2050509%40lexifi.com%3E"
       TITLE="[wg-camlp4] Changes to the parsetree">alain.frisch at lexifi.com
       </A><BR>
    <I>Wed Apr 10 15:25:12 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000390.html">[wg-camlp4] Changes to the parsetree
</A></li>
        <LI>Next message: <A HREF="000394.html">[wg-camlp4] Changes to the parsetree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#391">[ date ]</a>
              <a href="thread.html#391">[ thread ]</a>
              <a href="subject.html#391">[ subject ]</a>
              <a href="author.html#391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/10/2013 03:34 PM, Gabriel Scherer wrote:
&gt;<i> I think that having additional constructors in core_type that are
</I>&gt;<i> semantically meaningless (the variance annotations) will not help
</I>&gt;<i> third-party extension writers either. What are the reasons for having
</I>&gt;<i> the whole core_type in place where type variables are expected?
</I>
I can see the following reasons:

  - It's actually not only type variables.  Since the introduction of 
GADT, you can also use &quot;_&quot; as a type parameter (only for type 
declarations, not classes).  This is currently encoded as a &quot;string loc 
option&quot;, which is not very self-describing.

  - Using core_type gives attributes for free. Otherwise, we need to 
complexify to Parsetree definition and the parser to allow attributes 
explicitly.

  - If we represent variance information +/- as constructors of 
core_type, it further simplifies the definition in the Parsetree (from 
&quot;(variance * string loc option) list&quot; to &quot;core_type list&quot;), thus making 
it sometimes simpler to match or create fragments of ASTs.

  - I see it generally as a good thing that fragments with identical 
syntax are represented in the same way in the Parsetree.  Of course, 
this is far from being the case because there are lots of duplication 
between the various syntactic categories, but since a &quot;'a&quot; as a type 
parameter will also be used with the same syntax &quot;'a&quot; as a type 
expression close to it (in the same type declaration), one could argue 
that they should be of the same &quot;kind&quot;.

But I'm not pushing too much in this direction.  Leo made the request, 
so I'd let him comment!

Alain
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000390.html">[wg-camlp4] Changes to the parsetree
</A></li>
	<LI>Next message: <A HREF="000394.html">[wg-camlp4] Changes to the parsetree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#391">[ date ]</a>
              <a href="thread.html#391">[ thread ]</a>
              <a href="subject.html#391">[ subject ]</a>
              <a href="author.html#391">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
