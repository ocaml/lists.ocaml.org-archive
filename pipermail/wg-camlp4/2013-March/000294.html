<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] A new branch to experiment with extension points
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20A%20new%20branch%20to%20experiment%20with%20extension%20points&In-Reply-To=%3C5134B062.6010106%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000292.html">
   <LINK REL="Next"  HREF="000295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] A new branch to experiment with extension points</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20A%20new%20branch%20to%20experiment%20with%20extension%20points&In-Reply-To=%3C5134B062.6010106%40lexifi.com%3E"
       TITLE="[wg-camlp4] A new branch to experiment with extension points">alain.frisch at lexifi.com
       </A><BR>
    <I>Mon Mar  4 14:32:02 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000292.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
        <LI>Next message: <A HREF="000295.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#294">[ date ]</a>
              <a href="thread.html#294">[ thread ]</a>
              <a href="subject.html#294">[ subject ]</a>
              <a href="author.html#294">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/04/2013 02:52 PM, Gabriel Scherer wrote:
 &gt; For once, all delimiters in the
 &gt; OCaml syntax so far are symmetric ([, {, (, but also [&lt; and {&lt;),

This is not true, for instance, for ocamldoc comments (I know they are 
not part of the OCaml syntax!), and personally I'm not sure to see the 
benefit of making the syntax heavier just to keep symmetry.

&gt;<i> Could the
</I>&gt;<i> two syntaxes share a single delimiter prefix, for example [: and [:: ?
</I> &gt; ...
 &gt; I think we really need a prefix syntax.

I don't have a strong opinion on syntax, and I agree with the need for a 
prefix syntax (another example:  ocamldoc section header, as a 
prefix-attribute on an &quot;include&quot;).

Leo seems to be a lot more comfortable than me with hacking the concrete 
syntax, so I'll let him comment on the possibilities.

&gt;<i> 2. I'm unsure about generalization of the &quot;with&quot; syntax to other
</I>&gt;<i> syntactic cases. In expression context, &quot;with&quot; is very much associated
</I>&gt;<i> to pattern matching, and in particular there is syntactic contention
</I>&gt;<i> around a potential &quot;let try ... = ... with ... in&quot; construct. Using
</I>&gt;<i> &quot;with&quot; in local module open introduces avenue for confusion.
</I>
I was thinking about using the &quot;with&quot; syntax only for 
structure/signature item-like components (only that we want to attach 
them to individual component in case of multi-component declarations), 
and probably exclude the expression-as-a-structure-item case.

But it's true that the following:

open M with foo
include S with foo

can be misleading (this is not a with constraint on module type S).

(Before someone question the need for attributes on such items: yes, I 
think it can be useful.  For instance to guide, an attribute on an 
include statement in an interface could instruct ocamldoc whether it 
should inline the corresponding module type or keep it as a reference. 
For open: an attribute could control whether ocamldoc should use the 
opened module to shorten names in the generated doc.)


What about:

  ... [@id expr]    (* attribute on expression, pattern, type, module 
type, module expr *)

  [^id expr] ...    (* same, prefix syntax *)

  ... [@@id expr]   (* attribute on str/sig item-like components *)

  [#id expr]        (* extension as an expression, etc. *)


Alain
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000292.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
	<LI>Next message: <A HREF="000295.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#294">[ date ]</a>
              <a href="thread.html#294">[ thread ]</a>
              <a href="subject.html#294">[ subject ]</a>
              <a href="author.html#294">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
