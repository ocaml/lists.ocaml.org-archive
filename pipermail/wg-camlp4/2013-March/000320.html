<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Request for feedback (was: A new branch to experiment with extension points)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Request%20for%20feedback%20%28was%3A%20A%20new%20branch%20to%20experiment%0A%20with%20extension%20points%29&In-Reply-To=%3C5138A4D7.5040804%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000319.html">
   <LINK REL="Next"  HREF="000321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Request for feedback (was: A new branch to experiment with extension points)</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Request%20for%20feedback%20%28was%3A%20A%20new%20branch%20to%20experiment%0A%20with%20extension%20points%29&In-Reply-To=%3C5138A4D7.5040804%40lexifi.com%3E"
       TITLE="[wg-camlp4] Request for feedback (was: A new branch to experiment with extension points)">alain.frisch at lexifi.com
       </A><BR>
    <I>Thu Mar  7 14:31:51 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000319.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
        <LI>Next message: <A HREF="000321.html">[wg-camlp4] Request for feedback (was: A new branch to experiment with extension points)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#320">[ date ]</a>
              <a href="thread.html#320">[ thread ]</a>
              <a href="subject.html#320">[ subject ]</a>
              <a href="author.html#320">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/07/2013 10:07 AM, Alain Frisch wrote:
&gt;<i> Unless someone objects to it, I'll remove the prefix syntax.
</I>
Done!

I've also removed the special syntax [*id expr] for floating 
signature/structure item attributes.  Instead, they use the standard 
syntax for &quot;item&quot; attributes ([@@id expr]), recognized at the beginning 
of the whole signature/structure or after a &quot;;;&quot; token.   (I've also 
changed the grammar a little bit so that a signature/structure can start 
with a &quot;;;&quot; token and it is allowed to have two successive &quot;;;&quot; tokens. 
  This makes it possible to prefix any floating attribute [@@id expr] 
with &quot;;;&quot; and this will work in any context.)

With these simplifications, we've reduced the number of different 
syntaxes for attributes from 5 to 2.

Sorry for all those repeated changes, and thanks to those who can follow 
and comment :-)  I think I'm now pretty happy with the current 
implementation,  and I'd really like to get feedback on the current 
syntactic choices, in particular on the following points, where at least 
someone objected to the current choice:

- Gabriel mentioned that he would prefer more symmetric delimiters (e.g. 
[@ ... @] and not [@ ... ]).  I'd personally prefer something lighter, 
and I've argued that ocamldoc comments are already non symmetric.

- Leo did not seem convinced by the need for floating 
signature/structure items.  I've given the example of ocamldoc section 
headers.

- Leo expressed some preference for a more alphanumeric syntax for item 
attributes (... with ...).  I prefer to have a more similar syntax for 
all kinds of attributes.

(Did I forget any other discussed point about the syntax?)

There is also the question of how attributes are represented in the 
Parsetree, on which there was little discussion.  For instance, it could 
make sense to store attributes on expressions as an extra field of the 
expression record (next to pexp_desc, pexp_loc) instead of introducing a 
new constructor to expression_desc.  On the one hand, it would make it 
slighlty more complex to pattern match on a specific attribute (it could 
be anywhere in the list), but on the other hand it would make it simpler 
to detect a non-trivial Parsetree fragment for its structure modulo 
attributes.



Alain
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000319.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
	<LI>Next message: <A HREF="000321.html">[wg-camlp4] Request for feedback (was: A new branch to experiment with extension points)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#320">[ date ]</a>
              <a href="thread.html#320">[ thread ]</a>
              <a href="subject.html#320">[ subject ]</a>
              <a href="author.html#320">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
