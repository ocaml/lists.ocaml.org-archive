<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] A new branch to experiment with extension points
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20A%20new%20branch%20to%20experiment%20with%20extension%20points&In-Reply-To=%3C51312DC6.7010106%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000286.html">
   <LINK REL="Next"  HREF="000288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] A new branch to experiment with extension points</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20A%20new%20branch%20to%20experiment%20with%20extension%20points&In-Reply-To=%3C51312DC6.7010106%40lexifi.com%3E"
       TITLE="[wg-camlp4] A new branch to experiment with extension points">alain.frisch at lexifi.com
       </A><BR>
    <I>Fri Mar  1 22:37:58 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000286.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
        <LI>Next message: <A HREF="000288.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#287">[ date ]</a>
              <a href="thread.html#287">[ thread ]</a>
              <a href="subject.html#287">[ subject ]</a>
              <a href="author.html#287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/1/2013 9:01 PM, Gabriel Scherer wrote:
&gt;<i> I'm sorry if my remarks set you in this way, but I'm not sure the
</I>&gt;<i> recent changes go in the right direction.
</I>
No problem, it is just an experiment.

&gt;<i> This remark is in direct conflict with my previous remark that &quot;with&quot;
</I>&gt;<i> could be replaced by the generic annotation on structure_items. This
</I>&gt;<i> previous remark was a mistake, as I had not thought of mutually
</I>&gt;<i> recursive definitions, and I now believe that you indeed need to
</I>&gt;<i> attach attributes to the grammar element named &quot;typedef&quot; in the manual
</I>&gt;<i> grammar description (
</I>&gt;<i> <A HREF="http://caml.inria.fr/pub/docs/manual-ocaml/manual016.html">http://caml.inria.fr/pub/docs/manual-ocaml/manual016.html</A> ).
</I>
Do you think we still need generic attributes on structure items, or 
would attributes on each declared typed + each declared values + etc... 
be enough?

&gt;<i> 2. I have mixed feelings about the idea that detaching struct_item
</I>&gt;<i> attributes from the corresponding struct_item is the right way to
</I>&gt;<i> handle the OCamldoc setting. I'd rather keep a more semantic model
</I>&gt;<i> that makes it explicit what an annotation scopes over, and more
</I>&gt;<i> convenient to write consumers/extensions to handle attributes (no need
</I>&gt;<i> to peek at the next structure items to collect all annotations for the
</I>&gt;<i> current one). Maybe ocamldoc sections could simply be modeled as
</I>&gt;<i> annotations on &quot;();;&quot;, if we don't discover that we really want
</I>&gt;<i> ignored-by-default annotations in the general case (I wouldn't be
</I>&gt;<i> surprised).
</I>
To keep things more structured, it could make sense to have the ocamldoc 
section header be an attribute on the section, as in:

include sig
  ...
end ..(:doc &quot;My section header&quot;)

In that case, we'd better have a prefix syntax for attributes on this 
&quot;include&quot; signature item:

(@doc &quot;My section header&quot;)
include sig
   ...
end

But while this make sense from a structural point of view, this starts 
to look heavy, doesn't it?   (That said, another advantage of this 
structural approach is that you can use your editor to &quot;fold&quot; the 
ocamldoc section...)


Alain
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000286.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
	<LI>Next message: <A HREF="000288.html">[wg-camlp4] A new branch to experiment with extension points
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#287">[ date ]</a>
              <a href="thread.html#287">[ thread ]</a>
              <a href="subject.html#287">[ subject ]</a>
              <a href="author.html#287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
