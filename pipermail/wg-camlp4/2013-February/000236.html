<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] benchmarks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20benchmarks&In-Reply-To=%3CCAPFanBGmFWg4JL17Qs5BiC9B30pu9CrGXc8eHA-QHN-f%2BRnNoQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000235.html">
   <LINK REL="Next"  HREF="000238.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] benchmarks</H1>
    <B>Gabriel Scherer</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20benchmarks&In-Reply-To=%3CCAPFanBGmFWg4JL17Qs5BiC9B30pu9CrGXc8eHA-QHN-f%2BRnNoQ%40mail.gmail.com%3E"
       TITLE="[wg-camlp4] benchmarks">gabriel.scherer at gmail.com
       </A><BR>
    <I>Mon Feb 11 10:45:57 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000235.html">[wg-camlp4] benchmarks
</A></li>
        <LI>Next message: <A HREF="000238.html">[wg-camlp4] benchmarks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#236">[ date ]</a>
              <a href="thread.html#236">[ thread ]</a>
              <a href="subject.html#236">[ subject ]</a>
              <a href="author.html#236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Feb 11, 2013 at 11:31 AM, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">anil at recoil.org</A>&gt; wrote:
&gt;<i> It should work just fine with ppx, and has the advantage of reducing the number of ocamlfind calls per-file (which is a considerable overhead on large projects, since it has to scan the META directories on every invocation).
</I>
That's of course rather orthogonal to the present discussion, but have
you been in contact with Gerd to see if some caching solution would be
possible? Intuitively it feels like ocamlfind could easily maintain a
cache in /var/run/blah and only clean it on install/remove commands.

(An external process invocation would still make some overhead so in
you're case you'd still have to go all the way, but that could improve
the threshold at which such ~hacks become interesting.)

On Mon, Feb 11, 2013 at 11:31 AM, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">anil at recoil.org</A>&gt; wrote:
&gt;<i> On 11 Feb 2013, at 10:06, Alain Frisch &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">alain.frisch at lexifi.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For a code base like Jane Street's where many &quot;extensions&quot; have to be used everywhere, I suspect that the &quot;independent&quot; ppx processes might become an issue (or maybe not, if compared to camlp4), but the following solutions would work:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - Statically linking a &quot;big rewriter&quot; called with -ppx.
</I>&gt;<i>
</I>&gt;<i> This worked well in the case of Mirage; in the monolithic repository, we link together all the camlp4 extensions into a single big one, and invoke that across all files.
</I>&gt;<i>
</I>&gt;<i> It should work just fine with ppx, and has the advantage of reducing the number of ocamlfind calls per-file (which is a considerable overhead on large projects, since it has to scan the META directories on every invocation).
</I>&gt;<i>
</I>&gt;<i> There's also the advantage in camlp4 that this checks that syntax extensions do not conflict. This is less of an issue with ppx, thankfully.
</I>&gt;<i>
</I>&gt;<i> -anil
</I>&gt;<i> _______________________________________________
</I>&gt;<i> wg-camlp4 mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">wg-camlp4 at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">http://lists.ocaml.org/listinfo/wg-camlp4</A>
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000235.html">[wg-camlp4] benchmarks
</A></li>
	<LI>Next message: <A HREF="000238.html">[wg-camlp4] benchmarks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#236">[ date ]</a>
              <a href="thread.html#236">[ thread ]</a>
              <a href="subject.html#236">[ subject ]</a>
              <a href="author.html#236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
