<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Pending issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Pending%20issues&In-Reply-To=%3CPrayer.1.3.5.1302131206120.25997%40hermes-1.csi.cam.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000257.html">
   <LINK REL="Next"  HREF="000259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Pending issues</H1>
    <B>Leo White</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Pending%20issues&In-Reply-To=%3CPrayer.1.3.5.1302131206120.25997%40hermes-1.csi.cam.ac.uk%3E"
       TITLE="[wg-camlp4] Pending issues">lpw25 at cam.ac.uk
       </A><BR>
    <I>Wed Feb 13 12:06:12 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000257.html">[wg-camlp4] Pending issues
</A></li>
        <LI>Next message: <A HREF="000259.html">[wg-camlp4] Pending issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#258">[ date ]</a>
              <a href="thread.html#258">[ thread ]</a>
              <a href="subject.html#258">[ subject ]</a>
              <a href="author.html#258">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> A related question is related to the current work on runtime types. 
</I>&gt;&gt;<i> Attributes on type declarations could be kept in the runtime 
</I>&gt;&gt;<i> representation of the declarations, allowing libraries to interpret
</I>&gt;&gt;<i> them as they want.  (LexiFi's version of OCaml has been extended with 
</I>&gt;&gt;<i> attributes on type declarations precisely to do that.)  Having 
</I>&gt;&gt;<i> attributes defined as general expressions, however, means that those 
</I>&gt;&gt;<i> libraries would need to link with compiler-libs, or at least be
</I>&gt;&gt;<i> compiled against some of its .cmi, in order to be able to analyze the
</I>&gt;&gt;<i> Parsetree. I don't see it is as a big problem, and it would also be
</I>&gt;&gt;<i> possible to restrict which expressions are reflected in runtime types
</I>&gt;&gt;<i> (e.g. to structured constants).  Comments are welcome!
</I>&gt;<i>
</I>&gt;<i>I think it is usualy a bad idea to need to link against compiler-libs.
</I>&gt;<i>Doing so almost certainly prevent you from being able to compile
</I>&gt;<i>against different version of the compiler. This ast should be
</I>&gt;<i>fixed once and be provided in the stdlib. I would also prefer to
</I>&gt;<i>restrict that kind of annotation to a small subset of the expression
</I>&gt;<i>language avoiding as much as possible duplication. This would simplify
</I>&gt;<i>the code using those annotations. Maybe only list, Variant, record and
</I>&gt;<i>string literals/identifiers would be sufficient. Maybe also let in ?
</I>
I agree that we should avoid making people link against compiler-libs where 
possible. However, I think that having a fixed AST and only supporting a 
subset is too restrictive.

An alternative would be to provide a standard library module that could be 
used to handle simple ASTs, but still support using Parsetree directly for 
more complicated AST handling.

For example the &quot;Ast&quot; module might provide functions like:

getIdent: Ast.expression -&gt; string option

which would return a string of an identifier if the expression was a simple 
identifier.

This way we don't restrict changes to Parsetree, or the possible 
expressions within an attribute, but we do allow people to get basic 
information out of an expression without linking against compiler-libs.


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000257.html">[wg-camlp4] Pending issues
</A></li>
	<LI>Next message: <A HREF="000259.html">[wg-camlp4] Pending issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#258">[ date ]</a>
              <a href="thread.html#258">[ thread ]</a>
              <a href="subject.html#258">[ subject ]</a>
              <a href="author.html#258">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
