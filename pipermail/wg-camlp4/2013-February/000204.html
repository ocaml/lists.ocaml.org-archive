<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Structured comments,	shallow embeddings and deep quasiquotations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Structured%20comments%2C%0A%09shallow%20embeddings%20and%20deep%20quasiquotations&In-Reply-To=%3CPrayer.1.3.5.1302051557300.13899%40hermes-1.csi.cam.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000201.html">
   <LINK REL="Next"  HREF="000207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Structured comments,	shallow embeddings and deep quasiquotations</H1>
    <B>Leo White</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Structured%20comments%2C%0A%09shallow%20embeddings%20and%20deep%20quasiquotations&In-Reply-To=%3CPrayer.1.3.5.1302051557300.13899%40hermes-1.csi.cam.ac.uk%3E"
       TITLE="[wg-camlp4] Structured comments,	shallow embeddings and deep quasiquotations">lpw25 at cam.ac.uk
       </A><BR>
    <I>Tue Feb  5 15:57:30 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000201.html">[wg-camlp4] Structured comments, shallow embeddings and deep quasiquotations
</A></li>
        <LI>Next message: <A HREF="000207.html">[wg-camlp4] Structured comments, shallow embeddings and deep quasiquotations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#204">[ date ]</a>
              <a href="thread.html#204">[ thread ]</a>
              <a href="subject.html#204">[ subject ]</a>
              <a href="author.html#204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>I don't really like Leo's proposal.
</I>&gt;<i>
</I>&gt;<i>On the semantic side, I very much like Jeremy's idea
</I>
There is no fundamental difference between the two ideas. There are 
problems with trying to use functions within modules as extensions. My 
proposal is simply that we can get around this by attaching the functions 
to namespaces.

&gt;<i>On the practical side, adding a notion of staged compilation
</I>
I'm not suggesting any notion of staged compilation. The whole point of 
separating functions for extensions from modules is to avoid this issue.

&gt;<i>namespaces to handle syntax extensions seems really overkill.
</I>
Namespaces are going to be included anyway, there is no harm in using them 
to help make syntax extensions easier.
 
&gt;<i>A reasonable compromise I would see between the point of view of Alain
</I>&gt;<i>and Jeremy/Leo is to have an &quot;unsafe&quot; interface for global
</I>&gt;<i>preprocessing, which we would discourage people from using by being
</I>&gt;<i>very good at breaking backward compatibility (we can do better than
</I>&gt;<i>Camlp4!), and *maintaining* at the same time one or several safer
</I>&gt;<i>entry point that provide the local structure and conventional syntax
</I>&gt;<i>that we think will bring more robustness to syntax extensions (like
</I>&gt;<i>type-conv can currently be seen as a protective hub around type-driven
</I>&gt;<i>boilerplate generation). 
</I>
I agree. My proposal is not instead of ppx. It is a safer and easier-to-use 
alternative for a large subset of the extensions ppx can support. It is a 
more long-term option, for the short/medium-term we should use ppx.

&gt;<i>Leo, I'm a bit unclear on what kind of
</I>&gt;<i>GADT you're thinking of, could you elaborate? 
</I>
Nothing fancy, just something like:

  type 'a ctx = 
    ExprQuot: string -&gt; Ast.expr ctx
    PattQuot: string -&gt; Ast.patt ctx
    ...
    ExprAst: Ast.expr -&gt; Ast.expr ctx
    PattAst: Ast.expr -&gt; Ast.patt ctx
    ...

&gt;<i>Must we link extension functions together
</I>
I'm not sure I understand what you mean by this. Could you expand?

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000201.html">[wg-camlp4] Structured comments, shallow embeddings and deep quasiquotations
</A></li>
	<LI>Next message: <A HREF="000207.html">[wg-camlp4] Structured comments, shallow embeddings and deep quasiquotations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#204">[ date ]</a>
              <a href="thread.html#204">[ thread ]</a>
              <a href="subject.html#204">[ subject ]</a>
              <a href="author.html#204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
