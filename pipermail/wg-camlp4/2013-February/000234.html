<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Time for a summary?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Time%20for%20a%20summary%3F&In-Reply-To=%3C5118C7B5.8010309%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000225.html">
   <LINK REL="Next"  HREF="000237.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Time for a summary?</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Time%20for%20a%20summary%3F&In-Reply-To=%3C5118C7B5.8010309%40lexifi.com%3E"
       TITLE="[wg-camlp4] Time for a summary?">alain.frisch at lexifi.com
       </A><BR>
    <I>Mon Feb 11 10:28:05 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000225.html">[wg-camlp4] Time for a summary?
</A></li>
        <LI>Next message: <A HREF="000237.html">[wg-camlp4] Time for a summary?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#234">[ date ]</a>
              <a href="thread.html#234">[ thread ]</a>
              <a href="subject.html#234">[ subject ]</a>
              <a href="author.html#234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/07/2013 08:50 PM, Hongbo Zhang wrote:
&gt;<i> On Thu, Feb 7, 2013 at 11:37 AM, Alain Frisch &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">alain.frisch at lexifi.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">alain.frisch at lexifi.com</A>&gt;&gt; wrote:
</I>&gt;<i>     I don't follow. We are talking, basically, about adding simple
</I>&gt;<i>     constructions to the AST, like:
</I>&gt;<i>
</I>&gt;<i>        Pexp_annotation of expression * expression
</I>&gt;<i>        Pexp_extension of string * expression
</I>&gt;<i>
</I>&gt;<i>     and you were suggesting that this would almost kill Camlp4/Fan. Why?
</I>&gt;<i>
</I>&gt;<i> The problem is that I am a bit unclear how to encode them in the
</I>&gt;<i> meta-level, since the introduced constructs will not be consumed by the
</I>&gt;<i> type checker, they are provided for the convenience of ppx, but does not
</I>&gt;<i> exist in real world.  I think camlp5 and Coq maintainers will also
</I>&gt;<i> appreciate that we are a bit conservative in the compiler part.
</I>
Again, I'm lost.  Why is that difficult to support the suggested 
extensions to the grammar of OCaml in camlp4/camlp4/fan?  The fact that 
attributes are ignored (or propagated) by the type-checker does not 
change anything: Pexp_annotation is just like a binary operator from a 
syntactic point of view.  And what has Coq to do with it?

&gt;<i> First, I guess most people will seldom write ppx, and they have to
</I>&gt;<i> remember all those function names for once use a year. Quosi-quotation
</I>&gt;<i> is so intuitive that you don't need remember anything.
</I>
Yes, to write (robust) code generators or transformers, you need to know 
about the OCaml AST.  I suspect most people who have written Camlp4 
extensions are somehow familiar with the OCaml parse tree.  And we 
should make the Parsetree more accessible:

  - Clean up some of its rough edges (or introduce a variant of 
Parsetree which looks more like a parse tree than an AST; I'm not 
completely decided on that point yet).

  - Provide a tool / compiler command-line option to dump a fragment of 
parsed source code in &quot;Parsetree&quot; syntax (as discussed with X. Clerc on 
this list).



&gt;<i> Second, as I said, quosi-quotation works so nice with IDE or Emacs,
</I>&gt;<i> since you can expand code any time you want, just one key binding, the
</I>&gt;<i> expanded code just show up in my emacs buffer
</I>
Could you clarify how this would work?  My understanding of quotations 
in Fan is still that they should be completely ignored by editors, 
because you can put arbitrary syntax in them, so it doesn't make sense 
to apply OCaml &quot;rules&quot; (coloring, indentation, folding, etc) to them.


&gt;<i> Third, this way to construct code is very limited, think about how you
</I>&gt;<i> encode the ast, &quot;{:expr| {:expr| a + b|} |}&quot;
</I>
It's a good example of something I've never wanted to do and which is 
not required to implement any of the &quot;extensions&quot; I'd be interested to use.



Regards,

Alain
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000225.html">[wg-camlp4] Time for a summary?
</A></li>
	<LI>Next message: <A HREF="000237.html">[wg-camlp4] Time for a summary?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#234">[ date ]</a>
              <a href="thread.html#234">[ thread ]</a>
              <a href="subject.html#234">[ subject ]</a>
              <a href="author.html#234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
