<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] nested quotation lexing problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20nested%20quotation%20lexing%20problem%3F&In-Reply-To=%3Cwfhai9zig5.fsf%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000420.html">
   <LINK REL="Next"  HREF="000422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] nested quotation lexing problem?</H1>
    <B>Wojciech Meyer</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20nested%20quotation%20lexing%20problem%3F&In-Reply-To=%3Cwfhai9zig5.fsf%40gmail.com%3E"
       TITLE="[wg-camlp4] nested quotation lexing problem?">wojciech.meyer at gmail.com
       </A><BR>
    <I>Sat May 11 15:42:34 BST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000420.html">[wg-camlp4] nested quotation lexing problem?
</A></li>
        <LI>Next message: <A HREF="000422.html">[wg-camlp4] nested quotation lexing problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#421">[ date ]</a>
              <a href="thread.html#421">[ thread ]</a>
              <a href="subject.html#421">[ subject ]</a>
              <a href="author.html#421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Bob Zhang &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">bobzhang1988 at gmail.com</A>&gt; writes:

&gt;<i> &#160; &#160;Sample 1:
</I>&gt;<i> &#160; &#160;{:q| &#160;&quot;|}&quot; |}
</I>&gt;<i> &#160; &#160; &#160; &#160;Shall we accept this or reject it? the intuition is that this
</I>&gt;<i> is a legal quotation, however, if we treat the contents inside the
</I>&gt;<i> quotation in a verbatim way, this is illegal...
</I>
I think quotation engine should lex something in between quotes as a
string, therefore I believe it ought to be accepted. From what I can
think, &quot; pair is already so special that it makes sense to lex it always
as string. It might be a bit more difficult to do, but I think it's
worth.

&gt;<i> &#160; Sample 2:
</I>&gt;<i> &#160; {:q| '&quot;' |} &#160; &#160;
</I>&gt;<i> &#160; &#160; &#160;If we treat &quot; inside the quotation specially, the quotation above
</I>&gt;<i> seems to be illegal (a non-terminated string).
</I>
Again pair of ' is also special, and the lexer should be aware always
about this.

&gt;<i> &#160; &#160;If we treat both ' and &quot; inside quotation in a special way, which
</I>&gt;<i> is good in most cases, then we lose some use cases, for example, the
</I>&gt;<i> contents inside the quotation have to follow the same string char
</I>&gt;<i> lexical convention as OCaml.. what do you think?
</I>
I'd make it following OCaml convention, but also make it plugable so the
user can choose how to lex the contents, because string can contain
arbitrary text, and I've never seen a computer language that had
different delimiters (apart from Python ''') so it all makes sense. On
other hand allowing strings between other delimiters would be good to.

Now it's time to say, you would love how the PEG packrat parses, because
it does not have lexing pass so you would not have this problem. (but
has some slightly different).

Wojciech
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000420.html">[wg-camlp4] nested quotation lexing problem?
</A></li>
	<LI>Next message: <A HREF="000422.html">[wg-camlp4] nested quotation lexing problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#421">[ date ]</a>
              <a href="thread.html#421">[ thread ]</a>
              <a href="subject.html#421">[ subject ]</a>
              <a href="author.html#421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
