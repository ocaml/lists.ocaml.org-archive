<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Reconciling Merlin and ppx
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Reconciling%20Merlin%20and%20ppx&In-Reply-To=%3CCACLX4jTxtLHN%2B4iU%3Dhxwh-6QUfKxWEY9Ni%3DWTVXXQ2P-b_3%2BEg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000475.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Reconciling Merlin and ppx</H1>
    <B>Yaron Minsky</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Reconciling%20Merlin%20and%20ppx&In-Reply-To=%3CCACLX4jTxtLHN%2B4iU%3Dhxwh-6QUfKxWEY9Ni%3DWTVXXQ2P-b_3%2BEg%40mail.gmail.com%3E"
       TITLE="[wg-camlp4] Reconciling Merlin and ppx">yminsky at janestreet.com
       </A><BR>
    <I>Sat Nov  2 17:21:19 GMT 2013</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000475.html">[wg-camlp4] Reconciling Merlin and ppx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#474">[ date ]</a>
              <a href="thread.html#474">[ thread ]</a>
              <a href="subject.html#474">[ subject ]</a>
              <a href="author.html#474">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been playing using Merlin more and more for personal projects,
and have started to wonder about how we're going to make Merlin work
effectively in a ppx world.  In some ways, ppx simplifies Merlin's
job, since there's now just one concrete syntax to parse.

But there are still problems to solve.  In particular, you will still
need to be able to apply AST-transformers to the partial ASTs that
Merlin generates in order to run it through the type-inference stage,
or to determine the environment.

Obviously, Merlin could just reimplement a bunch of common AST
transformers, as it does now for some common camlp4 extensions.  But
this seems like a situation that is too painful to maintain in the
long term.

A better idea, perhaps, would be to have some libraries or standards
about how to present an AST transformer so that it's suitable for
running against a partial AST.  I don't really know the details of how
Merlin works, but I understand it does a first pass to parse
expressions into top-level units, the parsing of which is done
independently.  AST transformers that operate on those units would
naturally gain some level of incrementality.  Another, perhaps more
intrustive approach would be to write PPX transformers against
Merlin's version of the AST.

I don't quite know what the right solution is, but when 4.02 comes out
we're all going to be writing a bunch of new AST transformers, and if
we really want Merlin to be a success, we should have a plan for how
those transformers will integrate with it.

y
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000475.html">[wg-camlp4] Reconciling Merlin and ppx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#474">[ date ]</a>
              <a href="thread.html#474">[ thread ]</a>
              <a href="subject.html#474">[ subject ]</a>
              <a href="author.html#474">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
