<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Against%20the%20use%20of%20syntactically-valid%20OCaml%20code%0A%20for%20syntax%20extension%20purposes&In-Reply-To=%3C5107BEDF.6040907%40frisch.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000076.html">
   <LINK REL="Next"  HREF="000101.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Against%20the%20use%20of%20syntactically-valid%20OCaml%20code%0A%20for%20syntax%20extension%20purposes&In-Reply-To=%3C5107BEDF.6040907%40frisch.fr%3E"
       TITLE="[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes">alain at frisch.fr
       </A><BR>
    <I>Tue Jan 29 12:21:51 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000076.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
        <LI>Next message: <A HREF="000101.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78">[ date ]</a>
              <a href="thread.html#78">[ thread ]</a>
              <a href="subject.html#78">[ subject ]</a>
              <a href="author.html#78">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/29/2013 11:52 AM, Gabriel Scherer wrote:
&gt;<i> Code with a special semantics should
</I>&gt;<i> have a special syntax.
</I>
I agree, for most cases, although I don't think this should be a hard 
constraint.  Generic extension points are parts of the plan!

It is a good objective to make clear that an extension is used, but it 
is also quite important to keep good support from editors (coloring, 
indentation, parentheses matching), which is quite contradictory with 
the notion of quotation.  Also, relying on already parsed fragments 
discourage the creation of sub-languages with ad hoc grammar, and this 
is good (in particular, users don't need to learn new precedence rules).

I propose to start discussing the addition of attributes to most 
syntactic categories (expressions, type expressions, patterns, type 
declarations, module expressions, structure/signature items, etc).  I 
suggest to adopt &quot;expressions&quot; as the (default) nature of attribute's 
content, because the syntax for expressions is quite flexible.  We need 
some syntax to attach such an attribute to various syntactic categories. 
  It might be a good idea to support both prefix and postfix attributes. 
  Personally I don't care too much about the choice of syntax, and I'm 
very bad at picking good syntax.  Good proposal are welcome!  To avoid 
ambiguities, one might need to use different syntaxes for attributes on 
structure/signature items and other components.

To illustrate the idea, though, let's assume the following syntax:

   postfix:    .... (% e)
   prefix:     (@ e) ....

on structure/signature items:

   postfix:    .... (%% e)
   prefix:     (@@ e) ....


So one could write:

  (@PGSQL) dbh &quot;select id, name from users&quot;

  type t = { a : int (% default(2), sexp_drop_if (fun x -&gt; x = 2)) }

  type f = {foo:int} (%sexp)

  let () = (@TEST) expr

  module M = (@ifdef SYMBOL)(struct ... end)(struct ... end)

  (@@nonrec) type t = ...


   val foo: int -&gt; int  (%% DEPRECATED)


Alain

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000076.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
	<LI>Next message: <A HREF="000101.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78">[ date ]</a>
              <a href="thread.html#78">[ thread ]</a>
              <a href="subject.html#78">[ subject ]</a>
              <a href="author.html#78">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
