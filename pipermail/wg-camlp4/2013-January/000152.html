<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] On domain-specific foreign syntaxes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20On%20domain-specific%20foreign%20syntaxes&In-Reply-To=%3CFB5C1A21-6ACB-45D1-83D6-7D685A612332%40recoil.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000149.html">
   <LINK REL="Next"  HREF="000154.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] On domain-specific foreign syntaxes</H1>
    <B>Anil Madhavapeddy</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20On%20domain-specific%20foreign%20syntaxes&In-Reply-To=%3CFB5C1A21-6ACB-45D1-83D6-7D685A612332%40recoil.org%3E"
       TITLE="[wg-camlp4] On domain-specific foreign syntaxes">anil at recoil.org
       </A><BR>
    <I>Thu Jan 31 13:22:08 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000149.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
        <LI>Next message: <A HREF="000154.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#152">[ date ]</a>
              <a href="thread.html#152">[ thread ]</a>
              <a href="subject.html#152">[ subject ]</a>
              <a href="author.html#152">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31 Jan 2013, at 13:11, Alain Frisch &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">alain.frisch at lexifi.com</A>&gt; wrote:

&gt;<i> When non-programmers have to write some HTML code, this code rarely ends up in OCaml source code.  Usually, it stays in its own HTML file, which is then processed (statically or dynamically) by the (OCaml) code.
</I>&gt;<i> 
</I>&gt;<i> When fragments of JSON/XML/etc are created programatically, this is often done &quot;piece by piece&quot;, with very small fragments involving a high density of anti-quotations.  The benefits of using the foreign syntax here are not clear to me.
</I>
This does match my experience with pa_css, pa_json, pa_xml while building the Mirage website.  For example:

<A HREF="https://github.com/mirage/mirage-www/blob/master/src/style.ml#L71">https://github.com/mirage/mirage-www/blob/master/src/style.ml#L71</A>
<A HREF="https://github.com/mirage/mirage-www/blob/master/src/wiki.ml">https://github.com/mirage/mirage-www/blob/master/src/wiki.ml</A>

are both either flat templates, or fairly dense with antiquotations.  It is quite nice that I can paste in some HTML code and get type errors from the XMLM parser.

More recently, I've been using Martin Jambon's new tools that perform external code generation instead, and it's quite a pleasant experience.  For example, the Github bindings use his ATD tool which auto-generates the parsing code into separate OCaml modules:

<A HREF="https://github.com/avsm/ocaml-github/blob/master/lib/github.atd">https://github.com/avsm/ocaml-github/blob/master/lib/github.atd</A>

With ATD, you retain type safety, but lose other benefits of embedding code (most notably, using modules to control the visibility of the generated types).  The build system integration also took some thought, although this is ocamlbuild's fault.

I can't immediately think of a good case where programmatic fragments of JSON/XML really need the current quotation/antiquotation mechanism.  If it simplifies editor support, I'd be happy enough to lose this functionality.

-anil
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000149.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
	<LI>Next message: <A HREF="000154.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#152">[ date ]</a>
              <a href="thread.html#152">[ thread ]</a>
              <a href="subject.html#152">[ subject ]</a>
              <a href="author.html#152">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
