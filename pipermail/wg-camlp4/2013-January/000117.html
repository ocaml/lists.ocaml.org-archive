<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Against%20the%20use%20of%20syntactically-valid%20OCaml%20code%0A%20for%20syntax%20extension%20purposes&In-Reply-To=%3C1008548475.13786.1359541398143.JavaMail.root%40inria.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000115.html">
   <LINK REL="Next"  HREF="000119.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes</H1>
    <B>Xavier Clerc</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20Against%20the%20use%20of%20syntactically-valid%20OCaml%20code%0A%20for%20syntax%20extension%20purposes&In-Reply-To=%3C1008548475.13786.1359541398143.JavaMail.root%40inria.fr%3E"
       TITLE="[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes">xavier.clerc at inria.fr
       </A><BR>
    <I>Wed Jan 30 10:24:02 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000115.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
        <LI>Next message: <A HREF="000119.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#117">[ date ]</a>
              <a href="thread.html#117">[ thread ]</a>
              <a href="subject.html#117">[ subject ]</a>
              <a href="author.html#117">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

----- Mail original -----
&gt;<i> On 01/30/2013 10:27 AM, Xavier Clerc wrote:
</I>&gt;<i> &gt; Personally, I think that declaring attributes with their fields
</I>&gt;<i> &gt; and types is pretty useful.
</I>&gt;<i> 
</I>&gt;<i> I don't see how to do that without introducing a lot of complexity in
</I>&gt;<i> the system.  Do you mean we should run the OCaml type-checker on
</I>&gt;<i> attribute arguments before they are processed?  Or that we should
</I>&gt;<i> restrict attribute arguments to be pure constant data (records,
</I>&gt;<i> constructors, literals)?  This seems overly restrictive.  It make
</I>&gt;<i> sense
</I>&gt;<i> to allow full expressions within attributes (e.g. some uses of
</I>&gt;<i> type-conv
</I>&gt;<i> requires to annotate types with functions), and I don't see how to
</I>&gt;<i> type-check that.
</I>
Java made the choice to restrict to constants.
This is indeed restrictive, but make sure that it is easy to check
whether an annotation is correct, and also to store it for future
use.


&gt;<i> &gt; This protects the user from some
</I>&gt;<i> &gt; typos and other obvious errors, and avoid boiler-plate code in
</I>&gt;<i> &gt; the attribute processors.
</I>&gt;<i> 
</I>&gt;<i> I don't expect a lot of tedious boiler-plate code in the processors
</I>&gt;<i> (OCaml is not so bad at pattern matching, after all) if they need to
</I>&gt;<i> check some &quot;constraints&quot; on their arguments (not really
</I>&gt;<i> type-checking,
</I>&gt;<i> but rather checking simple things like the fact that they come with a
</I>&gt;<i> string literal argument).
</I>
Well, there are two things: the boiler-plate code (maybe not such
a big problem in OCaml, as you point out), and the fact that if the
constraints are always checked by the same piece of code, error message
presented to the end-user will be uniform.


Xavier Clerc
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000115.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
	<LI>Next message: <A HREF="000119.html">[wg-camlp4] Against the use of syntactically-valid OCaml code for syntax extension purposes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#117">[ date ]</a>
              <a href="thread.html#117">[ thread ]</a>
              <a href="subject.html#117">[ subject ]</a>
              <a href="author.html#117">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
