<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] My uses of syntax extension
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20My%20uses%20of%20syntax%20extension&In-Reply-To=%3CCANcqPu6nAf79hXpuDZpH6ePsbDh_zLm6dBmZ--BZuCAj5nS9Bg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000059.html">
   <LINK REL="Next"  HREF="000068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] My uses of syntax extension</H1>
    <B>Hongbo Zhang</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20My%20uses%20of%20syntax%20extension&In-Reply-To=%3CCANcqPu6nAf79hXpuDZpH6ePsbDh_zLm6dBmZ--BZuCAj5nS9Bg%40mail.gmail.com%3E"
       TITLE="[wg-camlp4] My uses of syntax extension">hongboz at seas.upenn.edu
       </A><BR>
    <I>Mon Jan 28 21:23:19 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000059.html">[wg-camlp4] My uses of syntax extension
</A></li>
        <LI>Next message: <A HREF="000068.html">[wg-camlp4] My uses of syntax extension
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63">[ date ]</a>
              <a href="thread.html#63">[ thread ]</a>
              <a href="subject.html#63">[ subject ]</a>
              <a href="author.html#63">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>After you doing all those stuff,  I am worried that you may find you just
re-implemented a new P4.

*I agree that the complexity of extensible parser should be removed,
 there's a compromise here.*

The ppx* shares the same Intermediate Ast*(It could be improved with more
meaningful tags names)  with camlp4 but uses the built in parser.

The benefit lies in two aspects:
    1. You get the automatically meta filter, quasi-quotation is for free
    2. The camlp4 can works well with ppx, the change is incremental, most
existing library still works under both cases

Introducing an Intermediate Ast also gives you some freedom, the parsetree
does a lot of syntax desguaring(to name a few, range patterns, bigarray,
string access, array access), you may change
the representation of parsetree, but that introduces complexity in other
cases, so my suggestion is that we can separate extensible parser part from
camlp4, that's absolutely doable, then we share the same intermediate Ast

On Mon, Jan 28, 2013 at 4:01 PM, Leo White &lt;<A HREF="http://lists.ocaml.org/listinfo/wg-camlp4">lpw25 at cam.ac.uk</A>&gt; wrote:

&gt;<i> 3 parsers actually.
</I>&gt;&gt;<i> The original parser, the parser to patt, the parser to expr.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The original parser isn't necessary for the quotation, and of course the
</I>&gt;<i> other two parsers are only both needed if you want the quotation to work as
</I>&gt;<i> both a pattern and an expression.
</I>&gt;<i>
</I>&gt;<i> Anyway, my point is that you do not *need* to implement quotations by
</I>&gt;<i> parsing to a value and then converting to an AST fragment, in fact it is
</I>&gt;<i> often easier not to.
</I>&gt;<i>
</I>&gt;<i> That is not to say that some people might not want to implement their
</I>&gt;<i> quotations by parsing to a value and then converting to an AST fragment. In
</I>&gt;<i> fact, if they want to use an external parser (over which they have little
</I>&gt;<i> control) to parse their quotations then they may have to do it that way.
</I>&gt;<i>
</I>&gt;<i> For these cases I think there are three options:
</I>&gt;<i>
</I>&gt;<i> 1. They can implement conversion functions by hand.
</I>&gt;<i>
</I>&gt;<i> 2. They could use some kind of type-conv style extension to automatically
</I>&gt;<i> produce the conversion functions. I'm sure such an extension would be
</I>&gt;<i> welcomed by other extension authors.
</I>&gt;<i>
</I>&gt;<i> 3. If/when some kind of run-time type representation is added to the
</I>&gt;<i> language, it could be used to create a generic conversion function.
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
-- Regards, Hongbo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ocaml.org/pipermail/wg-camlp4/attachments/20130128/05f95e47/attachment.html">http://lists.ocaml.org/pipermail/wg-camlp4/attachments/20130128/05f95e47/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000059.html">[wg-camlp4] My uses of syntax extension
</A></li>
	<LI>Next message: <A HREF="000068.html">[wg-camlp4] My uses of syntax extension
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63">[ date ]</a>
              <a href="thread.html#63">[ thread ]</a>
              <a href="subject.html#63">[ subject ]</a>
              <a href="author.html#63">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
