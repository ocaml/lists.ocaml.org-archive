<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [wg-camlp4] On domain-specific foreign syntaxes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20On%20domain-specific%20foreign%20syntaxes&In-Reply-To=%3C510AA04A.1010906%40lexifi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000173.html">
   <LINK REL="Next"  HREF="000175.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[wg-camlp4] On domain-specific foreign syntaxes</H1>
    <B>Alain Frisch</B> 
    <A HREF="mailto:wg-camlp4%40lists.ocaml.org?Subject=Re%3A%20%5Bwg-camlp4%5D%20On%20domain-specific%20foreign%20syntaxes&In-Reply-To=%3C510AA04A.1010906%40lexifi.com%3E"
       TITLE="[wg-camlp4] On domain-specific foreign syntaxes">alain.frisch at lexifi.com
       </A><BR>
    <I>Thu Jan 31 16:48:10 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000173.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
        <LI>Next message: <A HREF="000175.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#174">[ date ]</a>
              <a href="thread.html#174">[ thread ]</a>
              <a href="subject.html#174">[ subject ]</a>
              <a href="author.html#174">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/31/2013 05:27 PM, Leo White wrote:
&gt;&gt;<i>  - Against the idea that the syntactic aspect of quotations has
</I>&gt;&gt;<i> anything to do with the notion of extension node to be expanded to AST
</I>&gt;&gt;<i> fragments by some code.  They are just independent notions:
</I>&gt;<i>
</I>&gt;<i> Just because quotations do not need to be part of an extension and
</I>&gt;<i> extensions do not need to use quotations does not change the fact that
</I>&gt;<i> they are frequently used together, so a convenient syntax would be
</I>&gt;<i> appreciated.
</I>&gt;<i>
</I>&gt;<i> I really don't understand your objection to including all of the following:
</I>&gt;<i>
</I>&gt;<i> * A quotation syntax: {x{ string }x}
</I>&gt;<i> * A template syntax: {:lid expr}
</I>&gt;<i> * A convenient quotation template syntax: {:lid x| |x}
</I>
Ok, so:
   {:lid x|..|x}
is strictly equivalent to:
   {:lid {x{...}x} }
?

Also also equivalent to:
   {:lid &quot;...&quot;}
as long as the string &quot;...&quot; does not contain any special character?

(i.e. the various forms are not distinguished in the Parsetree.)

I won't fight against this syntactic sugar, but I don't like it because:

   1. It adds even more syntax (to be supported by editors, in 
particular), even with a new character (I find the choice of |
as part of a delimiter cognitively dangerous since it is usually used as 
in separator in OCaml syntax).

   2. It creates confusion by conflating two concepts (and I'm not sure 
they will be so commonly used together), and encourage a style of 
expanders based on concrete syntax which, IMO, should rather be discouraged.

&gt;<i> Just
</I>&gt;<i> because you don't like that use case doesn't make it not common.
</I>
It is not common at all: the system does not exist yet.  During the 
migration from camlp4 to ppx, it is not bad that people have to think 
twice before choosing a design which forces to combine &quot;expander + 
quotation&quot;.

It seems to me that the cases where concrete foreign syntax might be 
useful (copy/paste of large chunks of code) do not necessarily require a 
very compact syntax, and that for shorter &quot;expanders&quot; with a 
high-density of anti-quotations, avoiding concrete syntax is preferable.

But if there is enough demand and if it can help in the transition, I 
won't fight any more against the combined &quot;expander + quotation&quot; 
approach. (I will just cross my fingers so that the developers of tools 
I'll like to use don't force me to use concrete syntax + anti-quotations 
for no good reason.)

&gt;&gt;<i>    begin(:sedlex) match lexbuf with
</I>&gt;&gt;<i>    | ... -&gt; e1
</I>&gt;&gt;<i>    end
</I>&gt;<i>
</I>&gt;<i> I think that this was better as a template:
</I>&gt;<i>
</I>&gt;<i> {:sedlex  match lexbuf with
</I>&gt;<i>     | ... -&gt; e1
</I>&gt;<i> }
</I>
Ok, just a different syntax.


-- Alain
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000173.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
	<LI>Next message: <A HREF="000175.html">[wg-camlp4] On domain-specific foreign syntaxes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#174">[ date ]</a>
              <a href="thread.html#174">[ thread ]</a>
              <a href="subject.html#174">[ subject ]</a>
              <a href="author.html#174">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/wg-camlp4">More information about the wg-camlp4
mailing list</a><br>
</body></html>
