<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-infra] New Git repository in ocaml GitHub org
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20New%20Git%20repository%20in%20ocaml%20GitHub%20org&In-Reply-To=%3CCAPFanBFVxAAYsYRNxR3OVzw_O29okRaGeE_9TMH21FGdRB2RtQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000641.html">
   <LINK REL="Next"  HREF="000643.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-infra] New Git repository in ocaml GitHub org</H1>
    <B>Gabriel Scherer</B> 
    <A HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20New%20Git%20repository%20in%20ocaml%20GitHub%20org&In-Reply-To=%3CCAPFanBFVxAAYsYRNxR3OVzw_O29okRaGeE_9TMH21FGdRB2RtQ%40mail.gmail.com%3E"
       TITLE="[ocaml-infra] New Git repository in ocaml GitHub org">gabriel.scherer at gmail.com
       </A><BR>
    <I>Wed Jan 25 14:38:20 GMT 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000641.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
        <LI>Next message: <A HREF="000643.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#642">[ date ]</a>
              <a href="thread.html#642">[ thread ]</a>
              <a href="subject.html#642">[ subject ]</a>
              <a href="author.html#642">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The git sub-module is an optimization. The change that is being
discussed is to each changelog entry in a separate file, to reduce
Changes-related merge conflicts. David wrote a script to rebuild a
complete Changelog from an exploded representation (sections are
directories, entries are files).

Several developers have argued that keeping too many small files in
the repository could make it inconvenient to work with on some
OS/filesystem combinations (mostly Windows, I suppose). There can be
several hundred entries per release, so it is not an unreasonable
concern I think.
David's idea is to only keep the small files in the main repository
for the in-development versions, and at release time move them to a
separate repository, so that they are not pulled in by default.
Ideally we want each commit in the main repository to point to a
specific commit in the Changes-repository (the commit of the last
release-time move), so using a submodule makes more sense than a
separate branch -- with a separate branch there would be no link
between the versions in the two branches.

I agree that in general submodules can be a pain to use, but in this
specific case I think that this is not likely to be an issue: most
people would never need to pull the submodule or update it in any way,
it would only need to be manipulated at release time (pull, copy
files, commit, and that's it), which occurs infrequently.

On Wed, Jan 25, 2017 at 3:30 PM, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">anil at recoil.org</A>&gt; wrote:
&gt;<i> On 25 Jan 2017, at 14:22, Daniel B&#252;nzli &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">daniel.buenzli at erratique.ch</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wednesday, 25 January 2017 at 14:45, David Allsopp wrote:
</I>&gt;&gt;&gt;<i> It is desirable to keep the fragment files, but these add considerable
</I>&gt;&gt;&gt;<i> weight to the main repository (and OCaml sources tarball). I have proposed
</I>&gt;&gt;&gt;<i> in the solution using a Git submodule to store the archived entries.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Are you sure about this ? It seems to me that git should be able to handle this without too much problem and it should be easy enough not to include them in the release tarball. I personally had a terrible experience with git submodules (though that was a long time ago) and I wouldn't advise anyone to get into this mess.
</I>&gt;<i>
</I>&gt;<i> Git submodules are indeed surprisingly difficult to use reliably.
</I>&gt;<i> Would storing the fragments in an independent branch be workable?
</I>&gt;<i> Those objects would not add more weight to a checkout of OCaml
</I>&gt;<i> trunk, but still be accessible a checkout away.
</I>&gt;<i>
</I>&gt;<i> (Caveat: I haven't reviewed the rest of your proposal in detail, David,
</I>&gt;<i>  so apologies if this is well-trodden ground).
</I>&gt;<i>
</I>&gt;<i> Anil
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Infrastructure mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">Infrastructure at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">http://lists.ocaml.org/listinfo/infrastructure</A>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000641.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
	<LI>Next message: <A HREF="000643.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#642">[ date ]</a>
              <a href="thread.html#642">[ thread ]</a>
              <a href="subject.html#642">[ subject ]</a>
              <a href="author.html#642">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/infrastructure">More information about the Infrastructure
mailing list</a><br>
</body></html>
