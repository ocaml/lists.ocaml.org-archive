<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-infra] New Git repository in ocaml GitHub org
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20New%20Git%20repository%20in%20ocaml%20GitHub%20org&In-Reply-To=%3CE51C5B015DBD1348A1D85763337FB6D901358287D5%40Remus.metastack.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000643.html">
   <LINK REL="Next"  HREF="000644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-infra] New Git repository in ocaml GitHub org</H1>
    <B>David Allsopp</B> 
    <A HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20New%20Git%20repository%20in%20ocaml%20GitHub%20org&In-Reply-To=%3CE51C5B015DBD1348A1D85763337FB6D901358287D5%40Remus.metastack.local%3E"
       TITLE="[ocaml-infra] New Git repository in ocaml GitHub org">dra-news at metastack.com
       </A><BR>
    <I>Wed Jan 25 14:59:51 GMT 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="000643.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
        <LI>Next message: <A HREF="000644.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>See <A HREF="https://github.com/ocaml/ocaml/pull/1014#issuecomment-273739477">https://github.com/ocaml/ocaml/pull/1014#issuecomment-273739477</A> - also note that tools/processChanges.ml allows the database to be used to generate Markdown or HTML with fairly minimal new coding. The script for *generating* Changes is clearly on the critical path and will update with any future changes in ideas; the script for converting Changes back to fragments is not - it seems sensible to keep the original files, therefore.


David

&gt;<i> -----Original Message-----
</I>&gt;<i> From: Infrastructure [mailto:<A HREF="http://lists.ocaml.org/listinfo/infrastructure">infrastructure-bounces at lists.ocaml.org</A>] On
</I>&gt;<i> Behalf Of Yotam Barnoy
</I>&gt;<i> Sent: 25 January 2017 14:49
</I>&gt;<i> To: Gabriel Scherer &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">gabriel.scherer at gmail.com</A>&gt;
</I>&gt;<i> Cc: infrastructure &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">infrastructure at lists.ocaml.org</A>&gt;
</I>&gt;<i> Subject: Re: [ocaml-infra] New Git repository in ocaml GitHub org
</I>&gt;<i> 
</I>&gt;<i> Why not just delete the separate files with each release?
</I>&gt;<i> 
</I>&gt;<i> &gt; On Jan 25, 2017, at 9:39 AM, Gabriel Scherer &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">gabriel.scherer at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The git sub-module is an optimization. The change that is being
</I>&gt;<i> &gt; discussed is to each changelog entry in a separate file, to reduce
</I>&gt;<i> &gt; Changes-related merge conflicts. David wrote a script to rebuild a
</I>&gt;<i> &gt; complete Changelog from an exploded representation (sections are
</I>&gt;<i> &gt; directories, entries are files).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Several developers have argued that keeping too many small files in
</I>&gt;<i> &gt; the repository could make it inconvenient to work with on some
</I>&gt;<i> &gt; OS/filesystem combinations (mostly Windows, I suppose). There can be
</I>&gt;<i> &gt; several hundred entries per release, so it is not an unreasonable
</I>&gt;<i> &gt; concern I think.
</I>&gt;<i> &gt; David's idea is to only keep the small files in the main repository
</I>&gt;<i> &gt; for the in-development versions, and at release time move them to a
</I>&gt;<i> &gt; separate repository, so that they are not pulled in by default.
</I>&gt;<i> &gt; Ideally we want each commit in the main repository to point to a
</I>&gt;<i> &gt; specific commit in the Changes-repository (the commit of the last
</I>&gt;<i> &gt; release-time move), so using a submodule makes more sense than a
</I>&gt;<i> &gt; separate branch -- with a separate branch there would be no link
</I>&gt;<i> &gt; between the versions in the two branches.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I agree that in general submodules can be a pain to use, but in this
</I>&gt;<i> &gt; specific case I think that this is not likely to be an issue: most
</I>&gt;<i> &gt; people would never need to pull the submodule or update it in any way,
</I>&gt;<i> &gt; it would only need to be manipulated at release time (pull, copy
</I>&gt;<i> &gt; files, commit, and that's it), which occurs infrequently.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; On Wed, Jan 25, 2017 at 3:30 PM, Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">anil at recoil.org</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;&gt; On 25 Jan 2017, at 14:22, Daniel B&#252;nzli &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">daniel.buenzli at erratique.ch</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; On Wednesday, 25 January 2017 at 14:45, David Allsopp wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt; It is desirable to keep the fragment files, but these add
</I>&gt;<i> &gt;&gt;&gt;&gt; considerable weight to the main repository (and OCaml sources
</I>&gt;<i> &gt;&gt;&gt;&gt; tarball). I have proposed in the solution using a Git submodule to
</I>&gt;<i> store the archived entries.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Are you sure about this ? It seems to me that git should be able to
</I>&gt;<i> handle this without too much problem and it should be easy enough not to
</I>&gt;<i> include them in the release tarball. I personally had a terrible
</I>&gt;<i> experience with git submodules (though that was a long time ago) and I
</I>&gt;<i> wouldn't advise anyone to get into this mess.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Git submodules are indeed surprisingly difficult to use reliably.
</I>&gt;<i> &gt;&gt; Would storing the fragments in an independent branch be workable?
</I>&gt;<i> &gt;&gt; Those objects would not add more weight to a checkout of OCaml trunk,
</I>&gt;<i> &gt;&gt; but still be accessible a checkout away.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; (Caveat: I haven't reviewed the rest of your proposal in detail,
</I>&gt;<i> &gt;&gt; David, so apologies if this is well-trodden ground).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Anil
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Infrastructure mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ocaml.org/listinfo/infrastructure">Infrastructure at lists.ocaml.org</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.ocaml.org/listinfo/infrastructure">http://lists.ocaml.org/listinfo/infrastructure</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Infrastructure mailing list
</I>&gt;<i> &gt; <A HREF="http://lists.ocaml.org/listinfo/infrastructure">Infrastructure at lists.ocaml.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.ocaml.org/listinfo/infrastructure">http://lists.ocaml.org/listinfo/infrastructure</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Infrastructure mailing list
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">Infrastructure at lists.ocaml.org</A>
</I>&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">http://lists.ocaml.org/listinfo/infrastructure</A>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000643.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
	<LI>Next message: <A HREF="000644.html">[ocaml-infra] New Git repository in ocaml GitHub org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/infrastructure">More information about the Infrastructure
mailing list</a><br>
</body></html>
