<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-infra] Staging Build and Deployment of ocaml.org
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20Staging%20Build%20and%20Deployment%20of%20ocaml.org&In-Reply-To=%3CCAAWM5Twn3C%2Bwejz1wuSkDXqqkdusXeiVATB061uTrdzXAgYvpQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000435.html">
   <LINK REL="Next"  HREF="000444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-infra] Staging Build and Deployment of ocaml.org</H1>
    <B>David Sheets</B> 
    <A HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20Staging%20Build%20and%20Deployment%20of%20ocaml.org&In-Reply-To=%3CCAAWM5Twn3C%2Bwejz1wuSkDXqqkdusXeiVATB061uTrdzXAgYvpQ%40mail.gmail.com%3E"
       TITLE="[ocaml-infra] Staging Build and Deployment of ocaml.org">sheets at alum.mit.edu
       </A><BR>
    <I>Mon Mar 17 11:49:14 GMT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000435.html">[ocaml-infra] ocaml.org licensing
</A></li>
        <LI>Next message: <A HREF="000444.html">[ocaml-infra] Staging Build and Deployment of ocaml.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#443">[ date ]</a>
              <a href="thread.html#443">[ thread ]</a>
              <a href="subject.html#443">[ subject ]</a>
              <a href="author.html#443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Our present deployment workflow unnecessarily relies on a single build
environment running on the same (?) machine as the serving system.

ocaml.org is entirely static with a refresh on the order of minutes. I
propose we take advantage of this feature to move to a fully staged
build and deployment solution.

Specifically, I'd like to see:

1. Generated assets and build logs publicly accessible
2. Build environment specification (e.g. &quot;this stock Ubuntu image&quot;).
3. History

I'd like to suggest the following design from back-to-front:

1. Travis CI builds ocaml.org on commit hook to source repository
2. Travis CI pushes successful builds to static asset repository
3. Server checks out static asset repository on commit hook

If we would like to stage development and production, the following may satisfy:

1. Travis CI builds ocaml.org on commit hook to source repository
2. Travis CI pushes successful builds to static assets
3. beta.ocaml.org checks out static asset repository on commit hook to
static assets
4. ocaml.org checks out static asset repository on special commit hook
to static assets

Where &quot;special commit hook&quot; is a commit by a non-Travis user which
contains as its commit message a human/machine-readable description of
the deployment. These commits can themselves be consumed to generate a
site change log which is exposed on the site.

This approach should help us achieve faster iteration on the
mechanical components of the site, ease build debugging, ease build
reproduction, and offer a pre-built image of the site's assets.

What do you think?

David
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000435.html">[ocaml-infra] ocaml.org licensing
</A></li>
	<LI>Next message: <A HREF="000444.html">[ocaml-infra] Staging Build and Deployment of ocaml.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#443">[ date ]</a>
              <a href="thread.html#443">[ thread ]</a>
              <a href="subject.html#443">[ subject ]</a>
              <a href="author.html#443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/infrastructure">More information about the Infrastructure
mailing list</a><br>
</body></html>
