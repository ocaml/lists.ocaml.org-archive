<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ocaml-infra] Github down again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20Github%20down%20again&In-Reply-To=%3CCAOCAUGMr04ESPWcizbQuYmy9%3DT-VSDf7vCipjgEoqju6%3Da_5YA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000335.html">
   <LINK REL="Next"  HREF="000337.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ocaml-infra] Github down again</H1>
    <B>Sylvain Le Gall</B> 
    <A HREF="mailto:infrastructure%40lists.ocaml.org?Subject=Re%3A%20%5Bocaml-infra%5D%20Github%20down%20again&In-Reply-To=%3CCAOCAUGMr04ESPWcizbQuYmy9%3DT-VSDf7vCipjgEoqju6%3Da_5YA%40mail.gmail.com%3E"
       TITLE="[ocaml-infra] Github down again">sylvain+ocaml at le-gall.net
       </A><BR>
    <I>Fri Nov  1 13:01:26 GMT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000335.html">[ocaml-infra] Github down again
</A></li>
        <LI>Next message: <A HREF="000337.html">[ocaml-infra] Migration plan and bug hunt for ocaml.org -	http://preview.ocaml.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2013/11/1 Amir Chaudhry &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">amc79 at cam.ac.uk</A>&gt;:
&gt;<i> I'm still confused by this. What Anil and Gabriel pointed out makes sense to me (having a mirror of certain repos) and was discussed in the past. You seem to be talking about a method for managing a group of users but I don't actually see why that's necessary here.
</I>&gt;<i>
</I>
I realize that I am not clear.

The goal is to create a mirror (full ACK here). I have no question
concerning this point.

I am only proposing to host it as a project on the forge. That was the
reason of my question about &quot;what is git.ocaml.org ? (a VM or a
physical host or whatever)&quot;. I am not discussing the use or the way to
do it, but just would like to see it the data mirrored project hosted
on the forge.

The reason I am pushing for that: do you remember COCAN ? We should
avoid hosting important services on server that have no admin backup.
If you want something to last long, you should be able to easily share
it with other people. If we spread our ocaml.org admin over multiple
host, that just increase the cost of maintainance.

Cheers
Sylvain

&gt;<i> Best wishes,
</I>&gt;<i> Amir
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> sent via mobile
</I>&gt;<i>
</I>&gt;&gt;<i> On 1 Nov 2013, at 11:17, Sylvain Le Gall &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">sylvain+ocaml at le-gall.net</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Just realize that maybe I was not clear on a very simple thing:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The point is not to use the Forge VCS repositories infrastructure,
</I>&gt;&gt;<i> this is just to create a group of user and use the fact that you can
</I>&gt;&gt;<i> have cronjob with scripts running. You can just consider this as
</I>&gt;&gt;<i> &quot;hosting&quot; the group and have a place to create, run script and have
</I>&gt;&gt;<i> the result visible (usually on YOURPROJECT.forge.ocamlcore.org but
</I>&gt;&gt;<i> injecting an alias from git.ocaml.org to
</I>&gt;&gt;<i> YOURPROJECT.forge.ocamlcore.org is a 2 minutes work).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is it more clear ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Am I still missing something ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers
</I>&gt;&gt;<i> Sylvain
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2013/11/1 Sylvain Le Gall &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">sylvain+ocaml at le-gall.net</A>&gt;:
</I>&gt;&gt;&gt;<i> ---------- Forwarded message ----------
</I>&gt;&gt;&gt;<i> From: Sylvain Le Gall &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">sylvain+ocaml at le-gall.net</A>&gt;
</I>&gt;&gt;&gt;<i> Date: 2013/11/1
</I>&gt;&gt;&gt;<i> Subject: Re: [ocaml-infra] Github down again
</I>&gt;&gt;&gt;<i> To: Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">anil at recoil.org</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2013/11/1 Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">anil at recoil.org</A>&gt;:
</I>&gt;&gt;&gt;&gt;<i> I'm a little confused -- the intention behind git.ocaml.org is to act
</I>&gt;&gt;&gt;&gt;<i> as a mirror for major OCaml repositories, so putting a dependency on Forge
</I>&gt;&gt;&gt;&gt;<i> doesn't seem right.  What's the goal of the scripts you are talking about
</I>&gt;&gt;&gt;&gt;<i> below?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I'm thinking that we simply specify a list of Git URLs somewhere, and
</I>&gt;&gt;&gt;&gt;<i> they are picked up by git.ocaml.org to publish as a mirror.  That could
</I>&gt;&gt;&gt;&gt;<i> include a list exported by the Forge of its projects (that use Git), as
</I>&gt;&gt;&gt;&gt;<i> well as others on GitHub.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Having a project on the forge will provide:
</I>&gt;&gt;&gt;<i> - a public list of member of the project (i.e. you know who to ping
</I>&gt;&gt;&gt;<i> when there is a problem)
</I>&gt;&gt;&gt;<i> - maintenance of the system hosting your project will be taken care by
</I>&gt;&gt;&gt;<i> someone else (including e.g. backup, system upgrade)
</I>&gt;&gt;&gt;<i> - adding a member to the project will be easier (vs if you are hosting
</I>&gt;&gt;&gt;<i> this on your host, you will have to create a user + add his ssh key)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What is precisely git.ocaml.org ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If this is a VM or a physical host, I think you will slightly increase
</I>&gt;&gt;&gt;<i> the TCO of *.ocaml.org. If this is a virtual host inside OCamlLab, you
</I>&gt;&gt;&gt;<i> may have concern to add external contributor. The benefit to have it
</I>&gt;&gt;&gt;<i> separate is that if github and the OCaml forge will be down at the
</I>&gt;&gt;&gt;<i> same time, you still have no problem.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But all in all, the benefit of hosting it on the forge is not huge,
</I>&gt;&gt;&gt;<i> this may just be convenient for allowing other people to take care of
</I>&gt;&gt;&gt;<i> it and getting rid of some system maintainance. So I am not pushing
</I>&gt;&gt;&gt;<i> hard on this, I just think it is a good idea.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The scheme to synchronize will be the same in both case (cronjob +
</I>&gt;&gt;&gt;<i> list of url + a shell script).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Does it make sense to you ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> -anil
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On 31 Oct 2013, at 13:21, Sylvain Le Gall &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">sylvain+ocaml at le-gall.net</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I think the best place to have this kind of mirror is in Forge (but I
</I>&gt;&gt;&gt;&gt;&gt;<i> think you agree if I understand you correctly).
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Proposal:
</I>&gt;&gt;&gt;&gt;&gt;<i> - create a forge.ocamlcore.org project called &quot;github-mirror&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> - have a main git repository (in github or in the forge) that contains
</I>&gt;&gt;&gt;&gt;&gt;<i> a file &quot;github-url-to-mirror&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> In a cronjob on ssh.ocamlcore.org:
</I>&gt;&gt;&gt;&gt;&gt;<i> - checkout the main git repository
</I>&gt;&gt;&gt;&gt;&gt;<i> - loop over the entries of github-url-to-mirror and check them out in
</I>&gt;&gt;&gt;&gt;&gt;<i> /home/group/github-mirror/gitroot/
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> For the nice GitLab interface, contact me so that we can install the
</I>&gt;&gt;&gt;&gt;&gt;<i> required DB and ruby packages. However you'll probably have to install
</I>&gt;&gt;&gt;&gt;&gt;<i> gitlab by yourself, except if you know where I can find a debian
</I>&gt;&gt;&gt;&gt;&gt;<i> package for it, and point it to /home/group/github-mirror/gitroot...
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> User signup -&gt; agree that it should be disabled.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Does it make sense ?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Regards
</I>&gt;&gt;&gt;&gt;&gt;<i> Sylvain
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> 2013/10/31 Anil Madhavapeddy &lt;<A HREF="http://lists.ocaml.org/listinfo/infrastructure">anil at recoil.org</A>&gt;:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> I took a quick shot a trying out GitLab to act as a mirror.  This is *very* experimental, but here's what it looks like on git.ocaml.org:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://git.ocaml.org/ocaml-compiler/ocaml/commits/master">http://git.ocaml.org/ocaml-compiler/ocaml/commits/master</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> (I didn't set this up on a staging domain due to the pain of reconfiguration).
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> There's only one project on there at a moment: a static checkout of the OCaml Git mirror, but I can script up a proper GitHub/Forge mirror quite easily from this.  I'm inclined to disable user signups for this and make it a pure mirror, though.
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> -anil
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> Infrastructure mailing list
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">Infrastructure at lists.ocaml.org</A>
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">http://lists.ocaml.org/listinfo/infrastructure</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Infrastructure mailing list
</I>&gt;&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">Infrastructure at lists.ocaml.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.ocaml.org/listinfo/infrastructure">http://lists.ocaml.org/listinfo/infrastructure</A>
</I></PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000335.html">[ocaml-infra] Github down again
</A></li>
	<LI>Next message: <A HREF="000337.html">[ocaml-infra] Migration plan and bug hunt for ocaml.org -	http://preview.ocaml.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ocaml.org/listinfo/infrastructure">More information about the Infrastructure
mailing list</a><br>
</body></html>
