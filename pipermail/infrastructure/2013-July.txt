From anil at recoil.org  Tue Jul  2 10:28:35 2013
From: anil at recoil.org (Anil Madhavapeddy)
Date: Tue, 2 Jul 2013 10:28:35 +0100
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1 (#863)
References: <OCamlPro/opam-repository/pull/863@github.com>
Message-ID: <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>

Regarding Markdown parsing, has anyone investigated the various pure OCaml parsing options?  The COW Markdown parser really needs to be cleaned up, and I'd rather use an external package (but I haven't looked at this one in detail, so if anyone has time that'd be great).   Thomas just merged it into OPAM.

-anil

Begin forwarded message:

> From: jpdeplaix <notifications at github.com>
> Subject: [opam-repository] Add ocaml-markdown 0.1.1 (#863)
> Date: 1 July 2013 13:56:34 BST
> To: OCamlPro/opam-repository <opam-repository at noreply.github.com>
> Reply-To: OCamlPro/opam-repository <reply+i-16212757-6176e1649574862fa6867a84567ba41b7d4e7ee8-53164 at reply.github.com>
> 
> You can merge this Pull Request by running
> 
>   git pull https://github.com/jpdeplaix/opam-repository master
> Or view, comment on, or merge it at:
> 
>   https://github.com/OCamlPro/opam-repository/pull/863
> 
> Commit Summary
> 
> Adding ocaml-markdown 0.1.1
> File Changes
> 
> A packages/ocaml-markdown.0.1.1/descr (1)
> A packages/ocaml-markdown.0.1.1/opam (17)
> A packages/ocaml-markdown.0.1.1/url (2)
> Patch Links:
> 
> https://github.com/OCamlPro/opam-repository/pull/863.patch
> https://github.com/OCamlPro/opam-repository/pull/863.diff

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130702/c20a59ab/attachment.html>

From gabriel.scherer at gmail.com  Tue Jul  2 10:49:29 2013
From: gabriel.scherer at gmail.com (Gabriel Scherer)
Date: Tue, 2 Jul 2013 11:49:29 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
Message-ID: <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>

Not quite in-topic because it is about parsers for mardown-like
languages, rather than markdown itself (if "Markdown" really exists as
a well-defined language with several compatible implementations), but
the following project are possibly interesting:

- mlorg is a parser for Emacs' org-mode syntax (
http://kiwi.iuwt.fr/~asmanur/projets/mlorg/docs/SYNTAX.html ); it is
based on a rather flexible parser engine based on layered automatons,
that is currently special-cased to org-mode but should be easy to
retarget to other markup languages such as markdown (
http://gitorious.org/mlorg/mlorg/trees/master/syntax/common )
- lambdoc ( http://lambdoc.forge.ocamlcore.org/ ) is a pandoc-inspired
library that supports several syntaxes, among which a markup/wiki
syntax http://lambdoc.forge.ocamlcore.org/lambwiki-manual/index.html ;
the parsing engines use more classical tools: ulex for lexing, some
magical context-dependent stuff, then menhir for parsing

Both are regularly maintained (but the mlorg website is in a sorry
state) and could be credible basis for cooperation with Cow's need
(basically you need a library with a markdown parser that returns a
friendly AST to implement your camlp4 quotations, and you need their
parser to handle antiquotations) while reinforcing the upstream
project. That said, a strong markdown-only library would also be a
positive asset in the OCaml ecosystem, and probably wouldn't need that
generality.

On Tue, Jul 2, 2013 at 11:28 AM, Anil Madhavapeddy <anil at recoil.org> wrote:
> Regarding Markdown parsing, has anyone investigated the various pure OCaml
> parsing options?  The COW Markdown parser really needs to be cleaned up, and
> I'd rather use an external package (but I haven't looked at this one in
> detail, so if anyone has time that'd be great).   Thomas just merged it into
> OPAM.
>
> -anil
>
> Begin forwarded message:
>
> From: jpdeplaix <notifications at github.com>
> Subject: [opam-repository] Add ocaml-markdown 0.1.1 (#863)
> Date: 1 July 2013 13:56:34 BST
> To: OCamlPro/opam-repository <opam-repository at noreply.github.com>
> Reply-To: OCamlPro/opam-repository
> <reply+i-16212757-6176e1649574862fa6867a84567ba41b7d4e7ee8-53164 at reply.github.com>
>
> ________________________________
>
> You can merge this Pull Request by running
>
>   git pull https://github.com/jpdeplaix/opam-repository master
>
> Or view, comment on, or merge it at:
>
>   https://github.com/OCamlPro/opam-repository/pull/863
>
> Commit Summary
>
> Adding ocaml-markdown 0.1.1
>
> File Changes
>
> A packages/ocaml-markdown.0.1.1/descr (1)
> A packages/ocaml-markdown.0.1.1/opam (17)
> A packages/ocaml-markdown.0.1.1/url (2)
>
> Patch Links:
>
> https://github.com/OCamlPro/opam-repository/pull/863.patch
> https://github.com/OCamlPro/opam-repository/pull/863.diff
>
>
>
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
>

From sylvain+ocaml at le-gall.net  Tue Jul  2 12:44:34 2013
From: sylvain+ocaml at le-gall.net (Sylvain Le Gall)
Date: Tue, 2 Jul 2013 13:44:34 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
Message-ID: <CAOCAUGM5GqESzSCZ0y_JcQn_1rw=uu3vzeG9DvbHizz+N=DjLw@mail.gmail.com>

I am the upstream and that and it is the one working for
oasis.ocamlcore.org... I had a look at mlorg at one point but I
decided to keep this one (ocaml-markdown) because it focus on only
markdown to HTML and it made things more simple overall.

2013/7/2 Anil Madhavapeddy <anil at recoil.org>:
> Regarding Markdown parsing, has anyone investigated the various pure OCaml
> parsing options?  The COW Markdown parser really needs to be cleaned up, and
> I'd rather use an external package (but I haven't looked at this one in
> detail, so if anyone has time that'd be great).   Thomas just merged it into
> OPAM.
>
> -anil
>
> Begin forwarded message:
>
> From: jpdeplaix <notifications at github.com>
> Subject: [opam-repository] Add ocaml-markdown 0.1.1 (#863)
> Date: 1 July 2013 13:56:34 BST
> To: OCamlPro/opam-repository <opam-repository at noreply.github.com>
> Reply-To: OCamlPro/opam-repository
> <reply+i-16212757-6176e1649574862fa6867a84567ba41b7d4e7ee8-53164 at reply.github.com>
>
> ________________________________
>
> You can merge this Pull Request by running
>
>   git pull https://github.com/jpdeplaix/opam-repository master
>
> Or view, comment on, or merge it at:
>
>   https://github.com/OCamlPro/opam-repository/pull/863
>
> Commit Summary
>
> Adding ocaml-markdown 0.1.1
>
> File Changes
>
> A packages/ocaml-markdown.0.1.1/descr (1)
> A packages/ocaml-markdown.0.1.1/opam (17)
> A packages/ocaml-markdown.0.1.1/url (2)
>
> Patch Links:
>
> https://github.com/OCamlPro/opam-repository/pull/863.patch
> https://github.com/OCamlPro/opam-repository/pull/863.diff
>
>
>
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
>

From darioteixeira at yahoo.com  Tue Jul  2 14:18:23 2013
From: darioteixeira at yahoo.com (Dario Teixeira)
Date: Tue, 2 Jul 2013 06:18:23 -0700 (PDT)
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
Message-ID: <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>

Hi,

> Not quite in-topic because it is about parsers for mardown-like

> languages, rather than markdown itself (if "Markdown" really exists as
> a well-defined language with several compatible implementations), but
> the following project are possibly interesting:

Author of Lambdoc here.? Indeed, I would love for Lambdoc to support
Markdown as well.? But as Gabriel pointed out, there is no such thing
as *the* Markdown.? Still, even if Markdown standardisation efforts
fail (and I haven't heard any news on that front for a while), it is my
intention to eventually just adopt the flavour used by StackOverflow or
Github.


> - lambdoc ( http://lambdoc.forge.ocamlcore.org/ ) is a pandoc-inspired
> library that supports several syntaxes, among which a markup/wiki
> syntax http://lambdoc.forge.ocamlcore.org/lambwiki-manual/index.html ;
> the parsing engines use more classical tools: ulex for lexing, some
> magical context-dependent stuff, then menhir for parsing

Lambwiki is a lightweight markup that fills the same niche as Markdown.
However, syntax-wise it is actually inspired by WikiCreole, whose syntax
I find to be cleaner and more intuitive than Markdown's.

As for the tooling, both Lambwiki and Lambtex do indeed rely on a
hand-made intermediate layer between ulex and menhir to handle the
context-dependent stuff.? It's not pretty, and I welcome suggestions
on how to handle the whole parsing chain in a cleaner way.

As for the Lambdoc library as a whole, it's feature-wise stable, and
I'm not aware of any pressing bugs.? There has not yet been an official
1.0 release because a) I can't yet commit to make no further tweaks
to the AST, and b) the API documentation cannot be readily generated
due an issue with OCamldoc: http://caml.inria.fr/mantis/view.php?id=4209


> Both are regularly maintained (but the mlorg website is in a sorry
> state) and could be credible basis for cooperation with Cow's need
> (basically you need a library with a markdown parser that returns a
> friendly AST to implement your camlp4 quotations, and you need their
> parser to handle antiquotations) while reinforcing the upstream
> project. That said, a strong markdown-only library would also be a
> positive asset in the OCaml ecosystem, and probably wouldn't need that
> generality.

Mauricio Fernandez wrote a basic Markdown parser which might fit
your needs well.? Have you looked at it yet?

Best regards,
Dario Teixeira

From thomas at gazagnaire.org  Tue Jul  2 14:22:38 2013
From: thomas at gazagnaire.org (Thomas Gazagnaire)
Date: Tue, 2 Jul 2013 15:22:38 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
Message-ID: <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>

> Mauricio Fernandez wrote a basic Markdown parser which might fit
> your needs well.  Have you looked at it yet?

Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to (almost) read Github Markdown as well).

Thomas

[1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
[2] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml

From sebastien.mondet at gmail.com  Tue Jul  2 15:40:11 2013
From: sebastien.mondet at gmail.com (Sebastien Mondet)
Date: Tue, 2 Jul 2013 10:40:11 -0400
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
Message-ID: <CALScVYnUOGPr8uqxJtP65ORxkrGvX3fGmZH+CS6Cbob-_hxZCw@mail.gmail.com>

Sylvain's ocaml-markdown is also based on Mauricio's benchmark:
http://forge.ocamlcore.org/scm/browser.php?group_id=303&repo_name=ocaml-markdown

All those implementations seem very far from github, pandoc or even
http://daringfireball.net/projects/markdown/syntax (they don't handle lists
properly, interpret *asterisks* as *bold *instead of *emph*, blockquotes?
etc. or am I missing something?).

I had noticed that Thomas did some work, a while ago, on reimplementing
Cow's module, with ocaml{lex,yacc}:
https://github.com/samoht/ocaml-cow/commit/76c057a66f07ea7e026e5ceb3f71b81a47f78af0
It that idea abandoned?


Adding to Gabriel's list:

- wiki-creole: https://github.com/besport/ocaml-wikicreole
- there is also a parser for a wiki-creole-like language in OCsimore
http://ocsigen.org/ocsimore/


Right now, I unix.system 'pandoc' on server-side, and use Marked (
https://github.com/chjj/marked) with js_of_ocaml's Js.Unsafe module on
client side.
It would be indeed really cool to have a pure OCaml implementation!

BTW, Marked.js comes with an extensive test suite that they claim to be
derived from the "official one" (the perl implementation), that can be
useful.


Cheers
Seb


--
Tonight! Lucrative Jacket, 9pm Gig at The Living Room, NYC! Yes, early and
free! http://www.youtube.com/lucrativejacket





On Tue, Jul 2, 2013 at 9:22 AM, Thomas Gazagnaire <thomas at gazagnaire.org>wrote:

> > Mauricio Fernandez wrote a basic Markdown parser which might fit
> > your needs well.  Have you looked at it yet?
>
> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to (almost)
> read Github Markdown as well).
>
> Thomas
>
> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
> [2] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130702/b66cd988/attachment.html>

From anil at recoil.org  Tue Jul  2 15:46:37 2013
From: anil at recoil.org (Anil Madhavapeddy)
Date: Tue, 2 Jul 2013 15:46:37 +0100
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CALScVYnUOGPr8uqxJtP65ORxkrGvX3fGmZH+CS6Cbob-_hxZCw@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CALScVYnUOGPr8uqxJtP65ORxkrGvX3fGmZH+CS6Cbob-_hxZCw@mail.gmail.com>
Message-ID: <AA6BE94A-3AA7-44FE-9626-3ED1314CA986@recoil.org>

Aha, the Marked.js testsuite looks extremely useful!

Thanks for all these links -- I'd really like to see a single pure-OCaml Markdown library that can handle realistic (i.e. Github flavoured) Markdown, so these are all very useful to know about.

cheers,
Anil

On 2 Jul 2013, at 15:40, Sebastien Mondet <sebastien.mondet at gmail.com> wrote:

> 
> Sylvain's ocaml-markdown is also based on Mauricio's benchmark: http://forge.ocamlcore.org/scm/browser.php?group_id=303&repo_name=ocaml-markdown
> 
> All those implementations seem very far from github, pandoc or even http://daringfireball.net/projects/markdown/syntax (they don't handle lists properly, interpret *asterisks* as bold instead of emph, blockquotes? etc. or am I missing something?). 
> 
> I had noticed that Thomas did some work, a while ago, on reimplementing Cow's module, with ocaml{lex,yacc}:
> https://github.com/samoht/ocaml-cow/commit/76c057a66f07ea7e026e5ceb3f71b81a47f78af0
> It that idea abandoned?
> 
> 
> Adding to Gabriel's list:
> 
> - wiki-creole: https://github.com/besport/ocaml-wikicreole 
> - there is also a parser for a wiki-creole-like language in OCsimore http://ocsigen.org/ocsimore/
> 
> 
> Right now, I unix.system 'pandoc' on server-side, and use Marked (https://github.com/chjj/marked) with js_of_ocaml's Js.Unsafe module on client side.
> It would be indeed really cool to have a pure OCaml implementation!
> 
> BTW, Marked.js comes with an extensive test suite that they claim to be derived from the "official one" (the perl implementation), that can be useful.
> 
> 
> Cheers
> Seb
> 
> 
> --
> Tonight! Lucrative Jacket, 9pm Gig at The Living Room, NYC! Yes, early and free! http://www.youtube.com/lucrativejacket
> 
> 
> 
> 
> 
> On Tue, Jul 2, 2013 at 9:22 AM, Thomas Gazagnaire <thomas at gazagnaire.org> wrote:
> > Mauricio Fernandez wrote a basic Markdown parser which might fit
> > your needs well.  Have you looked at it yet?
> 
> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to (almost) read Github Markdown as well).
> 
> Thomas
> 
> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
> [2] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
> 
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130702/70c1899d/attachment-0001.html>

From thomas at gazagnaire.org  Tue Jul  2 15:57:16 2013
From: thomas at gazagnaire.org (Thomas Gazagnaire)
Date: Tue, 2 Jul 2013 16:57:16 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CALScVYnUOGPr8uqxJtP65ORxkrGvX3fGmZH+CS6Cbob-_hxZCw@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CALScVYnUOGPr8uqxJtP65ORxkrGvX3fGmZH+CS6Cbob-_hxZCw@mail.gmail.com>
Message-ID: <D2BF2925-2BFE-48BB-9E71-48BAC722ABFA@gazagnaire.org>

> I had noticed that Thomas did some work, a while ago, on reimplementing Cow's module, with ocaml{lex,yacc}:
> https://github.com/samoht/ocaml-cow/commit/76c057a66f07ea7e026e5ceb3f71b81a47f78af0
> It that idea abandoned?

Not really abandoned, but unfortunately I don't really have the time to work on a cleaner implementation of cow (which was what I've started to do with that bunches of commits). I have just started to gather some unit tests: https://github.com/samoht/ocaml-cow/tree/master/lib_tests/md).

 btw, I'll be very happy to switch/use any available pure OCaml implementation, though.

--
Thomas

> Adding to Gabriel's list:
> 
> - wiki-creole: https://github.com/besport/ocaml-wikicreole 
> - there is also a parser for a wiki-creole-like language in OCsimore http://ocsigen.org/ocsimore/
> 
> 
> Right now, I unix.system 'pandoc' on server-side, and use Marked (https://github.com/chjj/marked) with js_of_ocaml's Js.Unsafe module on client side.
> It would be indeed really cool to have a pure OCaml implementation!
> 
> BTW, Marked.js comes with an extensive test suite that they claim to be derived from the "official one" (the perl implementation), that can be useful.
> 
> 
> Cheers
> Seb
> 
> 
> --
> Tonight! Lucrative Jacket, 9pm Gig at The Living Room, NYC! Yes, early and free! http://www.youtube.com/lucrativejacket
> 
> 
> 
> 
> 
> On Tue, Jul 2, 2013 at 9:22 AM, Thomas Gazagnaire <thomas at gazagnaire.org> wrote:
> > Mauricio Fernandez wrote a basic Markdown parser which might fit
> > your needs well.  Have you looked at it yet?
> 
> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to (almost) read Github Markdown as well).
> 
> Thomas
> 
> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
> [2] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
> 


From anil at recoil.org  Tue Jul  2 16:01:51 2013
From: anil at recoil.org (Anil Madhavapeddy)
Date: Tue, 2 Jul 2013 16:01:51 +0100
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <D2BF2925-2BFE-48BB-9E71-48BAC722ABFA@gazagnaire.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CALScVYnUOGPr8uqxJtP65ORxkrGvX3fGmZH+CS6Cbob-_hxZCw@mail.gmail.com>
 <D2BF2925-2BFE-48BB-9E71-48BAC722ABFA@gazagnaire.org>
Message-ID: <EFAEAE83-FD50-4A3E-9785-6FDE95D5B42A@recoil.org>

On 2 Jul 2013, at 15:57, Thomas Gazagnaire <thomas at gazagnaire.org> wrote:

>> I had noticed that Thomas did some work, a while ago, on reimplementing Cow's module, with ocaml{lex,yacc}:
>> https://github.com/samoht/ocaml-cow/commit/76c057a66f07ea7e026e5ceb3f71b81a47f78af0
>> It that idea abandoned?
> 
> Not really abandoned, but unfortunately I don't really have the time to work on a cleaner implementation of cow (which was what I've started to do with that bunches of commits). I have just started to gather some unit tests: https://github.com/samoht/ocaml-cow/tree/master/lib_tests/md).
> 
> btw, I'll be very happy to switch/use any available pure OCaml implementation, though.

Likewise; I've been fixing up Cow syntax highlighting of OCaml code and using Christophe's toplevel scripts to automate Real World OCaml's website.  I'm still using Pandoc which I'd like to get rid of to have a simpler toolchain.

-anil


From sylvain+ocaml at le-gall.net  Tue Jul  2 16:16:16 2013
From: sylvain+ocaml at le-gall.net (Sylvain Le Gall)
Date: Tue, 2 Jul 2013 17:16:16 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
Message-ID: <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>

2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
>> Mauricio Fernandez wrote a basic Markdown parser which might fit
>> your needs well.  Have you looked at it yet?

ocaml-markdown is the one written by Mauricio Fernandez. See the copyright:
http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml

Well I have extracted it from its initial proejct, but we were in sync to do it.

>
> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to (almost) read Github Markdown as well).
>
> Thomas
>
> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
> [2] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure

From sylvain+ocaml at le-gall.net  Tue Jul  2 21:50:50 2013
From: sylvain+ocaml at le-gall.net (Sylvain Le Gall)
Date: Tue, 2 Jul 2013 22:50:50 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
Message-ID: <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>

As Christophe suggested, I have migrated the ocaml-markdown source
code to github:
https://github.com/ocaml/ocaml-markdown

The builder is here (but not working due to broken tyxml on godi):
http://deci.ovh.le-gall.net:8080/job/ocaml-markdown/

Trackers and file distributions remains on:
https://forge.ocamlcore.org/projects/ocaml-markdown/

Pull request are welcome if you want to add anything to make this
project even better suited to your needs.

Regards
Sylvain

2013/7/2 Sylvain Le Gall <sylvain+ocaml at le-gall.net>:
> 2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
>>> Mauricio Fernandez wrote a basic Markdown parser which might fit
>>> your needs well.  Have you looked at it yet?
>
> ocaml-markdown is the one written by Mauricio Fernandez. See the copyright:
> http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml
>
> Well I have extracted it from its initial proejct, but we were in sync to do it.
>
>>
>> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to (almost) read Github Markdown as well).
>>
>> Thomas
>>
>> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
>> [2] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
>> _______________________________________________
>> Infrastructure mailing list
>> Infrastructure at lists.ocaml.org
>> http://lists.ocaml.org/listinfo/infrastructure

From anil at recoil.org  Wed Jul  3 11:28:39 2013
From: anil at recoil.org (Anil Madhavapeddy)
Date: Wed, 3 Jul 2013 11:28:39 +0100
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
 <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
Message-ID: <95880575-B19B-473C-9438-6D271459F07E@recoil.org>

Hi Sylvain,

Thanks for uploading the code to Github; that's very useful.

Could you not put this in the ocaml organisation yet, and just keep
it in your personal repository?  We haven't really worked out which libraries
to put in the "official" repository -- some, like oasis, should be there without
a doubt, but the more work-in-progress efforts like markdown should probably
be given some more thought before being put there.

(anyone else's thoughts on how to organise the github.com/ocaml org are 
welcome, of course -- it's probably best to be cautious before putting stuff
up there though, since it's difficult to move repositories once they're 
established and linked to).

cheers,
Anil

On 2 Jul 2013, at 21:50, Sylvain Le Gall <sylvain+ocaml at le-gall.net> wrote:

> As Christophe suggested, I have migrated the ocaml-markdown source
> code to github:
> https://github.com/ocaml/ocaml-markdown
> 
> The builder is here (but not working due to broken tyxml on godi):
> http://deci.ovh.le-gall.net:8080/job/ocaml-markdown/
> 
> Trackers and file distributions remains on:
> https://forge.ocamlcore.org/projects/ocaml-markdown/
> 
> Pull request are welcome if you want to add anything to make this
> project even better suited to your needs.
> 
> Regards
> Sylvain
> 
> 2013/7/2 Sylvain Le Gall <sylvain+ocaml at le-gall.net>:
>> 2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
>>>> Mauricio Fernandez wrote a basic Markdown parser which might fit
>>>> your needs well.  Have you looked at it yet?
>> 
>> ocaml-markdown is the one written by Mauricio Fernandez. See the copyright:
>> http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml
>> 
>> Well I have extracted it from its initial proejct, but we were in sync to do it.
>> 
>>> 
>>> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to (almost) read Github Markdown as well).
>>> 
>>> Thomas
>>> 
>>> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
>>> [2] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
>>> _______________________________________________
>>> Infrastructure mailing list
>>> Infrastructure at lists.ocaml.org
>>> http://lists.ocaml.org/listinfo/infrastructure
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
> 


From agarwal1975 at gmail.com  Wed Jul  3 13:52:13 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Wed, 3 Jul 2013 08:52:13 -0400
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <95880575-B19B-473C-9438-6D271459F07E@recoil.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
 <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
 <95880575-B19B-473C-9438-6D271459F07E@recoil.org>
Message-ID: <CAMu2m2LcR0Qobzqx_k+dh5wNQYiF2N7uVn3jXzVPZbDBXq6W9w@mail.gmail.com>

> anyone else's thoughts on how to organise the github.com/ocaml org

I think the following criteria make sense:

* The project should be mature.

* The project should somehow relate to ocaml itself or the ocaml community
in general.

* There should be reasonable consensus that the above two criteria hold.


On Wed, Jul 3, 2013 at 6:28 AM, Anil Madhavapeddy <anil at recoil.org> wrote:

> Hi Sylvain,
>
> Thanks for uploading the code to Github; that's very useful.
>
> Could you not put this in the ocaml organisation yet, and just keep
> it in your personal repository?  We haven't really worked out which
> libraries
> to put in the "official" repository -- some, like oasis, should be there
> without
> a doubt, but the more work-in-progress efforts like markdown should
> probably
> be given some more thought before being put there.
>
> (anyone else's thoughts on how to organise the github.com/ocaml org are
> welcome, of course -- it's probably best to be cautious before putting
> stuff
> up there though, since it's difficult to move repositories once they're
> established and linked to).
>
> cheers,
> Anil
>
> On 2 Jul 2013, at 21:50, Sylvain Le Gall <sylvain+ocaml at le-gall.net>
> wrote:
>
> > As Christophe suggested, I have migrated the ocaml-markdown source
> > code to github:
> > https://github.com/ocaml/ocaml-markdown
> >
> > The builder is here (but not working due to broken tyxml on godi):
> > http://deci.ovh.le-gall.net:8080/job/ocaml-markdown/
> >
> > Trackers and file distributions remains on:
> > https://forge.ocamlcore.org/projects/ocaml-markdown/
> >
> > Pull request are welcome if you want to add anything to make this
> > project even better suited to your needs.
> >
> > Regards
> > Sylvain
> >
> > 2013/7/2 Sylvain Le Gall <sylvain+ocaml at le-gall.net>:
> >> 2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
> >>>> Mauricio Fernandez wrote a basic Markdown parser which might fit
> >>>> your needs well.  Have you looked at it yet?
> >>
> >> ocaml-markdown is the one written by Mauricio Fernandez. See the
> copyright:
> >>
> http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml
> >>
> >> Well I have extracted it from its initial proejct, but we were in sync
> to do it.
> >>
> >>>
> >>> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to
> (almost) read Github Markdown as well).
> >>>
> >>> Thomas
> >>>
> >>> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
> >>> [2]
> https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
> >>> _______________________________________________
> >>> Infrastructure mailing list
> >>> Infrastructure at lists.ocaml.org
> >>> http://lists.ocaml.org/listinfo/infrastructure
> > _______________________________________________
> > Infrastructure mailing list
> > Infrastructure at lists.ocaml.org
> > http://lists.ocaml.org/listinfo/infrastructure
> >
>
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130703/f503916f/attachment.html>

From sylvain+ocaml at le-gall.net  Wed Jul  3 16:44:53 2013
From: sylvain+ocaml at le-gall.net (Sylvain Le Gall)
Date: Wed, 3 Jul 2013 17:44:53 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CAMu2m2LcR0Qobzqx_k+dh5wNQYiF2N7uVn3jXzVPZbDBXq6W9w@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
 <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
 <95880575-B19B-473C-9438-6D271459F07E@recoil.org>
 <CAMu2m2LcR0Qobzqx_k+dh5wNQYiF2N7uVn3jXzVPZbDBXq6W9w@mail.gmail.com>
Message-ID: <CAOCAUGO=7QMZ_=z-ZLiLmthNHRzHqE=TdCBvV8rayBDLj=6RFQ@mail.gmail.com>

2013/7/3 Ashish Agarwal <agarwal1975 at gmail.com>:
>> anyone else's thoughts on how to organise the github.com/ocaml org
>
> I think the following criteria make sense:
>
> * The project should be mature.
>
> * The project should somehow relate to ocaml itself or the ocaml community
> in general.
>
> * There should be reasonable consensus that the above two criteria hold.
>

Maturity of a project is hard to define.

I think it is not a big deal to put there "non-toy" project. E.g. I
will not put here my sekred or dirvish-stats repositories, because I
don't expect anyone in the OCaml community to be interested in it.
However there could be a couple of libraries that will made sense to
be there -- even not mature one.

My criteria would be:
* Project where you expect more than one contributor from the OCaml
community (including original author)
* No strong ownership of the code (i.e. expect that someone wants to
rewrite half of the code)
* OSI license

Although if you start outside of ocaml/ what happens when you'll want
to push your personnal project to ocaml/. How can you say to github:
from now my project is a fork of these other newly created repository
?

But if Anil wants me to remove the library, I am fine.

>
> On Wed, Jul 3, 2013 at 6:28 AM, Anil Madhavapeddy <anil at recoil.org> wrote:
>>
>> Hi Sylvain,
>>
>> Thanks for uploading the code to Github; that's very useful.
>>
>> Could you not put this in the ocaml organisation yet, and just keep
>> it in your personal repository?  We haven't really worked out which
>> libraries
>> to put in the "official" repository -- some, like oasis, should be there
>> without
>> a doubt, but the more work-in-progress efforts like markdown should
>> probably
>> be given some more thought before being put there.
>>
>> (anyone else's thoughts on how to organise the github.com/ocaml org are
>> welcome, of course -- it's probably best to be cautious before putting
>> stuff
>> up there though, since it's difficult to move repositories once they're
>> established and linked to).
>>
>> cheers,
>> Anil
>>
>> On 2 Jul 2013, at 21:50, Sylvain Le Gall <sylvain+ocaml at le-gall.net>
>> wrote:
>>
>> > As Christophe suggested, I have migrated the ocaml-markdown source
>> > code to github:
>> > https://github.com/ocaml/ocaml-markdown
>> >
>> > The builder is here (but not working due to broken tyxml on godi):
>> > http://deci.ovh.le-gall.net:8080/job/ocaml-markdown/
>> >
>> > Trackers and file distributions remains on:
>> > https://forge.ocamlcore.org/projects/ocaml-markdown/
>> >
>> > Pull request are welcome if you want to add anything to make this
>> > project even better suited to your needs.
>> >
>> > Regards
>> > Sylvain
>> >
>> > 2013/7/2 Sylvain Le Gall <sylvain+ocaml at le-gall.net>:
>> >> 2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
>> >>>> Mauricio Fernandez wrote a basic Markdown parser which might fit
>> >>>> your needs well.  Have you looked at it yet?
>> >>
>> >> ocaml-markdown is the one written by Mauricio Fernandez. See the
>> >> copyright:
>> >>
>> >> http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml
>> >>
>> >> Well I have extracted it from its initial proejct, but we were in sync
>> >> to do it.
>> >>
>> >>>
>> >>> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to
>> >>> (almost) read Github Markdown as well).
>> >>>
>> >>> Thomas
>> >>>
>> >>> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
>> >>> [2]
>> >>> https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
>> >>> _______________________________________________
>> >>> Infrastructure mailing list
>> >>> Infrastructure at lists.ocaml.org
>> >>> http://lists.ocaml.org/listinfo/infrastructure
>> > _______________________________________________
>> > Infrastructure mailing list
>> > Infrastructure at lists.ocaml.org
>> > http://lists.ocaml.org/listinfo/infrastructure
>> >
>>
>> _______________________________________________
>> Infrastructure mailing list
>> Infrastructure at lists.ocaml.org
>> http://lists.ocaml.org/listinfo/infrastructure
>
>

From agarwal1975 at gmail.com  Wed Jul  3 16:56:09 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Wed, 3 Jul 2013 11:56:09 -0400
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CAOCAUGO=7QMZ_=z-ZLiLmthNHRzHqE=TdCBvV8rayBDLj=6RFQ@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
 <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
 <95880575-B19B-473C-9438-6D271459F07E@recoil.org>
 <CAMu2m2LcR0Qobzqx_k+dh5wNQYiF2N7uVn3jXzVPZbDBXq6W9w@mail.gmail.com>
 <CAOCAUGO=7QMZ_=z-ZLiLmthNHRzHqE=TdCBvV8rayBDLj=6RFQ@mail.gmail.com>
Message-ID: <CAMu2m2+pg_+uPNEo1-USdqgfGHuimat9y+vUQdv9ftLOJpRhOQ@mail.gmail.com>

On Wed, Jul 3, 2013 at 11:44 AM, Sylvain Le Gall
<sylvain+ocaml at le-gall.net>wrote:


> My criteria would be:
> * Project where you expect more than one contributor from the OCaml
> community (including original author)
> * No strong ownership of the code (i.e. expect that someone wants to
> rewrite half of the code)
> * OSI license
>

By these criteria, we could put biocaml, core, batteries, ocamlnet, and
lots more in there. I can see the benefits of this: github/ocaml becomes
the main place to find any OCaml related project. But is it what we want
for this account? Maybe that'll make it too cluttered. My thinking was the
account is for "semi-official ocaml stuff" rather than "anything related to
ocaml".
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130703/0d7d8978/attachment.html>

From anil at recoil.org  Wed Jul  3 17:18:01 2013
From: anil at recoil.org (Anil Madhavapeddy)
Date: Wed, 3 Jul 2013 17:18:01 +0100
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <CAOCAUGO=7QMZ_=z-ZLiLmthNHRzHqE=TdCBvV8rayBDLj=6RFQ@mail.gmail.com>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
 <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
 <95880575-B19B-473C-9438-6D271459F07E@recoil.org>
 <CAMu2m2LcR0Qobzqx_k+dh5wNQYiF2N7uVn3jXzVPZbDBXq6W9w@mail.gmail.com>
 <CAOCAUGO=7QMZ_=z-ZLiLmthNHRzHqE=TdCBvV8rayBDLj=6RFQ@mail.gmail.com>
Message-ID: <FFBFD1E2-92EE-4601-9FB7-220BB41F9343@recoil.org>

On 3 Jul 2013, at 16:44, Sylvain Le Gall <sylvain+ocaml at le-gall.net> wrote:

> 2013/7/3 Ashish Agarwal <agarwal1975 at gmail.com>:
>>> anyone else's thoughts on how to organise the github.com/ocaml org
>> 
>> I think the following criteria make sense:
>> 
>> * The project should be mature.
>> 
>> * The project should somehow relate to ocaml itself or the ocaml community
>> in general.
>> 
>> * There should be reasonable consensus that the above two criteria hold.
>> 
> 
> Maturity of a project is hard to define.
> 
> I think it is not a big deal to put there "non-toy" project. E.g. I
> will not put here my sekred or dirvish-stats repositories, because I
> don't expect anyone in the OCaml community to be interested in it.
> However there could be a couple of libraries that will made sense to
> be there -- even not mature one.

The problem with this particular one is that there are a number of Markdown
libraries, so this one clearly isn't "the one".  Unlike, say, ocaml-re,
which is generally what people pick as a regular expression library.

> My criteria would be:
> * Project where you expect more than one contributor from the OCaml
> community (including original author)
> * No strong ownership of the code (i.e. expect that someone wants to
> rewrite half of the code)
> * OSI license

This all sounds good.  One other criteria that is loosely enforced is that
we only put libraries up here that are used by ocaml.org infrastructure.
This includes ocaml-re, oasis and of course the website repos themselves.
There will eventually be a Markdown library here too, but we should give
it some time to figure out which one that is (Philippe is investigating
the options).

> Although if you start outside of ocaml/ what happens when you'll want
> to push your personnal project to ocaml/. How can you say to github:
> from now my project is a fork of these other newly created repository
> ?

That's a good question -- we just mail Github support to do the switch
at the moment.

> But if Anil wants me to remove the library, I am fine.

I'd prefer you remove it and move it to wherever you prefer rather than
me deleting other people's repositories! 

-anil


> 
>> 
>> On Wed, Jul 3, 2013 at 6:28 AM, Anil Madhavapeddy <anil at recoil.org> wrote:
>>> 
>>> Hi Sylvain,
>>> 
>>> Thanks for uploading the code to Github; that's very useful.
>>> 
>>> Could you not put this in the ocaml organisation yet, and just keep
>>> it in your personal repository?  We haven't really worked out which
>>> libraries
>>> to put in the "official" repository -- some, like oasis, should be there
>>> without
>>> a doubt, but the more work-in-progress efforts like markdown should
>>> probably
>>> be given some more thought before being put there.
>>> 
>>> (anyone else's thoughts on how to organise the github.com/ocaml org are
>>> welcome, of course -- it's probably best to be cautious before putting
>>> stuff
>>> up there though, since it's difficult to move repositories once they're
>>> established and linked to).
>>> 
>>> cheers,
>>> Anil
>>> 
>>> On 2 Jul 2013, at 21:50, Sylvain Le Gall <sylvain+ocaml at le-gall.net>
>>> wrote:
>>> 
>>>> As Christophe suggested, I have migrated the ocaml-markdown source
>>>> code to github:
>>>> https://github.com/ocaml/ocaml-markdown
>>>> 
>>>> The builder is here (but not working due to broken tyxml on godi):
>>>> http://deci.ovh.le-gall.net:8080/job/ocaml-markdown/
>>>> 
>>>> Trackers and file distributions remains on:
>>>> https://forge.ocamlcore.org/projects/ocaml-markdown/
>>>> 
>>>> Pull request are welcome if you want to add anything to make this
>>>> project even better suited to your needs.
>>>> 
>>>> Regards
>>>> Sylvain
>>>> 
>>>> 2013/7/2 Sylvain Le Gall <sylvain+ocaml at le-gall.net>:
>>>>> 2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
>>>>>>> Mauricio Fernandez wrote a basic Markdown parser which might fit
>>>>>>> your needs well.  Have you looked at it yet?
>>>>> 
>>>>> ocaml-markdown is the one written by Mauricio Fernandez. See the
>>>>> copyright:
>>>>> 
>>>>> http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml
>>>>> 
>>>>> Well I have extracted it from its initial proejct, but we were in sync
>>>>> to do it.
>>>>> 
>>>>>> 
>>>>>> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to
>>>>>> (almost) read Github Markdown as well).
>>>>>> 
>>>>>> Thomas
>>>>>> 
>>>>>> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
>>>>>> [2]
>>>>>> https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
>>>>>> _______________________________________________
>>>>>> Infrastructure mailing list
>>>>>> Infrastructure at lists.ocaml.org
>>>>>> http://lists.ocaml.org/listinfo/infrastructure
>>>> _______________________________________________
>>>> Infrastructure mailing list
>>>> Infrastructure at lists.ocaml.org
>>>> http://lists.ocaml.org/listinfo/infrastructure
>>>> 
>>> 
>>> _______________________________________________
>>> Infrastructure mailing list
>>> Infrastructure at lists.ocaml.org
>>> http://lists.ocaml.org/listinfo/infrastructure
>> 
>> 
> 


From amc79 at cam.ac.uk  Wed Jul  3 19:12:28 2013
From: amc79 at cam.ac.uk (Amir Chaudhry)
Date: Wed, 3 Jul 2013 19:12:28 +0100
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <FFBFD1E2-92EE-4601-9FB7-220BB41F9343@recoil.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
 <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
 <95880575-B19B-473C-9438-6D271459F07E@recoil.org>
 <CAMu2m2LcR0Qobzqx_k+dh5wNQYiF2N7uVn3jXzVPZbDBXq6W9w@mail.gmail.com>
 <CAOCAUGO=7QMZ_=z-ZLiLmthNHRzHqE=TdCBvV8rayBDLj=6RFQ@mail.gmail.com>
 <FFBFD1E2-92EE-4601-9FB7-220BB41F9343@recoil.org>
Message-ID: <0BC89379-8EAF-464F-A7F4-7C2641CAE4FF@cam.ac.uk>

There are also practical points that haven't been raised yet.  

At the moment there are only 4 people who can create new repos and payment for the ocaml account is running though my credit card (hence, I'm one of those 4 people - it's ultimately being covered by OCaml Labs).  I think it's unwise to add a large number of 'owners' to this account and I hope the reasons are self-evident.  Therefore, I'd say that the existing 4 people are in a rather privileged position and should be disciplined about what repos they create.

I agree with Ashish's comment that the github/ocaml organisation should only be for "semi-official ocaml stuff".  Discovery of new libs should happen through OPAM so I'd encourage authors to make releases early and often there (and link back to their homepages).  Even if someone else wanted to rewrite half the code of something, it would still involve negotiation between the maintainer and submitter (being under github/ocaml makes almost no practical difference here).  

Given the above, I'd be even more stringent with the criteria and turn it around.  I would only make repos under github/ocaml if it *didn't* make sense to do (or continue) anywhere else.

my 2cents,
Amir




On 3 Jul 2013, at 17:18, Anil Madhavapeddy <anil at recoil.org> wrote:

> On 3 Jul 2013, at 16:44, Sylvain Le Gall <sylvain+ocaml at le-gall.net> wrote:
> 
>> 2013/7/3 Ashish Agarwal <agarwal1975 at gmail.com>:
>>>> anyone else's thoughts on how to organise the github.com/ocaml org
>>> 
>>> I think the following criteria make sense:
>>> 
>>> * The project should be mature.
>>> 
>>> * The project should somehow relate to ocaml itself or the ocaml community
>>> in general.
>>> 
>>> * There should be reasonable consensus that the above two criteria hold.
>>> 
>> 
>> Maturity of a project is hard to define.
>> 
>> I think it is not a big deal to put there "non-toy" project. E.g. I
>> will not put here my sekred or dirvish-stats repositories, because I
>> don't expect anyone in the OCaml community to be interested in it.
>> However there could be a couple of libraries that will made sense to
>> be there -- even not mature one.
> 
> The problem with this particular one is that there are a number of Markdown
> libraries, so this one clearly isn't "the one".  Unlike, say, ocaml-re,
> which is generally what people pick as a regular expression library.
> 
>> My criteria would be:
>> * Project where you expect more than one contributor from the OCaml
>> community (including original author)
>> * No strong ownership of the code (i.e. expect that someone wants to
>> rewrite half of the code)
>> * OSI license
> 
> This all sounds good.  One other criteria that is loosely enforced is that
> we only put libraries up here that are used by ocaml.org infrastructure.
> This includes ocaml-re, oasis and of course the website repos themselves.
> There will eventually be a Markdown library here too, but we should give
> it some time to figure out which one that is (Philippe is investigating
> the options).
> 
>> Although if you start outside of ocaml/ what happens when you'll want
>> to push your personnal project to ocaml/. How can you say to github:
>> from now my project is a fork of these other newly created repository
>> ?
> 
> That's a good question -- we just mail Github support to do the switch
> at the moment.
> 
>> But if Anil wants me to remove the library, I am fine.
> 
> I'd prefer you remove it and move it to wherever you prefer rather than
> me deleting other people's repositories! 
> 
> -anil
> 
> 
>> 
>>> 
>>> On Wed, Jul 3, 2013 at 6:28 AM, Anil Madhavapeddy <anil at recoil.org> wrote:
>>>> 
>>>> Hi Sylvain,
>>>> 
>>>> Thanks for uploading the code to Github; that's very useful.
>>>> 
>>>> Could you not put this in the ocaml organisation yet, and just keep
>>>> it in your personal repository?  We haven't really worked out which
>>>> libraries
>>>> to put in the "official" repository -- some, like oasis, should be there
>>>> without
>>>> a doubt, but the more work-in-progress efforts like markdown should
>>>> probably
>>>> be given some more thought before being put there.
>>>> 
>>>> (anyone else's thoughts on how to organise the github.com/ocaml org are
>>>> welcome, of course -- it's probably best to be cautious before putting
>>>> stuff
>>>> up there though, since it's difficult to move repositories once they're
>>>> established and linked to).
>>>> 
>>>> cheers,
>>>> Anil
>>>> 
>>>> On 2 Jul 2013, at 21:50, Sylvain Le Gall <sylvain+ocaml at le-gall.net>
>>>> wrote:
>>>> 
>>>>> As Christophe suggested, I have migrated the ocaml-markdown source
>>>>> code to github:
>>>>> https://github.com/ocaml/ocaml-markdown
>>>>> 
>>>>> The builder is here (but not working due to broken tyxml on godi):
>>>>> http://deci.ovh.le-gall.net:8080/job/ocaml-markdown/
>>>>> 
>>>>> Trackers and file distributions remains on:
>>>>> https://forge.ocamlcore.org/projects/ocaml-markdown/
>>>>> 
>>>>> Pull request are welcome if you want to add anything to make this
>>>>> project even better suited to your needs.
>>>>> 
>>>>> Regards
>>>>> Sylvain
>>>>> 
>>>>> 2013/7/2 Sylvain Le Gall <sylvain+ocaml at le-gall.net>:
>>>>>> 2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
>>>>>>>> Mauricio Fernandez wrote a basic Markdown parser which might fit
>>>>>>>> your needs well.  Have you looked at it yet?
>>>>>> 
>>>>>> ocaml-markdown is the one written by Mauricio Fernandez. See the
>>>>>> copyright:
>>>>>> 
>>>>>> http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml
>>>>>> 
>>>>>> Well I have extracted it from its initial proejct, but we were in sync
>>>>>> to do it.
>>>>>> 
>>>>>>> 
>>>>>>> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to
>>>>>>> (almost) read Github Markdown as well).
>>>>>>> 
>>>>>>> Thomas
>>>>>>> 
>>>>>>> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
>>>>>>> [2]
>>>>>>> https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
>>>>>>> _______________________________________________
>>>>>>> Infrastructure mailing list
>>>>>>> Infrastructure at lists.ocaml.org
>>>>>>> http://lists.ocaml.org/listinfo/infrastructure
>>>>> _______________________________________________
>>>>> Infrastructure mailing list
>>>>> Infrastructure at lists.ocaml.org
>>>>> http://lists.ocaml.org/listinfo/infrastructure
>>>>> 
>>>> 
>>>> _______________________________________________
>>>> Infrastructure mailing list
>>>> Infrastructure at lists.ocaml.org
>>>> http://lists.ocaml.org/listinfo/infrastructure
>>> 
>>> 
>> 
> 
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure


From sylvain+ocaml at le-gall.net  Wed Jul  3 20:01:44 2013
From: sylvain+ocaml at le-gall.net (Sylvain Le Gall)
Date: Wed, 3 Jul 2013 21:01:44 +0200
Subject: [ocaml-infra] Fwd: [opam-repository] Add ocaml-markdown 0.1.1
	(#863)
In-Reply-To: <FFBFD1E2-92EE-4601-9FB7-220BB41F9343@recoil.org>
References: <OCamlPro/opam-repository/pull/863@github.com>
 <92BE5A66-15FB-4B05-A85D-1322337091F8@recoil.org>
 <CAPFanBEkxKvZRUNM6gvvBYDTHGjLwxmoa7fMGO8edGUU4mTzSw@mail.gmail.com>
 <1372771103.76509.YahooMailNeo@web120404.mail.ne1.yahoo.com>
 <FB3D87DF-BCB4-4A54-A259-298DF0F4F23C@gazagnaire.org>
 <CAOCAUGNEOkwov9c0TErkj=ESzcSQZYPouDx0Vm+A-s-ORqTL4Q@mail.gmail.com>
 <CAOCAUGP3rc1BFQ33nP8zVo86b5bfHJkRXELo25FA+-MG8AoXVQ@mail.gmail.com>
 <95880575-B19B-473C-9438-6D271459F07E@recoil.org>
 <CAMu2m2LcR0Qobzqx_k+dh5wNQYiF2N7uVn3jXzVPZbDBXq6W9w@mail.gmail.com>
 <CAOCAUGO=7QMZ_=z-ZLiLmthNHRzHqE=TdCBvV8rayBDLj=6RFQ@mail.gmail.com>
 <FFBFD1E2-92EE-4601-9FB7-220BB41F9343@recoil.org>
Message-ID: <CAOCAUGOGS_acgoR-zmx8HHAjNkyvNq5AU9xp=55us0Y-6ivQBg@mail.gmail.com>

2013/7/3 Anil Madhavapeddy <anil at recoil.org>:
> On 3 Jul 2013, at 16:44, Sylvain Le Gall <sylvain+ocaml at le-gall.net> wrote:
>
>> 2013/7/3 Ashish Agarwal <agarwal1975 at gmail.com>:
>>>> anyone else's thoughts on how to organise the github.com/ocaml org
>>>
>>> I think the following criteria make sense:
>>>
>>> * The project should be mature.
>>>
>>> * The project should somehow relate to ocaml itself or the ocaml community
>>> in general.
>>>
>>> * There should be reasonable consensus that the above two criteria hold.
>>>
>>
>> Maturity of a project is hard to define.
>>
>> I think it is not a big deal to put there "non-toy" project. E.g. I
>> will not put here my sekred or dirvish-stats repositories, because I
>> don't expect anyone in the OCaml community to be interested in it.
>> However there could be a couple of libraries that will made sense to
>> be there -- even not mature one.
>
> The problem with this particular one is that there are a number of Markdown
> libraries, so this one clearly isn't "the one".  Unlike, say, ocaml-re,
> which is generally what people pick as a regular expression library.
>

Not entirely true, e.g. I am using more pcre-ocaml, just because it
exists in Debian Stable (and Old Stable, which is the ultimate
"mature" criteria). I would say so I don't think we should consider
any "the one" or "mature" libraries, I like to have choices and I
don't feel in position to judge.

>> My criteria would be:
>> * Project where you expect more than one contributor from the OCaml
>> community (including original author)
>> * No strong ownership of the code (i.e. expect that someone wants to
>> rewrite half of the code)
>> * OSI license
>
> This all sounds good.  One other criteria that is loosely enforced is that
> we only put libraries up here that are used by ocaml.org infrastructure.
> This includes ocaml-re, oasis and of course the website repos themselves.
> There will eventually be a Markdown library here too, but we should give
> it some time to figure out which one that is (Philippe is investigating
> the options).

I like the idea to set the goal: "used by ocaml.org infrastructure".
It is a summary of:
- this runs in production
- this is a choice made by a group of people (follow it if you want)

>
>> Although if you start outside of ocaml/ what happens when you'll want
>> to push your personnal project to ocaml/. How can you say to github:
>> from now my project is a fork of these other newly created repository
>> ?
>
> That's a good question -- we just mail Github support to do the switch
> at the moment.
>
>> But if Anil wants me to remove the library, I am fine.
>
> I'd prefer you remove it and move it to wherever you prefer rather than
> me deleting other people's repositories!
>

I'll move it, I was not asking you to do it ;-)

Although, may I ask a delay. Maybe it will be the choice of Philippe
and I don't want to move it 3 times in a week. (forge -> github/ocaml
-> github/gildor478 and maybe back to ocaml/ pending decision of
Philippe). Just tell Philippe to notify to do the move.

> -anil
>
>
>>
>>>
>>> On Wed, Jul 3, 2013 at 6:28 AM, Anil Madhavapeddy <anil at recoil.org> wrote:
>>>>
>>>> Hi Sylvain,
>>>>
>>>> Thanks for uploading the code to Github; that's very useful.
>>>>
>>>> Could you not put this in the ocaml organisation yet, and just keep
>>>> it in your personal repository?  We haven't really worked out which
>>>> libraries
>>>> to put in the "official" repository -- some, like oasis, should be there
>>>> without
>>>> a doubt, but the more work-in-progress efforts like markdown should
>>>> probably
>>>> be given some more thought before being put there.
>>>>
>>>> (anyone else's thoughts on how to organise the github.com/ocaml org are
>>>> welcome, of course -- it's probably best to be cautious before putting
>>>> stuff
>>>> up there though, since it's difficult to move repositories once they're
>>>> established and linked to).
>>>>
>>>> cheers,
>>>> Anil
>>>>
>>>> On 2 Jul 2013, at 21:50, Sylvain Le Gall <sylvain+ocaml at le-gall.net>
>>>> wrote:
>>>>
>>>>> As Christophe suggested, I have migrated the ocaml-markdown source
>>>>> code to github:
>>>>> https://github.com/ocaml/ocaml-markdown
>>>>>
>>>>> The builder is here (but not working due to broken tyxml on godi):
>>>>> http://deci.ovh.le-gall.net:8080/job/ocaml-markdown/
>>>>>
>>>>> Trackers and file distributions remains on:
>>>>> https://forge.ocamlcore.org/projects/ocaml-markdown/
>>>>>
>>>>> Pull request are welcome if you want to add anything to make this
>>>>> project even better suited to your needs.
>>>>>
>>>>> Regards
>>>>> Sylvain
>>>>>
>>>>> 2013/7/2 Sylvain Le Gall <sylvain+ocaml at le-gall.net>:
>>>>>> 2013/7/2 Thomas Gazagnaire <thomas at gazagnaire.org>:
>>>>>>>> Mauricio Fernandez wrote a basic Markdown parser which might fit
>>>>>>>> your needs well.  Have you looked at it yet?
>>>>>>
>>>>>> ocaml-markdown is the one written by Mauricio Fernandez. See the
>>>>>> copyright:
>>>>>>
>>>>>> http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=ocaml-markdown/ocaml-markdown;a=headblob;f=/src/Markdown.ml
>>>>>>
>>>>>> Well I have extracted it from its initial proejct, but we were in sync
>>>>>> to do it.
>>>>>>
>>>>>>>
>>>>>>> Yup, we are using it in ocaml-cow[1,2] (and we have adapted it to
>>>>>>> (almost) read Github Markdown as well).
>>>>>>>
>>>>>>> Thomas
>>>>>>>
>>>>>>> [1] https://github.com/mirage/ocaml-cow/blob/master/lib/markdown.ml
>>>>>>> [2]
>>>>>>> https://github.com/mirage/ocaml-cow/blob/master/lib/markdown_github.ml
>>>>>>> _______________________________________________
>>>>>>> Infrastructure mailing list
>>>>>>> Infrastructure at lists.ocaml.org
>>>>>>> http://lists.ocaml.org/listinfo/infrastructure
>>>>> _______________________________________________
>>>>> Infrastructure mailing list
>>>>> Infrastructure at lists.ocaml.org
>>>>> http://lists.ocaml.org/listinfo/infrastructure
>>>>>
>>>>
>>>> _______________________________________________
>>>> Infrastructure mailing list
>>>> Infrastructure at lists.ocaml.org
>>>> http://lists.ocaml.org/listinfo/infrastructure
>>>
>>>
>>
>

From amc79 at cam.ac.uk  Thu Jul  4 09:54:57 2013
From: amc79 at cam.ac.uk (Amir Chaudhry)
Date: Thu, 4 Jul 2013 09:54:57 +0100
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
Message-ID: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>

# Redesigning OCaml.org

Some time ago, I mentioned that we would be looking over the design and
structure of the OCaml.org website [1] and integrating the improvements we've
begun in the OCaml ecosystem, including OCamlot and the documentation work
(see the OCaml Labs news updates to catch-up on everything [2]).  
This message is a summary of the thinking so far and input is welcome.

One of the specific things we've been thinking about is generating pages from
Markdown files, instead of html.  This would make writing content a lot 
easier for contributors and makes maintenance more straightforward.  Of 
course, not every page would be markdown-based and for some it makes sense 
to stick with html (e.g the landing page).  Making a transition like this 
would involve examining the current toolchain and creating new libraries where 
appropriate, but these should be beneficial to the OCamlers in general 
(e.g a good Markdown library).  Below are the broad areas that I think we 
need to consider (but please let me know if I've missed something!)


## Markdown parser/converter

Some discussion of Markdown has already taken place [3], and one of the
issues we recognise is that there isn't really a clear spec for Markdown.  I
know there was a community effort to converge on one [4] but I don't know how
that's going. There's even a tool to help compare different markdown variants
[5].  In the meantime, my preference would be to stick with one of the widely
used versions (e.g GitHub Markdown).


## Templating tool

We also need a way to define templates and to deal with the HTML that the 
markdown converter produces i.e placing it into a webpage with navigation 
and footers as appropriate.  Philippe Wang has been working on a 
general-purpose pre-processor we can use for this purpose (MPP [6]).  
This would also allow us to use macros to include the content of other files 
within a markdown file e.g you could write something like {{import main.ml}} 
in a tutorial and the pre-processor would paste in and format the contents 
of that file.  An example of this would probably be clearer but I wanted to 
be brief in this email.  The workflow in this scenario would be 
`file.md --> [template tool] --> [markdown converter] --> HTML`


## Code evaluation and other customisations

Continuing from the above, as well as simply including code snippets we may 
also want to run them through toplevel and include the output.  This is used 
to great effect on the current site, for example the 100 lines page [7], 99 
problems page [8] and common errors page [9]. We also need to be able to 
generate Tables of Contents automatically, where appropriate.  These are 
obviously solvable (as they have been already) but we should consider where 
and how in the toolchain we want to do this.


## Work in progress

I'm personally attempting to recreate the current site using markdown files 
to see what this process really involves and how robust I can make it.  My 
attempts are in a repo (https://github.com/ocamllabs/ocaml.org-temp) and I'm 
using pandoc for the conversions at the moment.

There's a lot of stuff in preparation for the OCaml ecosystem in general and 
ocaml.org will be an important focal point for a lot of the output. 


[1] http://lists.ocaml.org/pipermail/infrastructure/2013-March/000155.html
[2] http://ocaml.io/news
[3] http://lists.ocaml.org/pipermail/infrastructure/2013-July/000193.html
[4] http://www.codinghorror.com/blog/2012/10/the-future-of-markdown.html
[5] http://johnmacfarlane.net/babelmark2/
[5] http://ocaml.org/tutorials/99problems.html
[6] https://github.com/pw374/MPP-language-blender
[7] http://ocaml.org/taste.html
[8] http://ocaml.org/tutorials/99problems.html
[9] http://ocaml.org/tutorials/common_error_messages.html


Best wishes,
Amir

From maxence.guesdon at inria.fr  Thu Jul  4 10:14:24 2013
From: maxence.guesdon at inria.fr (Maxence Guesdon)
Date: Thu, 4 Jul 2013 11:14:24 +0200
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
Message-ID: <20130704111424.33913ee9@alcazar>

On Thu, 4 Jul 2013 09:54:57 +0100
Amir Chaudhry <amc79 at cam.ac.uk> wrote:

> # Redesigning OCaml.org
> 
> Some time ago, I mentioned that we would be looking over the design and
> structure of the OCaml.org website [1] and integrating the improvements we've
> begun in the OCaml ecosystem, including OCamlot and the documentation work
> (see the OCaml Labs news updates to catch-up on everything [2]).  
> This message is a summary of the thinking so far and input is welcome.
> 
> One of the specific things we've been thinking about is generating pages from
> Markdown files, instead of html.  This would make writing content a lot 
> easier for contributors and makes maintenance more straightforward.  Of 
> course, not every page would be markdown-based and for some it makes sense 
> to stick with html (e.g the landing page).  Making a transition like this 
> would involve examining the current toolchain and creating new libraries where 
> appropriate, but these should be beneficial to the OCamlers in general 
> (e.g a good Markdown library).  Below are the broad areas that I think we 
> need to consider (but please let me know if I've missed something!)

FWIW, Stog has a markdown plugin developped by Gabriel Scherer,
allowing the use of markdown instead of xml for (part of) the contents
of a page:
  https://github.com/zoggy/stog/blob/master/plugins/stog_markdown.ml

Regards,

Maxence

From monnier.florent at gmail.com  Fri Jul  5 00:13:48 2013
From: monnier.florent at gmail.com (Florent Monnier)
Date: Fri, 5 Jul 2013 01:13:48 +0200
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
Message-ID: <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>

2013/07/04, Amir Chaudhry wrote:
> # Redesigning OCaml.org
[...]
> One of the specific things we've been thinking about is generating pages
> from Markdown files, instead of html.
[...]

And about the wiki?
If nothing is done yet I was thinking that Github's wiki could be
used. It uses markdown so some content could then be easily transfered
to and/or from the statically generated website.

-- 
A+

From agarwal1975 at gmail.com  Fri Jul  5 19:05:06 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Fri, 5 Jul 2013 14:05:06 -0400
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
 <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>
Message-ID: <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>

> And about the wiki?

One idea we've considered is having an "edit" link on every page, which
would go directly to the github url for the source of that page. Then,
GitHub allows you to edit the file directly in your browser. If you are not
authorized to edit the main repo, GitHub will initiate a fork.

Using GitHub's separate wiki feature is also an option, but I'm not sure it
helps above having markdown in the main repo.

In both cases, the assumption is that converting the current HTML sources
to Markdown will ease contributions. Thus, we need to get through the
conversion, and then we can figure out how to optimize the contributor
experience.


On Thu, Jul 4, 2013 at 7:13 PM, Florent Monnier
<monnier.florent at gmail.com>wrote:

> 2013/07/04, Amir Chaudhry wrote:
> > # Redesigning OCaml.org
> [...]
> > One of the specific things we've been thinking about is generating pages
> > from Markdown files, instead of html.
> [...]
>
> And about the wiki?
> If nothing is done yet I was thinking that Github's wiki could be
> used. It uses markdown so some content could then be easily transfered
> to and/or from the statically generated website.
>
> --
> A+
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130705/6371aafc/attachment.html>

From thomas at gazagnaire.org  Fri Jul  5 19:13:18 2013
From: thomas at gazagnaire.org (Thomas Gazagnaire)
Date: Fri, 5 Jul 2013 20:13:18 +0200
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
 <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>
 <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
Message-ID: <9FEE86E5-E617-4A6F-9891-7915113167C3@gazagnaire.org>

> > And about the wiki?
> 
> One idea we've considered is having an "edit" link on every page, which would go directly to the github url for the source of that page. Then, GitHub allows you to edit the file directly in your browser. If you are not authorized to edit the main repo, GitHub will initiate a fork.
> 
> Using GitHub's separate wiki feature is also an option, but I'm not sure it helps above having markdown in the main repo.

FWI, it's the design we went for OPAM documentation: pages in http://opam.ocamlpro.com/doc/ are automatically generated from https://github.com/OCamlPro/opam/wiki

We are using CoW to do the Github Markdown parsing, and we automatically generate the table of contents, etc. It's far more easier than having to maintain a proper wiki, with all the authorization mechanism complications.

--
Thomas

> 
> In both cases, the assumption is that converting the current HTML sources to Markdown will ease contributions. Thus, we need to get through the conversion, and then we can figure out how to optimize the contributor experience.
> 
> 
> On Thu, Jul 4, 2013 at 7:13 PM, Florent Monnier <monnier.florent at gmail.com> wrote:
> 2013/07/04, Amir Chaudhry wrote:
> > # Redesigning OCaml.org
> [...]
> > One of the specific things we've been thinking about is generating pages
> > from Markdown files, instead of html.
> [...]
> 
> And about the wiki?
> If nothing is done yet I was thinking that Github's wiki could be
> used. It uses markdown so some content could then be easily transfered
> to and/or from the statically generated website.
> 
> --
> A+
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
> 
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure


From monnier.florent at gmail.com  Sat Jul  6 11:37:09 2013
From: monnier.florent at gmail.com (Florent Monnier)
Date: Sat, 6 Jul 2013 12:37:09 +0200
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
 <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>
 <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
Message-ID: <CAE1DttAD2mm2B4H53OnvL6B3RN2LYTiD7nE5Savi+UNBNeS22w@mail.gmail.com>

2013/7/5, Ashish Agarwal wrote:
>> And about the wiki?
>
> One idea we've considered is having an "edit" link on every page, which
> would go directly to the github url for the source of that page. Then,
> GitHub allows you to edit the file directly in your browser. If you are not
> authorized to edit the main repo, GitHub will initiate a fork.

It is a good idea IMO.
This would make lower the threshold for action.

> Using GitHub's separate wiki feature is also an option, but I'm not sure it
> helps above having markdown in the main repo.

IMHO, the above idea won't replace the advantages of a real wiki.
This is a real pain for me that there is no real wiki for OCaml,
because in every community where I am I like to share a lot on its
dedicated wiki, and I can not with my favorite programming language.

> In both cases, the assumption is that converting the current HTML sources
> to Markdown will ease contributions. Thus, we need to get through the
> conversion, and then we can figure out how to optimize the contributor
> experience.

When this process of converting HTML to markdown starts please make us
aware on the mailing list, I'll be a voluntere to contribute a little.

-- 
Cheers

From monnier.florent at gmail.com  Sat Jul  6 12:09:10 2013
From: monnier.florent at gmail.com (Florent Monnier)
Date: Sat, 6 Jul 2013 13:09:10 +0200
Subject: [ocaml-infra] OCaml.org - License easier to find
Message-ID: <CAE1DttCam1Fu8By-N3QB=RO_E2AZpXTtvbFtF6_n0CP=mx=y8Q@mail.gmail.com>

2013/07/05, Ashish Agarwal wrote:
[...]
>             and then we can figure out how to optimize the contributor
> experience.

The "contributor experience" would also be improved IMO if it was
easier to figure out what is the license of the contributed content.

-- 
Regards

From agarwal1975 at gmail.com  Sat Jul  6 15:17:14 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Sat, 6 Jul 2013 10:17:14 -0400
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
 <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>
 <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
Message-ID: <CAMu2m2Ls4=RPFLC-6viJHXOno7+5ucJFJc_-bkiofMi8uzHa0w@mail.gmail.com>

On Fri, Jul 5, 2013 at 2:05 PM, Ashish Agarwal <agarwal1975 at gmail.com>wrote:

Using GitHub's separate wiki feature is also an option, but I'm not sure it
> helps above having markdown in the main repo.
>

I noticed that the editor in GitHub's wiki is much nicer. The editor
provided for markdown within the code repo is geared towards editing code.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130706/c5b965be/attachment.html>

From agarwal1975 at gmail.com  Sat Jul  6 15:33:16 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Sat, 6 Jul 2013 10:33:16 -0400
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <CAE1DttAD2mm2B4H53OnvL6B3RN2LYTiD7nE5Savi+UNBNeS22w@mail.gmail.com>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
 <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>
 <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
 <CAE1DttAD2mm2B4H53OnvL6B3RN2LYTiD7nE5Savi+UNBNeS22w@mail.gmail.com>
Message-ID: <CAMu2m2JPfNR0G3WULzWaY9pJv0mangGbNAvruMwOvGKg=weJfg@mail.gmail.com>

On Sat, Jul 6, 2013 at 6:37 AM, Florent Monnier
<monnier.florent at gmail.com>wrote:

IMHO, the above idea won't replace the advantages of a real wiki.
>

I agree. I think the current goal is to use GitHub as a pseudo-wiki.
They'll handle the user accounts and server for us. We get static text
files in the backend, which can be processed in custom ways as needed. But
yes, it's not perfect. There is some extra indirection before you actually
get to edit the file and that's enough of a deterrent if you just wanted to
fix a spelling error. The next step might be to integrate an editor
directly into ocaml.org, with authentication via GitHub or OpenID.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130706/8a02f457/attachment.html>

From agarwal1975 at gmail.com  Sat Jul  6 15:40:50 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Sat, 6 Jul 2013 10:40:50 -0400
Subject: [ocaml-infra] OCaml.org - License easier to find
In-Reply-To: <CAE1DttCam1Fu8By-N3QB=RO_E2AZpXTtvbFtF6_n0CP=mx=y8Q@mail.gmail.com>
References: <CAE1DttCam1Fu8By-N3QB=RO_E2AZpXTtvbFtF6_n0CP=mx=y8Q@mail.gmail.com>
Message-ID: <CAMu2m2JQAyyq4dwjdC7brOyk8iJApJs=a_dbrKRoJLgP3pp=_Q@mail.gmail.com>

On Sat, Jul 6, 2013 at 7:09 AM, Florent Monnier
<monnier.florent at gmail.com>wrote:

what is the license of the contributed content.
>

Good question. In my opinion it should be something that says "authors keep
ownership over their work, and grant the ocaml.org project a permanent
right to use it". I have no idea how to declare that, or maybe someone can
recommend a standard license.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130706/b9563993/attachment.html>

From anil at recoil.org  Sun Jul  7 12:26:14 2013
From: anil at recoil.org (Anil Madhavapeddy)
Date: Sun, 7 Jul 2013 12:26:14 +0100
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <CAMu2m2JPfNR0G3WULzWaY9pJv0mangGbNAvruMwOvGKg=weJfg@mail.gmail.com>
References: <53857960-00BF-4017-8AED-B8F70F936142@cam.ac.uk>
 <CAE1DttD+D9ShKvM9nC0bQx4fpC=v7BtHG6r=MwFsWyvKXpM30Q@mail.gmail.com>
 <CAMu2m2JMJXSApXN1ujU=pBshHcjBrSbWr3zn4YCOhCfJfndkwg@mail.gmail.com>
 <CAE1DttAD2mm2B4H53OnvL6B3RN2LYTiD7nE5Savi+UNBNeS22w@mail.gmail.com>
 <CAMu2m2JPfNR0G3WULzWaY9pJv0mangGbNAvruMwOvGKg=weJfg@mail.gmail.com>
Message-ID: <73C0CECC-1C66-46CA-9ACD-C0A2022E6C8C@recoil.org>

On 6 Jul 2013, at 15:33, Ashish Agarwal <agarwal1975 at gmail.com> wrote:

> On Sat, Jul 6, 2013 at 6:37 AM, Florent Monnier <monnier.florent at gmail.com> wrote:
> 
> IMHO, the above idea won't replace the advantages of a real wiki.
> 
> I agree. I think the current goal is to use GitHub as a pseudo-wiki. They'll handle the user accounts and server for us. We get static text files in the backend, which can be processed in custom ways as needed. But yes, it's not perfect. There is some extra indirection before you actually get to edit the file and that's enough of a deterrent if you just wanted to fix a spelling error. The next step might be to integrate an editor directly into ocaml.org, with authentication via GitHub or OpenID.

I like the idea of using the Github wiki as a frontend to editing the Markdown -- it solves the immediate problem, and still doesn't lock us into the Github workflow too tightly.

The ocaml-github bindings are pretty easy to integrate into Javascript authentication (I'll release the RWO commenting code shortly that does that).  We're planning to extend this to other identity formats such as Persona and OpenID in the future.

-anil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130707/51cfb45c/attachment.html>

From philippe.wang at cl.cam.ac.uk  Tue Jul  9 14:59:11 2013
From: philippe.wang at cl.cam.ac.uk (Philippe Wang)
Date: Tue, 9 Jul 2013 14:59:11 +0100
Subject: [ocaml-infra] Redesigning OCaml.org - Using Markdown
In-Reply-To: <1FED5458-03D9-4519-A5B8-F96BBAB3ABB5@cl.cam.ac.uk>
References: <CAAFfW_rg=C6HFX2SqEkdcXXMY9Y8+YXuWNYQDPC4PaFGuw3c4A@mail.gmail.com>
 <41DC8E3D-4311-4C7F-9A14-1F285732DC45@gmail.com>
 <1FED5458-03D9-4519-A5B8-F96BBAB3ABB5@cl.cam.ac.uk>
Message-ID: <1F76C994-B0E7-4BC9-AFE7-C1D5A585575C@cl.cam.ac.uk>

Dear all,

In addition to Amir's email (From: Amir Chaudhry <amc79 at cam.ac.uk>, Date: Thu, Jul 4, 2013 at 9:54 AM),
here are some details to help you understand where we're heading to.
Please feel free to comment on it.

(The text below uses markdown syntax and ASCII-based schemas, so it's best viewed using a markdown viewer but using a fixed-width font should be fine too.)

We're trying to  make the new ocaml.org website  as simple to maintain
and  build as  possible, in  the  sense that  one should  not have  to
understand the whole process in  order to intervene on a tiny specific
part of the website.
An example of how this might work is in the schematic below.

**We are not heading to  a website entirely written in OCaml.**
In  particular, pages  will be  written using  the  Markdown language,
which  is more  human-friendly than  HTML.  Where  needed, it  will be
possible to  use HTML, but parts  written in HTML  should almost never
change (that means that validation  of HTML should be easily done with
an external  tool).  The site being  mostly static is  the main reason
why we're not considering writing  the whole website using OCaml: it's
not worth the effort.  Indeed, having  to write some OCaml code is not
much  more  human-friendly  than  having  to  write  some  HTML  code,
especially compared to using Markdown.

Some Markdown files will be  written by humans, and some others partly
or entirely generated.   Any of them may contain  HTML parts.  We will
use tools  to allow the  generation of Markdown files  from "enriched"
Markdown files.   This means that  we may write special  directives in
"enriched"  Markdown files in  order to,  for instance,  include OCaml
code from existing  .ml files. We may also want  to include the result
of the compilation of some OCaml code.

In an enriched Markdown file, we may write, for instance
{{ format-ocaml "ocaml -I blah" foo.ml }}
and this would be replaced by the top-level's output when given the 
contents of the file foo.ml.

It could also be
{{ format-ocamlc "ocamlc -I blah"  foo.ml }}
and this would be replaced by the output of the ocamlc compiler.

This approach allows  the author of a page to have  control of how the
code  is  processed without  having  to  understand  the rest  of  the
transformation  chain (i.e., what  happens once  the Markdown  file is
produced). That has to be true for the entire website: not having to 
understand all of it seems to be crucial.



# Schematic

```
                                                           Building the ocaml.org website

                                                          --------------------------------                                          
      static generation                                   |     the ocaml.org website    |            dynamic generation            
      -----------------                                   |     ---------------------    |            ------------------            
                                                          |            ||                |                                          
[Markdown]-----conv-------->[HTML]----------,             |            ||                |                                          
 (data)                                     |             |            ||                |                                          
                                           {1}------------+-->[HTML/CSS/JS]=core         |                                          
                                            |             |            ||                |                                          
[LESS]---------Less-------->[CSS/JS]--------'             |            ||                |                                          
 (style)                                                  |            ||                |                                          
                                                          |            ||                |                                          
[OCaml]-----Js_of_ocaml---->[JS]-----------{2}------------+-->[JS]=components+lib        |                                          
 (scripts)                                                |            ||      `---------+---request--------------,                 
                                                          |            ||                |                        |                 
                                                          |            ||                |                        v                 
                                                          |         dynamic data=[DOM]<--+--{4}----response--[OPAM package list]    
                                                          |            ||                |                   [OCamlOT]              
[Markdown+OCaml]---conv---->[Markdown]------,             |            ||                |                                          
 (examples, exercises)                      |             |            ||                |                                          
                                           {3}--conv------+-->[HTML/CSS/JS]=exercices    |                                          
                                            |             |            ||    & demo      |                                          
[TryOCaml]----------------------------------'             |            ||                |                                          
 (execution environment)                                  |            ||                |                                          
                                                          |       other components       |                                          
                                                          |            ||                |                                          
                                                          --------------------------------                                          
```
`[`Format of the source code`]`

`||`: Backbone (link to all components), yet to be precisely defined.

`{1}`: The  core of  the ocaml.org  website. It consists  of a  bunch of
Markdown and LESS files that are converted into HTML.

`{2}`:  The dynamic part  of the  ocaml.org website.  Dynamic components
should be written in OCaml. For instance, they may include a component
that, on the client side, fetches  a list of OPAM packages (e.g., most
recent ones) and prints it on the page.

`{3}`: A kind of richer version of `{1}` (so it does also use CSS/JS).
Tutorials,  and more  generally  exercises, are  Markdown files  which
include  at some  point some  OCaml code.   The OCaml  code  should be
processed in order  to be embedded into some  Markdown files; this can
be easily done using MPP. For instance, we can process the OCaml parts
in order  to have the  output given by  the OCaml compiler  (ocamlc or
ocamlopt)  or interactive  top-level  (ocaml). We  may  also embed  an
interactive   top-level  (e.g.,  TryOCaml)   and  make   the  examples
interactive and (locally) editable by the website visitors.


`[A]---conv--->[B]`: Some  files written  using the A  language are
converted  by  some tools  (to  be defined)  into  files  using the  B
language. 
Pandoc may be used to convert Markdown files into HTML.
MPP may be used to (pre)process any textual file.




```
                   Building the web pages (don't ignore the "List.iter")

let build_the_main_ocamlorg_pages (all_pages) =
  List.iter ~l:(all_pages) ~f:(fun a.md.mpp) ->
,-------------------------------------------------------------------------------------------------------,
|                                                                                                       |    
|                                                                                                       |    
|                                                                                                       |    
|      ,----------,             ,----------------,                                                      |    
|      | a.md.mpp |             | head.html.tpl  |                                                      |    
|      |          |             |                |                                                      |    
|      |          |             | title          |                                                      |    
|      |          |--,          | author         |                                                      |    
|      |          |   \         | style          |                                                      |    
|      |          |    |        | and            |                                                      |    
|      |          |    |---X--->| other metadata |----,                                                 |    
|      '----------'    |        |                |     \       /------------------------\               |    
|                      |        '----------------'      |      |  a.html                |               |    
|                      |                                |      |                        |               |                 
|                      |        ,----------------,      |      |  generated             |               |    
|                      |        | body.html.tpl  |      |      |  web page              |               |    
|                      |        |                |      |      |  (HTML/CSS/JS)         |               |    
|                      |        | contents of    |      |      |                        |               |    
|                      |        | the body       |      |      |                        |               |    
|                       `--X--->|                |------+----->|                        |               |    
|                               '----------------'      |      |                        |               |    
|                               ,----------------,      |      |                        |               |  
|                               | common.html.tpl|      |      |                        |               |
|                               |                |      |      |                        |               |
|                               | shared by      |-----/       |                        |               | 
|                               | most pages     |             |                        |               |
|                               |                |             \------------------------/               |
|                               '----------------'                                                      |
|  X: extraction                                                                                        |
`-------------------------------------------------------------------------------------------------------'
```                                                                                                 

Please feel free to edit the ASCII-based schemas.


Best,
Philippe Wang







-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130709/0d48000f/attachment-0001.html>

From philippe.wang at cl.cam.ac.uk  Thu Jul 25 16:46:28 2013
From: philippe.wang at cl.cam.ac.uk (Philippe Wang)
Date: Thu, 25 Jul 2013 16:46:28 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
Message-ID: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>

Dear all,

discussions that occurred earlier this month on this list seemed to point out that a markdown front-end for OCaml would be welcome and useful, provided it'd be closer to some existing broadly-used flavour of Markdown, and especially if it's implemented in pure OCaml ("pure" in the sense of "free from ~inconvenient~ dependencies").

Since we need to have a markdown parser for the new version of ocaml.org anyway, I looked at what options we had.
Basically, several, if not most, Markdown front-ends in OCaml seem to be based on Mauricio's and none of them are very close to a "mainstream" Markdown flavour. And that's pretty much it. (Am I wrong?)

I'm currently writing a markdown front-end in pure OCaml (only .ml files). It's a pattern-matching based implementation. It will be kept close to the github flavour markdown. (Sorry, I will probably refuse to reproduce their bugs: I will either replace them by my own bugs or I'll fix them.)

So far, it seems to me that the trickiest part is to have a "correct" parsing of lists, as no list is wrong in markdown syntax since *nothing* is wrong in markdown.

I use a public github repo to synchronise between my several machines:
https://github.com/pw374/omd/
Beware, it's at an early stage, which (partly) explains why my commit logs are unreadable.

I expect to have a working markdown-->html tool in a few days (I believe the hardest part has been done).

I'll put (old-fashioned tar-balls) snapshots in the github repo when it starts working.

I'll come back to you soon,
Cheers,
Philippe Wang




From raphlalou at gmail.com  Thu Jul 25 16:53:12 2013
From: raphlalou at gmail.com (=?UTF-8?Q?Rapha=C3=ABl_Proust?=)
Date: Thu, 25 Jul 2013 16:53:12 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
Message-ID: <CAAmHUAnpu7T0o+nYEfqT5-_7u=V7fFrq0avt1uqE9Sa_oegEbg@mail.gmail.com>

On Thu, Jul 25, 2013 at 4:46 PM, Philippe Wang
<philippe.wang at cl.cam.ac.uk> wrote:
> Since we need to have a markdown parser for the new version of ocaml.org anyway, I looked at what options we had.
> Basically, several, if not most, Markdown front-ends in OCaml seem to be based on Mauricio's and none of them are very close to a "mainstream" Markdown flavour. And that's pretty much it. (Am I wrong?)

Including Dario's? http://lambdoc.forge.ocamlcore.org/


-- 
______________
Rapha?l Proust

From kosmo.zb at gmail.com  Thu Jul 25 16:55:18 2013
From: kosmo.zb at gmail.com (David Sheets)
Date: Thu, 25 Jul 2013 16:55:18 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
Message-ID: <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>

On Thu, Jul 25, 2013 at 4:46 PM, Philippe Wang
<philippe.wang at cl.cam.ac.uk> wrote:
> Dear all,
>
> discussions that occurred earlier this month on this list seemed to point out that a markdown front-end for OCaml would be welcome and useful, provided it'd be closer to some existing broadly-used flavour of Markdown, and especially if it's implemented in pure OCaml ("pure" in the sense of "free from ~inconvenient~ dependencies").
>
> Since we need to have a markdown parser for the new version of ocaml.org anyway, I looked at what options we had.
> Basically, several, if not most, Markdown front-ends in OCaml seem to be based on Mauricio's and none of them are very close to a "mainstream" Markdown flavour. And that's pretty much it. (Am I wrong?)
>
> I'm currently writing a markdown front-end in pure OCaml (only .ml files). It's a pattern-matching based implementation. It will be kept close to the github flavour markdown. (Sorry, I will probably refuse to reproduce their bugs: I will either replace them by my own bugs or I'll fix them.)
>
> So far, it seems to me that the trickiest part is to have a "correct" parsing of lists, as no list is wrong in markdown syntax since *nothing* is wrong in markdown.
>
> I use a public github repo to synchronise between my several machines:
> https://github.com/pw374/omd/
> Beware, it's at an early stage, which (partly) explains why my commit logs are unreadable.
>
> I expect to have a working markdown-->html tool in a few days (I believe the hardest part has been done).
>
> I'll put (old-fashioned tar-balls) snapshots in the github repo when it starts working.

Just a note: if you use a git tag, github will automatically generate
a tarball available at
<https://github.com/[user]/[repo]/archive/[tag].tar.gz>

Best regards,

David

> I'll come back to you soon,
> Cheers,
> Philippe Wang
>
>
>
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure

From sebastien.mondet at gmail.com  Thu Jul 25 17:01:44 2013
From: sebastien.mondet at gmail.com (Sebastien Mondet)
Date: Thu, 25 Jul 2013 12:01:44 -0400
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <CAAmHUAnpu7T0o+nYEfqT5-_7u=V7fFrq0avt1uqE9Sa_oegEbg@mail.gmail.com>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAmHUAnpu7T0o+nYEfqT5-_7u=V7fFrq0avt1uqE9Sa_oegEbg@mail.gmail.com>
Message-ID: <CALScVYkUu21PrbG4vHYk6A6Lh1+KK_u8tT6tvbG30_7BF91WPQ@mail.gmail.com>

Hi Philippe !

That's great! thanks for your work on that!


PS: Just one detail-ish comment:
if you follow Github flavor of markdown please make their stupid handling
of newlines [gfm_newlines] optional in some way.

[gfm_newlines]:
https://help.github.com/articles/github-flavored-markdown#newlines






On Thu, Jul 25, 2013 at 11:53 AM, Rapha?l Proust <raphlalou at gmail.com>wrote:

> On Thu, Jul 25, 2013 at 4:46 PM, Philippe Wang
> <philippe.wang at cl.cam.ac.uk> wrote:
> > Since we need to have a markdown parser for the new version of ocaml.organyway, I looked at what options we had.
> > Basically, several, if not most, Markdown front-ends in OCaml seem to be
> based on Mauricio's and none of them are very close to a "mainstream"
> Markdown flavour. And that's pretty much it. (Am I wrong?)
>
> Including Dario's? http://lambdoc.forge.ocamlcore.org/
>
>
> --
> ______________
> Rapha?l Proust
> _______________________________________________
> Infrastructure mailing list
> Infrastructure at lists.ocaml.org
> http://lists.ocaml.org/listinfo/infrastructure
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130725/109fe341/attachment.html>

From thomas at gazagnaire.org  Thu Jul 25 17:08:04 2013
From: thomas at gazagnaire.org (Thomas Gazagnaire)
Date: Thu, 25 Jul 2013 18:08:04 +0200
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
Message-ID: <78C9F098-126B-4095-B27B-EABD7C6763B1@gazagnaire.org>

> I'm currently writing a markdown front-end in pure OCaml (only .ml files). It's a pattern-matching based implementation. It will be kept close to the github flavour markdown. (Sorry, I will probably refuse to reproduce their bugs: I will either replace them by my own bugs or I'll fix them.)

That's a good news. I am just curious about the fact that you are trying to avoid to write recursive functions. Any specific reasons for that (apart making the code uglier) ?

> I expect to have a working markdown-->html tool in a few days (I believe the hardest part has been done).

Do you plan to convert that directly to strings ? A good intermediate representation is the one used by xmlm: 

type 'a tree = [ `Data of string | `El of ((string * string) * ((string * string) * string) list) * 'a ]
type t = (('a frag as 'a) frag) list

And then you can easily embed HTML paragraphs (as you might sometimes switch to something more expressive than markdown).

Last point, I use to have an extension of Mauricio's markdown parser which is able to tag a specific elements with an HTML class (example: @foo{Bla bla} to generate <span class="foo">Bla bla</span>). This is not standard, but very useful when you can tweak the associated CSS, and I'd be very happy if I can add it later to your parser without too much trouble.

Thomas

From philippe.wang at cl.cam.ac.uk  Thu Jul 25 22:32:32 2013
From: philippe.wang at cl.cam.ac.uk (Philippe Wang)
Date: Thu, 25 Jul 2013 22:32:32 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <CAAmHUAnpu7T0o+nYEfqT5-_7u=V7fFrq0avt1uqE9Sa_oegEbg@mail.gmail.com>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAmHUAnpu7T0o+nYEfqT5-_7u=V7fFrq0avt1uqE9Sa_oegEbg@mail.gmail.com>
Message-ID: <EE611D62-6223-472F-AD7E-8D821A067657@cl.cam.ac.uk>


On Jul 25, 2013, at 16:53 PM, Rapha?l Proust <raphlalou at gmail.com> wrote:

> On Thu, Jul 25, 2013 at 4:46 PM, Philippe Wang
> <philippe.wang at cl.cam.ac.uk> wrote:
>> Since we need to have a markdown parser for the new version of ocaml.org anyway, I looked at what options we had.
>> Basically, several, if not most, Markdown front-ends in OCaml seem to be based on Mauricio's and none of them are very close to a "mainstream" Markdown flavour. And that's pretty much it. (Am I wrong?)
> 
> Including Dario's? http://lambdoc.forge.ocamlcore.org/

Nope. That website says Lambwiki is "in the spirit of Markdown and Wiki Creole", so it's not Markdown.
(Or they should make it clearer.)

Philippe


From philippe.wang at cl.cam.ac.uk  Thu Jul 25 22:32:47 2013
From: philippe.wang at cl.cam.ac.uk (Philippe Wang)
Date: Thu, 25 Jul 2013 22:32:47 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
Message-ID: <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>


On Jul 25, 2013, at 16:55 PM, David Sheets <kosmo.zb at gmail.com> wrote:

> On Thu, Jul 25, 2013 at 4:46 PM, Philippe Wang
> <philippe.wang at cl.cam.ac.uk> wrote:
>> Dear all,
>> 
>> discussions that occurred earlier this month on this list seemed to point out that a markdown front-end for OCaml would be welcome and useful, provided it'd be closer to some existing broadly-used flavour of Markdown, and especially if it's implemented in pure OCaml ("pure" in the sense of "free from ~inconvenient~ dependencies").
>> 
>> Since we need to have a markdown parser for the new version of ocaml.org anyway, I looked at what options we had.
>> Basically, several, if not most, Markdown front-ends in OCaml seem to be based on Mauricio's and none of them are very close to a "mainstream" Markdown flavour. And that's pretty much it. (Am I wrong?)
>> 
>> I'm currently writing a markdown front-end in pure OCaml (only .ml files). It's a pattern-matching based implementation. It will be kept close to the github flavour markdown. (Sorry, I will probably refuse to reproduce their bugs: I will either replace them by my own bugs or I'll fix them.)
>> 
>> So far, it seems to me that the trickiest part is to have a "correct" parsing of lists, as no list is wrong in markdown syntax since *nothing* is wrong in markdown.
>> 
>> I use a public github repo to synchronise between my several machines:
>> https://github.com/pw374/omd/
>> Beware, it's at an early stage, which (partly) explains why my commit logs are unreadable.
>> 
>> I expect to have a working markdown-->html tool in a few days (I believe the hardest part has been done).
>> 
>> I'll put (old-fashioned tar-balls) snapshots in the github repo when it starts working.
> 
> Just a note: if you use a git tag, github will automatically generate
> a tarball available at
> <https://github.com/[user]/[repo]/archive/[tag].tar.gz>

Thanks David.
However this means that I'd be able to create archives only of versions that have a tag in github?
(e.g., I could not modify 2 lines and create a tar ball without git-commiting the changes...)


From philippe.wang at cl.cam.ac.uk  Thu Jul 25 22:33:22 2013
From: philippe.wang at cl.cam.ac.uk (Philippe Wang)
Date: Thu, 25 Jul 2013 22:33:22 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <CALScVYkUu21PrbG4vHYk6A6Lh1+KK_u8tT6tvbG30_7BF91WPQ@mail.gmail.com>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAmHUAnpu7T0o+nYEfqT5-_7u=V7fFrq0avt1uqE9Sa_oegEbg@mail.gmail.com>
 <CALScVYkUu21PrbG4vHYk6A6Lh1+KK_u8tT6tvbG30_7BF91WPQ@mail.gmail.com>
Message-ID: <C28AFE8D-61FC-484A-BEAC-84B53814686A@cl.cam.ac.uk>


On Jul 25, 2013, at 17:01 PM, Sebastien Mondet <sebastien.mondet at gmail.com> wrote:

> 
> Hi Philippe !
> 
> That's great! thanks for your work on that!
> 
> 
> PS: Just one detail-ish comment:
> if you follow Github flavor of markdown please make their stupid handling of newlines [gfm_newlines] optional in some way.

I didn't think it was stupid, but ok. That should only have a (relatively) small (and simple) impact on the code.

> [gfm_newlines]: https://help.github.com/articles/github-flavored-markdown#newlines


Yep.

Philippe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130725/dfbbabc0/attachment.html>

From philippe.wang at cl.cam.ac.uk  Thu Jul 25 22:33:29 2013
From: philippe.wang at cl.cam.ac.uk (Philippe Wang)
Date: Thu, 25 Jul 2013 22:33:29 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <78C9F098-126B-4095-B27B-EABD7C6763B1@gazagnaire.org>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <78C9F098-126B-4095-B27B-EABD7C6763B1@gazagnaire.org>
Message-ID: <DC922FF1-F67A-4F6B-882D-86BD1FAA4079@cl.cam.ac.uk>


On Jul 25, 2013, at 17:08 PM, Thomas Gazagnaire <thomas at gazagnaire.org> wrote:

>> I'm currently writing a markdown front-end in pure OCaml (only .ml files). It's a pattern-matching based implementation. It will be kept close to the github flavour markdown. (Sorry, I will probably refuse to reproduce their bugs: I will either replace them by my own bugs or I'll fix them.)
> 
> That's a good news. I am just curious about the fact that you are trying to avoid to write recursive functions. Any specific reasons for that (apart making the code uglier) ?

One of the reason for writing a "pure" OCaml version was that it could easily be embedded on a webpage with Js_of_ocaml (for those who would want that). I believe recursion is not well handled with Js_of_ocaml (please tell me if I'm wrong).

Anyways, I'm trying but not hard at all. I mean, it's so hard (for me) to think and write without recursion, when I'm not **exactly** sure where I'm heading, that for the moment I do it anyway.
So I planned on rewriting the code (later) with as little recursion as possible.

For the moment, I think that absence of recursion would not necessarily make things ugly.

>> I expect to have a working markdown-->html tool in a few days (I believe the hardest part has been done).
> 
> Do you plan to convert that directly to strings ?

The tool (i.e., the binary) will convert (textual) Markdown into (textual) HTML.
The library will provide a front-end with a sort of abstract representation of Markdown (of type md in https://github.com/pw374/omd/blob/master/src/md.ml)
(Now that I look at it, I wonder why there is a constructor "Sp"? it might just disappear tomorrow.)

> A good intermediate representation is the one used by xmlm: 
> 
> type 'a tree = [ `Data of string | `El of ((string * string) * ((string * string) * string) list) * 'a ]
> type t = (('a frag as 'a) frag) list

Polymorphic variants? Well I've realised that I can't understand type errors when I directly program using those. I'm not against using them when my program works, but for the moment, I'll just ignore their existence (I've already spent a lot of time trying to unravel type errors and type inference with polymorphic variants on this markdown project).

> And then you can easily embed HTML paragraphs (as you might sometimes switch to something more expressive than markdown).

I'll see about that; for the moment I'm not sure I get it.

> Last point, I use to have an extension of Mauricio's markdown parser which is able to tag a specific elements with an HTML class (example: @foo{Bla bla} to generate <span class="foo">Bla bla</span>). This is not standard, but very useful when you can tweak the associated CSS, and I'd be very happy if I can add it later to your parser without too much trouble.

Seems nice! I believe it'll be relatively easy to add to the parser (at least, it should be). :)

Philippe



From kosmo.zb at gmail.com  Thu Jul 25 22:41:55 2013
From: kosmo.zb at gmail.com (David Sheets)
Date: Thu, 25 Jul 2013 22:41:55 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
 <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
Message-ID: <CAAWM5TyR209qWJu95bkOQMOLSk_T06JOuELSxDoQL5BT_bSg5A@mail.gmail.com>

On Thu, Jul 25, 2013 at 10:32 PM, Philippe Wang
<philippe.wang at cl.cam.ac.uk> wrote:
>
> On Jul 25, 2013, at 16:55 PM, David Sheets <kosmo.zb at gmail.com> wrote:
>
>> On Thu, Jul 25, 2013 at 4:46 PM, Philippe Wang
>> <philippe.wang at cl.cam.ac.uk> wrote:
>>> Dear all,
>>>
>>> discussions that occurred earlier this month on this list seemed to point out that a markdown front-end for OCaml would be welcome and useful, provided it'd be closer to some existing broadly-used flavour of Markdown, and especially if it's implemented in pure OCaml ("pure" in the sense of "free from ~inconvenient~ dependencies").
>>>
>>> Since we need to have a markdown parser for the new version of ocaml.org anyway, I looked at what options we had.
>>> Basically, several, if not most, Markdown front-ends in OCaml seem to be based on Mauricio's and none of them are very close to a "mainstream" Markdown flavour. And that's pretty much it. (Am I wrong?)
>>>
>>> I'm currently writing a markdown front-end in pure OCaml (only .ml files). It's a pattern-matching based implementation. It will be kept close to the github flavour markdown. (Sorry, I will probably refuse to reproduce their bugs: I will either replace them by my own bugs or I'll fix them.)
>>>
>>> So far, it seems to me that the trickiest part is to have a "correct" parsing of lists, as no list is wrong in markdown syntax since *nothing* is wrong in markdown.
>>>
>>> I use a public github repo to synchronise between my several machines:
>>> https://github.com/pw374/omd/
>>> Beware, it's at an early stage, which (partly) explains why my commit logs are unreadable.
>>>
>>> I expect to have a working markdown-->html tool in a few days (I believe the hardest part has been done).
>>>
>>> I'll put (old-fashioned tar-balls) snapshots in the github repo when it starts working.
>>
>> Just a note: if you use a git tag, github will automatically generate
>> a tarball available at
>> <https://github.com/[user]/[repo]/archive/[tag].tar.gz>
>
> Thanks David.
> However this means that I'd be able to create archives only of versions that have a tag in github?
> (e.g., I could not modify 2 lines and create a tar ball without git-commiting the changes...)

I'm not sure I understand your use case; however, any ref has a
corresponding archive:
https://github.com/pw374/omd/archive/master.tar.gz for an archive of
the HEAD of the master branch.

From daniel.buenzli at erratique.ch  Thu Jul 25 22:50:59 2013
From: daniel.buenzli at erratique.ch (=?utf-8?Q?Daniel_B=C3=BCnzli?=)
Date: Thu, 25 Jul 2013 22:50:59 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <DC922FF1-F67A-4F6B-882D-86BD1FAA4079@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <78C9F098-126B-4095-B27B-EABD7C6763B1@gazagnaire.org>
 <DC922FF1-F67A-4F6B-882D-86BD1FAA4079@cl.cam.ac.uk>
Message-ID: <9D96432A61E24C9ABB5D9034DDCD2C0B@erratique.ch>

> One of the reason for writing a "pure" OCaml version was that it could easily be embedded on a webpage with Js_of_ocaml (for those who would want that). I believe recursion is not well handled with Js_of_ocaml (please tell me if I'm wrong).
Self-recursion is ok. Mutually recursive functions is not. 

Best,

Daniel

From agarwal1975 at gmail.com  Fri Jul 26 00:50:10 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Thu, 25 Jul 2013 19:50:10 -0400
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
 <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
Message-ID: <CAMu2m2KiY3yoBUYVB0V51bZk_4CvnjuyFrQFGDYgEP=M7JYeEg@mail.gmail.com>

On Thu, Jul 25, 2013 at 5:32 PM, Philippe Wang
<philippe.wang at cl.cam.ac.uk>wrote:


>  >> I'll put (old-fashioned tar-balls) snapshots in the github repo when
> it starts working.
> >
> > Just a note: if you use a git tag, github will automatically generate
> > a tarball available at
> > <https://github.com/[user]/[repo]/archive/[tag].tar.gz>
>
> Thanks David.
> However this means that I'd be able to create archives only of versions
> that have a tag in github?
> (e.g., I could not modify 2 lines and create a tar ball without
> git-commiting the changes...)
>

Why would you want to create a tarball of something not committed? Also,
I'm not sure what you mean by put tarballs "in the repo". I hope you won't
do either of these things. Maybe I'm just misunderstanding.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130725/55d1f585/attachment.html>

From philippe.wang at cl.cam.ac.uk  Sat Jul 27 02:20:49 2013
From: philippe.wang at cl.cam.ac.uk (Philippe Wang)
Date: Sat, 27 Jul 2013 02:20:49 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <CAAWM5TyR209qWJu95bkOQMOLSk_T06JOuELSxDoQL5BT_bSg5A@mail.gmail.com>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
 <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
 <CAAWM5TyR209qWJu95bkOQMOLSk_T06JOuELSxDoQL5BT_bSg5A@mail.gmail.com>
Message-ID: <97E04F57-861A-47A0-8732-F40C220B205E@cl.cam.ac.uk>

(3 replies below)

On Jul 25, 2013, at 22:41 PM, David Sheets <kosmo.zb at gmail.com> wrote:

>>> Just a note: if you use a git tag, github will automatically generate
>>> a tarball available at
>>> <https://github.com/[user]/[repo]/archive/[tag].tar.gz>
>> 
>> Thanks David.
>> However this means that I'd be able to create archives only of versions that have a tag in github?
>> (e.g., I could not modify 2 lines and create a tar ball without git-commiting the changes...)
> 
> I'm not sure I understand your use case; however, any ref has a
> corresponding archive:
> https://github.com/pw374/omd/archive/master.tar.gz for an archive of
> the HEAD of the master branch.

I don't really like it (because I hate tar balls with generic names or hash-based names) but okay, I won't battle against it.

On Jul 25, 2013, at 22:50 PM, Daniel B?nzli <daniel.buenzli at erratique.ch> wrote:

>> One of the reason for writing a "pure" OCaml version was that it could easily be embedded on a webpage with Js_of_ocaml (for those who would want that). I believe recursion is not well handled with Js_of_ocaml (please tell me if I'm wrong).
> Self-recursion is ok. Mutually recursive functions is not. 

ok, that could lead to some "funny" programming style? ;-)

On Jul 26, 2013, at 24:50 AM, Ashish Agarwal <agarwal1975 at gmail.com> wrote:

> On Thu, Jul 25, 2013 at 5:32 PM, Philippe Wang <philippe.wang at cl.cam.ac.uk> wrote:
> 
>>>> I'll put (old-fashioned tar-balls) snapshots in the github repo when it starts working.
>>> 
>>> Just a note: if you use a git tag, github will automatically generate
>>> a tarball available at
>>> <https://github.com/[user]/[repo]/archive/[tag].tar.gz>
>> 
>> Thanks David.
>> However this means that I'd be able to create archives only of versions that have a tag in github?
>> (e.g., I could not modify 2 lines and create a tar ball without git-commiting the changes...)
>> 
> Why would you want to create a tarball of something not committed?

Sometimes you might want to create a tar ball of something that's been generated...

> Also, I'm not sure what you mean by put tarballs "in the repo". I hope you won't do either of these things. Maybe I'm just misunderstanding.

Ok, until I change my mind, I won't put tar balls in the repo.

But to answer your question, here's a reason why I believe it can be relevant not to use github's archives.
Say I'm developing some software, and when I want to distribute it, (whatever my reasons) I don't want to distribute the whole thing or the way it is in the repo. So, I manually make packages when I want to distribute the software. 

It's one thing to have a public git repository to which anyone can "pull request", and that's for developers who might want to contribute.
It's another to distribute software to people who want to use it and have no intention of contributing to it.
In the first case, it would likely be bad indeed to distribute something that has not been committed. But in the second case, I don't see the same problem.

For instance, a good motivation for distributing something that's different from the github repo is if parts of the end-user code are generated using a tool and you don't want to "force" your users to have that tool (but it's ok to "force" contributors to have it). For OMD, I have considered using MPP[1] to generate parts of it. If I do that, I don't want to force users of OMD to have MPP, so I would rather distribute preprocessed ml files. Does it make sense? or do you have a better way?

Cheers,
Philippe



[1] MPP: https://github.com/pw374/MPP-language-blender

From daniel.buenzli at erratique.ch  Sat Jul 27 02:57:08 2013
From: daniel.buenzli at erratique.ch (=?utf-8?Q?Daniel_B=C3=BCnzli?=)
Date: Sat, 27 Jul 2013 02:57:08 +0100
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <97E04F57-861A-47A0-8732-F40C220B205E@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
 <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
 <CAAWM5TyR209qWJu95bkOQMOLSk_T06JOuELSxDoQL5BT_bSg5A@mail.gmail.com>
 <97E04F57-861A-47A0-8732-F40C220B205E@cl.cam.ac.uk>
Message-ID: <7C9719DA5F0347558D1828B9065E1580@erratique.ch>

Le samedi, 27 juillet 2013 ? 02:20, Philippe Wang a ?crit :
> ok, that could lead to some "funny" programming style? ;-)

If you really want to make it fun program a non-blocking codec with a cost model that allows you to limit the height of your call stack. You can then suspend the computation after a budget was met and restart it using window.setTimeout. Voil? no stackoverflow. This is done here:

https://github.com/dbuenzli/vg/blob/master/test/rhtmlc.ml#L99

for the svg backend. Unfortunately the cost model is only on rendered images, so if you build a big Vg.path you may still overflow, e.g. this example

http://erratique.ch/software/vg/demos/rhtmlc.html#arrowhead

To contrast the html canvas backend has only one self-recursive functions that calls one other self-recursive function so you never blow the stack.  

> But to answer your question, here's a reason why I believe it can be relevant not to use github's archives.
> Say I'm developing some software, and when I want to distribute it, (whatever my reasons) I don't want to distribute the whole thing or the way it is in the repo. So, I manually make packages when I want to distribute the software.

[?]  
>  
> It's one thing to have a public git repository to which anyone can "pull request", and that's for developers who might want to contribute.
> It's another to distribute software to people who want to use it and have no intention of contributing to it.

If you are old-fashioned (like me) or effectively need to generate data for a distribution (like me again) anything provided by github at the moment is completely useless. Worse they give a semantics to git tags that doesn't correspond to the way git tags are used in practice :

https://github.com/dbuenzli/react/releases

That git_import release was a big moment in the lifetime of the project...

Best,

Daniel



From anil at recoil.org  Sat Jul 27 03:08:37 2013
From: anil at recoil.org (Anil Madhavapeddy)
Date: Fri, 26 Jul 2013 19:08:37 -0700
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <97E04F57-861A-47A0-8732-F40C220B205E@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
 <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
 <CAAWM5TyR209qWJu95bkOQMOLSk_T06JOuELSxDoQL5BT_bSg5A@mail.gmail.com>
 <97E04F57-861A-47A0-8732-F40C220B205E@cl.cam.ac.uk>
Message-ID: <7C7A8505-F18B-4BBF-9932-1AF35DAC634B@recoil.org>

On 26 Jul 2013, at 18:20, Philippe Wang <philippe.wang at cl.cam.ac.uk> wrote:

> On Jul 25, 2013, at 22:41 PM, David Sheets <kosmo.zb at gmail.com> wrote:

>> Why would you want to create a tarball of something not committed?
> 
> Sometimes you might want to create a tar ball of something that's been generated...

That's true.  The way to do this is to use the Github 'Releases' tab.  It can create a tag for you that you can associate binary tarballs with, and these are served separately from the repository itself.

https://github.com/blog/1547-release-your-software

There's no API to automate this yet, but it's in the works I hear...

(As Daniel points out, Github currently doesn't let you differentiate development tags from release tags, but I'd be surprised if the API doesn't support this when it's released, since you can already mark a tag as "prerelease" or "release" if you use their interface manually).

> Ok, until I change my mind, I won't put tar balls in the repo.

Tarballs in the repo is indeed the worst of all worlds.

-anil

From agarwal1975 at gmail.com  Sat Jul 27 14:45:13 2013
From: agarwal1975 at gmail.com (Ashish Agarwal)
Date: Sat, 27 Jul 2013 09:45:13 -0400
Subject: [ocaml-infra] markdown in "pure" OCaml
In-Reply-To: <97E04F57-861A-47A0-8732-F40C220B205E@cl.cam.ac.uk>
References: <883DB924-9207-40C8-AF0D-A4669C94F719@cl.cam.ac.uk>
 <CAAWM5TxOrayGTkkYAqf5ojOApK0=oLG2k4EGKviUPctSZb3WYw@mail.gmail.com>
 <6DC0D0D0-4F4B-4C89-ABEA-5EB6FA233979@cl.cam.ac.uk>
 <CAAWM5TyR209qWJu95bkOQMOLSk_T06JOuELSxDoQL5BT_bSg5A@mail.gmail.com>
 <97E04F57-861A-47A0-8732-F40C220B205E@cl.cam.ac.uk>
Message-ID: <CAMu2m2LXkgt=eDMQP4NObRzGaHx9r60aKmbW7qtshN2XF4vYKg@mail.gmail.com>

On Fri, Jul 26, 2013 at 9:20 PM, Philippe Wang
<philippe.wang at cl.cam.ac.uk>wrote:


> > Why would you want to create a tarball of something not committed?
>
> Sometimes you might want to create a tar ball of something that's been
> generated...


I indeed misunderstood. This makes complete sense, and I do it myself, e.g.:
https://github.com/biocaml/biocaml/blob/v0.3-dev/OMakeroot#L187
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.ocaml.org/pipermail/infrastructure/attachments/20130727/0763cc22/attachment.html>

