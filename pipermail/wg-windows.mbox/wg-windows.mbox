From thomas.braibant@gmail.com  Fri May 29 16:06:04 2015
Return-Path: <thomas.braibant@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id DBF9C3C0C1
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 16:06:04 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.218.42 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (thomas.braibant[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-oi0-f42.google.com ([209.85.218.42]:34182)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1YyLw1-0003jQ-Z2 (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <thomas.braibant@gmail.com>); Fri, 29 May 2015 16:10:58 +0100
Received: by oifu123 with SMTP id u123so58678853oif.1
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 08:10:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:from:date:message-id:subject:to:content-type;
 bh=RSwHwPkNIi0PXGAimaopSNNUOzTcD8vdWU2pYt6l97Y=;
 b=CJUrct1f2P1shKSxqjanTWV6ieWrUG6GBD3no8n5kwA6YccseUg2rgL+qhsVvtdLVb
 HrCNBSTJ19UlPYZt2t7ow7vA6MgLl6Sf61SCd8/GdpTJiHnV9FPXuv6HaumA5seQEb/v
 sjculOC5Tm3qWM78WdxepaSI5NzuUgVEoXNI2dPpaBt5yghurBNlM5w5QLf47os0eRbs
 Zv5VnmCuNtO/HRLSGjA+JsxYYqm24eezOiFR6MY8vMkqvgOH+r8Z3dcFzaiic1p2KdEF
 0v0mqdtTTgL+v+TpAnSlQORBGZRlsIgkoVVbnvrRccsy+N8qFSfsIRVjGDHDQKB1+9q7
 RwkQ==
X-Received: by 10.202.241.67 with SMTP id p64mr5492573oih.87.1432912256647;
 Fri, 29 May 2015 08:10:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.202.242.87 with HTTP; Fri, 29 May 2015 08:10:36 -0700 (PDT)
From: Thomas Braibant <thomas.braibant@gmail.com>
Date: Fri, 29 May 2015 17:10:36 +0200
Message-ID: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
To: wg-windows@lists.ocaml.org
Content-Type: multipart/alternative; boundary=94eb2c0942360d494b051739e2c6
X-Mailman-Approved-At: Fri, 29 May 2015 16:11:12 +0100
Subject: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 29 May 2015 15:06:04 -0000

--94eb2c0942360d494b051739e2c6
Content-Type: text/plain; charset=UTF-8

Hi,

Thanks for joining this working group. Its goal is to find out how to
improve the state of OCaml and its ecosystem on Windows.

Some of the tasks that we might address (this list is by no mean meant to
be exhaustive nor normative):

- Gather information from the community  about the use of the various
versions of OCaml available on Windows, and understand what kind of
environment people are working with. (BTW, I think a good way to get the
discussion rolling might be to describe each other's setup to use OCaml on
Windows.)

- Finalize OPAM support for Windows (this is listed on the OPAM 1.3
roadmap). When this support is in place, many OCaml packages should work
out of the box (with the proviso that many packages assume a unix-ish
environment for their build system).

- Discuss how to help package developers improve Windows support. One way
to do that could be to provide know-how about how to setup continuous
integration on services like Appveyor to check that packages build on
typical Windows setups.

- Find a solution for users of WODI, the GODI based OCaml distribution for
Windows, which has been shutdown. WODI was able to compile OCaml related
software (using Cygwin as an environment), but was also able to install
binary packages. (In some cases, some non-trivial patches  were applied to
make package usable on Windows.) Some of the sources needed to use WODI are
still available, but the system does not work out of the box now that the
server has gone offline. With a little work, we might be able to bring it
back, to smooth the transition.

- Discuss the state of cross compilation to Windows.

- Advertise OCamlPro's OCPWin commercial effort. (I will leave Fabrice tell
a bit more about that.)

- Discuss how to pool resources (if needed) to work toward these goals.

Many thanks to Anil and OcamlLabs for hosting this mailing list.

Thomas

--94eb2c0942360d494b051739e2c6
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi,<div><br></div><div>Thanks for joining this working gro=
up. Its goal is to find out how to improve the state of OCaml and its ecosy=
stem on Windows.=C2=A0</div><div><br></div><div>Some of the tasks that we m=
ight address (this list is by no mean meant to be exhaustive nor normative)=
:</div><div><br></div><div>- Gather information from the community =C2=A0ab=
out the use of the various versions of OCaml available on Windows, and unde=
rstand what kind of environment people are working with. (BTW, I think a go=
od way to get the discussion rolling might be to describe each other&#39;s =
setup to use OCaml on Windows.)</div><div><br></div><div><div>- Finalize OP=
AM support for Windows (this is listed on the OPAM 1.3 roadmap). When this =
support is in place, many OCaml packages should work out of the box (with t=
he proviso that many packages assume a unix-ish environment for their build=
 system).=C2=A0<br></div></div><div><br></div><div>- Discuss how to help pa=
ckage developers improve Windows support. One way to do that could be to pr=
ovide know-how about how to setup continuous integration on services like A=
ppveyor to check that packages build on typical Windows setups.=C2=A0</div>=
<div><br></div><div>- Find a solution for users of WODI, the GODI based OCa=
ml distribution for Windows, which has been shutdown. WODI was able to comp=
ile OCaml related software (using Cygwin as an environment), but was also a=
ble to install binary packages. (In some cases, some non-trivial patches =
=C2=A0were applied to make package usable on Windows.) Some of the sources =
needed to use WODI are still available, but the system does not work out of=
 the box now that the server has gone offline. With a little work, we might=
 be able to bring it back, to smooth the transition.=C2=A0</div><div><br></=
div><div>- Discuss the state of cross compilation to Windows.=C2=A0</div><d=
iv><br></div><div>- Advertise OCamlPro&#39;s OCPWin commercial effort. (I w=
ill leave Fabrice tell a bit more about that.)<br></div><div><br></div><div=
><div>- Discuss how to pool resources (if needed) to work toward these goal=
s.=C2=A0</div></div><div>=C2=A0</div><div><div>Many thanks to Anil and Ocam=
lLabs for hosting this mailing list.</div></div><div><br></div><div>Thomas<=
/div><div><br></div><div><br></div><div><br></div></div>

--94eb2c0942360d494b051739e2c6--

From john@coherentgraphics.co.uk  Fri May 29 17:32:54 2015
Return-Path: <john@coherentgraphics.co.uk>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 435C03C0C1
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 17:32:54 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mx2.ukhost4u.com ([188.64.186.7]:40386)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256)
 id 1YyNI3-0003Q3-kP (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <john@coherentgraphics.co.uk>); Fri, 29 May 2015 17:37:47 +0100
Received: from bluechip4.ukhost4u.com ([188.64.184.40])
 by mx2.ukhost4u.com with esmtps (TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256)
 (Exim 4.85) (envelope-from <john@coherentgraphics.co.uk>)
 id 1YyNHz-0003i7-3a; Fri, 29 May 2015 17:37:46 +0100
Received: from [86.6.29.185] (port=56178 helo=[192.168.0.3])
 by bluechip4.ukhost4u.com with esmtpsa (TLSv1:DHE-RSA-CAMELLIA256-SHA:256)
 (Exim 4.85) (envelope-from <john@coherentgraphics.co.uk>)
 id 1YyNHq-002BWX-Pm; Fri, 29 May 2015 17:37:43 +0100
Message-ID: <556895CD.8080302@coherentgraphics.co.uk>
Date: Fri, 29 May 2015 17:37:33 +0100
From: John Whitington <john@coherentgraphics.co.uk>
User-Agent: Postbox 3.0.11 (Macintosh/20140602)
MIME-Version: 1.0
To: Thomas Braibant <thomas.braibant@gmail.com>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
In-Reply-To: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-OutGoing-Spam-Status: No, score=-1.0
X-AuthUser: john@coherentgraphics.co.uk
X-AntiAbuse: This header was added to track abuse,
 please include it with any abuse report
X-AntiAbuse: Primary Hostname - bluechip4.ukhost4u.com
X-AntiAbuse: Original Domain - 
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - coherentgraphics.co.uk
X-Get-Message-Sender-Via: bluechip4.ukhost4u.com: none
X-Filter-ID: s0sct1PQhAABKnZB5plbIf846yA3iTMvdsVmSdrHPMU9CTo+a6AtXGOZ5s/KMzk3GXNQvgP2LFpq
 9ASq+UttQRs4Y1LZPufSrlRexWb3FNQNakTNrIFM3bwUMnmv26VMZ9pDc5Fdnf7iDeHKOUxRpiIC
 W5VdffzwxzvcgKea+TjkCjCFDQLnOxeWd7978+hmZQ6HQKS1Lr1+867LgGy7Az8k7SLrDH1HkZtl
 ROCBPUSZ+YONlsvYVDSgfjGG1+s4Ibtf63VNbf0lrvssY+k7ABJb4C5q6I3pN9sSkSMK+JbwNdu4
 wbYS3XcKZpA/Vh77/I3JRyP6d5bGyIYeh35l5wL/MDOCJ/t4SZIacywiJljQ08vWrPDgMXSp0PD/
 +0YjjDD2zolvjDrCgXkx6eSI/y/eWZnkDK5AbghVm84N3PJ67360/bOtDEybUvAx7JBxGm5mTofP
 ZbUIc7IlmvcHSotbyffbAaux93nRmisP84L6GjDNaY8d8Lx0wJjIoNBlInfuaIsvbJanzz2wHLPS
 WQS2VZuYuMO9f/XxMY71suFZP1t5nYYkdH7qIRbTC4QeP9NmbLEzYUBlJj1Mw1Gk9aJzjZfyyzIT
 QYsvzQe9Tr0oTK9ekb1o+eX8wacuNQNJASJFC/49WOPBr5nlEUI4xDDD6HIZ3se/QLw5ro/cA4VI
 pKKMQaElAxsSmXAfCij2By6Zrq2+sZUPR7nb6N1HA9gkZ/WPB9yTrp07R8cfFjg=
X-Report-Abuse-To: spam@mx1.ukhost4u.com
X-Filter-Fingerprint: IFrWXGses7OKB5S5G8/dJRn/7L7+nnclbWGk7OJ1jHJA3cTUQ1R++keuE7RDJ8Kg3RbMLUalw1oC
 mj99/u+PoqoVy8a3lsStJtAvpObFX0Wok1JBYnOLzfRIhlEHQynLUpndEJ0YoaLytXXo8BMTaVt0
 ARHRi6XGuAluI1udprFy32DUYpEhA3j9NJFmItfypuoazoDH3m92PL21GfhFYWcYmGLKZUTyGy/B
 A6iJtsD8WFC+rpTT4JYvoDjVeZUw3fI9smEy0EupqfCN6sn6Zg==
X-Originating-IP: 188.64.184.40
X-SpamExperts-Domain: bluechip4.ukhost4u.com
X-SpamExperts-Username: 188.64.184.40
Authentication-Results: ukhost4u.com; auth=pass
 smtp.auth=188.64.184.40@bluechip4.ukhost4u.com
X-SpamExperts-Outgoing-Class: ham
X-SpamExperts-Outgoing-Evidence: Combined (0.19)
X-Recommended-Action: accept
X-Mailman-Approved-At: Fri, 29 May 2015 18:20:37 +0100
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 29 May 2015 16:32:54 -0000

Hi,

Thanks for setting up this list.

Thomas Braibant wrote:
> - Gather information from the community  about the use of the various
> versions of OCaml available on Windows, and understand what kind of
> environment people are working with. (BTW, I think a good way to get the
> discussion rolling might be to describe each other's setup to use OCaml
> on Windows.)

I have relatively simple needs: compiling our commercial command line 
software from C and OCaml sources. It's easier when OCamlfind is 
installed, but there are no other prerequisites.

Some observations, in no particular order:

a) I use virtual machines for compiling. It can be tedious to install 32 
and 64 bit OCaml toolchains on the same machine. This works well.

b) For 32 bit, I use Jonathan Protz's installer:

http://protz.github.io/ocaml-installer/

This is stuck at 4.01.0. It would be nice to have it up to date. It 
seems to work well.

c) For 64 bit, I use

http://caml.inria.fr/mantis/view.php?id=5179

This takes about 2 hours to manually install, and is very complicated. 
It would be great to have this ported into trunk.

It's stuck at 3.12.1.

(I need 64 bit Windows builds because customers want >2gb PDF files, for 
some reason...)

Someone mentioned once that the 64 bit windows build has failures, such 
as uncaught exceptions causing a stack overflow. Perhaps there are other 
issues to fix too. But, I have multiple customers using it with zero 
complaints so far.

d) I tried the OCamlPro 64 bit port, and didn't manage to compile my 
project, but the existence of these ports is great:

https://github.com/OCamlPro/ocpwin-distrib/issues/7

e) It would be lovely to have 'official' Windows compilers again, or at 
least on 'blessed' set, even if they are produced by a third party. I 
thought we were close with Protz's work, but I assume he no longer has 
time or inclination.

Cheers,

-- 
John Whitington
Director, Coherent Graphics Ltd
http://www.coherentpdf.com/


From frederic.bour@lakaban.net  Fri May 29 18:55:02 2015
Return-Path: <frederic.bour@lakaban.net>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 82DFD3C0C1
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 18:55:02 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [195.110.122.171 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from authsmtp86.register.it ([195.110.122.171]:32942
 helo=authsmtp.register.it)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtp id 1YyOZS-0006Gj-SJ (Exim 4.82_3-c0e5623) for
 wg-windows@lists.ocaml.org
 (return-path <frederic.bour@lakaban.net>); Fri, 29 May 2015 18:59:56 +0100
Received: from plm.lakaban.net ([91.121.70.154]) by paganini34 with 
 id ZtzT1q00t3KiuxX01tzTwt; Fri, 29 May 2015 19:59:30 +0200
X-Rid: antoine@vittecoq.net@91.121.70.154
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8;
 format=flowed
Content-Transfer-Encoding: 8bit
Date: Fri, 29 May 2015 13:56:37 -0400
From: =?UTF-8?Q?Fr=C3=A9d=C3=A9ric_Bour?= <frederic.bour@lakaban.net>
To: Thomas Braibant <thomas.braibant@gmail.com>
In-Reply-To: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Message-ID: <bb6cff18f1e7ac723fa6f1879313f65a@ygg-drasil.fr>
X-Sender: frederic.bour@lakaban.net
User-Agent: Roundcube Webmail/1.1.1
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 29 May 2015 17:55:02 -0000

Hi,

It's nice to have this list. I will share a few words about the state of 
Merlin in windows world.

We got some Merlin builds working under windows. The process relied on 
Jonathan's OCaml distribution, so we had a working version of 4.01 and 
beta version for 4.02.
The workflow is there, but has been untouched for a long time as we have 
no (apparent) users. If people are interested, I can revive test 
versions.

Also, the workflow might be of interest as it is deceptively simple:
1) We have a wine prefix with Jonathan's ocaml and relevant ocamlfind 
packages installed (all in a tarball, ready to be extracted).
2) Merlin is built under Linux using make and OCamlMakefile; we only 
prepend "wine" to invocation of ocaml tools. This produces an 
ocamlmerlin.exe without further work.
3) It's tested first under Unix, with native vim and emacs, once again 
only by prefixing the ocamlmerlin invocation with "wine" (and setting up 
wine vfs so that cmi files are found).
4) After that I tested on two windows machines, the binary was 
relocatable and could just be distributed standalone, following windows 
habits.

The main pain point was to get ocaml packages installed, the only 
dependency is yojson and it was installed by hacking makefiles a lot.
(Only changes needed to merlin were related to signals and handling of 
paths)

Fred

Le , Thomas Braibant a écrit :
> Hi,
> 
> Thanks for joining this working group. Its goal is to find out how to
> improve the state of OCaml and its ecosystem on Windows.
> 
> Some of the tasks that we might address (this list is by no mean meant
> to be exhaustive nor normative):
> 
> - Gather information from the community  about the use of the various
> versions of OCaml available on Windows, and understand what kind of
> environment people are working with. (BTW, I think a good way to get
> the discussion rolling might be to describe each other's setup to use
> OCaml on Windows.)
> 
> - Finalize OPAM support for Windows (this is listed on the OPAM 1.3
> roadmap). When this support is in place, many OCaml packages should
> work out of the box (with the proviso that many packages assume a
> unix-ish environment for their build system).
> 
> - Discuss how to help package developers improve Windows support. One
> way to do that could be to provide know-how about how to setup
> continuous integration on services like Appveyor to check that
> packages build on typical Windows setups.
> 
> - Find a solution for users of WODI, the GODI based OCaml distribution
> for Windows, which has been shutdown. WODI was able to compile OCaml
> related software (using Cygwin as an environment), but was also able
> to install binary packages. (In some cases, some non-trivial patches
> were applied to make package usable on Windows.) Some of the sources
> needed to use WODI are still available, but the system does not work
> out of the box now that the server has gone offline. With a little
> work, we might be able to bring it back, to smooth the transition.
> 
> - Discuss the state of cross compilation to Windows.
> 
> - Advertise OCamlPro's OCPWin commercial effort. (I will leave Fabrice
> tell a bit more about that.)
> 
> - Discuss how to pool resources (if needed) to work toward these
> goals.
> 
> Many thanks to Anil and OcamlLabs for hosting this mailing list.
> 
> Thomas
> 
> 
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows


From edwin+ml-ocaml@etorok.net  Fri May 29 19:55:30 2015
Return-Path: <edwin+ml-ocaml@etorok.net>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id A5E5D3C0C1
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 19:55:30 +0100 (BST)
X-Cam-SpamDetails: score -0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail.etorok.net ([62.210.252.135]:54022)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256)
 id 1YyPW3-0005QB-ZC (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <edwin+ml-ocaml@etorok.net>); Fri, 29 May 2015 20:00:24 +0100
Received: by mail.etorok.net (OpenSMTPD) with ESMTP id eaceb011
 for <wg-windows@lists.ocaml.org>;
 Fri, 29 May 2015 19:00:23 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha1; c=simple; d=etorok.net; h=message-id
 :date:from:mime-version:to:subject:references:in-reply-to
 :content-type:content-transfer-encoding; s=ml; bh=7jBetB272zUwXQ
 ZaWmfzo6gRBf0=; b=R1HZbku2uUx+xKTXbHNwfjrshs/pKw81qKGY2CLLRpUsQO
 V4uOxWS3hqsJskMgNGflknrW3uYlwRASUH2pk3moI4LLh6sAM7VHaFk5ZNNyx0gN
 NUuU8mfXwO4BDmIFb3IwHMW3D79L1a3X0Vz5Glu5R4KAyVyq8zVYIViHkLrtg=
DomainKey-Signature: a=rsa-sha1; c=simple; d=etorok.net; h=message-id
 :date:from:mime-version:to:subject:references:in-reply-to
 :content-type:content-transfer-encoding; q=dns; s=ml; b=UfAg4IVg
 WnsZWI/XCkejDXV4P6Hhk43z7pv1ZnmWImEAOvTzJQAtTcpQyseL1VBpifnaj9CX
 VV2D5hBOUAqgZM902ekMOZ5fITi60U3DXJr1KnKECcfzfc/LN0wYlhL8Cxs41CXE
 uQ0/KOgbtZIn5K06M16VaqaME7fQM+WCkpY=
Received: by mail.etorok.net (OpenSMTPD) with ESMTPSA id f7dbb5a5
 TLS version=TLSv1/SSLv3 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128 verify=NO
 for <wg-windows@lists.ocaml.org>;
 Fri, 29 May 2015 19:00:23 +0000 (UTC)
Message-ID: <5568B746.4050607@etorok.net>
Date: Fri, 29 May 2015 22:00:22 +0300
From: =?windows-1252?Q?T=F6r=F6k_Edwin?= <edwin+ml-ocaml@etorok.net>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Icedove/31.7.0
MIME-Version: 1.0
To: wg-windows@lists.ocaml.org
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
In-Reply-To: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 7bit
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 29 May 2015 18:55:30 -0000

On 05/29/2015 06:10 PM, Thomas Braibant wrote:
> Hi,
> 
> Thanks for joining this working group. Its goal is to find out how to
> improve the state of OCaml and its ecosystem on Windows.
> 
> Some of the tasks that we might address (this list is by no mean
> meant to be exhaustive nor normative):
> 
> - Gather information from the community  about the use of the various
> versions of OCaml available on Windows, and understand what kind of
> environment people are working with. (BTW, I think a good way to get
> the discussion rolling might be to describe each other's setup to use
> OCaml on Windows.)

I don't use Windows myself at all, but I've been recently asked how to build an OCaml application on windows.
Here is my very short experience with OCaml on Windows:
 - I used WODI with Cygwin64/Cygwin32 and OCaml 4.02.1 due to the large number of OCaml and C libraries available (notably Lwt and OpenSSL)
 - I tried to build my application however it failed due to path errors (more on this below)
 - I tried building opam from git, and it succeeded, although almost any package I tried to opam install failed to build
 - for some reason Cygwin64 executables keep crashing
 - I gave up after WODI was shutdown, waiting until opam has official Windows support 

Path errors
-----------

The errors looked like this, and it took me a while to figure out that this is because the build system is Cygwin but ocamlfind is a Win32 application
and has no knowledge of what /cygdrive is:
ocamlfind: Bad configuration: Cannot mkdir /cygdrive/c/libre/source/_build/lib/ocaml/site-lib\re because a path component does not exist or is not a directory
File "dynlink_wrapper.ml", line 1, characters 13-14: Illegal character (\000)

I worked this around by using `cygpath -m` in my build system in a few places, normalizing all paths to use / and replacing symlinks with cp.

The path separators are also mixed (/ vs \, because build system uses / in queries like `pwd`, and Filename.concat uses \),  but IIRC this actually worked.
I think native Win32 apps might support a path made all of / these days, not sure why we have to go through all the trouble of trying to use \, but as a Unix person I probably miss some details here.

Cygwin64 unreliability
----------------------

I don't know if the bug is in Windows, Cygwin64 or my VM configuration but the build system itself crashes a lot and randomly
(there seems to be plenty of RAM available).
Even things like make.exe or rm.exe crash with: segfault, fork: resource unavailable, exit code -1073741819.
Restarting the cygwin shell helps sometimes but the errors are soon back, even when using just make -j1.
The situation was bad enough that I had to repeat the build  4-5 times until it finally succeeded as it kept crashing in different places.
Someone else tried WODI32 and didn't see such errors there, so that seems like a more reliable build system.
Was about to report this as a bug in Cygwin64, but next week WODI was shutdown so that ended my Windows testing as well.

Functions not implemented in Unix module
----------------------------------------

Although the build system was cygwin I got a native Win32 executable apparently, as it failed at runtime as various functions from the Unix module are not implemented.
Luckily this is all well documented, so after adding some conditional code I was able to make some progress. Would be better if I could override these functions
with a dummy implementation to make sure I don't get runtime errors.

> 
> - Finalize OPAM support for Windows (this is listed on the OPAM 1.3
> roadmap). When this support is in place, many OCaml packages should
> work out of the box (with the proviso that many packages assume a
> unix-ish environment for their build system).

Is there a way to have the build system and ocamlfind/ocamlopt/ocamlc agree on the format of paths?
(i.e. either both of them are Cygwin or both of them native Win32 apps but not a mix)

> 
> - Discuss how to help package developers improve Windows support. One
> way to do that could be to provide know-how about how to setup
> continuous integration on services like Appveyor to check that
> packages build on typical Windows setups.
> 
> - Find a solution for users of WODI, the GODI based OCaml
> distribution for Windows, which has been shutdown. WODI was able to
> compile OCaml related software (using Cygwin as an environment), but
> was also able to install binary packages. (In some cases, some
> non-trivial patches  were applied to make package usable on Windows.)
> Some of the sources needed to use WODI are still available, but the
> system does not work out of the box now that the server has gone
> offline. With a little work, we might be able to bring it back, to
> smooth the transition.
> 
> - Discuss the state of cross compilation to Windows.

This seems similar to the Android cross-compilation repository:
https://github.com/vouillon/opam-windows-repository

Best regards,
--Edwin

From jonathan.protzenko@gmail.com  Fri May 29 19:57:44 2015
Return-Path: <jonathan.protzenko@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id BF8C93C0C1
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 19:57:44 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.192.174 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (jonathan.protzenko[at]gmail.com)
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-pd0-f174.google.com ([209.85.192.174]:36184)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1YyPYE-0006bH-kJ (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <jonathan.protzenko@gmail.com>); Fri, 29 May 2015 20:02:38 +0100
Received: by pdfh10 with SMTP id h10so59799658pdf.3
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 12:02:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=message-id:date:from:user-agent:mime-version:to:subject
 :content-type:content-transfer-encoding;
 bh=mmJmuF9CzFljyD/nHMiJ+ccM65gNP/dD3chYh5Ycldg=;
 b=BR/wsnoKfqcGW0GZYSEBJJgrci6/qSAPr1YrujW0l0/Hz6rxaBHyFw4zWr7Y+Rl0gr
 w/AXtV4hM8JqNOtxGcU8OGHfXm/MJbbpuV3KH9+4jG0JpeddheO08WdDeiKZbg0P8Mgf
 yQ6gzSAP7Sjmq6RKPmt/5gQJ4LUBDZWs1HxJ3IEUhGb7pc4vEip4Y5ALxDj91MSwwYXo
 oPVAN3/4tXwFxgUvtHJy1AxLdWmDKJ9ebXmYkyo5jirQg2winVcKy83zE0dQ8ayHSgS8
 +BtjdwSOeP/d2NRrzazAiJxLorm76DrqQW36gyJ5OZsjexTlHFedVy4T9ichpwvnCBdm
 020g==
X-Received: by 10.67.24.65 with SMTP id ig1mr17291943pad.61.1432926156626;
 Fri, 29 May 2015 12:02:36 -0700 (PDT)
Received: from ?IPv6:2001:4898:d8:1001:3826:a534:667:d602?
 ([2001:4898:80e8:ed31::5])
 by mx.google.com with ESMTPSA id nz12sm6345180pdb.49.2015.05.29.12.02.35
 for <wg-windows@lists.ocaml.org>
 (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Fri, 29 May 2015 12:02:35 -0700 (PDT)
Message-ID: <5568B7CA.8010904@gmail.com>
Date: Fri, 29 May 2015 12:02:34 -0700
From: Jonathan Protzenko <jonathan.protzenko@gmail.com>
User-Agent: Mozilla/5.0 (Windows NT 6.3; WOW64;
 rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: wg-windows@lists.ocaml.org
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
Subject: [wg-windows] Status of the OCaml Installer for Windows: the way
	forward?
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 29 May 2015 18:57:44 -0000

Dear OCaml-on-Windows aficionados,

I thought I'd give a quick update on the status of my installer and more 
generally the way I see things moving forward in the OCaml for Windows 
ecosystem.

About the installer: it hasn't been updated for a while. I'll issue a 
new release shortly. I'll drop the ActiveTCL step (no stable URL, causes 
problems) and I'll also drop Emacs (I don't think anyone uses that setup 
for real).

About the way forward: there's two assumptions that I'd like to bring to 
this mailing-list.
- Most OCaml packages need / assume a Unix-ish environment to build.
- Binary packages are likely not going to happen soon.

Therefore, what is urgently needed is:
i) an installer that brings you the bare minimum (ocaml, flexdll, plus 
perhaps camlp4, ocamlfind and batteries), and
ii) a unix-ish environment to make sure tools like ocamlbuild find the 
required utilities such as "bash" that they (infortunately) require in 
order to run, and
iii) a way to distribute the toolchain (the assembler, a.k.a. 
i686-mingw-w64-as) required by ocaml (more precisely, by flexdll),
iv) a package manager that can take it from there and fetch/compile the 
rest.

The installer I provide satisfies i). Since it installs Cygwin, ii) and 
iii) are satisfied as well, because cygwin packages the /native/ 
compilers from the mingw64 project. The only remaining pain point is 
iv), and for that I really think we need OPAM to work out of the box on 
Windows.

Once OPAM works superbly well, we won't need the installer anymore, because:
- OPAM will be distributed as a statically-linked binary, that
- takes care of installing even the OCaml compiler itself, and
- is capable of installing the remaining binaries, as long as
- the user operates in a cygwin environment so as to get bash, sed, and 
the toolchain from mingw.

Please keep in mind that we're only talking of Cygwin as a way to get a 
Unix-ish environment. In the scenario outlined above, the OCaml 
compilers are, and generate, native windows programs.

Of course, that's a very biased point of view, but I'd be happy to hear 
other's thoughts as to what exactly this doesn't fit their needs!

Best,

Jonathan

From yotambarnoy@gmail.com  Fri May 29 20:14:51 2015
Return-Path: <yotambarnoy@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id E83E33C0C1
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 20:14:51 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.160.173 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (yotambarnoy[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-yk0-f173.google.com ([209.85.160.173]:33101)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1YyPom-0004Bz-rS (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <yotambarnoy@gmail.com>); Fri, 29 May 2015 20:19:46 +0100
Received: by ykfr66 with SMTP id r66so25170821ykf.0
 for <wg-windows@lists.ocaml.org>; Fri, 29 May 2015 12:19:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:from:date:message-id:subject:to
 :cc:content-type;
 bh=uwkPePO3VSy8Z+BD+qMJ0iCE6nmFCs5yGPi316E7Z8E=;
 b=VtiEJZX6B0176sZIlV2XFi4PzzXm/SFlUYNXD8HRa2OiQ7lD1FL5Ta5c2F+EH2Ld5X
 qv8cGyNaydo/oBa4mEIJYqO/kpB/uxaeXGT7MFJeE3ETuzECn5MtO9bvsZ/CrtUgAdFe
 wJq3W5Guu8Vxdce9pDOx6bX4SKhlUxPQ9hAtG9h9scFQ9mwyUwy9C3LCjXBI5vPuCWDq
 o+mKjgmRoKa95lmFctjBwhWkMoiei/LEcTxQQIUKYeqli4VZjTHXfyVK+kLwqxuwqMcB
 l88HbGuHBUwZsels8VqIqDFIoYCxr8atovRJmO0GVZD2pOnOVV52952A9+Ttcu2TGoK+
 O1QA==
X-Received: by 10.170.206.139 with SMTP id x133mr11554240yke.126.1432927183447; 
 Fri, 29 May 2015 12:19:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.129.43.132 with HTTP; Fri, 29 May 2015 12:19:23 -0700 (PDT)
In-Reply-To: <5568B746.4050607@etorok.net>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
 <5568B746.4050607@etorok.net>
From: Yotam Barnoy <yotambarnoy@gmail.com>
Date: Fri, 29 May 2015 15:19:23 -0400
Message-ID: <CAN6ygO=4gB=tVZFBX52o9b69M+GUO1LySXPPcDHwdYz1OE=SVQ@mail.gmail.com>
To: =?UTF-8?B?VMO2csO2ayBFZHdpbg==?= <edwin+ml-ocaml@etorok.net>
Content-Type: multipart/alternative; boundary=001a113a0234c22ed705173d5bc1
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 29 May 2015 19:14:52 -0000

--001a113a0234c22ed705173d5bc1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I'll join in thanking you for making this list, Thomas.

I consider this the 2nd most important issue to the health of the OCaml
ecosystem, right after multicore.

Unfortunately, we don't have the feedback of heavy windows users, because
those have been selected out of the OCaml ecosystem. However, looking at
just about every language out there, I think the ultimate goal has to be
first class Windows support. This is my opinion at least. Cygwin is ok for
now, but the aim has to be full windows support if OCaml is going to be
seen as a viable option by the majority of the enterprise crowd. That means
eventually getting rid of every Unix-ism out there, starting with
ocamlbuild and ocamlfind, moving on to opam, and then making a curated list
of packages on opam that build on windows. In fact, we should have a
separate list for packages that build on cygwin, and one for packages that
build on native windows, and we should encourage developers to move towards
the latter list.

As an aside, if you're trying to install cygwin on a windows VM (such as
the ones Microsoft distributes freely) and getting errors, it might have to
do with symlinks. Cygwin has 3 modes of emulating symlinks on windows, and
it can get fooled by the VM into thinking it has low-level support that
isn't really there. All symlinks are then read as regular files, messing up
just about everything. Therefore, before installing cygwin, set the
environment variable CYGWIN to 'winsymlinks:lnk' in the windows environment=
.

-Yotam

On Fri, May 29, 2015 at 3:00 PM, T=C3=B6r=C3=B6k Edwin <edwin+ml-ocaml@etor=
ok.net>
wrote:

> On 05/29/2015 06:10 PM, Thomas Braibant wrote:
> > Hi,
> >
> > Thanks for joining this working group. Its goal is to find out how to
> > improve the state of OCaml and its ecosystem on Windows.
> >
> > Some of the tasks that we might address (this list is by no mean
> > meant to be exhaustive nor normative):
> >
> > - Gather information from the community  about the use of the various
> > versions of OCaml available on Windows, and understand what kind of
> > environment people are working with. (BTW, I think a good way to get
> > the discussion rolling might be to describe each other's setup to use
> > OCaml on Windows.)
>
> I don't use Windows myself at all, but I've been recently asked how to
> build an OCaml application on windows.
> Here is my very short experience with OCaml on Windows:
>  - I used WODI with Cygwin64/Cygwin32 and OCaml 4.02.1 due to the large
> number of OCaml and C libraries available (notably Lwt and OpenSSL)
>  - I tried to build my application however it failed due to path errors
> (more on this below)
>  - I tried building opam from git, and it succeeded, although almost any
> package I tried to opam install failed to build
>  - for some reason Cygwin64 executables keep crashing
>  - I gave up after WODI was shutdown, waiting until opam has official
> Windows support
>
> Path errors
> -----------
>
> The errors looked like this, and it took me a while to figure out that
> this is because the build system is Cygwin but ocamlfind is a Win32
> application
> and has no knowledge of what /cygdrive is:
> ocamlfind: Bad configuration: Cannot mkdir
> /cygdrive/c/libre/source/_build/lib/ocaml/site-lib\re because a path
> component does not exist or is not a directory
> File "dynlink_wrapper.ml", line 1, characters 13-14: Illegal character
> (\000)
>
> I worked this around by using `cygpath -m` in my build system in a few
> places, normalizing all paths to use / and replacing symlinks with cp.
>
> The path separators are also mixed (/ vs \, because build system uses / i=
n
> queries like `pwd`, and Filename.concat uses \),  but IIRC this actually
> worked.
> I think native Win32 apps might support a path made all of / these days,
> not sure why we have to go through all the trouble of trying to use \, bu=
t
> as a Unix person I probably miss some details here.
>
> Cygwin64 unreliability
> ----------------------
>
> I don't know if the bug is in Windows, Cygwin64 or my VM configuration bu=
t
> the build system itself crashes a lot and randomly
> (there seems to be plenty of RAM available).
> Even things like make.exe or rm.exe crash with: segfault, fork: resource
> unavailable, exit code -1073741819.
> Restarting the cygwin shell helps sometimes but the errors are soon back,
> even when using just make -j1.
> The situation was bad enough that I had to repeat the build  4-5 times
> until it finally succeeded as it kept crashing in different places.
> Someone else tried WODI32 and didn't see such errors there, so that seems
> like a more reliable build system.
> Was about to report this as a bug in Cygwin64, but next week WODI was
> shutdown so that ended my Windows testing as well.
>
> Functions not implemented in Unix module
> ----------------------------------------
>
> Although the build system was cygwin I got a native Win32 executable
> apparently, as it failed at runtime as various functions from the Unix
> module are not implemented.
> Luckily this is all well documented, so after adding some conditional cod=
e
> I was able to make some progress. Would be better if I could override the=
se
> functions
> with a dummy implementation to make sure I don't get runtime errors.
>
> >
> > - Finalize OPAM support for Windows (this is listed on the OPAM 1.3
> > roadmap). When this support is in place, many OCaml packages should
> > work out of the box (with the proviso that many packages assume a
> > unix-ish environment for their build system).
>
> Is there a way to have the build system and ocamlfind/ocamlopt/ocamlc
> agree on the format of paths?
> (i.e. either both of them are Cygwin or both of them native Win32 apps bu=
t
> not a mix)
>
> >
> > - Discuss how to help package developers improve Windows support. One
> > way to do that could be to provide know-how about how to setup
> > continuous integration on services like Appveyor to check that
> > packages build on typical Windows setups.
> >
> > - Find a solution for users of WODI, the GODI based OCaml
> > distribution for Windows, which has been shutdown. WODI was able to
> > compile OCaml related software (using Cygwin as an environment), but
> > was also able to install binary packages. (In some cases, some
> > non-trivial patches  were applied to make package usable on Windows.)
> > Some of the sources needed to use WODI are still available, but the
> > system does not work out of the box now that the server has gone
> > offline. With a little work, we might be able to bring it back, to
> > smooth the transition.
> >
> > - Discuss the state of cross compilation to Windows.
>
> This seems similar to the Android cross-compilation repository:
> https://github.com/vouillon/opam-windows-repository
>
> Best regards,
> --Edwin
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows
>

--001a113a0234c22ed705173d5bc1
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I&#39;ll join in thanking you for making this list, Thomas=
.<div><br></div><div>I consider this the 2nd most important issue to the he=
alth of the OCaml ecosystem, right after multicore.</div><div><br></div><di=
v>Unfortunately, we don&#39;t have the feedback of heavy windows users, bec=
ause those have been selected out of the OCaml ecosystem. However, looking =
at just about every language out there, I think the ultimate goal has to be=
 first class Windows support. This is my opinion at least. Cygwin is ok for=
 now, but the aim has to be full windows support if OCaml is going to be se=
en as a viable option by the majority of the enterprise crowd. That means e=
ventually getting rid of every Unix-ism out there, starting with ocamlbuild=
 and ocamlfind, moving on to opam, and then making a curated list of packag=
es on opam that build on windows. In fact, we should have a separate list f=
or packages that build on cygwin, and one for packages that build on native=
 windows, and we should encourage developers to move towards the latter lis=
t.</div><div><br></div><div>As an aside, if you&#39;re trying to install cy=
gwin on a windows VM (such as the ones Microsoft distributes freely) and ge=
tting errors, it might have to do with symlinks. Cygwin has 3 modes of emul=
ating symlinks on windows, and it can get fooled by the VM into thinking it=
 has low-level support that isn&#39;t really there. All symlinks are then r=
ead as regular files, messing up just about everything. Therefore, before i=
nstalling cygwin, set the environment variable CYGWIN to &#39;winsymlinks:l=
nk&#39; in the windows environment.</div><div><br></div><div>-Yotam</div></=
div><div class=3D"gmail_extra"><br><div class=3D"gmail_quote">On Fri, May 2=
9, 2015 at 3:00 PM, T=C3=B6r=C3=B6k Edwin <span dir=3D"ltr">&lt;<a href=3D"=
mailto:edwin+ml-ocaml@etorok.net" target=3D"_blank">edwin+ml-ocaml@etorok.n=
et</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"marg=
in:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><span class=3D""=
>On 05/29/2015 06:10 PM, Thomas Braibant wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; Thanks for joining this working group. Its goal is to find out how to<=
br>
&gt; improve the state of OCaml and its ecosystem on Windows.<br>
&gt;<br>
&gt; Some of the tasks that we might address (this list is by no mean<br>
&gt; meant to be exhaustive nor normative):<br>
&gt;<br>
&gt; - Gather information from the community=C2=A0 about the use of the var=
ious<br>
&gt; versions of OCaml available on Windows, and understand what kind of<br=
>
&gt; environment people are working with. (BTW, I think a good way to get<b=
r>
&gt; the discussion rolling might be to describe each other&#39;s setup to =
use<br>
&gt; OCaml on Windows.)<br>
<br>
</span>I don&#39;t use Windows myself at all, but I&#39;ve been recently as=
ked how to build an OCaml application on windows.<br>
Here is my very short experience with OCaml on Windows:<br>
=C2=A0- I used WODI with Cygwin64/Cygwin32 and OCaml 4.02.1 due to the larg=
e number of OCaml and C libraries available (notably Lwt and OpenSSL)<br>
=C2=A0- I tried to build my application however it failed due to path error=
s (more on this below)<br>
=C2=A0- I tried building opam from git, and it succeeded, although almost a=
ny package I tried to opam install failed to build<br>
=C2=A0- for some reason Cygwin64 executables keep crashing<br>
=C2=A0- I gave up after WODI was shutdown, waiting until opam has official =
Windows support<br>
<br>
Path errors<br>
-----------<br>
<br>
The errors looked like this, and it took me a while to figure out that this=
 is because the build system is Cygwin but ocamlfind is a Win32 application=
<br>
and has no knowledge of what /cygdrive is:<br>
ocamlfind: Bad configuration: Cannot mkdir /cygdrive/c/libre/source/_build/=
lib/ocaml/site-lib\re because a path component does not exist or is not a d=
irectory<br>
File &quot;<a href=3D"http://dynlink_wrapper.ml" target=3D"_blank">dynlink_=
wrapper.ml</a>&quot;, line 1, characters 13-14: Illegal character (\000)<br=
>
<br>
I worked this around by using `cygpath -m` in my build system in a few plac=
es, normalizing all paths to use / and replacing symlinks with cp.<br>
<br>
The path separators are also mixed (/ vs \, because build system uses / in =
queries like `pwd`, and Filename.concat uses \),=C2=A0 but IIRC this actual=
ly worked.<br>
I think native Win32 apps might support a path made all of / these days, no=
t sure why we have to go through all the trouble of trying to use \, but as=
 a Unix person I probably miss some details here.<br>
<br>
Cygwin64 unreliability<br>
----------------------<br>
<br>
I don&#39;t know if the bug is in Windows, Cygwin64 or my VM configuration =
but the build system itself crashes a lot and randomly<br>
(there seems to be plenty of RAM available).<br>
Even things like make.exe or rm.exe crash with: segfault, fork: resource un=
available, exit code -1073741819.<br>
Restarting the cygwin shell helps sometimes but the errors are soon back, e=
ven when using just make -j1.<br>
The situation was bad enough that I had to repeat the build=C2=A0 4-5 times=
 until it finally succeeded as it kept crashing in different places.<br>
Someone else tried WODI32 and didn&#39;t see such errors there, so that see=
ms like a more reliable build system.<br>
Was about to report this as a bug in Cygwin64, but next week WODI was shutd=
own so that ended my Windows testing as well.<br>
<br>
Functions not implemented in Unix module<br>
----------------------------------------<br>
<br>
Although the build system was cygwin I got a native Win32 executable appare=
ntly, as it failed at runtime as various functions from the Unix module are=
 not implemented.<br>
Luckily this is all well documented, so after adding some conditional code =
I was able to make some progress. Would be better if I could override these=
 functions<br>
with a dummy implementation to make sure I don&#39;t get runtime errors.<br=
>
<span class=3D""><br>
&gt;<br>
&gt; - Finalize OPAM support for Windows (this is listed on the OPAM 1.3<br=
>
&gt; roadmap). When this support is in place, many OCaml packages should<br=
>
&gt; work out of the box (with the proviso that many packages assume a<br>
&gt; unix-ish environment for their build system).<br>
<br>
</span>Is there a way to have the build system and ocamlfind/ocamlopt/ocaml=
c agree on the format of paths?<br>
(i.e. either both of them are Cygwin or both of them native Win32 apps but =
not a mix)<br>
<span class=3D""><br>
&gt;<br>
&gt; - Discuss how to help package developers improve Windows support. One<=
br>
&gt; way to do that could be to provide know-how about how to setup<br>
&gt; continuous integration on services like Appveyor to check that<br>
&gt; packages build on typical Windows setups.<br>
&gt;<br>
&gt; - Find a solution for users of WODI, the GODI based OCaml<br>
&gt; distribution for Windows, which has been shutdown. WODI was able to<br=
>
&gt; compile OCaml related software (using Cygwin as an environment), but<b=
r>
&gt; was also able to install binary packages. (In some cases, some<br>
&gt; non-trivial patches=C2=A0 were applied to make package usable on Windo=
ws.)<br>
&gt; Some of the sources needed to use WODI are still available, but the<br=
>
&gt; system does not work out of the box now that the server has gone<br>
&gt; offline. With a little work, we might be able to bring it back, to<br>
&gt; smooth the transition.<br>
&gt;<br>
&gt; - Discuss the state of cross compilation to Windows.<br>
<br>
</span>This seems similar to the Android cross-compilation repository:<br>
<a href=3D"https://github.com/vouillon/opam-windows-repository" target=3D"_=
blank">https://github.com/vouillon/opam-windows-repository</a><br>
<br>
Best regards,<br>
--Edwin<br>
<div class=3D"HOEnZb"><div class=3D"h5">___________________________________=
____________<br>
wg-windows mailing list<br>
<a href=3D"mailto:wg-windows@lists.ocaml.org">wg-windows@lists.ocaml.org</a=
><br>
<a href=3D"http://lists.ocaml.org/listinfo/wg-windows" target=3D"_blank">ht=
tp://lists.ocaml.org/listinfo/wg-windows</a><br>
</div></div></blockquote></div><br></div>

--001a113a0234c22ed705173d5bc1--

From modlfo@gmail.com  Sat May 30 12:06:58 2015
Return-Path: <modlfo@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id EA4403C0BD
 for <wg-windows@lists.ocaml.org>; Sat, 30 May 2015 12:06:58 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (modlfo[at]gmail.com)
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.215.52 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-la0-f52.google.com ([209.85.215.52]:35592)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1YyegE-0000YU-YA (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <modlfo@gmail.com>); Sat, 30 May 2015 12:11:55 +0100
Received: by labko7 with SMTP id ko7so68548876lab.2
 for <wg-windows@lists.ocaml.org>; Sat, 30 May 2015 04:11:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=content-type:mime-version:subject:from:in-reply-to:date:cc
 :content-transfer-encoding:message-id:references:to;
 bh=/q4ixM6vVg1kZ+9f2vt7i1E+YWWt4hDf1X9NdSqkXL4=;
 b=rj5Zt2orTVVwghxqPAK+KpUOtNVdFg8XPilY6ry6Zp3+2/IFTP9vkKmuq643XsWZL/
 FflO8XyTmkqxfebkwrt4PJiQVZU31IFj/ICKgS9Xbl02yJXO3rzNCLNh4hsxeIodR48V
 o58k25A94vYZ7DOdSIMQemfq56kif1ZtayEaBu0lSqR2To0Y6WD/sBkrNXO/qy1kuvOJ
 Y8v3WzAG2d4Io5A047TC/sFvv1XvQmX4dFHBYMlcH1mNAe+J4t/nyyHpnHWlwKKO3zrT
 uSb+htHZrC2DZYdPsAp6ZQV5Lw39ybve74Tm70/+0WPEcQqOYDsBSkGpnjjD0MWqcf3f
 JgoA==
X-Received: by 10.112.235.133 with SMTP id um5mr12656192lbc.7.1432984313821;
 Sat, 30 May 2015 04:11:53 -0700 (PDT)
Received: from [192.168.1.12] (109-124-136-208.customer.t3.se.
 [109.124.136.208])
 by mx.google.com with ESMTPSA id wh9sm2242618lbb.45.2015.05.30.04.11.52
 (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
 Sat, 30 May 2015 04:11:52 -0700 (PDT)
Content-Type: text/plain; charset=utf-8
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2098\))
From: Leonardo Laguna Ruiz <modlfo@gmail.com>
In-Reply-To: <5568B7CA.8010904@gmail.com>
Date: Sat, 30 May 2015 13:11:51 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <BE95CB14-9A5C-485A-A0D4-90E5014F16E9@gmail.com>
References: <5568B7CA.8010904@gmail.com>
To: Jonathan Protzenko <jonathan.protzenko@gmail.com>
X-Mailer: Apple Mail (2.2098)
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Status of the OCaml Installer for Windows: the way
	forward?
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Sat, 30 May 2015 11:06:59 -0000


Hi, I use ocaml in linux, osx and windows. I don=E2=80=99t use any =
library that I cannot easily compile in all platforms. On windows I use =
the MSVC port since I can link .lib files that I have not compile by =
myself. In order to get Ocaml in windows I have setup a repo with Ocaml =
MSVC 2013 64 bits. There I have a few libraries and tools I use.

- containers
- ocamlgraph
- ppx_deriving
- extlib
- yojson (and it=E2=80=99s dependencies)
- merlin (which I use with sublime text)
- lwt
- batteries

Developing Ocaml programs in windows is not a pleasant experience since =
it lacks of tools that I consider essential like:=20
- utop
- oasis
- ocamldebug (which does not work very well)=20

So I usually write the code on OS X or linux; then I use =
ocamlbuild+cmake to build the executable in all platforms. When I have =
C/C++ bindings I use ocamlbuild to generate a .o or .obj  file which I =
link to the rest of the code using cmake. Using cmake also simplifies =
compilation and linking C++ code.

At work I have developed a few internal tools. The main problem is that =
our developers working on windows (which are a majority) cannot take =
full advantage of the ocaml tools. It really sets them off having to use =
cygwin to build and having only debugging through a console application.=20=


In my company we are currently not distributing any application or =
library written in Ocaml. This is in part due to the uncertain support =
of the Ocaml infrastructure in windows.=20

In summary the points that are important for me when creating an ocaml =
for windows distribution.=20

1.- Having the possibility of easily select the tools (MSVC, =
MinGW,Cygwin) that you want to use.
2.- Distribute asmrun and byterun as binaries for all ocaml ports (this =
will simply the first point) .
3.- Get rid of bash (cygwin) in ocaml tools (ocamlbuild)
4.- Include the common tools to build, edit and debug code. In my case, =
oasis, merlin, utop and some graphical debugger.=20
5.- Integration with multiplatform build system like cmake (which I have =
partially done)

Leonardo



> On 29 May 2015, at 21:02, Jonathan Protzenko =
<jonathan.protzenko@gmail.com> wrote:
>=20
> Dear OCaml-on-Windows aficionados,
>=20
> I thought I'd give a quick update on the status of my installer and =
more generally the way I see things moving forward in the OCaml for =
Windows ecosystem.
>=20
> About the installer: it hasn't been updated for a while. I'll issue a =
new release shortly. I'll drop the ActiveTCL step (no stable URL, causes =
problems) and I'll also drop Emacs (I don't think anyone uses that setup =
for real).
>=20
> About the way forward: there's two assumptions that I'd like to bring =
to this mailing-list.
> - Most OCaml packages need / assume a Unix-ish environment to build.
> - Binary packages are likely not going to happen soon.
>=20
> Therefore, what is urgently needed is:
> i) an installer that brings you the bare minimum (ocaml, flexdll, plus =
perhaps camlp4, ocamlfind and batteries), and
> ii) a unix-ish environment to make sure tools like ocamlbuild find the =
required utilities such as "bash" that they (infortunately) require in =
order to run, and
> iii) a way to distribute the toolchain (the assembler, a.k.a. =
i686-mingw-w64-as) required by ocaml (more precisely, by flexdll),
> iv) a package manager that can take it from there and fetch/compile =
the rest.
>=20
> The installer I provide satisfies i). Since it installs Cygwin, ii) =
and iii) are satisfied as well, because cygwin packages the /native/ =
compilers from the mingw64 project. The only remaining pain point is =
iv), and for that I really think we need OPAM to work out of the box on =
Windows.
>=20
> Once OPAM works superbly well, we won't need the installer anymore, =
because:
> - OPAM will be distributed as a statically-linked binary, that
> - takes care of installing even the OCaml compiler itself, and
> - is capable of installing the remaining binaries, as long as
> - the user operates in a cygwin environment so as to get bash, sed, =
and the toolchain from mingw.
>=20
> Please keep in mind that we're only talking of Cygwin as a way to get =
a Unix-ish environment. In the scenario outlined above, the OCaml =
compilers are, and generate, native windows programs.
>=20
> Of course, that's a very biased point of view, but I'd be happy to =
hear other's thoughts as to what exactly this doesn't fit their needs!
>=20
> Best,
>=20
> Jonathan
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows


From martin.neuhaeusser@siemens.com  Sat May 30 19:38:23 2015
Return-Path: <martin.neuhaeusser@siemens.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 6FF953C0BD
 for <wg-windows@lists.ocaml.org>; Sat, 30 May 2015 19:38:23 +0100 (BST)
X-Cam-SpamDetails: score -5.0 from SpamAssassin-3.3.2-1680203 
 * -5.0 RCVD_IN_DNSWL_HI RBL: Sender listed at http://www.dnswl.org/, high
 *      trust
 *      [194.138.37.40 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from gecko.sbs.de ([194.138.37.40]:52187)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1:DHE-RSA-AES256-SHA:256)
 id 1Yylj5-0004VO-Y9 (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <martin.neuhaeusser@siemens.com>); Sat, 30 May 2015 19:43:20 +0100
Received: from mail2.sbs.de (localhost [127.0.0.1])
 by gecko.sbs.de (8.14.3/8.14.3) with ESMTP id t4UIhHKJ017126;
 Sat, 30 May 2015 20:43:17 +0200
Received: from DEFTHW99ERHMSX.ww902.siemens.net
 (defthw99erhmsx.ww902.siemens.net [139.22.70.133])
 by mail2.sbs.de (8.14.3/8.14.3) with ESMTP id t4UIhHbc023694
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
 Sat, 30 May 2015 20:43:17 +0200
Received: from DEFTHW99ER0MSX.ww902.siemens.net (139.22.70.175) by
 DEFTHW99ERHMSX.ww902.siemens.net (139.22.70.133) with Microsoft SMTP Server
 (TLS) id 14.3.235.1; Sat, 30 May 2015 20:43:16 +0200
Received: from DENBGAT9EK5MSX.ww902.siemens.net ([169.254.12.251]) by
 DEFTHW99ER0MSX.ww902.siemens.net ([139.22.70.175]) with mapi id
 14.03.0235.001; Sat, 30 May 2015 20:43:16 +0200
From: "Neuhaeusser, Martin" <martin.neuhaeusser@siemens.com>
To: Thomas Braibant <thomas.braibant@gmail.com>
Thread-Topic: [wg-windows] Improving the state of OCaml on Windows
Thread-Index: AQHQmiJqtsb2pSnDmU+PpU42Zm70LJ2UwPkw
Date: Sat, 30 May 2015 18:43:16 +0000
Message-ID: <965631B03C670145ABB9F693E51622530D05EC72@DENBGAT9EK5MSX.ww902.siemens.net>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
In-Reply-To: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Accept-Language: de-DE, en-US
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [139.22.70.16]
Content-Type: multipart/alternative;
 boundary="_000_965631B03C670145ABB9F693E51622530D05EC72DENBGAT9EK5MSXw_"
MIME-Version: 1.0
Cc: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Sat, 30 May 2015 18:38:23 -0000

--_000_965631B03C670145ABB9F693E51622530D05EC72DENBGAT9EK5MSXw_
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

SGkgVGhvbWFzLA0KDQp0aGFuayB5b3UgZm9yIHNldHRpbmcgdXAgdGhpcyBsaXN0ISBJIHJlYWxs
eSBob3BlIHRoYXQgaXQgd2lsbCBoZWxwIGluIGltcHJvdmluZyB0aGUgd2F5IE9jYW1sDQpjYW4g
YmUgdXNlZCBvbiBXaW5kb3dzLiBXZSBhcmUgd29ya2luZyBvbiBzb21lIE9DYW1sIHByb2plY3Rz
IHRoYXQgdWx0aW1hdGVseSBuZWVkIHRvDQpiZSBjb21waWxlZCBpbnRvIGEgV2luZG93cy1ETEwg
dXNpbmcgdGhlIE1TVkMtVG9vbGNoYWluLiBUaGUgZGV2ZWxvcG1lbnQgaXRzZWxmIGlzIGRvbmUN
CmVudGlyZWx5IG9uIExpbnV4LiBJbiBwYXJ0aWN1bGFyLCB3ZSByZWx5IG9uIGEgbnVtYmVyIG9m
IHBhY2thZ2VzIG9uIFdpbmRvd3M6DQoNCg0KLSAgICAgICAgT0NhbWwgNC4wMi4xDQoNCi0gICAg
ICAgIEJhdHRlcmllcyAyLjMuMQ0KDQotICAgICAgICBPY2FtbGdyYXBoIDEuOC41DQoNCi0gICAg
ICAgIFJlDQoNCi0gICAgICAgIFpBcml0aCAxLjIuMSAgKHdlIGZhaWxlZCBpbiBidWlsZGluZyBu
ZXdlciB2ZXJzaW9ucykNCg0KLSAgICAgICAgVm9sdCAoYSB2YXJpYW50IG9mIHRoZSBCb2x0IGxv
Z2dpbmcgbGlicmFyeSkNCg0KLSAgICAgICAgbWVuaGlyDQoNCi0gICAgICAgIGNhbWxwNA0KDQpU
byBteSBleHBlcmllbmNlLCBjb21waWxpbmcgdGhlIGNvcmUgY29tcG9uZW50cyAoaS5lLiBPQ2Ft
bCwgZmluZGxpYiwgZmxleGRsbCwgYW5kIGJhdHRlcmllcykNCmZyb20gc2NyYXRjaCB3aXRoIE1T
VkMgZnJvbSBWaXN1YWwgU3R1ZGlvIDIwMTIgd2l0aGluIEN5Z3dpbiwgYm90aCAzMiBhbmQgNjQg
Yml0cywgaXMgcmF0aGVyDQpzdHJhaWdodC1mb3J3YXJkIGFuZCB3ZWxsIHN1cHBvcnRlZC4NCg0K
QnVpbGRpbmcgdGhlIG90aGVyIGxpYnJhcmllcyBoYXMgYmVlbiByYXRoZXIgZGlmZmljdWx0OiBD
b25mdXNpb24gYXJpc2VzIHdoZW4gaXQgY29tZXMgdG8gc3BlY2lmeWluZw0Kc2VhcmNoIHBhdGhz
IHdoZW4gY29uZmlndXJpbmcgdGhlIHBhY2thZ2UgYnVpbGRzOiBTb21ldGltZXMsIG9uZSBoYXMg
dG8gc3BlY2lmeSBVbml4LWxpa2UNCnBhdGhuYW1lcy4gQXQgb3RoZXIgdGltZXMsIG9uZSBoYXMg
dG8gdXNlIFdpbmRvd3MgcGF0aG5hbWVzLiBBbmQgdGhlIHF1ZXN0aW9uIHdoZXRoZXIgdG8NCnVz
ZSBzbGFzaGVzIG9yIGJhY2tzbGFzaGVzLCB0aGUgZmlsZSBleHRlbnNpb25zIGFuZCBuYW1pbmcg
Y29udmVudGlvbnMsIGV0Yy4gd29yc2VuIHRoZSBzaXR1YXRpb24uDQpTb21lIGV4YW1wbGVzOg0K
DQoNCsK3ICAgICAgICBNZW5oaXIgZ2V0cyBjb25mdXNlZCBieSBXaW5kb3dzIGFuZCBVbml4LWxp
a2UgUGF0aG5hbWVzIHdoZW4gYnVpbHQgb24gQ3lnd2luLg0KSGludDogWW91IGhhdmUgdG8gc3Bl
Y2lmeSBXaW5kb3dzLVBhdGhuYW1lcywgYnV0IHJlcGxhY2UgYW55IGJhY2tzbGFzaGVzIGJ5IHNs
YXNoZXMNCnRvIHNldCB0aGUgUFJFRklYIGluIHRoZSBtZW5oaXIgY29uZmlndXJhdGlvbuKApg0K
DQrCtyAgICAgICAgVGhlIG1ha2VmaWxlIG9mIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gbGlicmFy
eSBSZSBkb2VzIG5vdCBjb3JyZWN0bHkgaGFuZGxlIHRoZSAub2JqDQpmaWxlIGV4dGVuc2lvbiBw
cm9kdWNlZCBvbiBXaW5kb3dzLg0KSGludDogQnVpbGQgUmUgdW50aWwgaXQgZmFpbHM7IHJlbW92
ZSB0aGUgZmlsZSBzZXR1cC5vYmogYnkgaGFuZCwgYW5kIGJ1aWxkIGFnYWluLiBUaGVuIGl0DQpz
dWNjZWVkc+KApg0KDQrCtyAgICAgICAgQW5vdGhlciBwcm9ibGVtIGFyZSB0aGUgcGF0aHMgdG8g
dGhlIG9jYW1sIGxpYnJhcmllcyBhcyByZXBvcnRlZCBieSBvY2FtbGMgYW5kIG9jYW1sZmluZC4N
ClNvbWV0aW1lcyB0aGV5IGRpZmZlciAob25lIHJlcG9ydHMgVW5peC1wYXRobmFtZXMsIHRoZSBv
dGhlciBXaW5kb3dzLWxpa2UgcGF0aHMpLg0KVGhpcyBkaXN0dXJicyB0aGUgb2NhbWxncmFwaCBj
b25maWd1cmF0aW9uIHByb2Nlc3MuIE1vcmVvdmVyLCB3ZSBmYWlsZWQgaW4gYnVpbGRpbmcNCm9j
YW1sZ3JhcGggYXMgYSBzaGFyZWQgbGlicmFyeS4NCg0KwrcgICAgICAgIEEgc2ltaWxhciBwcm9i
bGVtIHJlbGF0ZWQgdG8gcGF0aHMgZXhpc3RzIGluIGNhbWxwNOKAmXMgY29uZmlndXJhdGlvbi4g
UmVzb2x2aW5nIGl0IHJlcXVpcmVzDQptb2RpZmljYXRpb25zIGluIGl0cyBteW9jYW1sYnVpbGQu
bWwgYW5kIGl0cyBpbnN0YWxsLnNoIHNoZWxsIHNjcmlwdC4NCg0KwrcgICAgICAgIEJ1aWxkaW5n
IFpBcml0aCByZXF1aXJlcyB0aGUg4oCTbXBpciBhbmQgLW5vYXNtIG9wdGlvbnMgYW5kIHNvbWUg
ZnVydGhlciBoYWNraW5nIGluDQppdHMgY29uZmlndXJhdGlvbiBmaWxlLiBXZSBvbmx5IG1hbmFn
ZWQgdG8gYnVpbGQgdGhlIG9sZGVyIHZlcnNpb24gMS4yLjEuDQoNCk9mIGNvdXJzZSwgT1BBTSBv
biBXaW5kb3dzIHdvdWxkIGJlIGdyZWF0LiBPZmZlcmluZyBoZWxwIHRvIHRoZSBwYWNrYWdlIG1h
aW50YWluZXJzIHRvIHRlc3QgdGhlaXINCmJ1aWxkIHN5c3RlbSBvbiBXaW5kb3dzIG1pZ2h0IGhl
bHAgYSBsb3QuIEkgd2lsbCB0cnkgdG8gZmlsZSBidWcgcmVwb3J0cyBvbiB0aGUgaXNzdWVzIHRo
YXQgSSBlbmNvdW50ZXJlZA0Kd2hlbiBidWlsZGluZyBvbiBDeWd3aW4gdG8gdGhlIGFwcHJvcHJp
YXRlIHBhY2thZ2UgbWFpbnRhaW5lcnMuDQoNCkJlc3QgcmVnYXJkcywNCk1hcnRpbg0KDQpWb246
IHdnLXdpbmRvd3MgW21haWx0bzp3Zy13aW5kb3dzLWJvdW5jZXNAbGlzdHMub2NhbWwub3JnXSBJ
bSBBdWZ0cmFnIHZvbiBUaG9tYXMgQnJhaWJhbnQNCkdlc2VuZGV0OiBGcmVpdGFnLCAyOS4gTWFp
IDIwMTUgMTc6MTENCkFuOiB3Zy13aW5kb3dzQGxpc3RzLm9jYW1sLm9yZzxtYWlsdG86d2ctd2lu
ZG93c0BsaXN0cy5vY2FtbC5vcmc+DQpCZXRyZWZmOiBbd2ctd2luZG93c10gSW1wcm92aW5nIHRo
ZSBzdGF0ZSBvZiBPQ2FtbCBvbiBXaW5kb3dzDQoNCkhpLA0KDQpUaGFua3MgZm9yIGpvaW5pbmcg
dGhpcyB3b3JraW5nIGdyb3VwLiBJdHMgZ29hbCBpcyB0byBmaW5kIG91dCBob3cgdG8gaW1wcm92
ZSB0aGUgc3RhdGUgb2YgT0NhbWwgYW5kIGl0cyBlY29zeXN0ZW0gb24gV2luZG93cy4NCg0KU29t
ZSBvZiB0aGUgdGFza3MgdGhhdCB3ZSBtaWdodCBhZGRyZXNzICh0aGlzIGxpc3QgaXMgYnkgbm8g
bWVhbiBtZWFudCB0byBiZSBleGhhdXN0aXZlIG5vciBub3JtYXRpdmUpOg0KDQotIEdhdGhlciBp
bmZvcm1hdGlvbiBmcm9tIHRoZSBjb21tdW5pdHkgIGFib3V0IHRoZSB1c2Ugb2YgdGhlIHZhcmlv
dXMgdmVyc2lvbnMgb2YgT0NhbWwgYXZhaWxhYmxlIG9uIFdpbmRvd3MsIGFuZCB1bmRlcnN0YW5k
IHdoYXQga2luZCBvZiBlbnZpcm9ubWVudCBwZW9wbGUgYXJlIHdvcmtpbmcgd2l0aC4gKEJUVywg
SSB0aGluayBhIGdvb2Qgd2F5IHRvIGdldCB0aGUgZGlzY3Vzc2lvbiByb2xsaW5nIG1pZ2h0IGJl
IHRvIGRlc2NyaWJlIGVhY2ggb3RoZXIncyBzZXR1cCB0byB1c2UgT0NhbWwgb24gV2luZG93cy4p
DQoNCi0gRmluYWxpemUgT1BBTSBzdXBwb3J0IGZvciBXaW5kb3dzICh0aGlzIGlzIGxpc3RlZCBv
biB0aGUgT1BBTSAxLjMgcm9hZG1hcCkuIFdoZW4gdGhpcyBzdXBwb3J0IGlzIGluIHBsYWNlLCBt
YW55IE9DYW1sIHBhY2thZ2VzIHNob3VsZCB3b3JrIG91dCBvZiB0aGUgYm94ICh3aXRoIHRoZSBw
cm92aXNvIHRoYXQgbWFueSBwYWNrYWdlcyBhc3N1bWUgYSB1bml4LWlzaCBlbnZpcm9ubWVudCBm
b3IgdGhlaXIgYnVpbGQgc3lzdGVtKS4NCg0KLSBEaXNjdXNzIGhvdyB0byBoZWxwIHBhY2thZ2Ug
ZGV2ZWxvcGVycyBpbXByb3ZlIFdpbmRvd3Mgc3VwcG9ydC4gT25lIHdheSB0byBkbyB0aGF0IGNv
dWxkIGJlIHRvIHByb3ZpZGUga25vdy1ob3cgYWJvdXQgaG93IHRvIHNldHVwIGNvbnRpbnVvdXMg
aW50ZWdyYXRpb24gb24gc2VydmljZXMgbGlrZSBBcHB2ZXlvciB0byBjaGVjayB0aGF0IHBhY2th
Z2VzIGJ1aWxkIG9uIHR5cGljYWwgV2luZG93cyBzZXR1cHMuDQoNCi0gRmluZCBhIHNvbHV0aW9u
IGZvciB1c2VycyBvZiBXT0RJLCB0aGUgR09ESSBiYXNlZCBPQ2FtbCBkaXN0cmlidXRpb24gZm9y
IFdpbmRvd3MsIHdoaWNoIGhhcyBiZWVuIHNodXRkb3duLiBXT0RJIHdhcyBhYmxlIHRvIGNvbXBp
bGUgT0NhbWwgcmVsYXRlZCBzb2Z0d2FyZSAodXNpbmcgQ3lnd2luIGFzIGFuIGVudmlyb25tZW50
KSwgYnV0IHdhcyBhbHNvIGFibGUgdG8gaW5zdGFsbCBiaW5hcnkgcGFja2FnZXMuIChJbiBzb21l
IGNhc2VzLCBzb21lIG5vbi10cml2aWFsIHBhdGNoZXMgIHdlcmUgYXBwbGllZCB0byBtYWtlIHBh
Y2thZ2UgdXNhYmxlIG9uIFdpbmRvd3MuKSBTb21lIG9mIHRoZSBzb3VyY2VzIG5lZWRlZCB0byB1
c2UgV09ESSBhcmUgc3RpbGwgYXZhaWxhYmxlLCBidXQgdGhlIHN5c3RlbSBkb2VzIG5vdCB3b3Jr
IG91dCBvZiB0aGUgYm94IG5vdyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIGdvbmUgb2ZmbGluZS4gV2l0
aCBhIGxpdHRsZSB3b3JrLCB3ZSBtaWdodCBiZSBhYmxlIHRvIGJyaW5nIGl0IGJhY2ssIHRvIHNt
b290aCB0aGUgdHJhbnNpdGlvbi4NCg0KLSBEaXNjdXNzIHRoZSBzdGF0ZSBvZiBjcm9zcyBjb21w
aWxhdGlvbiB0byBXaW5kb3dzLg0KDQotIEFkdmVydGlzZSBPQ2FtbFBybydzIE9DUFdpbiBjb21t
ZXJjaWFsIGVmZm9ydC4gKEkgd2lsbCBsZWF2ZSBGYWJyaWNlIHRlbGwgYSBiaXQgbW9yZSBhYm91
dCB0aGF0LikNCg0KLSBEaXNjdXNzIGhvdyB0byBwb29sIHJlc291cmNlcyAoaWYgbmVlZGVkKSB0
byB3b3JrIHRvd2FyZCB0aGVzZSBnb2Fscy4NCg0KTWFueSB0aGFua3MgdG8gQW5pbCBhbmQgT2Nh
bWxMYWJzIGZvciBob3N0aW5nIHRoaXMgbWFpbGluZyBsaXN0Lg0KDQpUaG9tYXMNCg0KDQoNCg==

--_000_965631B03C670145ABB9F693E51622530D05EC72DENBGAT9EK5MSXw_
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: base64

PGh0bWwgeG1sbnM6dj0idXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWwiIHhtbG5zOm89InVy
bjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOm9mZmljZSIgeG1sbnM6dz0idXJuOnNjaGVt
YXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6d29yZCIgeG1sbnM6bT0iaHR0cDovL3NjaGVtYXMubWlj
cm9zb2Z0LmNvbS9vZmZpY2UvMjAwNC8xMi9vbW1sIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcv
VFIvUkVDLWh0bWw0MCI+DQo8aGVhZD4NCjxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIg
Y29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4NCjxtZXRhIG5hbWU9IkdlbmVyYXRv
ciIgY29udGVudD0iTWljcm9zb2Z0IFdvcmQgMTQgKGZpbHRlcmVkIG1lZGl1bSkiPg0KPHN0eWxl
PjwhLS0NCi8qIEZvbnQgRGVmaW5pdGlvbnMgKi8NCkBmb250LWZhY2UNCgl7Zm9udC1mYW1pbHk6
V2luZ2RpbmdzOw0KCXBhbm9zZS0xOjUgMCAwIDAgMCAwIDAgMCAwIDA7fQ0KQGZvbnQtZmFjZQ0K
CXtmb250LWZhbWlseTpXaW5nZGluZ3M7DQoJcGFub3NlLTE6NSAwIDAgMCAwIDAgMCAwIDAgMDt9
DQpAZm9udC1mYWNlDQoJe2ZvbnQtZmFtaWx5OkNhbGlicmk7DQoJcGFub3NlLTE6MiAxNSA1IDIg
MiAyIDQgMyAyIDQ7fQ0KQGZvbnQtZmFjZQ0KCXtmb250LWZhbWlseTpUYWhvbWE7DQoJcGFub3Nl
LTE6MiAxMSA2IDQgMyA1IDQgNCAyIDQ7fQ0KLyogU3R5bGUgRGVmaW5pdGlvbnMgKi8NCnAuTXNv
Tm9ybWFsLCBsaS5Nc29Ob3JtYWwsIGRpdi5Nc29Ob3JtYWwNCgl7bWFyZ2luOjBjbTsNCgltYXJn
aW4tYm90dG9tOi4wMDAxcHQ7DQoJZm9udC1zaXplOjEyLjBwdDsNCglmb250LWZhbWlseToiVGlt
ZXMgTmV3IFJvbWFuIiwic2VyaWYiO30NCmE6bGluaywgc3Bhbi5Nc29IeXBlcmxpbmsNCgl7bXNv
LXN0eWxlLXByaW9yaXR5Ojk5Ow0KCWNvbG9yOmJsdWU7DQoJdGV4dC1kZWNvcmF0aW9uOnVuZGVy
bGluZTt9DQphOnZpc2l0ZWQsIHNwYW4uTXNvSHlwZXJsaW5rRm9sbG93ZWQNCgl7bXNvLXN0eWxl
LXByaW9yaXR5Ojk5Ow0KCWNvbG9yOnB1cnBsZTsNCgl0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5l
O30NCnAuTXNvQWNldGF0ZSwgbGkuTXNvQWNldGF0ZSwgZGl2Lk1zb0FjZXRhdGUNCgl7bXNvLXN0
eWxlLXByaW9yaXR5Ojk5Ow0KCW1zby1zdHlsZS1saW5rOiJTcHJlY2hibGFzZW50ZXh0IFpjaG4i
Ow0KCW1hcmdpbjowY207DQoJbWFyZ2luLWJvdHRvbTouMDAwMXB0Ow0KCWZvbnQtc2l6ZTo4LjBw
dDsNCglmb250LWZhbWlseToiVGFob21hIiwic2Fucy1zZXJpZiI7fQ0KcC5Nc29MaXN0UGFyYWdy
YXBoLCBsaS5Nc29MaXN0UGFyYWdyYXBoLCBkaXYuTXNvTGlzdFBhcmFncmFwaA0KCXttc28tc3R5
bGUtcHJpb3JpdHk6MzQ7DQoJbWFyZ2luLXRvcDowY207DQoJbWFyZ2luLXJpZ2h0OjBjbTsNCglt
YXJnaW4tYm90dG9tOjBjbTsNCgltYXJnaW4tbGVmdDozNi4wcHQ7DQoJbWFyZ2luLWJvdHRvbTou
MDAwMXB0Ow0KCWZvbnQtc2l6ZToxMi4wcHQ7DQoJZm9udC1mYW1pbHk6IlRpbWVzIE5ldyBSb21h
biIsInNlcmlmIjt9DQpzcGFuLkUtTWFpbEZvcm1hdHZvcmxhZ2UxOA0KCXttc28tc3R5bGUtdHlw
ZTpwZXJzb25hbC1yZXBseTsNCglmb250LWZhbWlseToiQXJpYWwiLCJzYW5zLXNlcmlmIjsNCglj
b2xvcjojMUY0OTdEO30NCnNwYW4uU3ByZWNoYmxhc2VudGV4dFpjaG4NCgl7bXNvLXN0eWxlLW5h
bWU6IlNwcmVjaGJsYXNlbnRleHQgWmNobiI7DQoJbXNvLXN0eWxlLXByaW9yaXR5Ojk5Ow0KCW1z
by1zdHlsZS1saW5rOlNwcmVjaGJsYXNlbnRleHQ7DQoJZm9udC1mYW1pbHk6IlRhaG9tYSIsInNh
bnMtc2VyaWYiOw0KCW1zby1mYXJlYXN0LWxhbmd1YWdlOkRFO30NCi5Nc29DaHBEZWZhdWx0DQoJ
e21zby1zdHlsZS10eXBlOmV4cG9ydC1vbmx5Ow0KCWZvbnQtc2l6ZToxMC4wcHQ7DQoJZm9udC1m
YW1pbHk6IkNhbGlicmkiLCJzYW5zLXNlcmlmIjsNCgltc28tZmFyZWFzdC1sYW5ndWFnZTpFTi1V
Uzt9DQpAcGFnZSBXb3JkU2VjdGlvbjENCgl7c2l6ZTo2MTIuMHB0IDc5Mi4wcHQ7DQoJbWFyZ2lu
OjcyLjBwdCA3Mi4wcHQgNzIuMHB0IDcyLjBwdDt9DQpkaXYuV29yZFNlY3Rpb24xDQoJe3BhZ2U6
V29yZFNlY3Rpb24xO30NCi8qIExpc3QgRGVmaW5pdGlvbnMgKi8NCkBsaXN0IGwwDQoJe21zby1s
aXN0LWlkOjIxNzA1NzEwODsNCgltc28tbGlzdC10eXBlOmh5YnJpZDsNCgltc28tbGlzdC10ZW1w
bGF0ZS1pZHM6LTE4MTIxNDYxMTggLTgwODE1ODAwOCA2NzU2NzYxOSA2NzU2NzYyMSA2NzU2NzYx
NyA2NzU2NzYxOSA2NzU2NzYyMSA2NzU2NzYxNyA2NzU2NzYxOSA2NzU2NzYyMTt9DQpAbGlzdCBs
MDpsZXZlbDENCgl7bXNvLWxldmVsLXN0YXJ0LWF0OjA7DQoJbXNvLWxldmVsLW51bWJlci1mb3Jt
YXQ6YnVsbGV0Ow0KCW1zby1sZXZlbC10ZXh0Ou+CtzsNCgltc28tbGV2ZWwtdGFiLXN0b3A6bm9u
ZTsNCgltc28tbGV2ZWwtbnVtYmVyLXBvc2l0aW9uOmxlZnQ7DQoJdGV4dC1pbmRlbnQ6LTE4LjBw
dDsNCglmb250LWZhbWlseTpTeW1ib2w7DQoJbXNvLWZhcmVhc3QtZm9udC1mYW1pbHk6Q2FsaWJy
aTsNCgltc28tYmlkaS1mb250LWZhbWlseToiVGltZXMgTmV3IFJvbWFuIjt9DQpAbGlzdCBsMDps
ZXZlbDINCgl7bXNvLWxldmVsLW51bWJlci1mb3JtYXQ6YnVsbGV0Ow0KCW1zby1sZXZlbC10ZXh0
Om87DQoJbXNvLWxldmVsLXRhYi1zdG9wOm5vbmU7DQoJbXNvLWxldmVsLW51bWJlci1wb3NpdGlv
bjpsZWZ0Ow0KCXRleHQtaW5kZW50Oi0xOC4wcHQ7DQoJZm9udC1mYW1pbHk6IkNvdXJpZXIgTmV3
Ijt9DQpAbGlzdCBsMDpsZXZlbDMNCgl7bXNvLWxldmVsLW51bWJlci1mb3JtYXQ6YnVsbGV0Ow0K
CW1zby1sZXZlbC10ZXh0Ou+CpzsNCgltc28tbGV2ZWwtdGFiLXN0b3A6bm9uZTsNCgltc28tbGV2
ZWwtbnVtYmVyLXBvc2l0aW9uOmxlZnQ7DQoJdGV4dC1pbmRlbnQ6LTE4LjBwdDsNCglmb250LWZh
bWlseTpXaW5nZGluZ3M7fQ0KQGxpc3QgbDA6bGV2ZWw0DQoJe21zby1sZXZlbC1udW1iZXItZm9y
bWF0OmJ1bGxldDsNCgltc28tbGV2ZWwtdGV4dDrvgrc7DQoJbXNvLWxldmVsLXRhYi1zdG9wOm5v
bmU7DQoJbXNvLWxldmVsLW51bWJlci1wb3NpdGlvbjpsZWZ0Ow0KCXRleHQtaW5kZW50Oi0xOC4w
cHQ7DQoJZm9udC1mYW1pbHk6U3ltYm9sO30NCkBsaXN0IGwwOmxldmVsNQ0KCXttc28tbGV2ZWwt
bnVtYmVyLWZvcm1hdDpidWxsZXQ7DQoJbXNvLWxldmVsLXRleHQ6bzsNCgltc28tbGV2ZWwtdGFi
LXN0b3A6bm9uZTsNCgltc28tbGV2ZWwtbnVtYmVyLXBvc2l0aW9uOmxlZnQ7DQoJdGV4dC1pbmRl
bnQ6LTE4LjBwdDsNCglmb250LWZhbWlseToiQ291cmllciBOZXciO30NCkBsaXN0IGwwOmxldmVs
Ng0KCXttc28tbGV2ZWwtbnVtYmVyLWZvcm1hdDpidWxsZXQ7DQoJbXNvLWxldmVsLXRleHQ674Kn
Ow0KCW1zby1sZXZlbC10YWItc3RvcDpub25lOw0KCW1zby1sZXZlbC1udW1iZXItcG9zaXRpb246
bGVmdDsNCgl0ZXh0LWluZGVudDotMTguMHB0Ow0KCWZvbnQtZmFtaWx5OldpbmdkaW5nczt9DQpA
bGlzdCBsMDpsZXZlbDcNCgl7bXNvLWxldmVsLW51bWJlci1mb3JtYXQ6YnVsbGV0Ow0KCW1zby1s
ZXZlbC10ZXh0Ou+CtzsNCgltc28tbGV2ZWwtdGFiLXN0b3A6bm9uZTsNCgltc28tbGV2ZWwtbnVt
YmVyLXBvc2l0aW9uOmxlZnQ7DQoJdGV4dC1pbmRlbnQ6LTE4LjBwdDsNCglmb250LWZhbWlseTpT
eW1ib2w7fQ0KQGxpc3QgbDA6bGV2ZWw4DQoJe21zby1sZXZlbC1udW1iZXItZm9ybWF0OmJ1bGxl
dDsNCgltc28tbGV2ZWwtdGV4dDpvOw0KCW1zby1sZXZlbC10YWItc3RvcDpub25lOw0KCW1zby1s
ZXZlbC1udW1iZXItcG9zaXRpb246bGVmdDsNCgl0ZXh0LWluZGVudDotMTguMHB0Ow0KCWZvbnQt
ZmFtaWx5OiJDb3VyaWVyIE5ldyI7fQ0KQGxpc3QgbDA6bGV2ZWw5DQoJe21zby1sZXZlbC1udW1i
ZXItZm9ybWF0OmJ1bGxldDsNCgltc28tbGV2ZWwtdGV4dDrvgqc7DQoJbXNvLWxldmVsLXRhYi1z
dG9wOm5vbmU7DQoJbXNvLWxldmVsLW51bWJlci1wb3NpdGlvbjpsZWZ0Ow0KCXRleHQtaW5kZW50
Oi0xOC4wcHQ7DQoJZm9udC1mYW1pbHk6V2luZ2RpbmdzO30NCkBsaXN0IGwxDQoJe21zby1saXN0
LWlkOjI0MjM3ODU0MzsNCgltc28tbGlzdC10eXBlOmh5YnJpZDsNCgltc28tbGlzdC10ZW1wbGF0
ZS1pZHM6MTczNTI3OTY0MiAyODM3OTQ1MDIgNjc1Njc2MTkgNjc1Njc2MjEgNjc1Njc2MTcgNjc1
Njc2MTkgNjc1Njc2MjEgNjc1Njc2MTcgNjc1Njc2MTkgNjc1Njc2MjE7fQ0KQGxpc3QgbDE6bGV2
ZWwxDQoJe21zby1sZXZlbC1zdGFydC1hdDowOw0KCW1zby1sZXZlbC1udW1iZXItZm9ybWF0OmJ1
bGxldDsNCgltc28tbGV2ZWwtdGV4dDotOw0KCW1zby1sZXZlbC10YWItc3RvcDpub25lOw0KCW1z
by1sZXZlbC1udW1iZXItcG9zaXRpb246bGVmdDsNCgl0ZXh0LWluZGVudDotMTguMHB0Ow0KCWZv
bnQtZmFtaWx5OiJBcmlhbCIsInNhbnMtc2VyaWYiOw0KCW1zby1mYXJlYXN0LWZvbnQtZmFtaWx5
OkNhbGlicmk7fQ0KQGxpc3QgbDE6bGV2ZWwyDQoJe21zby1sZXZlbC1udW1iZXItZm9ybWF0OmJ1
bGxldDsNCgltc28tbGV2ZWwtdGV4dDpvOw0KCW1zby1sZXZlbC10YWItc3RvcDpub25lOw0KCW1z
by1sZXZlbC1udW1iZXItcG9zaXRpb246bGVmdDsNCgl0ZXh0LWluZGVudDotMTguMHB0Ow0KCWZv
bnQtZmFtaWx5OiJDb3VyaWVyIE5ldyI7fQ0KQGxpc3QgbDE6bGV2ZWwzDQoJe21zby1sZXZlbC1u
dW1iZXItZm9ybWF0OmJ1bGxldDsNCgltc28tbGV2ZWwtdGV4dDrvgqc7DQoJbXNvLWxldmVsLXRh
Yi1zdG9wOm5vbmU7DQoJbXNvLWxldmVsLW51bWJlci1wb3NpdGlvbjpsZWZ0Ow0KCXRleHQtaW5k
ZW50Oi0xOC4wcHQ7DQoJZm9udC1mYW1pbHk6V2luZ2RpbmdzO30NCkBsaXN0IGwxOmxldmVsNA0K
CXttc28tbGV2ZWwtbnVtYmVyLWZvcm1hdDpidWxsZXQ7DQoJbXNvLWxldmVsLXRleHQ674K3Ow0K
CW1zby1sZXZlbC10YWItc3RvcDpub25lOw0KCW1zby1sZXZlbC1udW1iZXItcG9zaXRpb246bGVm
dDsNCgl0ZXh0LWluZGVudDotMTguMHB0Ow0KCWZvbnQtZmFtaWx5OlN5bWJvbDt9DQpAbGlzdCBs
MTpsZXZlbDUNCgl7bXNvLWxldmVsLW51bWJlci1mb3JtYXQ6YnVsbGV0Ow0KCW1zby1sZXZlbC10
ZXh0Om87DQoJbXNvLWxldmVsLXRhYi1zdG9wOm5vbmU7DQoJbXNvLWxldmVsLW51bWJlci1wb3Np
dGlvbjpsZWZ0Ow0KCXRleHQtaW5kZW50Oi0xOC4wcHQ7DQoJZm9udC1mYW1pbHk6IkNvdXJpZXIg
TmV3Ijt9DQpAbGlzdCBsMTpsZXZlbDYNCgl7bXNvLWxldmVsLW51bWJlci1mb3JtYXQ6YnVsbGV0
Ow0KCW1zby1sZXZlbC10ZXh0Ou+CpzsNCgltc28tbGV2ZWwtdGFiLXN0b3A6bm9uZTsNCgltc28t
bGV2ZWwtbnVtYmVyLXBvc2l0aW9uOmxlZnQ7DQoJdGV4dC1pbmRlbnQ6LTE4LjBwdDsNCglmb250
LWZhbWlseTpXaW5nZGluZ3M7fQ0KQGxpc3QgbDE6bGV2ZWw3DQoJe21zby1sZXZlbC1udW1iZXIt
Zm9ybWF0OmJ1bGxldDsNCgltc28tbGV2ZWwtdGV4dDrvgrc7DQoJbXNvLWxldmVsLXRhYi1zdG9w
Om5vbmU7DQoJbXNvLWxldmVsLW51bWJlci1wb3NpdGlvbjpsZWZ0Ow0KCXRleHQtaW5kZW50Oi0x
OC4wcHQ7DQoJZm9udC1mYW1pbHk6U3ltYm9sO30NCkBsaXN0IGwxOmxldmVsOA0KCXttc28tbGV2
ZWwtbnVtYmVyLWZvcm1hdDpidWxsZXQ7DQoJbXNvLWxldmVsLXRleHQ6bzsNCgltc28tbGV2ZWwt
dGFiLXN0b3A6bm9uZTsNCgltc28tbGV2ZWwtbnVtYmVyLXBvc2l0aW9uOmxlZnQ7DQoJdGV4dC1p
bmRlbnQ6LTE4LjBwdDsNCglmb250LWZhbWlseToiQ291cmllciBOZXciO30NCkBsaXN0IGwxOmxl
dmVsOQ0KCXttc28tbGV2ZWwtbnVtYmVyLWZvcm1hdDpidWxsZXQ7DQoJbXNvLWxldmVsLXRleHQ6
74KnOw0KCW1zby1sZXZlbC10YWItc3RvcDpub25lOw0KCW1zby1sZXZlbC1udW1iZXItcG9zaXRp
b246bGVmdDsNCgl0ZXh0LWluZGVudDotMTguMHB0Ow0KCWZvbnQtZmFtaWx5OldpbmdkaW5nczt9
DQpvbA0KCXttYXJnaW4tYm90dG9tOjBjbTt9DQp1bA0KCXttYXJnaW4tYm90dG9tOjBjbTt9DQot
LT48L3N0eWxlPjwhLS1baWYgZ3RlIG1zbyA5XT48eG1sPg0KPG86c2hhcGVkZWZhdWx0cyB2OmV4
dD0iZWRpdCIgc3BpZG1heD0iMTAyNiIgLz4NCjwveG1sPjwhW2VuZGlmXS0tPjwhLS1baWYgZ3Rl
IG1zbyA5XT48eG1sPg0KPG86c2hhcGVsYXlvdXQgdjpleHQ9ImVkaXQiPg0KPG86aWRtYXAgdjpl
eHQ9ImVkaXQiIGRhdGE9IjEiIC8+DQo8L286c2hhcGVsYXlvdXQ+PC94bWw+PCFbZW5kaWZdLS0+
DQo8L2hlYWQ+DQo8Ym9keSBsYW5nPSJERSIgbGluaz0iYmx1ZSIgdmxpbms9InB1cnBsZSI+DQo8
ZGl2IGNsYXNzPSJXb3JkU2VjdGlvbjEiPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFu
Zz0iRU4tVVMiIHN0eWxlPSJmb250LXNpemU6MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0FyaWFs
JnF1b3Q7LCZxdW90O3NhbnMtc2VyaWYmcXVvdDs7Y29sb3I6IzFGNDk3RCI+SGkgVGhvbWFzLDxv
OnA+PC9vOnA+PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVO
LVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90
OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPjxvOnA+Jm5ic3A7PC9vOnA+
PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHls
ZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtz
YW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPnRoYW5rIHlvdSBmb3Igc2V0dGluZyB1cCB0
aGlzIGxpc3QhIEkgcmVhbGx5IGhvcGUgdGhhdCBpdCB3aWxsIGhlbHAgaW4gaW1wcm92aW5nIHRo
ZSB3YXkgT2NhbWw8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48
c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1
b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj5jYW4g
YmUgdXNlZCBvbiBXaW5kb3dzLiBXZSBhcmUgd29ya2luZyBvbiBzb21lIE9DYW1sIHByb2plY3Rz
IHRoYXQgdWx0aW1hdGVseSBuZWVkIHRvDQo8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFz
cz0iTXNvTm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7
Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xv
cjojMUY0OTdEIj5iZSBjb21waWxlZCBpbnRvIGEgV2luZG93cy1ETEwgdXNpbmcgdGhlIE1TVkMt
VG9vbGNoYWluLiBUaGUgZGV2ZWxvcG1lbnQgaXRzZWxmIGlzIGRvbmUNCjxvOnA+PC9vOnA+PC9z
cGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0i
Zm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5z
LXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPmVudGlyZWx5IG9uIExpbnV4LiBJbiBwYXJ0aWN1
bGFyLCB3ZSByZWx5IG9uIGEgbnVtYmVyIG9mIHBhY2thZ2VzIG9uIFdpbmRvd3M6PG86cD48L286
cD48L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiIHN0
eWxlPSJmb250LXNpemU6MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0FyaWFsJnF1b3Q7LCZxdW90
O3NhbnMtc2VyaWYmcXVvdDs7Y29sb3I6IzFGNDk3RCI+PG86cD4mbmJzcDs8L286cD48L3NwYW4+
PC9wPg0KPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0eWxlPSJ0ZXh0LWluZGVudDotMTgu
MHB0O21zby1saXN0OmwxIGxldmVsMSBsZm8yIj48IVtpZiAhc3VwcG9ydExpc3RzXT48c3BhbiBs
YW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJp
YWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj48c3BhbiBzdHls
ZT0ibXNvLWxpc3Q6SWdub3JlIj4tPHNwYW4gc3R5bGU9ImZvbnQ6Ny4wcHQgJnF1b3Q7VGltZXMg
TmV3IFJvbWFuJnF1b3Q7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJz
cDsNCjwvc3Bhbj48L3NwYW4+PC9zcGFuPjwhW2VuZGlmXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5
bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7
c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj5PQ2FtbCA0LjAyLjE8bzpwPjwvbzpwPjwv
c3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTGlzdFBhcmFncmFwaCIgc3R5bGU9InRleHQtaW5kZW50
Oi0xOC4wcHQ7bXNvLWxpc3Q6bDEgbGV2ZWwxIGxmbzIiPjwhW2lmICFzdXBwb3J0TGlzdHNdPjxz
cGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVv
dDtBcmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPjxzcGFu
IHN0eWxlPSJtc28tbGlzdDpJZ25vcmUiPi08c3BhbiBzdHlsZT0iZm9udDo3LjBwdCAmcXVvdDtU
aW1lcyBOZXcgUm9tYW4mcXVvdDsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOw0KPC9zcGFuPjwvc3Bhbj48L3NwYW4+PCFbZW5kaWZdPjxzcGFuIGxhbmc9IkVOLVVT
IiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90Oywm
cXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPkJhdHRlcmllcyAyLjMuMQ0KPG86
cD48L286cD48L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0eWxlPSJ0
ZXh0LWluZGVudDotMTguMHB0O21zby1saXN0OmwxIGxldmVsMSBsZm8yIj48IVtpZiAhc3VwcG9y
dExpc3RzXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1m
YW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0
OTdEIj48c3BhbiBzdHlsZT0ibXNvLWxpc3Q6SWdub3JlIj4tPHNwYW4gc3R5bGU9ImZvbnQ6Ny4w
cHQgJnF1b3Q7VGltZXMgTmV3IFJvbWFuJnF1b3Q7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsNCjwvc3Bhbj48L3NwYW4+PC9zcGFuPjwhW2VuZGlmXT48c3BhbiBs
YW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJp
YWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj5PY2FtbGdyYXBo
IDEuOC41PG86cD48L286cD48L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgi
IHN0eWxlPSJ0ZXh0LWluZGVudDotMTguMHB0O21zby1saXN0OmwxIGxldmVsMSBsZm8yIj48IVtp
ZiAhc3VwcG9ydExpc3RzXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4w
cHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztj
b2xvcjojMUY0OTdEIj48c3BhbiBzdHlsZT0ibXNvLWxpc3Q6SWdub3JlIj4tPHNwYW4gc3R5bGU9
ImZvbnQ6Ny4wcHQgJnF1b3Q7VGltZXMgTmV3IFJvbWFuJnF1b3Q7Ij4mbmJzcDsmbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCjwvc3Bhbj48L3NwYW4+PC9zcGFuPjwhW2VuZGlm
XT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6
JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj5S
ZQ0KPG86cD48L286cD48L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0
eWxlPSJ0ZXh0LWluZGVudDotMTguMHB0O21zby1saXN0OmwxIGxldmVsMSBsZm8yIj48IVtpZiAh
c3VwcG9ydExpc3RzXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7
Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xv
cjojMUY0OTdEIj48c3BhbiBzdHlsZT0ibXNvLWxpc3Q6SWdub3JlIj4tPHNwYW4gc3R5bGU9ImZv
bnQ6Ny4wcHQgJnF1b3Q7VGltZXMgTmV3IFJvbWFuJnF1b3Q7Ij4mbmJzcDsmbmJzcDsmbmJzcDsm
bmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCjwvc3Bhbj48L3NwYW4+PC9zcGFuPjwhW2VuZGlmXT48
c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1
b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj5aQXJp
dGggMS4yLjEmbmJzcDsgKHdlIGZhaWxlZCBpbiBidWlsZGluZyBuZXdlciB2ZXJzaW9ucyk8bzpw
PjwvbzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTGlzdFBhcmFncmFwaCIgc3R5bGU9InRl
eHQtaW5kZW50Oi0xOC4wcHQ7bXNvLWxpc3Q6bDEgbGV2ZWwxIGxmbzIiPjwhW2lmICFzdXBwb3J0
TGlzdHNdPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZh
bWlseTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5
N0QiPjxzcGFuIHN0eWxlPSJtc28tbGlzdDpJZ25vcmUiPi08c3BhbiBzdHlsZT0iZm9udDo3LjBw
dCAmcXVvdDtUaW1lcyBOZXcgUm9tYW4mcXVvdDsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOw0KPC9zcGFuPjwvc3Bhbj48L3NwYW4+PCFbZW5kaWZdPjxzcGFuIGxh
bmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlh
bCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPlZvbHQgKGEgdmFy
aWFudCBvZiB0aGUgQm9sdCBsb2dnaW5nIGxpYnJhcnkpPG86cD48L286cD48L3NwYW4+PC9wPg0K
PHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0eWxlPSJ0ZXh0LWluZGVudDotMTguMHB0O21z
by1saXN0OmwxIGxldmVsMSBsZm8yIj48IVtpZiAhc3VwcG9ydExpc3RzXT48c3BhbiBsYW5nPSJF
Ti1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVv
dDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj48c3BhbiBzdHlsZT0ibXNv
LWxpc3Q6SWdub3JlIj4tPHNwYW4gc3R5bGU9ImZvbnQ6Ny4wcHQgJnF1b3Q7VGltZXMgTmV3IFJv
bWFuJnF1b3Q7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCjwv
c3Bhbj48L3NwYW4+PC9zcGFuPjwhW2VuZGlmXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZv
bnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1z
ZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj5tZW5oaXI8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8
cCBjbGFzcz0iTXNvTGlzdFBhcmFncmFwaCIgc3R5bGU9InRleHQtaW5kZW50Oi0xOC4wcHQ7bXNv
LWxpc3Q6bDEgbGV2ZWwxIGxmbzIiPjwhW2lmICFzdXBwb3J0TGlzdHNdPjxzcGFuIGxhbmc9IkVO
LVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90
OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPjxzcGFuIHN0eWxlPSJtc28t
bGlzdDpJZ25vcmUiPi08c3BhbiBzdHlsZT0iZm9udDo3LjBwdCAmcXVvdDtUaW1lcyBOZXcgUm9t
YW4mcXVvdDsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOw0KPC9z
cGFuPjwvc3Bhbj48L3NwYW4+PCFbZW5kaWZdPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9u
dC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5zLXNl
cmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPmNhbWxwNDxvOnA+PC9vOnA+PC9zcGFuPjwvcD4NCjxw
IGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEw
LjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7
O2NvbG9yOiMxRjQ5N0QiPjxvOnA+Jm5ic3A7PC9vOnA+PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJN
c29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250
LWZhbWlseTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMx
RjQ5N0QiPlRvIG15IGV4cGVyaWVuY2UsIGNvbXBpbGluZyB0aGUgY29yZSBjb21wb25lbnRzIChp
LmUuIE9DYW1sLCBmaW5kbGliLCBmbGV4ZGxsLCBhbmQgYmF0dGVyaWVzKQ0KPG86cD48L286cD48
L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiIHN0eWxl
PSJmb250LXNpemU6MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0FyaWFsJnF1b3Q7LCZxdW90O3Nh
bnMtc2VyaWYmcXVvdDs7Y29sb3I6IzFGNDk3RCI+ZnJvbSBzY3JhdGNoIHdpdGggTVNWQyBmcm9t
IFZpc3VhbCBTdHVkaW8gMjAxMiB3aXRoaW4gQ3lnd2luLCBib3RoIDMyIGFuZCA2NCBiaXRzLCBp
cyByYXRoZXI8YnI+DQpzdHJhaWdodC1mb3J3YXJkIGFuZCB3ZWxsIHN1cHBvcnRlZC4gPG86cD48
L286cD48L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMi
IHN0eWxlPSJmb250LXNpemU6MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0FyaWFsJnF1b3Q7LCZx
dW90O3NhbnMtc2VyaWYmcXVvdDs7Y29sb3I6IzFGNDk3RCI+PG86cD4mbmJzcDs8L286cD48L3Nw
YW4+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiIHN0eWxlPSJm
b250LXNpemU6MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0FyaWFsJnF1b3Q7LCZxdW90O3NhbnMt
c2VyaWYmcXVvdDs7Y29sb3I6IzFGNDk3RCI+QnVpbGRpbmcgdGhlIG90aGVyIGxpYnJhcmllcyBo
YXMgYmVlbiByYXRoZXIgZGlmZmljdWx0OiBDb25mdXNpb24gYXJpc2VzIHdoZW4gaXQgY29tZXMg
dG8gc3BlY2lmeWluZw0KPGJyPg0Kc2VhcmNoIHBhdGhzIHdoZW4gY29uZmlndXJpbmcgdGhlIHBh
Y2thZ2UgYnVpbGRzOiBTb21ldGltZXMsIG9uZSBoYXMgdG8gc3BlY2lmeSBVbml4LWxpa2UNCjxv
OnA+PC9vOnA+PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVO
LVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90
OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPnBhdGhuYW1lcy4gQXQgb3Ro
ZXIgdGltZXMsIG9uZSBoYXMgdG8gdXNlIFdpbmRvd3MgcGF0aG5hbWVzLiBBbmQgdGhlIHF1ZXN0
aW9uIHdoZXRoZXIgdG8NCjxvOnA+PC9vOnA+PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3Jt
YWwiPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWls
eTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0Qi
PnVzZSBzbGFzaGVzIG9yIGJhY2tzbGFzaGVzLCB0aGUgZmlsZSBleHRlbnNpb25zIGFuZCBuYW1p
bmcgY29udmVudGlvbnMsIGV0Yy4gd29yc2VuIHRoZSBzaXR1YXRpb24uPG86cD48L286cD48L3Nw
YW4+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiIHN0eWxlPSJm
b250LXNpemU6MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0FyaWFsJnF1b3Q7LCZxdW90O3NhbnMt
c2VyaWYmcXVvdDs7Y29sb3I6IzFGNDk3RCI+U29tZSBleGFtcGxlczo8bzpwPjwvbzpwPjwvc3Bh
bj48L3A+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZv
bnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1z
ZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj48bzpwPiZuYnNwOzwvbzpwPjwvc3Bhbj48L3A+DQo8
cCBjbGFzcz0iTXNvTGlzdFBhcmFncmFwaCIgc3R5bGU9InRleHQtaW5kZW50Oi0xOC4wcHQ7bXNv
LWxpc3Q6bDAgbGV2ZWwxIGxmbzQiPjwhW2lmICFzdXBwb3J0TGlzdHNdPjxzcGFuIGxhbmc9IkVO
LVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTpTeW1ib2w7Y29sb3I6IzFG
NDk3RCI+PHNwYW4gc3R5bGU9Im1zby1saXN0Oklnbm9yZSI+wrc8c3BhbiBzdHlsZT0iZm9udDo3
LjBwdCAmcXVvdDtUaW1lcyBOZXcgUm9tYW4mcXVvdDsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNw
OyZuYnNwOyZuYnNwOyZuYnNwOw0KPC9zcGFuPjwvc3Bhbj48L3NwYW4+PCFbZW5kaWZdPjxzcGFu
IGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtB
cmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPk1lbmhpciBn
ZXRzIGNvbmZ1c2VkIGJ5IFdpbmRvd3MgYW5kIFVuaXgtbGlrZSBQYXRobmFtZXMgd2hlbiBidWls
dCBvbiBDeWd3aW4uPGJyPg0KSGludDogWW91IGhhdmUgdG8gc3BlY2lmeSBXaW5kb3dzLVBhdGhu
YW1lcywgYnV0IHJlcGxhY2UgYW55IGJhY2tzbGFzaGVzIGJ5IHNsYXNoZXM8YnI+DQp0byBzZXQg
dGhlIFBSRUZJWCBpbiB0aGUgbWVuaGlyIGNvbmZpZ3VyYXRpb27igKY8bzpwPjwvbzpwPjwvc3Bh
bj48L3A+DQo8cCBjbGFzcz0iTXNvTGlzdFBhcmFncmFwaCIgc3R5bGU9InRleHQtaW5kZW50Oi0x
OC4wcHQ7bXNvLWxpc3Q6bDAgbGV2ZWwxIGxmbzQiPjwhW2lmICFzdXBwb3J0TGlzdHNdPjxzcGFu
IGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTpTeW1ib2w7
Y29sb3I6IzFGNDk3RCI+PHNwYW4gc3R5bGU9Im1zby1saXN0Oklnbm9yZSI+wrc8c3BhbiBzdHls
ZT0iZm9udDo3LjBwdCAmcXVvdDtUaW1lcyBOZXcgUm9tYW4mcXVvdDsiPiZuYnNwOyZuYnNwOyZu
YnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOw0KPC9zcGFuPjwvc3Bhbj48L3NwYW4+PCFbZW5k
aWZdPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWls
eTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0Qi
PlRoZSBtYWtlZmlsZSBvZiB0aGUgcmVndWxhciBleHByZXNzaW9uIGxpYnJhcnkgUmUgZG9lcyBu
b3QgY29ycmVjdGx5IGhhbmRsZSB0aGUgLm9iajxicj4NCmZpbGUgZXh0ZW5zaW9uIHByb2R1Y2Vk
IG9uIFdpbmRvd3MuPGJyPg0KSGludDogQnVpbGQgUmUgdW50aWwgaXQgZmFpbHM7IHJlbW92ZSB0
aGUgZmlsZSBzZXR1cC5vYmogYnkgaGFuZCwgYW5kIGJ1aWxkIGFnYWluLiBUaGVuIGl0PGJyPg0K
c3VjY2VlZHPigKY8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTGlzdFBhcmFn
cmFwaCIgc3R5bGU9InRleHQtaW5kZW50Oi0xOC4wcHQ7bXNvLWxpc3Q6bDAgbGV2ZWwxIGxmbzQi
PjwhW2lmICFzdXBwb3J0TGlzdHNdPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXpl
OjEwLjBwdDtmb250LWZhbWlseTpTeW1ib2w7Y29sb3I6IzFGNDk3RCI+PHNwYW4gc3R5bGU9Im1z
by1saXN0Oklnbm9yZSI+wrc8c3BhbiBzdHlsZT0iZm9udDo3LjBwdCAmcXVvdDtUaW1lcyBOZXcg
Um9tYW4mcXVvdDsiPiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOw0K
PC9zcGFuPjwvc3Bhbj48L3NwYW4+PCFbZW5kaWZdPjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0i
Zm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90OywmcXVvdDtzYW5z
LXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPkFub3RoZXIgcHJvYmxlbSBhcmUgdGhlIHBhdGhz
IHRvIHRoZSBvY2FtbCBsaWJyYXJpZXMgYXMgcmVwb3J0ZWQgYnkgb2NhbWxjIGFuZCBvY2FtbGZp
bmQuPGJyPg0KU29tZXRpbWVzIHRoZXkgZGlmZmVyIChvbmUgcmVwb3J0cyBVbml4LXBhdGhuYW1l
cywgdGhlIG90aGVyIFdpbmRvd3MtbGlrZSBwYXRocykuPGJyPg0KVGhpcyBkaXN0dXJicyB0aGUg
b2NhbWxncmFwaCBjb25maWd1cmF0aW9uIHByb2Nlc3MuIE1vcmVvdmVyLCB3ZSBmYWlsZWQgaW4g
YnVpbGRpbmc8YnI+DQpvY2FtbGdyYXBoIGFzIGEgc2hhcmVkIGxpYnJhcnkuPG86cD48L286cD48
L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0eWxlPSJ0ZXh0LWluZGVu
dDotMTguMHB0O21zby1saXN0OmwwIGxldmVsMSBsZm80Ij48IVtpZiAhc3VwcG9ydExpc3RzXT48
c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6U3lt
Ym9sO2NvbG9yOiMxRjQ5N0QiPjxzcGFuIHN0eWxlPSJtc28tbGlzdDpJZ25vcmUiPsK3PHNwYW4g
c3R5bGU9ImZvbnQ6Ny4wcHQgJnF1b3Q7VGltZXMgTmV3IFJvbWFuJnF1b3Q7Ij4mbmJzcDsmbmJz
cDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCjwvc3Bhbj48L3NwYW4+PC9zcGFuPjwh
W2VuZGlmXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1m
YW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0
OTdEIj5BIHNpbWlsYXIgcHJvYmxlbSByZWxhdGVkIHRvIHBhdGhzIGV4aXN0cyBpbiBjYW1scDTi
gJlzIGNvbmZpZ3VyYXRpb24uIFJlc29sdmluZyBpdCByZXF1aXJlcw0KPGJyPg0KbW9kaWZpY2F0
aW9ucyBpbiBpdHMgbXlvY2FtbGJ1aWxkLm1sIGFuZCBpdHMgaW5zdGFsbC5zaCBzaGVsbCBzY3Jp
cHQuPG86cD48L286cD48L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0
eWxlPSJ0ZXh0LWluZGVudDotMTguMHB0O21zby1saXN0OmwwIGxldmVsMSBsZm80Ij48IVtpZiAh
c3VwcG9ydExpc3RzXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7
Zm9udC1mYW1pbHk6U3ltYm9sO2NvbG9yOiMxRjQ5N0QiPjxzcGFuIHN0eWxlPSJtc28tbGlzdDpJ
Z25vcmUiPsK3PHNwYW4gc3R5bGU9ImZvbnQ6Ny4wcHQgJnF1b3Q7VGltZXMgTmV3IFJvbWFuJnF1
b3Q7Ij4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsNCjwvc3Bhbj48
L3NwYW4+PC9zcGFuPjwhW2VuZGlmXT48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6
ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZx
dW90Oztjb2xvcjojMUY0OTdEIj5CdWlsZGluZyBaQXJpdGggcmVxdWlyZXMgdGhlIOKAk21waXIg
YW5kIC1ub2FzbSBvcHRpb25zIGFuZCBzb21lIGZ1cnRoZXIgaGFja2luZyBpbjxicj4NCml0cyBj
b25maWd1cmF0aW9uIGZpbGUuIFdlIG9ubHkgbWFuYWdlZCB0byBidWlsZCB0aGUgb2xkZXIgdmVy
c2lvbiAxLjIuMS48bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48
c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1
b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj48bzpw
PiZuYnNwOzwvbzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5n
PSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwm
cXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztjb2xvcjojMUY0OTdEIj5PZiBjb3Vyc2UsIE9Q
QU0gb24gV2luZG93cyB3b3VsZCBiZSBncmVhdC4gT2ZmZXJpbmcgaGVscCB0byB0aGUgcGFja2Fn
ZSBtYWludGFpbmVycyB0byB0ZXN0IHRoZWlyDQo8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8cCBj
bGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4w
cHQ7Zm9udC1mYW1pbHk6JnF1b3Q7QXJpYWwmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90Oztj
b2xvcjojMUY0OTdEIj5idWlsZCBzeXN0ZW0gb24gV2luZG93cyBtaWdodCBoZWxwIGEgbG90LiBJ
IHdpbGwgdHJ5IHRvIGZpbGUgYnVnIHJlcG9ydHMgb24gdGhlIGlzc3VlcyB0aGF0IEkgZW5jb3Vu
dGVyZWQNCjxvOnA+PC9vOnA+PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFu
IGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtB
cmlhbCZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPndoZW4gYnVp
bGRpbmcgb24gQ3lnd2luIHRvIHRoZSBhcHByb3ByaWF0ZSBwYWNrYWdlIG1haW50YWluZXJzLjxv
OnA+PC9vOnA+PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVO
LVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtBcmlhbCZxdW90
OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7O2NvbG9yOiMxRjQ5N0QiPjxvOnA+Jm5ic3A7PC9vOnA+
PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6
MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0FyaWFsJnF1b3Q7LCZxdW90O3NhbnMtc2VyaWYmcXVv
dDs7Y29sb3I6IzFGNDk3RCI+QmVzdCByZWdhcmRzLDxvOnA+PC9vOnA+PC9zcGFuPjwvcD4NCjxw
IGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MTAuMHB0O2ZvbnQtZmFt
aWx5OiZxdW90O0FyaWFsJnF1b3Q7LCZxdW90O3NhbnMtc2VyaWYmcXVvdDs7Y29sb3I6IzFGNDk3
RCI+TWFydGluPG86cD48L286cD48L3NwYW4+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PG86
cD4mbmJzcDs8L286cD48L3A+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48Yj48c3BhbiBzdHlsZT0i
Zm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTomcXVvdDtUYWhvbWEmcXVvdDssJnF1b3Q7c2Fu
cy1zZXJpZiZxdW90OyI+Vm9uOjwvc3Bhbj48L2I+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxMC4w
cHQ7Zm9udC1mYW1pbHk6JnF1b3Q7VGFob21hJnF1b3Q7LCZxdW90O3NhbnMtc2VyaWYmcXVvdDsi
PiB3Zy13aW5kb3dzIFs8L3NwYW4+PHNwYW4gbGFuZz0iRU4tVVMiIHN0eWxlPSJmb250LXNpemU6
MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O1RhaG9tYSZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1
b3Q7Ij48YSBocmVmPSJtYWlsdG86d2ctd2luZG93cy1ib3VuY2VzQGxpc3RzLm9jYW1sLm9yZyI+
PHNwYW4gbGFuZz0iREUiPm1haWx0bzp3Zy13aW5kb3dzLWJvdW5jZXNAbGlzdHMub2NhbWwub3Jn
PC9zcGFuPjwvYT48L3NwYW4+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1p
bHk6JnF1b3Q7VGFob21hJnF1b3Q7LCZxdW90O3NhbnMtc2VyaWYmcXVvdDsiPl0NCjxiPkltIEF1
ZnRyYWcgdm9uIDwvYj5UaG9tYXMgQnJhaWJhbnQ8YnI+DQo8Yj5HZXNlbmRldDo8L2I+IEZyZWl0
YWcsIDI5LiA8L3NwYW4+PHNwYW4gbGFuZz0iRU4tVVMiIHN0eWxlPSJmb250LXNpemU6MTAuMHB0
O2ZvbnQtZmFtaWx5OiZxdW90O1RhaG9tYSZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7Ij5N
YWkgMjAxNSAxNzoxMTxicj4NCjxiPkFuOjwvYj4gPC9zcGFuPjxzcGFuIHN0eWxlPSJmb250LXNp
emU6MTAuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O1RhaG9tYSZxdW90OywmcXVvdDtzYW5zLXNlcmlm
JnF1b3Q7Ij48YSBocmVmPSJtYWlsdG86d2ctd2luZG93c0BsaXN0cy5vY2FtbC5vcmciPjxzcGFu
IGxhbmc9IkVOLVVTIj53Zy13aW5kb3dzQGxpc3RzLm9jYW1sLm9yZzwvc3Bhbj48L2E+PC9zcGFu
PjxzcGFuIGxhbmc9IkVOLVVTIiBzdHlsZT0iZm9udC1zaXplOjEwLjBwdDtmb250LWZhbWlseTom
cXVvdDtUYWhvbWEmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90OyI+PGJyPg0KPGI+QmV0cmVm
Zjo8L2I+IFt3Zy13aW5kb3dzXSBJbXByb3ZpbmcgdGhlIHN0YXRlIG9mIE9DYW1sIG9uIFdpbmRv
d3M8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5n
PSJFTi1VUyI+PG86cD4mbmJzcDs8L286cD48L3NwYW4+PC9wPg0KPGRpdj4NCjxwIGNsYXNzPSJN
c29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIj5IaSw8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8
ZGl2Pg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPjxvOnA+Jm5ic3A7
PC9vOnA+PC9zcGFuPjwvcD4NCjwvZGl2Pg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxz
cGFuIGxhbmc9IkVOLVVTIj5UaGFua3MgZm9yIGpvaW5pbmcgdGhpcyB3b3JraW5nIGdyb3VwLiBJ
dHMgZ29hbCBpcyB0byBmaW5kIG91dCBob3cgdG8gaW1wcm92ZSB0aGUgc3RhdGUgb2YgT0NhbWwg
YW5kIGl0cyBlY29zeXN0ZW0gb24gV2luZG93cy4mbmJzcDs8bzpwPjwvbzpwPjwvc3Bhbj48L3A+
DQo8L2Rpdj4NCjxkaXY+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyI+
PG86cD4mbmJzcDs8L286cD48L3NwYW4+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1z
b05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPlNvbWUgb2YgdGhlIHRhc2tzIHRoYXQgd2UgbWln
aHQgYWRkcmVzcyAodGhpcyBsaXN0IGlzIGJ5IG5vIG1lYW4gbWVhbnQgdG8gYmUgZXhoYXVzdGl2
ZSBub3Igbm9ybWF0aXZlKTo8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8L2Rpdj4NCjxkaXY+DQo8
cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyI+PG86cD4mbmJzcDs8L286cD48
L3NwYW4+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFu
Zz0iRU4tVVMiPi0gR2F0aGVyIGluZm9ybWF0aW9uIGZyb20gdGhlIGNvbW11bml0eSAmbmJzcDth
Ym91dCB0aGUgdXNlIG9mIHRoZSB2YXJpb3VzIHZlcnNpb25zIG9mIE9DYW1sIGF2YWlsYWJsZSBv
biBXaW5kb3dzLCBhbmQgdW5kZXJzdGFuZCB3aGF0IGtpbmQgb2YgZW52aXJvbm1lbnQgcGVvcGxl
IGFyZSB3b3JraW5nIHdpdGguIChCVFcsIEkgdGhpbmsgYSBnb29kIHdheSB0byBnZXQgdGhlIGRp
c2N1c3Npb24NCiByb2xsaW5nIG1pZ2h0IGJlIHRvIGRlc2NyaWJlIGVhY2ggb3RoZXIncyBzZXR1
cCB0byB1c2UgT0NhbWwgb24gV2luZG93cy4pPG86cD48L286cD48L3NwYW4+PC9wPg0KPC9kaXY+
DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPjxvOnA+Jm5i
c3A7PC9vOnA+PC9zcGFuPjwvcD4NCjwvZGl2Pg0KPGRpdj4NCjxkaXY+DQo8cCBjbGFzcz0iTXNv
Tm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyI+LSBGaW5hbGl6ZSBPUEFNIHN1cHBvcnQgZm9yIFdp
bmRvd3MgKHRoaXMgaXMgbGlzdGVkIG9uIHRoZSBPUEFNIDEuMyByb2FkbWFwKS4gV2hlbiB0aGlz
IHN1cHBvcnQgaXMgaW4gcGxhY2UsIG1hbnkgT0NhbWwgcGFja2FnZXMgc2hvdWxkIHdvcmsgb3V0
IG9mIHRoZSBib3ggKHdpdGggdGhlIHByb3Zpc28gdGhhdCBtYW55IHBhY2thZ2VzIGFzc3VtZSBh
IHVuaXgtaXNoIGVudmlyb25tZW50DQogZm9yIHRoZWlyIGJ1aWxkIHN5c3RlbSkuJm5ic3A7PG86
cD48L286cD48L3NwYW4+PC9wPg0KPC9kaXY+DQo8L2Rpdj4NCjxkaXY+DQo8cCBjbGFzcz0iTXNv
Tm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyI+PG86cD4mbmJzcDs8L286cD48L3NwYW4+PC9wPg0K
PC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPi0g
RGlzY3VzcyBob3cgdG8gaGVscCBwYWNrYWdlIGRldmVsb3BlcnMgaW1wcm92ZSBXaW5kb3dzIHN1
cHBvcnQuIE9uZSB3YXkgdG8gZG8gdGhhdCBjb3VsZCBiZSB0byBwcm92aWRlIGtub3ctaG93IGFi
b3V0IGhvdyB0byBzZXR1cCBjb250aW51b3VzIGludGVncmF0aW9uIG9uIHNlcnZpY2VzIGxpa2Ug
QXBwdmV5b3IgdG8gY2hlY2sgdGhhdCBwYWNrYWdlcyBidWlsZCBvbiB0eXBpY2FsDQogV2luZG93
cyBzZXR1cHMuJm5ic3A7PG86cD48L286cD48L3NwYW4+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAg
Y2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPjxvOnA+Jm5ic3A7PC9vOnA+PC9z
cGFuPjwvcD4NCjwvZGl2Pg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9
IkVOLVVTIj4tIEZpbmQgYSBzb2x1dGlvbiBmb3IgdXNlcnMgb2YgV09ESSwgdGhlIEdPREkgYmFz
ZWQgT0NhbWwgZGlzdHJpYnV0aW9uIGZvciBXaW5kb3dzLCB3aGljaCBoYXMgYmVlbiBzaHV0ZG93
bi4gV09ESSB3YXMgYWJsZSB0byBjb21waWxlIE9DYW1sIHJlbGF0ZWQgc29mdHdhcmUgKHVzaW5n
IEN5Z3dpbiBhcyBhbiBlbnZpcm9ubWVudCksIGJ1dCB3YXMgYWxzbyBhYmxlIHRvIGluc3RhbGwN
CiBiaW5hcnkgcGFja2FnZXMuIChJbiBzb21lIGNhc2VzLCBzb21lIG5vbi10cml2aWFsIHBhdGNo
ZXMgJm5ic3A7d2VyZSBhcHBsaWVkIHRvIG1ha2UgcGFja2FnZSB1c2FibGUgb24gV2luZG93cy4p
IFNvbWUgb2YgdGhlIHNvdXJjZXMgbmVlZGVkIHRvIHVzZSBXT0RJIGFyZSBzdGlsbCBhdmFpbGFi
bGUsIGJ1dCB0aGUgc3lzdGVtIGRvZXMgbm90IHdvcmsgb3V0IG9mIHRoZSBib3ggbm93IHRoYXQg
dGhlIHNlcnZlciBoYXMgZ29uZSBvZmZsaW5lLiBXaXRoIGENCiBsaXR0bGUgd29yaywgd2UgbWln
aHQgYmUgYWJsZSB0byBicmluZyBpdCBiYWNrLCB0byBzbW9vdGggdGhlIHRyYW5zaXRpb24uJm5i
c3A7PG86cD48L286cD48L3NwYW4+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05v
cm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPjxvOnA+Jm5ic3A7PC9vOnA+PC9zcGFuPjwvcD4NCjwv
ZGl2Pg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIj4tIERp
c2N1c3MgdGhlIHN0YXRlIG9mIGNyb3NzIGNvbXBpbGF0aW9uIHRvIFdpbmRvd3MuJm5ic3A7PG86
cD48L286cD48L3NwYW4+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+
PHNwYW4gbGFuZz0iRU4tVVMiPjxvOnA+Jm5ic3A7PC9vOnA+PC9zcGFuPjwvcD4NCjwvZGl2Pg0K
PGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIj4tIEFkdmVydGlz
ZSBPQ2FtbFBybydzIE9DUFdpbiBjb21tZXJjaWFsIGVmZm9ydC4gKEkgd2lsbCBsZWF2ZSBGYWJy
aWNlIHRlbGwgYSBiaXQgbW9yZSBhYm91dCB0aGF0Lik8bzpwPjwvbzpwPjwvc3Bhbj48L3A+DQo8
L2Rpdj4NCjxkaXY+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5nPSJFTi1VUyI+PG86
cD4mbmJzcDs8L286cD48L3NwYW4+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPGRpdj4NCjxwIGNsYXNz
PSJNc29Ob3JtYWwiPjxzcGFuIGxhbmc9IkVOLVVTIj4tIERpc2N1c3MgaG93IHRvIHBvb2wgcmVz
b3VyY2VzIChpZiBuZWVkZWQpIHRvIHdvcmsgdG93YXJkIHRoZXNlIGdvYWxzLiZuYnNwOzxvOnA+
PC9vOnA+PC9zcGFuPjwvcD4NCjwvZGl2Pg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05v
cm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPiZuYnNwOzxvOnA+PC9vOnA+PC9zcGFuPjwvcD4NCjwv
ZGl2Pg0KPGRpdj4NCjxkaXY+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBsYW5nPSJFTi1V
UyI+TWFueSB0aGFua3MgdG8gQW5pbCBhbmQgT2NhbWxMYWJzIGZvciBob3N0aW5nIHRoaXMgbWFp
bGluZyBsaXN0LjxvOnA+PC9vOnA+PC9zcGFuPjwvcD4NCjwvZGl2Pg0KPC9kaXY+DQo8ZGl2Pg0K
PHAgY2xhc3M9Ik1zb05vcm1hbCI+PHNwYW4gbGFuZz0iRU4tVVMiPjxvOnA+Jm5ic3A7PC9vOnA+
PC9zcGFuPjwvcD4NCjwvZGl2Pg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPlRob21hczxv
OnA+PC9vOnA+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+PG86cD4m
bmJzcDs8L286cD48L3A+DQo8L2Rpdj4NCjxkaXY+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48bzpw
PiZuYnNwOzwvbzpwPjwvcD4NCjwvZGl2Pg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxv
OnA+Jm5ic3A7PC9vOnA+PC9wPg0KPC9kaXY+DQo8L2Rpdj4NCjwvZGl2Pg0KPC9ib2R5Pg0KPC9o
dG1sPg0K

--_000_965631B03C670145ABB9F693E51622530D05EC72DENBGAT9EK5MSXw_--

From vincent.berthoux@siemens.com  Mon Jun  1 08:45:12 2015
Return-Path: <vincent.berthoux@siemens.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 496C03C064
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 08:45:12 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from gw.ugs.com ([66.117.193.162]:12141 helo=ugs.com)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1:AES128-SHA:128)
 id 1YzKU5-00046k-l2 (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <vincent.berthoux@siemens.com>); Mon, 01 Jun 2015 08:50:15 +0100
Received: from USCIMMBX002.net.plm.eds.com (161.134.128.152) by
 USCIMHUB002.net.plm.eds.com (146.122.22.36) with Microsoft SMTP Server (TLS)
 id 14.3.224.2; Mon, 1 Jun 2015 03:49:42 -0400
Received: from DEKOMHUB002.net.plm.eds.com (149.246.249.178) by
 USCIMMBX002.net.plm.eds.com (161.134.128.152) with Microsoft SMTP Server
 (TLS) id 14.3.224.2; Mon, 1 Jun 2015 03:49:42 -0400
Received: from [10.19.20.85] (10.19.20.85) by DEKOMHUB002.net.plm.eds.com
 (149.246.249.178) with Microsoft SMTP Server id 14.3.224.2; Mon, 1 Jun 2015
 09:49:40 +0200
Message-ID: <556C0E93.7080400@siemens.com>
Date: Mon, 1 Jun 2015 09:49:39 +0200
From: Vincent Berthoux <vincent.berthoux@siemens.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.5.0
MIME-Version: 1.0
To: <wg-windows@lists.ocaml.org>
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: 7bit
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 07:45:12 -0000

Hello,

   Thanks again for this mailing list.

We use OCaml with Linux and Windows, providing two different native 
builds to our users. The main tool is shipped as a dynamic library used 
in other parts of our software. We use the MSVC 2010 port of the OCaml 
compiler on Windows. Right now our setup use the following versions:

  * Ocaml 4.01.0
  * ocamllex/ocamlyacc
  * pprint
  * uutf
  * xmlm

The biggest pain points for us are:

   * ocamlbuild using bash behind the scenes, "luckily" we are dependent 
on Cygwin for various reasons, but it would be great if it didn't use it.
   * ocamlfind slows down compilation considerably under windows, from 
our tests with Ocaml 4.02.1. The repeated invocation of bash may be the 
main culprit here.
   * hard-coded paths in the compiler, this is relatively problematic, 
we often compiler OCaml once and distribute it among the developers, and 
environment configuration is touchy.
   * Trying to compile a library on windows is always a gamble.

We wanted to switch to OCaml 4.02.1 to be able to use ppx_deriving but 
due to some environment configuration problems we postponed the switch.

   Thanks

     Vincent

From anil@recoil.org  Mon Jun  1 09:25:04 2015
Return-Path: <anil@recoil.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id D60DE3C0B6
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 09:25:04 +0100 (BST)
X-Cam-SpamDetails: score -0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from bark.recoil.org ([5.153.225.51]:3351)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256)
 id 1YzL6k-0004a8-rk (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <anil@recoil.org>); Mon, 01 Jun 2015 09:30:07 +0100
Received: from [10.0.0.94] (host81-149-102-120.in-addr.btopenworld.com
 [81.149.102.120]); 
 by bark.recoil.org (OpenSMTPD) with ESMTPSA id 92cb3017;
 TLS version=TLSv1/SSLv3 cipher=ECDHE-RSA-AES256-SHA bits=256 verify=NO;
 Mon, 1 Jun 2015 09:30:05 +0100 (BST)
Content-Type: multipart/alternative;
 boundary="Apple-Mail=_61B98BFF-48AF-4B3E-8770-E8EA18BF582E"
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2098\))
From: Anil Madhavapeddy <anil@recoil.org>
In-Reply-To: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Date: Mon, 1 Jun 2015 09:30:05 +0100
Message-Id: <892CE4C0-3A54-4180-B14A-6C0EAC40A917@recoil.org>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
To: Thomas Braibant <thomas.braibant@gmail.com>
X-Mailer: Apple Mail (2.2098)
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 08:25:04 -0000


--Apple-Mail=_61B98BFF-48AF-4B3E-8770-E8EA18BF582E
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

On 29 May 2015, at 16:10, Thomas Braibant <thomas.braibant@gmail.com> =
wrote:
>=20
> - Finalize OPAM support for Windows (this is listed on the OPAM 1.3 =
roadmap). When this support is in place, many OCaml packages should work =
out of the box (with the proviso that many packages assume a unix-ish =
environment for their build system).=20
>=20
> - Discuss how to help package developers improve Windows support. One =
way to do that could be to provide know-how about how to setup =
continuous integration on services like Appveyor to check that packages =
build on typical Windows setups.=20

One thing I would *really* like to do is to hook in the current =
experimental bulk builds of OPAM into Windows as well.  Right now we use =
Docker for Linux builds, but the plan is to expand this further (see =
https://opam.ocaml.org/builds/ <https://opam.ocaml.org/builds/> for the =
logs).

One way to make the results more useful is to open a brand new =
opam-repository just for Windows, with the build rules and patches =
ported over from the old WODI.  This could be the 'native' Windows =
repository, with the Unix one containing the minimal patches required =
for Cygwin support.  Unification could then happen over time, =
particularly as more declarative systems such as Assemblage mature.

We don't have the expertise to do the Windows porting here in Cambridge, =
but are very happy to set up and operate the build infrastructure on =
virtual machines if someone can point us at an OPAM remote...

-anil=

--Apple-Mail=_61B98BFF-48AF-4B3E-8770-E8EA18BF582E
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" =
class=3D"">On 29 May 2015, at 16:10, Thomas Braibant &lt;<a =
href=3D"mailto:thomas.braibant@gmail.com" =
class=3D"">thomas.braibant@gmail.com</a>&gt; wrote:<br =
class=3D""><div><blockquote type=3D"cite" class=3D""><br =
class=3D"Apple-interchange-newline"><div class=3D""><div =
style=3D"font-family: Helvetica; font-size: 12px; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; orphans: auto; text-align: start; text-indent: 0px; =
text-transform: none; white-space: normal; widows: auto; word-spacing: =
0px; -webkit-text-stroke-width: 0px;" class=3D""><div class=3D"">- =
Finalize OPAM support for Windows (this is listed on the OPAM 1.3 =
roadmap). When this support is in place, many OCaml packages should work =
out of the box (with the proviso that many packages assume a unix-ish =
environment for their build system).&nbsp;<br class=3D""></div></div><div =
style=3D"font-family: Helvetica; font-size: 12px; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; orphans: auto; text-align: start; text-indent: 0px; =
text-transform: none; white-space: normal; widows: auto; word-spacing: =
0px; -webkit-text-stroke-width: 0px;" class=3D""><br class=3D""></div><div=
 style=3D"font-family: Helvetica; font-size: 12px; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; orphans: auto; text-align: start; text-indent: 0px; =
text-transform: none; white-space: normal; widows: auto; word-spacing: =
0px; -webkit-text-stroke-width: 0px;" class=3D"">- Discuss how to help =
package developers improve Windows support. One way to do that could be =
to provide know-how about how to setup continuous integration on =
services like Appveyor to check that packages build on typical Windows =
setups.&nbsp;</div></div></blockquote><br class=3D""></div><div>One =
thing I would *really* like to do is to hook in the current experimental =
bulk builds of OPAM into Windows as well. &nbsp;Right now we use Docker =
for Linux builds, but the plan is to expand this further (see <a =
href=3D"https://opam.ocaml.org/builds/" =
class=3D"">https://opam.ocaml.org/builds/</a>&nbsp;for the =
logs).</div><div><br class=3D""></div><div>One way to make the results =
more useful is to open a brand new opam-repository just for Windows, =
with the build rules and patches ported over from the old WODI. =
&nbsp;This could be the 'native' Windows repository, with the Unix one =
containing the minimal patches required for Cygwin support. =
&nbsp;Unification could then happen over time, particularly as more =
declarative systems such as Assemblage mature.</div><div><br =
class=3D""></div><div>We don't have the expertise to do the Windows =
porting here in Cambridge, but are very happy to set up and operate the =
build infrastructure on virtual machines if someone can point us at an =
OPAM remote...</div><div><br =
class=3D""></div><div>-anil</div></body></html>=

--Apple-Mail=_61B98BFF-48AF-4B3E-8770-E8EA18BF582E--

From alain.frisch@lexifi.com  Mon Jun  1 10:26:17 2015
Return-Path: <alain.frisch@lexifi.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 769143C0B6
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 10:26:17 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [85.233.204.164 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mx20.yaziba.net ([85.233.204.164]:48492)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1:DHE-RSA-AES256-SHA:256)
 id 1YzM3z-0002t7-qV (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <alain.frisch@lexifi.com>); Mon, 01 Jun 2015 10:31:20 +0100
Received: from mta10.int.yaziba.net (unknown [10.4.20.30])
 by mx20.yaziba.net (mx10.yaziba.net) with ESMTP id 73D7A1A7465;
 Mon,  1 Jun 2015 11:31:18 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id 97021CA673;
 Mon,  1 Jun 2015 11:31:18 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id Ro8N77LqMz_M; Mon,  1 Jun 2015 11:31:18 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id 6DD8ACA677;
 Mon,  1 Jun 2015 11:31:18 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10026)
 with ESMTP id SyDfLwh9N950; Mon,  1 Jun 2015 11:31:18 +0200 (CEST)
Received: from [10.0.48.44] (unknown [185.23.92.144])
 by mta10.int.yaziba.net (Postfix) with ESMTPSA id 416D1CA673;
 Mon,  1 Jun 2015 11:31:18 +0200 (CEST)
Message-ID: <556C2666.6050505@lexifi.com>
Date: Mon, 01 Jun 2015 11:31:18 +0200
From: Alain Frisch <alain.frisch@lexifi.com>
Organization: LexiFi
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: Thomas Braibant <thomas.braibant@gmail.com>, 
 wg-windows@lists.ocaml.org
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
In-Reply-To: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-DRWEB-SCAN: ok
X-VRSPAM-SCORE: -100
X-VRSPAM-STATE: legit
X-VRSPAM-CAUSE: gggruggvucftvghtrhhoucdtuddrfeekuddrgeeggddugecutefuodetggdotefrucfrrhhofhhilhgvmecuggftfghnshhusghstghrihgsvgenuceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmnecujfgurhepkfffhfhofgggvffufhgjtgfgsehtjegrtddtfeehnecuhfhrohhmpeetlhgrihhnucfhrhhishgthhcuoegrlhgrihhnrdhfrhhishgthheslhgvgihifhhirdgtohhmqeenucffohhmrghinhepohgtrghmlhdrohhrghdpsggvthifvggvnhdrnhgvthdpghhithhhuhgsrdgtohhmpdhushgvrdhnvghtpdhlvgigihhfihdrtghomhdpfhhorhdrnhgvthdpthhhrhhouhhghhdrnhgvth
X-VRSPAM-EXTCAUSE: mhhouggvpehsmhhtphhouhht
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 09:26:17 -0000

Hi all,

Setting up this list is a great initiative!


1. A few words about the use of OCaml under Windows at LexiFi

Windows is one of the most important platform we need to support, and we 
deliver GUI applications in both 32 and 64-bit, using the two MSVC 
ports.  We also ensure compatibility of our code base with the two mingw 
ports "just in case"  (technically, these ports allow to produce 
standalone applications that run even on a plain WinXP box, whereas the 
MSVC ports require msvcrtXX.dll, which might not be available).  We 
don't have any use for the two Cygwin ports.

We are not a "Windows pure player": Linux is also an important platform 
for some of our customers and projects, and most our code base is also 
supported there.

All our code lives in a single tree whose build is managed mainly by 
omake, assuming a Cygwin environment under Windows.  Our tree also has 
code in other languages (C, Fortran, C#, etc).  We integrate a very 
small number of third-party OCaml libraries, simply by injecting their 
source code into our tree and adding tiny OMakefiles to integrate them 
in our global build system.  This is often easier than fighting with 
upstream Makefiles, etc.

For now, we don't use (nor install) ocamlfind, camlp4 or ocamlbuild. 
Our developers work typically in emacs or vim, and ocp-indent is available.

We interact with Windows and Windows libraries (in addition to what 
OCaml provides in Sys and Unix) mostly through .Net.  To this end, we 
have developped CSML, a bridge between .Net and OCaml ( 
https://www.lexifi.com/csml ).  We use .Net for the UI (Windows Forms), 
for simple bindings e.g. with Oracle, Outlook, MS Excel, etc.

Our Windows application comes with a built-in small IDE that allows end 
users to edit and compile OCaml addins (which are dynlinked in the 
application upon startup).  This means that our application is shipped 
with a minimal  toolchain required to support generation of .cmxs files 
from source code: ocamlopt, flexdll and some .cmi/.cmx files.  Note that 
we don't need any external assembler or linker (our users don't need to 
install any "native toolchain"):

    - flexdll has a mode where it can build simple dll (cmxs) without 
relying on an external linker.  This wouldn't support linking arbitrary 
.obj files (with resources, debug information, etc), but we only need to 
support code produced by OCaml.

    - We use a modified OCaml backend that replaces emit.mlp with a 
direct x86 (32 or 64-bit) machine code emitter and a COFF object file 
output  (this was developped with the help of OCamlPro; the code is 
owned jointly by OCamlPro and LexiFi).  In OCaml's trunk, we have 
unified emit.mlp/emit_mt.mlp (for both i386 and amd64) to produce an AST 
of the generated assembly code, so our binary backend is now just an 
extra backend on this AST (in addition to the Intel and AT&T textual 
emitters), which simplifies maintenance of this part quite a bit (this 
also benefits to all Windows users, since this avoids the duplication 
between emit.mlp/emit_nt.mlp, which sometimes resulted in emit_nt.mlp 
lagging behind).


Note that this couldn't be used directly to produce main programs 
without a native toolchain (with use startup objects, c lib, etc).  This 
isn't a big theoretical limitation: we could always ship an ocamlrunopt 
program that would simply dynlink a main.cmxs file appended to it -- in 
the same spirit as ocamlrun.

We also modified OCaml a little bit to make it easier to relocate the 
toolchain (which is important when you ship binary code that can be 
installed anywhere).  For instance, we changed the default path for 
looking up the standard library to make it relative to the path of the 
compiler executable (e.g. we use ../lib, starting from the directory of 
Sys.executable_name).



2. Ideas about how to improve OCaml under Windows


Globally, we find that the current state of OCaml itself is not too bad 
under Windows.  Some tiny touches would make the life easier to people 
hacking on the OCaml toolchain itself under Windows, or just building it 
from sources: for instance, adapting ./configure (or providing another 
script) instead of telling users to copy three files and edit one.  Some 
internal cleanup would also be a good idea, e.g. merging various 
Makefile and Makefile.nt, or at least sharing common parts, to avoid 
duplication and divergence, although the Continuous Integration system 
which is now in place catches many Windows build failures early, so this 
is less critical these days.  There are also deeper projects to address 
embarrassing parts, such as supporting Unicode when interacting with the 
filesystem ( https://github.com/ocaml/ocaml/pull/153 ); and the 
Unix.select emulation still has problems (see the "OCaml windows" 
category on OCaml's Mantis).

The story seems to be less nice with external tools and libraries, 
although LexiFi is not overly affected by that.  This is mostly a 
consequence of the composition of the OCaml community, which is largely 
Unix oriented.  Windows is considered as a second-class citizen by most 
OCaml core developers and package maintainers.

Excellent support of OCaml (and its ecosystem) under Windows can only be 
achieved if we manage to attract people who are primarily Windows 
developers, not Unix developers who are somehow forced to support 
Windows, or -- even worse -- who are mainly interested in porting 
existing projects from Unix to Windows.  Those people would typically be 
reluctant to use Cygwin or emacs/vim/etc.  It's not clear to me how to 
attract such people, though, since F# is a strong competitor for OCaml 
under Windows.  At least, one would need to think about how to 
articulate the benefits of OCaml, to remove technical obstacles and 
facilitate first steps with OCaml under Windows.  My intuition is that 
our goal should be to attract (enlightened) hobbyists developers under 
Windows for now (as opposed to, say, trying to make OCaml directly the 
natural choice for pure Windows companies), in order to bootstrap the 
process.

Good support for existing OCaml libraries (at least those which are 
relevant under Windows) is certainly an important goal.  Even if we 
never reach a state where OCaml is considered as a natural choice for a 
pure Windows developer or company, this will already give more 
visibility to OCaml, reinforce its already excellent cross-platform 
reputation, and help people who are forced to use Windows (or just port 
from Unix to Windows).

An important step to improve support of existing libraries under Windows
is to have good Windows support for OPAM.  This will make it easier for 
people to test libraries under Windows and so give incentive to upstream 
developers to fix them (and themselves set up a working OCaml Windows 
dev environment more easily).   Something like the OPAM Weather Service 
could be a great help here.  From what I understand, OPAM is not very 
far from supporting Windows, and I think that it's already possible to 
compile OPAM with a Cygwin port of OCaml (and have it manage native 
switches?).

I believe Cygwin will remain an important part of the story for OCaml 
under Windows for some time.  OCaml itself and many existing packages 
require a Unix-like environment in their build system, and it doesn't 
seem realistic trying to fix that soon.  Since I don't believe in binary 
distributions of OCaml packages in general (because updating a library 
forces to update all other packages that depend on it), this means that 
users would need a Cygwin environment.  Except perhaps for 
well-controlled dev environments (e.g. for LexiFi's built-in IDE, we 
don't expect users to install their own extra libraries; something 
similar could make sense for Ocsigen addins, etc).  I don't know if we 
should try to hide it as much as possible (e.g. by creating bundled 
installers) or not.  If/when OPAM supports installing native switches, 
even if itself built with Cygwin, then it could make sense to contribute 
a Cygwin package for OPAM.  At least for people using the mingw port, 
this would mean that setting up their environment could be as simple as 
installing Cygwin with a well-documented list of packages (the mingw 
compilers, flexdll, OPAM, and required extra tools such as make, etc), 
and then using OPAM to compile/install OCaml and other packages from 
sources.  (People wanting to use the MSVC ports would  need to install 
MSVC themselves.)

Making sure OPAM and existing libraries work under Windows is only the 
beginning.  Hopefully, this could be enough to attract "native" Windows 
developers, who could then contribute to a richer Windows experience, 
such as:

   - Binding a larger subset of the Win32 API.
   - Tools and bindings to interact with Windows applications (e.g. to 
support writing easily an OCaml addin for Excel).
   - Some GUI frontend for OPAM and a decent graphical toplevel for OCaml.
   - Better support for .Net (CSML is enough for LexiFi needs, but would 
deserve some polishing).
   - Support for popular IDEs.



Alain





On 05/29/2015 05:10 PM, Thomas Braibant wrote:
> Hi,
>
> Thanks for joining this working group. Its goal is to find out how to
> improve the state of OCaml and its ecosystem on Windows.
>
> Some of the tasks that we might address (this list is by no mean meant
> to be exhaustive nor normative):
>
> - Gather information from the community  about the use of the various
> versions of OCaml available on Windows, and understand what kind of
> environment people are working with. (BTW, I think a good way to get the
> discussion rolling might be to describe each other's setup to use OCaml
> on Windows.)
>
> - Finalize OPAM support for Windows (this is listed on the OPAM 1.3
> roadmap). When this support is in place, many OCaml packages should work
> out of the box (with the proviso that many packages assume a unix-ish
> environment for their build system).
>
> - Discuss how to help package developers improve Windows support. One
> way to do that could be to provide know-how about how to setup
> continuous integration on services like Appveyor to check that packages
> build on typical Windows setups.
>
> - Find a solution for users of WODI, the GODI based OCaml distribution
> for Windows, which has been shutdown. WODI was able to compile OCaml
> related software (using Cygwin as an environment), but was also able to
> install binary packages. (In some cases, some non-trivial patches  were
> applied to make package usable on Windows.) Some of the sources needed
> to use WODI are still available, but the system does not work out of the
> box now that the server has gone offline. With a little work, we might
> be able to bring it back, to smooth the transition.
>
> - Discuss the state of cross compilation to Windows.
>
> - Advertise OCamlPro's OCPWin commercial effort. (I will leave Fabrice
> tell a bit more about that.)
>
> - Discuss how to pool resources (if needed) to work toward these goals.
> Many thanks to Anil and OcamlLabs for hosting this mailing list.
>
> Thomas
>
>
>
>
>
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows
>


From an@satcom1.com  Mon Jun  1 13:24:18 2015
Return-Path: <an@satcom1.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id B0F773C07A
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 13:24:18 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [157.55.234.74 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-db3on0074.outbound.protection.outlook.com
 ([157.55.234.74]:42832 helo=emea01-db3-obe.outbound.protection.outlook.com)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1.2:AES256-SHA256:256)
 id 1YzOqC-0005fR-kG (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <an@satcom1.com>); Mon, 01 Jun 2015 13:29:22 +0100
Authentication-Results: spf=none (sender IP is ) smtp.mailfrom=an@satcom1.com; 
Received: from [172.16.33.162] (213.174.108.235) by
 DB3PR06MB0923.eurprd06.prod.outlook.com (25.161.60.147) with Microsoft SMTP
 Server (TLS) id 15.1.172.22; Mon, 1 Jun 2015 12:28:49 +0000
Message-ID: <556C4FB1.2090007@satcom1.com>
Date: Mon, 1 Jun 2015 14:27:29 +0200
From: Adrien Nader <an@satcom1.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.6.0
MIME-Version: 1.0
To: <wg-windows@lists.ocaml.org>
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [213.174.108.235]
X-ClientProxiedBy: AM3PR08CA0075.eurprd08.prod.outlook.com (25.163.23.171) To
 DB3PR06MB0923.eurprd06.prod.outlook.com (25.161.60.147)
X-Microsoft-Antispam: UriScan:; BCL:0; PCL:0; RULEID:(42139001);
 SRVR:DB3PR06MB0923; 
X-Microsoft-Antispam-PRVS: <DB3PR06MB092368000F42319F952F45838CB60@DB3PR06MB0923.eurprd06.prod.outlook.com>
X-Exchange-Antispam-Report-Test: UriScan:;
X-Exchange-Antispam-Report-CFA-Test: BCL:0; PCL:0;
 RULEID:(601004)(520003)(5005006)(3002001); SRVR:DB3PR06MB0923; BCL:0; PCL:0;
 RULEID:; SRVR:DB3PR06MB0923; 
X-Forefront-PRVS: 05947791E4
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(6049001)(6009001)(199003)(189002)(51704005)(52034003)(66066001)(68736005)(47776003)(5001860100001)(50986999)(80316001)(65806001)(33656002)(40100003)(5001830100001)(110136002)(107886002)(86362001)(59896002)(36756003)(54356999)(19580395003)(42186005)(101416001)(189998001)(77156002)(23676002)(65956001)(4001540100001)(4001350100001)(81156007)(97736004)(77096005)(2351001)(50466002)(450100001)(122386002)(92566002)(5001960100002)(87976001)(64706001)(105586002)(46102003)(87266999)(106356001)(15975445007)(64126003)(83506001)(62966003)(65816999)(229853001)(42262002)(460985005);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DB3PR06MB0923; H:[172.16.33.162]; FPR:;
 SPF:None; PTR:InfoNoRecords; A:1; MX:1; LANG:en; 
Received-SPF: None (protection.outlook.com: satcom1.com does not designate
 permitted sender hosts)
X-OriginatorOrg: satcom1.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 01 Jun 2015 12:28:49.4107 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DB3PR06MB0923
Subject: [wg-windows]  Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 12:24:18 -0000

Hi,

Sorry for breaking the threading and having a poor formatting: I
subscribed recently to the mailing-list and had to read the archives.

 From Edwin T=C3=B6r=C3=B6k:

> Cygwin64 unreliability
> ----------------------
>
> I don't know if the bug is in Windows, Cygwin64 or my VM configuration
> but the build system itself crashes a lot and randomly
> (there seems to be plenty of RAM available).
> Even things like make.exe or rm.exe crash with: segfault, fork:
> resource unavailable, exit code -1073741819.
> Restarting the cygwin shell helps sometimes but the errors are soon
> back, even when using just make -j1.
> The situation was bad enough that I had to repeat the build  4-5 times
> until it finally succeeded as it kept crashing in different places.
> Someone else tried WODI32 and didn't see such errors there, so that
> seems like a more reliable build system.
> Was about to report this as a bug in Cygwin64, but next week WODI was
> shutdown so that ended my Windows testing as well.

I just opened a bug on mantis after trying to build under Cygwin64 for
cygwin64. I actually got two major issues.
First, the simple one: lots of Cygwin-specific C code doesn't work
because it is behind #ifdef __CYGWIN32__ and that define is only for 32
bits.
The more annoying one: no flexlink binaries for Cygwin64. My
understanding is that there should be a flexlink_cygwin64.o file or
similar but currently it tries to use the 32bits .o and fails (it says
"undefined references" but that's expected for such a case).

You mention you used Cygwin64 quite some time ago. It is fairly young so
you probably tried it at a fairly early stage. With a recent
installation, I also got weird stuff: I couldn't pipe code to 'ocaml
-stdin', make wouldn't always redo .PHONY rules and not all toplevel
expressions in OCaml were always evaluated it /seems/ (that's something
I got when cross-compiling but never really understood).

Overall I would say the port is not in a good-enough shape to announce
as supported, even with limitations. That doesn't imply anything about
the Windows 64 port a priori.

Nevertheless it is important to have cygwin ports. For a sane system, we
need to avoid having a cygwin shell than spawns an non-cygwin executable
(build tool) which then spawns a cygwin bash which spawns a non-cygwin
executable (ocamlopt for instance). It's better to remain in the same
realm (no matter which one) for as many consecutive steps as possible
and at least some builds will definitely continue to require a unix
environment.

> Is there a way to have the build system and ocamlfind/ocamlopt/ocamlc
> agree on the format of paths?
> (i.e. either both of them are Cygwin or both of them native Win32 apps
> but not a mix)

I believe we should focus on cross-compilation to solve that. Currently
we need a mutant approach because OCaml's build on Cygwin for use
outside of Cygwin is itself a mutant.
If we had cross-compilation, we would have one ocamlbuild.exe (for
instance) that runs as a cygwin executable and one that runs as a native
windows executable; the former would use POSIX-style paths while the
latter would use Windows-style paths. There would be a clear distinction
and no need to have both usable at the same time.

By the way, C:/foo/bar is a perfectly valid Windows paths and avoids
many troubles with backslashes. Don't fear using forward slashes in paths.

> > - Discuss the state of cross compilation to Windows.
>
> This seems similar to the Android cross-compilation repository:
> https://github.com/vouillon/opam-windows-repository

It's also quite different: Makefile vs. Makefile.nt is a big issue in
practice. I've worked on reducing the differences but there are still many.
I believe it is a top priority to merge the two because otherwise it
means working on something that will have to be undone and re-done when
we finally merge the two set of makefiles. Merge conflicts have been a
huge pain for me when I last actively worked on the compiler build
system, to the point it cost several days, if not weeks and probably
prevented me from finishing the work.

--
Adrien Nader

[http://www.satcom1.com/marketing/banner/PAS_sig_banner.jpg]<http://www.sat=
com1.com/event/paris-airshow-2015-hall-4-e15/>

From edwin+ml-ocaml@etorok.net  Mon Jun  1 14:29:06 2015
Return-Path: <edwin+ml-ocaml@etorok.net>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 291033C07A
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 14:29:06 +0100 (BST)
X-Cam-SpamDetails: score -0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail.etorok.net ([62.210.252.135]:39293)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256)
 id 1YzPqz-0005II-jK (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <edwin+ml-ocaml@etorok.net>); Mon, 01 Jun 2015 14:34:09 +0100
Received: by mail.etorok.net (OpenSMTPD) with ESMTP id ccfc2e05
 for <wg-windows@lists.ocaml.org>;
 Mon, 1 Jun 2015 13:34:08 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha1; c=simple; d=etorok.net; h=message-id
 :date:from:mime-version:to:subject:references:in-reply-to
 :content-type:content-transfer-encoding; s=ml; bh=Lizn/9s9x+ajLy
 2XfloU/QBjUu0=; b=uaGAiUlKq3iVkO/WUgd+pccWmJACq28ufhFYLsCO1Ieu0V
 RH4FMYxQ5xeMJW+8BIo5h941mUkRBr6qguzVPsKlm4HvP2KEQsyHsl710H+sFUFi
 yXviM4+N41rKsQs9tAz0T06VRVtZjdDDmiMryvj9M4fA4L7YZcACyptLM3On8=
DomainKey-Signature: a=rsa-sha1; c=simple; d=etorok.net; h=message-id
 :date:from:mime-version:to:subject:references:in-reply-to
 :content-type:content-transfer-encoding; q=dns; s=ml; b=gX5j2Bw3
 45YMDwj1+Ntve5d7lx/t04+CwC6p5ThK62PiJ+1+E5oy93ZJcQME5yCZ+bXoDhU8
 wh+zlJScQXj6scXmCuyK9uGqgc2DjH+zcsdbcx/IV6Id3WvXjuGxH9WavQNl/3Gn
 zTKy0ohd1m1ue+vWtHPOAEmqy1x00/LGOZk=
Received: by mail.etorok.net (OpenSMTPD) with ESMTPSA id ea3c8eb5
 TLS version=TLSv1/SSLv3 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128 verify=NO
 for <wg-windows@lists.ocaml.org>;
 Mon, 1 Jun 2015 13:34:08 +0000 (UTC)
Message-ID: <556C5F4A.4010703@etorok.net>
Date: Mon, 01 Jun 2015 16:34:02 +0300
From: =?UTF-8?B?VMO2csO2ayBFZHdpbg==?= <edwin+ml-ocaml@etorok.net>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Icedove/31.7.0
MIME-Version: 1.0
To: wg-windows@lists.ocaml.org
References: <556C4FB1.2090007@satcom1.com>
In-Reply-To: <556C4FB1.2090007@satcom1.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 13:29:06 -0000

On 06/01/2015 03:27 PM, Adrien Nader wrote:
> I just opened a bug on mantis after trying to build under Cygwin64 for
> cygwin64. I actually got two major issues.
> First, the simple one: lots of Cygwin-specific C code doesn't work
> because it is behind #ifdef __CYGWIN32__ and that define is only for 32
> bits.
> The more annoying one: no flexlink binaries for Cygwin64. My
> understanding is that there should be a flexlink_cygwin64.o file or
> similar but currently it tries to use the 32bits .o and fails (it says
> "undefined references" but that's expected for such a case).

I got a flexlink installed by WODI64 according to my backup, but I didn't build it myself:
https://gist.githubusercontent.com/anonymous/5d7193abd52806ee33e6/raw/wodi64.7z%20backuplist

IIUC it was built using the patches from here: https://github.com/fdopen/godi-repo/tree/4.02/godi/godi-flexdll

> 
> You mention you used Cygwin64 quite some time ago.

Around 2015-04-28.

> It is fairly young so
> you probably tried it at a fairly early stage. With a recent
> installation, I also got weird stuff: I couldn't pipe code to 'ocaml
> -stdin', make wouldn't always redo .PHONY rules and not all toplevel
> expressions in OCaml were always evaluated it /seems/ (that's something
> I got when cross-compiling but never really understood).
> 
> Overall I would say the port is not in a good-enough shape to announce
> as supported, even with limitations. That doesn't imply anything about
> the Windows 64 port a priori.

Good to know, I'll stick to the 32-bit ports next time.

Best regards,
--Edwin

From alain.frisch@lexifi.com  Mon Jun  1 18:15:20 2015
Return-Path: <alain.frisch@lexifi.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 1E3763C07A
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 18:15:20 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [85.233.204.164 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mx20.yaziba.net ([85.233.204.164]:44973)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:DHE-RSA-AES256-SHA:256)
 id 1YzTNv-00042d-RP (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <alain.frisch@lexifi.com>); Mon, 01 Jun 2015 18:20:24 +0100
Received: from mta10.int.yaziba.net (unknown [10.4.20.30])
 by mx20.yaziba.net (mx10.yaziba.net) with ESMTP id A80331A7499;
 Mon,  1 Jun 2015 19:20:22 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id C1A3613D3B6;
 Mon,  1 Jun 2015 19:20:22 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id yXQLqjHxzjed; Mon,  1 Jun 2015 19:20:22 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id 9698113D3A4;
 Mon,  1 Jun 2015 19:20:22 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10026)
 with ESMTP id 4evE_ubF4ocZ; Mon,  1 Jun 2015 19:20:22 +0200 (CEST)
Received: from [10.0.48.44] (unknown [185.23.92.144])
 by mta10.int.yaziba.net (Postfix) with ESMTPSA id 74B4413CBC7;
 Mon,  1 Jun 2015 19:20:22 +0200 (CEST)
Message-ID: <556C9457.3040509@lexifi.com>
Date: Mon, 01 Jun 2015 19:20:23 +0200
From: Alain Frisch <alain.frisch@lexifi.com>
Organization: LexiFi
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: Adrien Nader <an@satcom1.com>, wg-windows@lists.ocaml.org
References: <556C4FB1.2090007@satcom1.com>
In-Reply-To: <556C4FB1.2090007@satcom1.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-DRWEB-SCAN: ok
X-VRSPAM-SCORE: -100
X-VRSPAM-STATE: legit
X-VRSPAM-CAUSE: gggruggvucftvghtrhhoucdtuddrfeekuddrgeeggddutdekucetufdoteggodetrfcurfhrohhfihhlvgemucggtfgfnhhsuhgsshgtrhhisggvpdgjtegkkfeuteenuceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmnecujfgurhepkfffhfhofgggvffufhgjtgfgsehtjegrtddtfeejnecuhfhrohhmpeetlhgrihhnucfhrhhishgthhcuoegrlhgrihhnrdhfrhhishgthheslhgvgihifhhirdgtohhmqeenucffohhmrghinhepshhtrggtkhhovhgvrhhflhhofidrtghomh
X-VRSPAM-EXTCAUSE: mhhouggvpehsmhhtphhouhht
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 17:15:20 -0000

On 06/01/2015 02:27 PM, Adrien Nader wrote:
> I believe we should focus on cross-compilation to solve that. Currently
> we need a mutant approach because OCaml's build on Cygwin for use
> outside of Cygwin is itself a mutant.
> If we had cross-compilation, we would have one ocamlbuild.exe (for
> instance) that runs as a cygwin executable and one that runs as a native
> windows executable; the former would use POSIX-style paths while the
> latter would use Windows-style paths. There would be a clear distinction
> and no need to have both usable at the same time.

If we are talking about building packages for native ports of OCaml 
(msvc or mingw), in which cases would one need a version of 
ocamlbuild.exe as a cygwin executable?  I'm not familiar with 
ocamlbuild, but I assume that it takes on its command-line typically 
relative paths, not absolute ones, so what would be the purpose of 
supporting POSIX-style paths (when the commands it will run expect 
Windows-style path)?

Ideally, a simple pure OCaml package should be buildable by a simple 
invocation of (native) ocamlbuild.exe without requiring a cygwin 
environment.

> By the way, C:/foo/bar is a perfectly valid Windows paths and avoids
> many troubles with backslashes. Don't fear using forward slashes in paths.

It's valid, but it could create problems with cmd.exe.  And OCaml 
programs tend to use cmd.exe under Windows to run external commands 
(e.g. with Sys.command).

http://stackoverflow.com/questions/10523708/why-does-the-cmd-exe-shell-on-windows-fail-with-paths-using-a-forward-slash

Simply typing in cmd.exe:

   foo/bar.exe

instead of

   foo\bar.exe

fails.  One could argue that to support whitespaces in filenames, one 
should quote the program name anyway, and indeed typing

   "foo/bar.exe"

in cmd.exe works.



Alain

From yotambarnoy@gmail.com  Mon Jun  1 18:56:52 2015
Return-Path: <yotambarnoy@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 11DAE3C07A
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 18:56:52 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.160.177 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (yotambarnoy[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-yk0-f177.google.com ([209.85.160.177]:35864)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1YzU27-0006Ta-Qr (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <yotambarnoy@gmail.com>); Mon, 01 Jun 2015 19:01:56 +0100
Received: by yked142 with SMTP id d142so45997792yke.3
 for <wg-windows@lists.ocaml.org>; Mon, 01 Jun 2015 11:01:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:from:date:message-id:subject:to
 :cc:content-type;
 bh=CPKNg3DvjLOcy5/vz8OCxGs8lEA8Oey72O8A/AsPZHs=;
 b=iGifBhvKAA89Otnwvprv5x6ESMzIFyoHSkRgqaaCsFSEszv6G0WY1w7ICeE42dJoYl
 /DQAbAuy1yilMmlsd93LNOKV6Tz4KMfU4Sxf1PiibEk80e5mP2WoJs9I4YeMv6UP0aVH
 mlBfj75XvzbaQTiqefO+LrmN1KmJ3oEVzacn2IHvJemaZtGnDFgF3yNwr7+6csD09Xom
 tIm1o2k97N0YvNnffPxUEkkrj1p3ItnVGWMUUMjFl66uvksffg7+UwmwwHUvPOC7tltq
 +O3yDMVHW7hrwvWFECq/EMnMAfTd59avCtn6GSsIYB5v4Rgm3VbAQbxSpr1o4cb5cnDM
 GZKA==
X-Received: by 10.236.1.231 with SMTP id 67mr24953877yhd.90.1433181714247;
 Mon, 01 Jun 2015 11:01:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.129.43.132 with HTTP; Mon, 1 Jun 2015 11:01:33 -0700 (PDT)
In-Reply-To: <556C9457.3040509@lexifi.com>
References: <556C4FB1.2090007@satcom1.com> <556C9457.3040509@lexifi.com>
From: Yotam Barnoy <yotambarnoy@gmail.com>
Date: Mon, 1 Jun 2015 14:01:33 -0400
Message-ID: <CAN6ygO=qX2yCY0s6Qk8-r8yPtStK-5JKg9ctM=yWPa9jst_k2w@mail.gmail.com>
To: Alain Frisch <alain.frisch@lexifi.com>
Content-Type: multipart/alternative; boundary=089e01183788f9f6110517789e7f
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 17:56:52 -0000

--089e01183788f9f6110517789e7f
Content-Type: text/plain; charset=UTF-8

>
>
> Ideally, a simple pure OCaml package should be buildable by a simple
> invocation of (native) ocamlbuild.exe without requiring a cygwin
> environment.
>
>
I completely agree with this.

I've been looking more into the different build options for OCaml over the
last couple of days, and it's a shame ocamlbuild punted on the job of task
multiplexing (installing different configurations and options and such) and
left it to makefiles and shell scripts. It seems like myocamlbuild.ml can
sometimes do part of this task, but projects that use myocamlbuild.ml also
have shell scripts or makefiles to multiplex different build options.

You then get some projects using OASIS, where some multiplexing is done
from the declarative layer, and all other files are built automatically,
but even then a Makefile is usually created by OASIS as the entry point.

It appears that there's no way to get around this issue. We need some
scripting language as a compilation front-end, but we don't want to invent
a new one (like OMake) since that's another cognitive burden. At the same
time, everyone agrees that Makefile rules are painful, as is bash
scripting, and worst of all, they're not cross-platform compatible.

For the front end, one option is to do the scripting inside something like
myocamlbuild.ml, which ocamlbuild makes sure to only compile when needed.
If the right cross-platform libraries are automatically imported, this can
be made relatively painless. But another option is to use something like
python scripting. Python is available on just about every system, and the
python devs have already dealt with cross-platform issues, which means a
python layer over ocamlbuild or python generated by OASIS and customized
could be much cleaner and more cross-platform compatible than the current
situation with Makefiles and shell scripts.

For the backend, ocamlbuild seems to be inadequate on its own once complex
C integration is required, mostly because its automatic dependency search
is really targeted at ocaml only. I've seen a claim that ocamlbuild can
build the entire ocaml compiler, and I'd like to see if that's really
possible. If so, perhaps a switch-over is worth considering for
simplicity's sake?

-Yotam

--089e01183788f9f6110517789e7f
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_extra"><div class=3D"gmail_quote"><blo=
ckquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #c=
cc solid;padding-left:1ex"><br>
Ideally, a simple pure OCaml package should be buildable by a simple invoca=
tion of (native) ocamlbuild.exe without requiring a cygwin environment.<spa=
n class=3D""><br></span><div class=3D"HOEnZb"><div class=3D"h5"><br></div><=
/div></blockquote><div><br></div><div>I completely agree with this.</div><d=
iv><br></div><div>I&#39;ve been looking more into the different build optio=
ns for OCaml over the last couple of days, and it&#39;s a shame ocamlbuild =
punted on the job of task multiplexing (installing different configurations=
 and options and such) and left it to makefiles and shell scripts. It seems=
 like <a href=3D"http://myocamlbuild.ml">myocamlbuild.ml</a> can sometimes =
do part of this task, but projects that use <a href=3D"http://myocamlbuild.=
ml">myocamlbuild.ml</a> also have shell scripts or makefiles to multiplex d=
ifferent build options.</div><div><br></div><div>You then get some projects=
 using OASIS, where some multiplexing is done from the declarative layer, a=
nd all other files are built automatically, but even then a Makefile is usu=
ally created by OASIS as the entry point.</div><div><br></div><div>It appea=
rs that there&#39;s no way to get around this issue. We need some scripting=
 language as a compilation front-end, but we don&#39;t want to invent a new=
 one (like OMake) since that&#39;s another cognitive burden. At the same ti=
me, everyone agrees that Makefile rules are painful, as is bash scripting, =
and worst of all, they&#39;re not cross-platform compatible.</div><div><br>=
</div><div>For the front end, one option is to do the scripting inside some=
thing like <a href=3D"http://myocamlbuild.ml">myocamlbuild.ml</a>, which oc=
amlbuild makes sure to only compile when needed. If the right cross-platfor=
m libraries are automatically imported, this can be made relatively painles=
s. But another option is to use something like python scripting. Python is =
available on just about every system, and the python devs have already deal=
t with cross-platform issues, which means a python layer over ocamlbuild or=
 python generated by OASIS and customized could be much cleaner and more cr=
oss-platform compatible than the current situation with Makefiles and shell=
 scripts.</div><div><br></div><div>For the backend, ocamlbuild seems to be =
inadequate on its own once complex C integration is required, mostly becaus=
e its automatic dependency search is really targeted at ocaml only. I&#39;v=
e seen a claim that ocamlbuild can build the entire ocaml compiler, and I&#=
39;d like to see if that&#39;s really possible. If so, perhaps a switch-ove=
r is worth considering for simplicity&#39;s sake?</div><div><br></div><div>=
-Yotam</div></div></div></div>

--089e01183788f9f6110517789e7f--

From bernhardschommer@gmail.com  Mon Jun  1 20:48:36 2015
Return-Path: <bernhardschommer@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id AA1563C07A
 for <wg-windows@lists.ocaml.org>; Mon,  1 Jun 2015 20:48:36 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.212.179 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (bernhardschommer[at]gmail.com)
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-wi0-f179.google.com ([209.85.212.179]:38196)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1YzVmG-00053U-RN (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <bernhardschommer@gmail.com>); Mon, 01 Jun 2015 20:53:41 +0100
Received: by wizo1 with SMTP id o1so118324394wiz.1
 for <wg-windows@lists.ocaml.org>; Mon, 01 Jun 2015 12:53:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=message-id:date:from:user-agent:mime-version:to:subject:references
 :in-reply-to:content-type:content-transfer-encoding;
 bh=mJ+K/Xdse7LVEk9WKz3XVAHKpwt1bxM67JcoyG465Ew=;
 b=rqXpOyjf7iRUDNxWqS4bsVoVB2rqEvhuhC+85hvzRlIxD8kAWN/Ym/VHPblIHTkrFp
 v7UMqbYbWu9Clu6XtvwuQHLAk3YtyBS9R24rIkXQoQL9rVLkBdOuKzWBHHgYLYSCcvaD
 1i8DUUxZnAPdKi3sAGX+K7k7oFFRgOllHeXFtOLqRSvYjL+kuiAJUZ1nQb4zpdumQjBf
 S2+JmWFE4Hv8ID64nop+BiSZ/gyAwzaWZzNv/nL/dB7HnJJusuiDjrA7SjcsBq6Rb7w8
 w600yjqnrckyJdlAo8s5Gg69Edz1eCI2ZP27ZeMe+c2CkyKjJBBMZ1j4o5E4+cpmiFZG
 y73A==
X-Received: by 10.194.184.14 with SMTP id eq14mr44385188wjc.58.1433188420179; 
 Mon, 01 Jun 2015 12:53:40 -0700 (PDT)
Received: from [192.168.178.22] (p57B3971F.dip0.t-ipconnect.de.
 [87.179.151.31])
 by mx.google.com with ESMTPSA id lz17sm18118723wic.24.2015.06.01.12.53.38
 for <wg-windows@lists.ocaml.org>
 (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Mon, 01 Jun 2015 12:53:39 -0700 (PDT)
Message-ID: <556CB839.3090502@gmail.com>
Date: Mon, 01 Jun 2015 21:53:29 +0200
From: Bernhard Schommer <bernhardschommer@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: wg-windows@lists.ocaml.org
References: <556C4FB1.2090007@satcom1.com> <556C9457.3040509@lexifi.com>
 <CAN6ygO=qX2yCY0s6Qk8-r8yPtStK-5JKg9ctM=yWPa9jst_k2w@mail.gmail.com>
In-Reply-To: <CAN6ygO=qX2yCY0s6Qk8-r8yPtStK-5JKg9ctM=yWPa9jst_k2w@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 01 Jun 2015 19:48:36 -0000

Hi all,

I also think that setting up this list is great.

1.) A few words about my working experience with ocaml under windows:

We build software which works both on windows and linux. For the windows 
build we build the current ocaml version using MSVC and cygwin. For the 
build of our actual applications we use pure Makefiles and a windows 
port of gnu-make. As library we currently use:
-menhir with a hand written makefile that performs that does the same as 
ocamlbuild
-zarith with a few patches in the c-bindings to work with older visual 
studio versions

In general this is working reliable, however gnu-make under windows is 
not that stable and can fail for the strangest reasons.

2.) My two cents on ocaml under windows:
In general the state is not that bad. But as already pointed out before 
I also see the dependency on cygwin under windows as one of the greatest 
problems, since using cygwin always results in great pain. As a first 
step it would be nice if ocaml itself could be build without cygwin and 
having ocamlbuild working under windows without cygwin or msys would be 
a good next step. I already did some experiments on my own removing the 
call to the shell under windows and using windows commands in shell.ml 
and it seems that it is possible to get it working at least for small 
examples and I'm convinced if the calls to other programs were performed 
using create_process ocamlbuild could be made working under windows.

Best Regards,
Bernhard

From alain.frisch@lexifi.com  Tue Jun  2 08:56:37 2015
Return-Path: <alain.frisch@lexifi.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id B1D683C373
 for <wg-windows@lists.ocaml.org>; Tue,  2 Jun 2015 08:56:37 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [85.233.204.164 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mx20.yaziba.net ([85.233.204.164]:42155)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1:DHE-RSA-AES256-SHA:256)
 id 1Yzh8p-0001HA-ql (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <alain.frisch@lexifi.com>); Tue, 02 Jun 2015 09:01:43 +0100
Received: from mta10.int.yaziba.net (unknown [10.4.20.30])
 by mx20.yaziba.net (mx10.yaziba.net) with ESMTP id A822D1A7473;
 Tue,  2 Jun 2015 10:01:42 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id B537ACB7F1;
 Tue,  2 Jun 2015 10:01:42 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id RXyYgdUQGLn4; Tue,  2 Jun 2015 10:01:42 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id 8FCC8CB7F3;
 Tue,  2 Jun 2015 10:01:42 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10026)
 with ESMTP id 4AkQLRJ4Wnzm; Tue,  2 Jun 2015 10:01:42 +0200 (CEST)
Received: from [10.0.48.44] (unknown [185.23.92.144])
 by mta10.int.yaziba.net (Postfix) with ESMTPSA id 687A4CB7F1;
 Tue,  2 Jun 2015 10:01:42 +0200 (CEST)
Message-ID: <556D62E6.4080805@lexifi.com>
Date: Tue, 02 Jun 2015 10:01:42 +0200
From: Alain Frisch <alain.frisch@lexifi.com>
Organization: LexiFi
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: Adrien Nader <an@satcom1.com>, wg-windows@lists.ocaml.org
References: <556C4FB1.2090007@satcom1.com> <556C9457.3040509@lexifi.com>
 <556CA52F.5030005@satcom1.com>
In-Reply-To: <556CA52F.5030005@satcom1.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-DRWEB-SCAN: ok
X-VRSPAM-SCORE: -100
X-VRSPAM-STATE: legit
X-VRSPAM-CAUSE: gggruggvucftvghtrhhoucdtuddrfeekuddrgeehgddufeeiucetufdoteggodetrfcurfhrohhfihhlvgemucggtfgfnhhsuhgsshgtrhhisggvpdgjtegkkfeuteenuceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmnecujfgurhepkfffhfhofgggvffufhgjtgfgsehtjegrtddtfeejnecuhfhrohhmpeetlhgrihhnucfhrhhishgthhcuoegrlhgrihhnrdhfrhhishgthheslhgvgihifhhirdgtohhmqe
X-VRSPAM-EXTCAUSE: mhhouggvpehsmhhtphhouhht
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 02 Jun 2015 07:56:37 -0000

On 06/01/2015 08:32 PM, Adrien Nader wrote:
> Yes, the best case would be an ocaml tool (ocamlbuild, assemblage,
> omake, that's not the question) that does everything without relying on
> the host posixness.
>
> However I do not expect this to be doable for all the cases, current or
> future. If the build system runs mt (control magnetic tape drive
> operation: autoconf sometimes check for it :)) through a direct command
> invocation, then it will need a posix host. My 'mt' example was a bit
> silly but it's very very common to see shell scripts used in build
> system hooks. Such things will always happen. For these we will always
> need a posix environment.

I completely agree.  But in my experience, using omake (as a native 
non-cywin application) works well even if it needs to call cygwin tools 
(e.g. "zip") -- perhaps because it relies on relative paths -- and I 
expect something similar to be achievable by ocamlbuild.  I understand 
your point that jumping from cygwin realm to "native" back and forth is 
not ideal, but providing Cygwin + native versions of all build tools 
would also be confusing.

Do you see concrete cases where using a cygwin ocamlbuild.exe to drive 
the compilation with a native port of OCaml would be useful?


> As for relative paths and ocamlbuild, I'm not even sure about that but
> paths are only a small part of the issue; maybe we could avoid that but
> it's a never-ending fight. I would rather tell people: "If it uses
> ocamlbuild, omake, assemblage or jenga, you can build it directly;
> otherwise you need Cygwin." and have builds for cygwin easy to setup.

Even with omake, of course it depends on what rules do.  For ocamlbuild, 
one could at least try to enforce this property when there is no custom 
myocamlbuild.ml in the project.


> This applies to cmd.exe but the use of cmd.exe should be banned
> altogether. Calls to Sys.command are done with a POSIX shell in mind.
> This is precisely why ocamlbuild depends on bash.exe from cygwin or
> msys: to interpret posix shell command-line and escapes. Noone will
> learn and apply the syntax rules of cmd.exe: the only solution is to
> have APIs based on string array at the OCaml level and implement the
> escape rules properly (Windows' CreateProcess() takes a string argument,
> not a string array one: it's needed if not using cmd.exe).

Does one need a new API, or fix Unix.create_process and co?

Do you know why ocamlbuild uses bash instead of Unix to run external 
commands?


Alain

From bernhardschommer@gmail.com  Tue Jun  2 09:17:04 2015
Return-Path: <bernhardschommer@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 42B113C064
 for <wg-windows@lists.ocaml.org>; Tue,  2 Jun 2015 09:17:04 +0100 (BST)
X-Cam-SpamScore: sss
X-Cam-SpamDetails: score 3.2 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.216.170 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (bernhardschommer[at]gmail.com)
 *  1.2 MISSING_HEADERS Missing To: header
 *  0.0 HTML_MESSAGE BODY: HTML included in message
 *  2.7 MALFORMED_FREEMAIL Bad headers on message from free email service
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-qc0-f170.google.com ([209.85.216.170]:33721)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1YzhSb-00055S-Sq (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <bernhardschommer@gmail.com>); Tue, 02 Jun 2015 09:22:10 +0100
Received: by qcmi9 with SMTP id i9so56981198qcm.0
 for <wg-windows@lists.ocaml.org>; Tue, 02 Jun 2015 01:22:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:date:message-id:subject:from:cc
 :content-type; bh=RXh9St+57a4lpCYs9xVl8jNZukz8difU/NNtcgCZ3Ps=;
 b=YGN3090dhgwFwqF2CGSi7hefciFCkJR4tGTnB013rw9c8xVTeFW8cwgjeoB8KnNjhb
 OVDg3Q4SHHSZvpCx6zfpzk1tHeIpuPbi1AAaandwEM/cDNuIWLBGW1R9iOjiYslvQdZZ
 MIxY4TZHlQQ+vg7EerQN3l2R+hO+3cEHF1ubBmNAEiTxabZxBrITAWTksnhfU63tpL4S
 F1LrmXvyBAq5yXCIUwWyXjG6hT1dGNmAJp16aIvkqIdLxEXpWntjdKDeqZ5SndBxlXpd
 Jlha+e7aNUuKQQX74MYm6Ha5ByfkRf2ilWLoPZqGcRCxlpgUDqSyiohSjFYlOhvuzOf4
 Cb1w==
MIME-Version: 1.0
X-Received: by 10.55.18.103 with SMTP id c100mr45419154qkh.2.1433233329041;
 Tue, 02 Jun 2015 01:22:09 -0700 (PDT)
Received: by 10.96.97.167 with HTTP; Tue, 2 Jun 2015 01:22:08 -0700 (PDT)
In-Reply-To: <556D62E6.4080805@lexifi.com>
References: <556C4FB1.2090007@satcom1.com> <556C9457.3040509@lexifi.com>
 <556CA52F.5030005@satcom1.com> <556D62E6.4080805@lexifi.com>
Date: Tue, 2 Jun 2015 10:22:08 +0200
Message-ID: <CAG8G+ns6H11WpM2VCj53ExGw7YwEWCMGxu0OLffSFR3Uw0JpxQ@mail.gmail.com>
From: Bernhard Schommer <bernhardschommer@gmail.com>
Cc: wg-windows@lists.ocaml.org
Content-Type: multipart/alternative; boundary=001a114669387537b5051784a3d4
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 02 Jun 2015 08:17:04 -0000

--001a114669387537b5051784a3d4
Content-Type: text/plain; charset=UTF-8

2015-06-02 10:01 GMT+02:00 Alain Frisch <alain.frisch@lexifi.com>:

>
> Does one need a new API, or fix Unix.create_process and co?
>
> Creat Process works the intended way under windows and also does the
necessary quoting.


> Do you know why ocamlbuild uses bash instead of Unix to run external
> commands?
>
> I think its because ocamlbuild was intended to also work when the unix
library is not available and some of the commands are not currently not
implemented in the unix library like rm -r or cp -R.

Best Regards,
Bernhard

--001a114669387537b5051784a3d4
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><br><div class=3D"gmail_extra"><div class=3D"gmail_quote">=
2015-06-02 10:01 GMT+02:00 Alain Frisch <span dir=3D"ltr">&lt;<a href=3D"ma=
ilto:alain.frisch@lexifi.com" target=3D"_blank">alain.frisch@lexifi.com</a>=
&gt;</span>:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8e=
x;border-left:1px #ccc solid;padding-left:1ex"><br>
Does one need a new API, or fix Unix.create_process and co?<br>
<br></blockquote><div>Creat Process works the intended way under windows an=
d also does the necessary quoting.<br></div><div>=C2=A0</div><blockquote cl=
ass=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;p=
adding-left:1ex">
Do you know why ocamlbuild uses bash instead of Unix to run external comman=
ds?<div class=3D"HOEnZb"><div class=3D"h5"><br></div></div></blockquote><di=
v>I think its because ocamlbuild was intended to also work when the unix li=
brary is not available and some of the commands are not currently not imple=
mented in the unix library like rm -r or cp -R.<br><br></div><div>Best Rega=
rds,<br></div><div>Bernhard<br></div></div><br></div></div>

--001a114669387537b5051784a3d4--

From dra-news@metastack.com  Tue Jun  2 09:55:54 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 7B7523C064
 for <wg-windows@lists.ocaml.org>; Tue,  2 Jun 2015 09:55:54 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.108 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148108.authsmtp.net ([62.13.148.108]:42856)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtp id 1Yzi4C-00055f-QL (Exim 4.82_3-c0e5623) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Tue, 02 Jun 2015 10:01:00 +0100
Received: from mail-c235.authsmtp.com (mail-c235.authsmtp.com [62.13.128.235])
 by punt15.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t5290x3s008712
 for <wg-windows@lists.ocaml.org>;
 Tue, 2 Jun 2015 10:00:59 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t5290sVe083359
 for <wg-windows@lists.ocaml.org>; Tue, 2 Jun 2015 10:00:55 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t5290sD8024478
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
 for <wg-windows@lists.ocaml.org>; Tue, 2 Jun 2015 10:00:54 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0224.002; Tue, 2 Jun 2015 10:00:53 +0100
From: David Allsopp <dra-news@metastack.com>
To: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Thread-Topic: [wg-windows] Improving the state of OCaml on Windows
Thread-Index: AQHQmiJpfWEG59RCuEiTqxo2QWy6G52Y4Yzw
Date: Tue, 2 Jun 2015 09:00:51 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9E9BE77B0@Remus.metastack.local>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
In-Reply-To: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.0.18]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: e0a5e352-0905-11e5-b396-002590a15da7
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNkUGEBtQ
 NEpdMUF7NFwHWUof XDVaBghKDx8mF2N3 dHAUMxpfYktLTwRq WkhJSFdXWgdpAgIA
 BhsAUBhwaQRHfGFy YFliEDReXk16NiAo QkZXFmgPK2BmaGRR BUAJclZXdQFXfhZF
 b01+VSYIfDcEb3x9 R1dpYmFpNGwCJC0K VDsgfxohXklOAT86 SxcdBgBnPEgdXSIt
 LhopYkIcEQ4KLkwu PBMmVxo/GBYXDkVZ GQlyASlVIEYaLwAA 
X-Authentic-SMTP: 61633634383431.1023:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 02 Jun 2015 08:55:54 -0000

SSBhbHNvIGFkZCBteSB0aGFua3MgZm9yIHRoaXMgbGlzdCdzIGJlaW5nIHN0YXJ0ZWQhDQoNCk15
IG9uZS1tYW4tYmFuZCBoYXMgd29ya2VkIG9uIE9DYW1sIHNvZnR3YXJlIG9uIFdpbmRvd3Mgc2lu
Y2UgMjAwMyAodGhvdWdoIEkgY29tcGlsZSBzb21lIHByb2plY3RzIG9uIExpbnV4IGFuZCBCU0Qg
YXMgd2VsbCkuIEkgZGV2ZWxvcCB1c2luZyBhIGhvc3Qgb2YgV2luZG93cy1jb21waWxlZCBVTklY
IHV0aWxpdGllcyBydW4gZnJvbSBjbWQgKHVudXN1YWwsIEkga25vdyAtIEkgc2ltcGx5IGZpbmQg
aXQgbW9yZSBzdGFibGUgYW5kIGNvbnNpZGVyYWJseSBmYXN0ZXIgdGhhbiB1c2luZyBDeWd3aW4n
cyBiYXNoLCB3aGljaCBjcmFzaGVzIGEgbG90LCBhbmQgd29ycnlpbmcgYWJvdXQgdGhlIHNoZWxs
IHNlZW1zIHRvIG1lIHRvIGJlIG1pY3JvLW9wdGltaXNpbmcgLSBJIHNwZW5kIG1vc3Qgb2YgbXkg
dGltZSBhY3R1YWxseSB3cml0aW5nIG9yIGxvb2tpbmcgYXQgY29kZSwgbm90IHNpdHRpbmcgaW4g
YSBzaGVsbCkuIEkgZWRpdCBjb2RlIHVzaW5nIFZpbSB3aXRoIE1lcmxpbi4NCg0KTGFyZ2VseSBv
d2luZyB0byBsYXppbmVzcywgSSdtIHN0aWxsIG9uIE9DYW1sIDQuMDEgbWluZ3czMiAodGhvdWdo
IEkgaGF2ZSBiZWVuIHVzaW5nIDQuMDIgd2hlbiB3b3JraW5nIG9uIHBvcnRpbmcgT1BBTSkgd2l0
aCBmaW5kbGliLCBleHRsaWIsIG9jYW1sLWNhbGVuZGFyLCBwY3JlLW9jYW1sLCBvY2FtbC1jc3Ys
IGJhdHRlcmllcywgcGdvY2FtbCwgY2FtbHppcCwgb2NhbWwtc3NsLCBjcnlwdG9raXQsIG9jYW1s
bmV0LCBqc29uLXdoZWVsL2pzb24tc3RhdGljLCBzcGlkZXJjYW1sLCBvY2FtbC1zaGEsIG9jYW1s
ZGFwLCBjcHBvLCBjYW1sbWl4LCBjYW1sMmh0bWwsIGVhc3ktZm9ybWF0LCBiaW5pb3UsIHlvanNv
biwgbWVuaGlyLCBtZXJsaW4sIHR5cGVfY29udiwgb2RuLCBvY2FtbG1vZCwgb2NhbWxpZnksIGZp
bGV1dGlscywgZXhwZWN0LCBvdW5pdCwgb2FzaXMsIGNtZGxpbmVyLCBjdWRmLCBkb3NlMywganNv
bm0sIG9jYW1sZ3JhcGgsIHJlICYgdXV0Zg0KDQpNeSBpbnN0YWxsYXRpb24gc2NyaXB0cyBoYXZl
IG1vcnBoZWQgb3ZlciB0aGUgeWVhcnMgLSBJIHR5cGljYWxseSB1cGdyYWRlIGFsbCBsaWJyYXJp
ZXMgd2l0aCBhIG5ldyBjb21waWxlciByZWxlYXNlIGFuZCBpdCdzIGFsbCBtYWludGFpbmVkIGlu
IGEgc2hlbGwgc2NyaXB0IHdoaWNoIGluc3RhbGxzIEN5Z3dpbiAoZm9yIG5ldyBpbnN0YWxsYXRp
b25zKSwgYW5kIG1hbmFnZXMgZGVwZW5kZW5jaWVzLCBkb2N1bWVudGF0aW9uIGdlbmVyYXRpb24g
YW5kIHBhcmFsbGVsIGNvbXBpbGVzIGFsbCB0aGUgcGFja2FnZXMuIEl0J3MgYSB3aGlsZSBzaW5j
ZSBJIGxhc3QgZGlkIGl0LCBidXQgYWxsIEkgaGF2ZSB0byBkbyBpcyBpbnZva2UgImJ1aWxkLmNt
ZCIgYW5kIGdvIGFuZCBoYXZlIGEgcXVpY2sgbHVuY2ggYXMgaXQgdGFrZXMgYWJvdXQgMzAgbWlu
cyBvbiBteSBzbGlnaHRseSBhZ2VkIGxhcHRvcCB0byBzZXQtdXAuIEl0IGlzIG9mIGNvdXJzZSBh
IHBhaW4gaWYgSSBoYXZlIHRvIHVwZ3JhZGUgb25lIHNpbmdsZSBsaWJyYXJ5Lg0KDQpJJ2QgYmVl
biBwbGFubmluZyBvbiBnZXR0aW5nIGl0IGFsbCBwdXQgb25saW5lIGluIG9yZGVyIHRvIHNoYXJl
IHBhdGNoZXMgKHRob3VnaCBJIHRyeSBhcyBmYXIgYXMgcG9zc2libGUgdG8gc3VibWl0IHBhdGNo
ZXMgYmFjayB1cHN0cmVhbSksIGJ1dCBkZWNpZGVkIGF0IHRoZSBlbmQgb2YgbGFzdCB5ZWFyIHRo
YXQgdGhlIGVmZm9ydCB3b3VsZCBiZSBiZXR0ZXIgaW50byBwb3J0aW5nIE9QQU0gKGNlbWVudGVk
IGJ5IEdPREkgYmVpbmcgc2h1dGRvd24pLiBJIGRpZCBzb21lIHdvcmsgb24gT1BBTSBsYXN0IE5v
dmVtYmVyIGFuZCBEZWNlbWJlciAoY29tcGxldGluZyB0aGUgd29yayByZXF1aXJlZCBmb3Igb3Bh
bSBpbml0IGFuZCBnZXR0aW5nIHRvIHRoZSBzdGFnZSBvZiBpbnN0YWxsaW5nIGNvbXBpbGVyIHN3
aXRjaGVzKS4gSSd2ZSBoYWQgdG8gcGF1c2Ugc28gZmFyIHRoaXMgeWVhciB0byB3b3JrIG9uIGFu
b3RoZXIgcHJvamVjdCwgYnV0IHRoZSB0d28gdGhpbmdzIHdpbGwgc2hvcnRseSBjb252ZXJnZSBh
cyBJIHdhbnQgdG8gdXNlIG9wYW0gcGlucyBhcyBhIHdheSBvZiBjb25maWd1cmluZyB0aGUgY29t
cGlsZXIgYW5kIGxpYnJhcnkgdmVyc2lvbnMgdXNlZCB0byBidWlsZCByZWxlYXNlcyBpbiBnaXQg
KEkgZ290IHNldmVyZWx5IHN0dW5nIGJ5IGEgY2hhbmdlIGluIHN0YW5kYXJkIGxpYnJhcnkgYmVo
YXZpb3VyIGJldHdlZW4gMy4xMi54IGFuZCA0LngpLiBCdXQgcGVyaGFwcyBPUEFNIDEuMyB3aWxs
IGFycml2ZSBiZWZvcmUgSSBmaW5pc2ggcG9ydGluZyBpdCA6bykNCg0KSSdtIHN0cm9uZ2x5IG9m
IHRoZSBvcGluaW9uIHRoYXQgdGhlIHdheSBmb3J3YXJkIGZvciBXaW5kb3dzIGlzIHRvIGdldCBh
IGNvbXByZWhlbnNpdmUgaW5mcmFzdHJ1Y3R1cmUgaW4gcGxhY2UsIHdpdGhvdXQgY2hhbmdpbmcg
YW55dGhpbmcgYWJvdXQgaG93IE9DYW1sIG9uIFdpbmRvd3Mgd29ya3MgYXQgdGhlIG1vbWVudC4g
U28gZWxpbWluYXRpbmcgYmFzaCBmcm9tIG9jYW1sYnVpbGQsIHRyeWluZyB0byBnZXQgcmlkIG9m
IHRoZSBuZWVkIGZvciBDeWd3aW4gZm9yIGJ1aWxkaW5nIGxpYnJhcmllcywgZXRjLiBhcmUgaXJy
ZWxldmFudCB0byBtZSAtIGFsbCB0aGV5IGRvIGlzIG1ha2UgdGhlIGJhcnJpZXIgdG8gZ2V0dGlu
ZyBhIGNvbXBsZXRlIHN5c3RlbSBpbXBvc3NpYmx5IGJvZ2dlZCBkb3duIGluIHZlcnkgZGlmZmlj
dWx0IGZlYXR1cmVzLiBJbiBteSB2aWV3LCB0aGUgdGFyZ2V0IHNob3VsZCBiZSB0byBoYXZlIGEg
c2luZ2xlIGluc3RhbGxlciAob3Igc2ltcGxlIHNldCBvZiBpbnN0cnVjdGlvbnMpIHdoaWNoIGdl
dHMgYSBmdWxseSB3b3JraW5nIGNvbXBpbGVyIHN1aXRlIGFuZCBwYWNrYWdlIG1hbmFnZXIgaW5z
dGFsbGVkIHdoaWNoIHNob3VsZCBiZSB1c2FibGUgZm9yICphbGwqIG9mIHRoZSBzY2VuYXJpb3Mg
ZGVzY3JpYmVkIHNvIGZhci4gU28gdGhhdCBtZWFucyBzb3VyY2UtYmFzZWQgcGFja2FnZSBtYW5h
Z2VtZW50IGFuZCBpbnN0YWxsaW5nIChvciBpbnRlZ3JhdGluZyB3aXRoIGFuIGV4aXN0aW5nKSBD
eWd3aW4gZm9yIG5vdy4NCg0KTXkgb3duIHBvcnRpbmcgb2YgT1BBTSwgZm9yIGdlbmVyYWwgaW50
ZXJlc3QsIGhhcyB0aGUgZm9sbG93aW5nIGdvYWxzOg0KMS4gQWxsIGZvdXIgV2luZG93cyBwb3J0
c1sxXSBhdmFpbGFibGUgaW4gdGhlIHNhbWUgaW5zdGFsbGF0aW9uIChzbyB5b3UgY2FuIHNheSBv
cGFtIHN3aXRjaCA0LjAyLjErbXN2YyBvciBvcGFtIHN3aXRjaCA0LjAxLjArbWluZ3cpDQoyLiBG
dWxsIGluc3RhbGxhdGlvbiBvZiBPQ2FtbCA0LjAyKyBwb3NzaWJsZSBmb3IgdGhlIG1pbmd3IHBv
cnRzIHNpbXBseSBieSBkb3dubG9hZGluZyB0aGUgb3BhbSBiaW5hcnlbMl0gLSBvcGFtIGluaXQg
Y2FwYWJsZSBvZiBkb3dubG9hZGluZyBhbmQgaW5zdGFsbGluZyBDeWd3aW4gaW50byAub3BhbSBp
ZiBhIGxvY2FsIGluc3RhbGxhdGlvbiBpc24ndCBmb3VuZCkuIEZvciB0aGUgTVNWQyBwb3J0cywg
dGhlIG9ubHkgcmVxdWlyZW1lbnQgYmUgdGhhdCBhbiBhcHByb3ByaWF0ZSBXaW5kb3dzIFNESyBt
dXN0IGJlIHByZS1pbnN0YWxsZWQgKGxpY2Vuc2luZyBwcmV2ZW50cyB0aGF0IGJlaW5nIGJ1bmRs
ZWQgb3IgYXV0b21hdGVkLCBJIHRoaW5rKQ0KMy4gUmVxdWlyZWQgQyBsaWJyYXJpZXMgKHpsaWIs
IGV0Yy4pIGF2YWlsYWJsZSBpbiBhbiBvcGFtIHJlcG9zaXRvcnkgLSBwcm9iYWJseSBhIHNlcGFy
YXRlIG9uZSBhdXRvbWF0aWNhbGx5IGVuYWJsZWQgZm9yIFdpbmRvd3MgaW5zdGFsbGF0aW9ucywg
YnV0IHdpdGggdGhlIGFiaWxpdHkgdG8gdXNlIGEgInN5c3RlbSIgY29weSBvZiBlYWNoIGxpYnJh
cnksIGlmIGZvdW5kLg0KDQpPbmNlIGl0J3MgZ290IHRvIHRoZSBzdGFnZSB0aGF0IG15IG93biBz
Y3JpcHQgaXMgZW50aXJlbHkgcmVwbGFjZWQgd2l0aCBvcGFtIGluaXQgJiYgb3BhbSBzd2l0Y2gg
NC4wMi4xK21pbmd3ICYmIG9wYW0gaW5zdGFsbCA8bXkgbGlzdCBvZiBwYWNrYWdlcz4gdGhlbiBJ
J2xsIHB1c2ggaXQgdXAgZm9yIG90aGVycyB0byBjcml0aWNpc2UgOm8pDQoNCg0KRGF2aWQNCg0K
WzFdIEN5Z3dpbiBpcyBhIGZsYXZvdXIgb2YgVU5JWCwgcmVxdWlyaW5nIHR3ZWFraW5nIGZvciBP
Q2FtbCBtb3JlIGFsb25nIHRoZSBsaW5lcyBvZiBzdXBwb3J0aW5nLCBzYXksIFNvbGFyaXMgb3Ig
KkJTRCB2cyBMaW51eCAoaXQgZXZlbiB1c2VzIHRoZSBtYWluIGNvbmZpZ3VyZSBzeXN0ZW0sIHdo
aWNoIHRoZSBuYXRpdmUgcG9ydHMgZG9uJ3QgW3lldF0pLiBJIHBlcnNvbmFsbHkgdGhpbmsgZGlz
Y3Vzc2lvbnMgYWJvdXQgV2luZG93cyBzdXBwb3J0IHdvdWxkIG11Y2ggc2ltcGxlciBpZiB0aGUg
Q3lnd2luIHBvcnRzIHdlcmVuJ3QgbWVudGlvbmVkLCBzbyB0aGF0ICJXaW5kb3dzIHBvcnRzIiBy
ZWZlcnJlZCBvbmx5IHRvIHRoZSBuYXRpdmUgb25lcyAtIG1pbmd3MzIsIG1pbmd3NjQsIG1zdmMg
YW5kIG1zdmM2NC4NClsyXSA0LjAxIGFuZCBlYXJsaWVyIHJlcXVpcmluZyB0aGUgbWFudWFsIGlu
c3RhbGxhdGlvbiBvZiBBY3RpdmVUY2wNCg==

From an@satcom1.com  Wed Jun  3 08:48:20 2015
Return-Path: <an@satcom1.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 068E03C36A
 for <wg-windows@lists.ocaml.org>; Wed,  3 Jun 2015 08:48:20 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1680203 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [157.55.234.79 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-db3on0079.outbound.protection.outlook.com
 ([157.55.234.79]:32309 helo=emea01-db3-obe.outbound.protection.outlook.com)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:AES256-SHA256:256)
 id 1Z03UJ-0001I7-Yj (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <an@satcom1.com>); Wed, 03 Jun 2015 08:53:29 +0100
Authentication-Results: spf=none (sender IP is ) smtp.mailfrom=an@satcom1.com; 
Received: from [192.168.43.116] (80.12.59.8) by
 DB3PR06MB0924.eurprd06.prod.outlook.com (25.161.60.148) with Microsoft SMTP
 Server (TLS) id 15.1.172.22; Wed, 3 Jun 2015 07:52:56 +0000
Message-ID: <556EB205.7020003@satcom1.com>
Date: Wed, 3 Jun 2015 09:51:33 +0200
From: Adrien Nader <an@satcom1.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.6.0
MIME-Version: 1.0
To: <wg-windows@lists.ocaml.org>
References: <556C4FB1.2090007@satcom1.com>
In-Reply-To: <556C4FB1.2090007@satcom1.com>
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [80.12.59.8]
X-ClientProxiedBy: DB3PR03CA0040.eurprd03.prod.outlook.com (10.255.183.40) To
 DB3PR06MB0924.eurprd06.prod.outlook.com (25.161.60.148)
X-Microsoft-Antispam: UriScan:; BCL:0; PCL:0; RULEID:(42139001);
 SRVR:DB3PR06MB0924; 
X-Microsoft-Antispam-PRVS: <DB3PR06MB09240D7758FAA0991B6831308CB40@DB3PR06MB0924.eurprd06.prod.outlook.com>
X-Exchange-Antispam-Report-Test: UriScan:;
X-Exchange-Antispam-Report-CFA-Test: BCL:0; PCL:0;
 RULEID:(601004)(5005006)(520003)(3002001); SRVR:DB3PR06MB0924; BCL:0; PCL:0;
 RULEID:; SRVR:DB3PR06MB0924; 
X-Forefront-PRVS: 05961EBAFC
X-Forefront-Antispam-Report: SFV:NSPM;
 SFS:(10009020)(6049001)(6009001)(377454003)(199003)(51704005)(189002)(24454002)(479174004)(42186005)(77096005)(33656002)(80316001)(92566002)(110136002)(65806001)(2950100001)(5001960100002)(66066001)(15975445007)(64706001)(107886002)(87976001)(47776003)(83506001)(5001860100001)(105586002)(68736005)(2351001)(117156001)(23676002)(4001540100001)(50986999)(19580395003)(64126003)(5001830100001)(122386002)(76176999)(50466002)(86362001)(36756003)(189998001)(450100001)(77156002)(87266999)(4001350100001)(46102003)(65816999)(62966003)(59896002)(54356999)(65956001)(106356001)(81156007)(101416001)(40100003)(97736004)(42262002)(460985005);
 DIR:OUT; SFP:1101; SCL:1; SRVR:DB3PR06MB0924; H:[192.168.43.116]; FPR:;
 SPF:None; PTR:InfoNoRecords; A:1; MX:1; LANG:en; 
Received-SPF: None (protection.outlook.com: satcom1.com does not designate
 permitted sender hosts)
X-OriginatorOrg: satcom1.com
X-MS-Exchange-CrossTenant-OriginalArrivalTime: 03 Jun 2015 07:52:56.7751 (UTC)
X-MS-Exchange-CrossTenant-FromEntityHeader: Hosted
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DB3PR06MB0924
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 03 Jun 2015 07:48:20 -0000



On 06/01/2015 02:27 PM, Adrien Nader wrote:
> Hi,
>
> Sorry for breaking the threading and having a poor formatting: I
> subscribed recently to the mailing-list and had to read the archives.
>
> From Edwin T=C3=B6r=C3=B6k:
>
>> Cygwin64 unreliability
>> ----------------------
>>
>> I don't know if the bug is in Windows, Cygwin64 or my VM configuration
>> but the build system itself crashes a lot and randomly
>> (there seems to be plenty of RAM available).
>> Even things like make.exe or rm.exe crash with: segfault, fork:
>> resource unavailable, exit code -1073741819.
>> Restarting the cygwin shell helps sometimes but the errors are soon
>> back, even when using just make -j1.
>> The situation was bad enough that I had to repeat the build  4-5 times
>> until it finally succeeded as it kept crashing in different places.
>> Someone else tried WODI32 and didn't see such errors there, so that
>> seems like a more reliable build system.
>> Was about to report this as a bug in Cygwin64, but next week WODI was
>> shutdown so that ended my Windows testing as well.
>
> I just opened a bug on mantis after trying to build under Cygwin64 for
> cygwin64. I actually got two major issues.
> First, the simple one: lots of Cygwin-specific C code doesn't work
> because it is behind #ifdef __CYGWIN32__ and that define is only for 32
> bits.
> The more annoying one: no flexlink binaries for Cygwin64. My
> understanding is that there should be a flexlink_cygwin64.o file or
> similar but currently it tries to use the 32bits .o and fails (it says
> "undefined references" but that's expected for such a case).
>
> You mention you used Cygwin64 quite some time ago. It is fairly young so
> you probably tried it at a fairly early stage. With a recent
> installation, I also got weird stuff: I couldn't pipe code to 'ocaml
> -stdin', make wouldn't always redo .PHONY rules and not all toplevel
> expressions in OCaml were always evaluated it /seems/ (that's something
> I got when cross-compiling but never really understood).
>
> Overall I would say the port is not in a good-enough shape to announce
> as supported, even with limitations. That doesn't imply anything about
> the Windows 64 port a priori.
>
> Nevertheless it is important to have cygwin ports. For a sane system, we
> need to avoid having a cygwin shell than spawns an non-cygwin executable
> (build tool) which then spawns a cygwin bash which spawns a non-cygwin
> executable (ocamlopt for instance). It's better to remain in the same
> realm (no matter which one) for as many consecutive steps as possible
> and at least some builds will definitely continue to require a unix
> environment.

I tried the same thing with Cygwin 32 bits on Monday and almost
everything worked at once and more importantly, there were no quantum
physics involved: thing either worked or not.

--
Adrien Nader
[http://www.satcom1.com/marketing/banner/PAS_sig_banner.jpg]<http://www.sat=
com1.com/event/paris-airshow-2015-hall-4-e15/>

From fabrissimo@gmail.com  Wed Jun  3 09:00:32 2015
Return-Path: <fabrissimo@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id B8BFD3C373
 for <wg-windows@lists.ocaml.org>; Wed,  3 Jun 2015 09:00:32 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.192.51 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (fabrissimo[at]gmail.com)
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-qg0-f51.google.com ([209.85.192.51]:34285)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1Z03gD-0001VP-lz (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <fabrissimo@gmail.com>); Wed, 03 Jun 2015 09:05:42 +0100
Received: by qgdy38 with SMTP id y38so738872qgd.1
 for <wg-windows@lists.ocaml.org>; Wed, 03 Jun 2015 01:05:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:sender:from:date:message-id:subject:to:cc:content-type;
 bh=Tjwy2y97U/WFEVcxsgb6TSTBxxiWRfwMAL1eXkEjUNk=;
 b=cDioLO4rIfnnUEZcS5SwGkkOaTVV7zZaRCAcOCPeBf5Uk5QLzdcJCdrf5w7Wr8SmCC
 nKXgRKabVCzhX0utR+ZGbOIi79zpBlVwuWbYhweSiilqqKtyjqiOLusXZQABhqc1bFFV
 mquNSnbMK6daea9vewKtDk7PJI3lFR0AiSpQIwOjaRHnmfYE12JEdNOUJ8+zsJe5LUYw
 BnFojKjWNprzRdba19oLHvJ2sLgfbrlTlMmy9T2Go7bzamZRJhD9kghzIPr7ppv8ZrNs
 1MJ9C9HD1cOFLQBi6YsgbB8p/FEesEkqGiX5uFtJ//G/09el9A3QmMki78FWFSBCR6Hk
 D3Ng==
X-Received: by 10.229.221.69 with SMTP id ib5mr12554413qcb.26.1433318740938;
 Wed, 03 Jun 2015 01:05:40 -0700 (PDT)
MIME-Version: 1.0
Sender: fabrissimo@gmail.com
Received: by 10.96.92.228 with HTTP; Wed, 3 Jun 2015 01:05:20 -0700 (PDT)
From: Fabrice Le Fessant <fabrice.le_fessant@ocamlpro.com>
Date: Wed, 3 Jun 2015 10:05:20 +0200
X-Google-Sender-Auth: T0JXLAPC1wD_qeYdrXOXFndar54
Message-ID: <CAHvkLrM3KW5wuF2VQC+VgrwQJEb2kejHygaKU9SzRs+WzLJCJg@mail.gmail.com>
To: wg-windows@lists.ocaml.org
Content-Type: text/plain; charset=UTF-8
Cc: =?UTF-8?Q?=C3=87agdas_Bozman?= <cagdas.bozman@ocamlpro.com>
Subject: [wg-windows] OCPWin status
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 03 Jun 2015 08:00:32 -0000

Hi,

  I postponed my reply on OCPWin, because we still have a bug that
makes using the current version dangerous (it erases the PATH
sometimes, probably when it is bigger than 1024 bytes, something
inherited from earlier versions of Jonathan's installer), but I can
still talk about the philosophy of OCPWin:

1/ OCPWin targets non-Cygwin users. It can still be used under Cygwin
(you need to make sure its bindir is then before
Cygwin's one, to avoid conflicts between tools), but its goal is to be
used directly in a pure Windows environment ("cmd").
For that, we include a (stripped) version of the MinGW compiler.

2/ OCPWin targets all toolchains except the Cygwin one. In particular,
it is available in both 32 and 64 bits, and can be used
with both MinGW and the MSVC Toolchain (same version as OCaml). MSVC
tools ("Microsoft Windows 7 SDK") are detected automatically.

3/ OCPWin comes with two different build systems:
   3.1/ a "-make" option to the compiler, that can be used to build an
executable by just specifying the last module (something
similar to what "ocamlbuild" would do, but much less powerful)
   3.2/ we internally use "ocp-build" to build packages. Although it
is still in a beta version, with the syntax probably changing in the
near future, it works well under native Windows, and specifying how to
build a library is simple enough.

 Of course, we are interested in adapting to OCaml any other native
build system for Windows. We did not get the time to test "omake", but
its complexity and the lack of support is a problem. "cmake" might be
an interesting option, but we see it more as a way to build a complete
project, while the part in OCaml would be built using ocp-build.

Right now, we compile a small set of packages with ocp-build directly
on Windows without Cygwin : ocamlgraph and Alt-Ergo, menhir, and
js_of_ocaml (including ssl and lwt). Since we do that on our spare
time (we have currently no contract to work on Windows), the project
did not make any progress in the last six months, but we hope to be
able to release a new version for 4.02.1 in the next weeks with the
installer fixed.

--Fabrice
-- 
Fabrice LE FESSANT
Scientific Advisor, OCamlPro SAS

From gclow-wg-windows@m.gmane.org  Wed Jun  3 15:10:14 2015
Return-Path: <gclow-wg-windows@m.gmane.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 1458A3C064
 for <wg-windows@lists.ocaml.org>; Wed,  3 Jun 2015 15:10:14 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [80.91.229.3 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from plane.gmane.org ([80.91.229.3]:59285)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1Z09Rz-0001t9-RJ (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <gclow-wg-windows@m.gmane.org>); Wed, 03 Jun 2015 15:15:24 +0100
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from <gclow-wg-windows@m.gmane.org>) id 1Z09Rg-0005E1-02
 for wg-windows@lists.ocaml.org; Wed, 03 Jun 2015 16:15:04 +0200
Received: from p548c8441.dip0.t-ipconnect.de ([84.140.132.65])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Wed, 03 Jun 2015 16:15:03 +0200
Received: from andreashauptmann by p548c8441.dip0.t-ipconnect.de with local
 (Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Wed, 03 Jun 2015 16:15:03 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: wg-windows@lists.ocaml.org
From: Andreas Hauptmann <andreashauptmann@t-online.de>
Date: Wed, 3 Jun 2015 14:12:16 +0000
Organization: -
Lines: 17
Message-ID: <mkn200$fad$1@ger.gmane.org>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: p548c8441.dip0.t-ipconnect.de
X-Archive: encrypt
Archive: no
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 03 Jun 2015 14:10:14 -0000

Hi,

On Fri, 29 May 2015 17:10:36 +0200
Thomas Braibant wrote:
> Some of the sources needed to use WODI are still available, but the
> system does not work out of the box now that the server has gone
> offline. With a little work, we might be able to bring it back, to
> smooth the transition.

I've finally sorted it out and put everything necessary online at:
http://wodi.forge.ocamlcore.org/

If you extract the files at the described locations, no files must be
fetched from the server that has gone offline.

cu,
 andreas


From anil@recoil.org  Thu Jun  4 01:32:06 2015
Return-Path: <anil@recoil.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id EB09C3C064
 for <wg-windows@lists.ocaml.org>; Thu,  4 Jun 2015 01:32:06 +0100 (BST)
X-Cam-SpamScore: s
X-Cam-SpamDetails: score 1.1 from SpamAssassin-3.3.2-1680203 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 *  1.1 DATE_IN_PAST_06_12 Date: is 6 to 12 hours before Received: date
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from bark.recoil.org ([5.153.225.51]:18412)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256)
 id 1Z0J9q-0002V8-rI (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <anil@recoil.org>); Thu, 04 Jun 2015 01:37:18 +0100
Received: from [172.31.52.75] (216.9.110.13 [216.9.110.13]);
 by bark.recoil.org (OpenSMTPD) with ESMTPSA id 5ca41ac2;
 TLS version=TLSv1/SSLv3 cipher=ECDHE-RSA-AES256-SHA bits=256 verify=NO;
 Thu, 4 Jun 2015 01:37:17 +0100 (BST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2098\))
From: Anil Madhavapeddy <anil@recoil.org>
In-Reply-To: <CAHvkLrM3KW5wuF2VQC+VgrwQJEb2kejHygaKU9SzRs+WzLJCJg@mail.gmail.com>
Date: Wed, 3 Jun 2015 19:24:40 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <E13935F2-1BCC-449C-B1E4-FBA8CDB05DAF@recoil.org>
References: <CAHvkLrM3KW5wuF2VQC+VgrwQJEb2kejHygaKU9SzRs+WzLJCJg@mail.gmail.com>
To: Fabrice Le Fessant <fabrice.le_fessant@ocamlpro.com>
X-Mailer: Apple Mail (2.2098)
Cc: =?utf-8?Q?=C3=87agdas_Bozman?= <cagdas.bozman@ocamlpro.com>,
 wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] OCPWin status
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 04 Jun 2015 00:32:07 -0000

On 3 Jun 2015, at 09:05, Fabrice Le Fessant =
<fabrice.le_fessant@ocamlpro.com> wrote:
>=20
> 3/ OCPWin comes with two different build systems:
>   3.1/ a "-make" option to the compiler, that can be used to build an
> executable by just specifying the last module (something
> similar to what "ocamlbuild" would do, but much less powerful)
>   3.2/ we internally use "ocp-build" to build packages. Although it
> is still in a beta version, with the syntax probably changing in the
> near future, it works well under native Windows, and specifying how to
> build a library is simple enough.

The built-in -make mode is interesting -- can you compile up a
useful subset of packages without dropping into a full ocp-build
make, or is it only really for simple projects?

-anil=

From fabrissimo@gmail.com  Thu Jun  4 08:08:53 2015
Return-Path: <fabrissimo@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 9B7FB3C02D
 for <wg-windows@lists.ocaml.org>; Thu,  4 Jun 2015 08:08:53 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.192.46 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (fabrissimo[at]gmail.com)
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-qg0-f46.google.com ([209.85.192.46]:32811)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1Z0PLq-0006uH-Ps (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <fabrissimo@gmail.com>); Thu, 04 Jun 2015 08:14:06 +0100
Received: by qgfa63 with SMTP id a63so13857403qgf.0
 for <wg-windows@lists.ocaml.org>; Thu, 04 Jun 2015 00:14:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:sender:in-reply-to:references:from:date:message-id
 :subject:to:cc:content-type;
 bh=mYlEp3qpdN+zxtjruWE/0Tuing73bQ+DjlBeoo769CQ=;
 b=r0iuOOtZXELQQpaCno1eWzuwDc7MsKwD52ByI6XV8aZYRwX+r5R5+v+SG5vKh0zg8p
 6gG4/biVAX8Ojuo7OSn04aGSpvhiaejxusjTFcOBgyRo5T7pYsiEt/fB0DEIviGET1/X
 uXCLTnhjn04xpASfudtvMVS/m35Jk+sUeR4KXDGCHbQPZyz7Ep+3ReAY+vPly6g9LVBo
 mBJXElDKNShuI1ljcfECVCOCKCfkunBbYemGFviQMd9lwp/Li5ce8faewnTj37v5yNk4
 jy1OZ4Gf6tLsQuVUFzgVZgbWYupQNAjHyuPYbu2GqwA7Wj2tFqYKpYCb3WsK5LjpMzBk
 kkEQ==
X-Received: by 10.140.232.69 with SMTP id d66mr42825202qhc.103.1433402045089; 
 Thu, 04 Jun 2015 00:14:05 -0700 (PDT)
MIME-Version: 1.0
Sender: fabrissimo@gmail.com
Received: by 10.96.92.228 with HTTP; Thu, 4 Jun 2015 00:13:44 -0700 (PDT)
In-Reply-To: <E13935F2-1BCC-449C-B1E4-FBA8CDB05DAF@recoil.org>
References: <CAHvkLrM3KW5wuF2VQC+VgrwQJEb2kejHygaKU9SzRs+WzLJCJg@mail.gmail.com>
 <E13935F2-1BCC-449C-B1E4-FBA8CDB05DAF@recoil.org>
From: Fabrice Le Fessant <fabrice.le_fessant@ocamlpro.com>
Date: Thu, 4 Jun 2015 09:13:44 +0200
X-Google-Sender-Auth: wkwVJBdXLZMupe2mgpaxN-ZWgjo
Message-ID: <CAHvkLrM36AOnAiXsUYQ=S281gx5CRsH4sw4se6aUfs8ZzgJ7Lw@mail.gmail.com>
To: Anil Madhavapeddy <anil@recoil.org>
Content-Type: text/plain; charset=UTF-8
Cc: =?UTF-8?Q?=C3=87agdas_Bozman?= <cagdas.bozman@ocamlpro.com>,
 wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] OCPWin status
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 04 Jun 2015 07:08:53 -0000

On Wed, Jun 3, 2015 at 8:24 PM, Anil Madhavapeddy <anil@recoil.org> wrote:
> On 3 Jun 2015, at 09:05, Fabrice Le Fessant <fabrice.le_fessant@ocamlpro.com> wrote:
>>   3.1/ a "-make" option to the compiler, that can be used to build an
>> executable by just specifying the last module (something
>> similar to what "ocamlbuild" would do, but much less powerful)
>
> The built-in -make mode is interesting -- can you compile up a
> useful subset of packages without dropping into a full ocp-build
> make, or is it only really for simple projects?

I tested successfully the built-in -make mode on ocamlgraph (library)
and Alt-Ergo (program), but did not try on anything else. It can
manage automatically ".mll" and ".mly" file extensions (by calling
ocamllex and ocamlyacc), and accepts ".mllib" and ".mlpack" targets
for libraries and packed modules (but I am not sure you can combine
them :-( ).

--Fabrice
-- 
Fabrice LE FESSANT
Scientific Advisor, OCamlPro SAS

From thomas.braibant@gmail.com  Wed Jun 10 11:59:58 2015
Return-Path: <thomas.braibant@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 557023C1AF
 for <wg-windows@lists.ocaml.org>; Wed, 10 Jun 2015 11:59:58 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1680203 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.214.180 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (thomas.braibant[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-ob0-f180.google.com ([209.85.214.180]:35708)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1Z2dp5-0002h6-Ri (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <thomas.braibant@gmail.com>); Wed, 10 Jun 2015 12:05:32 +0100
Received: by obbgp2 with SMTP id gp2so32248868obb.2
 for <wg-windows@lists.ocaml.org>; Wed, 10 Jun 2015 04:05:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:from:date:message-id:subject:to
 :cc:content-type;
 bh=oABuP9WOEKA8knYshmsSLK6Q8ga7y6lAjhgcSLYjDd4=;
 b=pBOleL2UJ8VCG69NfSurGfpQaiQxE9Rhge4Py6dPuCsbvk83ie2X8usquRPt9tashx
 Jv2z6a3+DgbeVxWz/X/IH0gjWGha7u1ane5/NryyxZqzYKUXVOmVKLpVpm6gQbziYYKC
 WHdoPjRFPZVZNhBDwHVzRmlYyVAByHkPNTW6PZWprOcQ3L/8mCmiuLFWZnN0u9nYMOdX
 QdFpmTr7uQGOF7P2+VYj02HBr9rsfNwjkFJWLYeizI0OsIJMPaSngQEmmjwOGrpVFq2b
 mSugMuAqexaXRUIRI5YS2V3f/yUKgud3mqWdhpfJNSZeUySPhmCj99obAl7YmRi+KC5G
 i+FA==
X-Received: by 10.60.85.39 with SMTP id e7mr2322704oez.81.1433934330351; Wed,
 10 Jun 2015 04:05:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.202.194.68 with HTTP; Wed, 10 Jun 2015 04:05:09 -0700 (PDT)
In-Reply-To: <E51C5B015DBD1348A1D85763337FB6D9E9BE77B0@Remus.metastack.local>
References: <CAHR=VkyJ83Y1CmpdJNvgSNZ2+-M4_k6ppC05eH-nQ3=8c1Hgvw@mail.gmail.com>
 <E51C5B015DBD1348A1D85763337FB6D9E9BE77B0@Remus.metastack.local>
From: Thomas Braibant <thomas.braibant@gmail.com>
Date: Wed, 10 Jun 2015 13:05:09 +0200
Message-ID: <CAHR=VkyzNQMocqBauK4Vm9gxZbe_qC4wx2eog4u0YjsxYwCTcw@mail.gmail.com>
To: David Allsopp <dra-news@metastack.com>
Content-Type: multipart/alternative; boundary=089e0111b6aa64569e051827da15
Cc: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] Improving the state of OCaml on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 10 Jun 2015 10:59:58 -0000

--089e0111b6aa64569e051827da15
Content-Type: text/plain; charset=UTF-8

Hi David,

I have some installation scripts that were used to bring Cygwin (as the
environment), WODI (that compiles OCaml using the mingw toolchains), and a
few libraries (some from WODI, some from sources) on a bare Windows
machine. I tried to hack the scripts to do the same thing + installing OPAM
via WODI's OCaml. (I think that could be a first step toward porting some
of the WODI packages to an opam-windows repository.) I have fixed a few
issues, but it looks like you are a bit farther than me on this side. Would
you consider providing the sources of your OPAM port to try to share the
work?

Best,
Thomas

--089e0111b6aa64569e051827da15
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi David,<div><br></div><div>I have some installation scri=
pts that were used to bring Cygwin (as the environment), WODI (that compile=
s OCaml using the mingw toolchains), and a few libraries (some from WODI, s=
ome from sources) on a bare Windows machine. I tried to hack the scripts to=
 do the same thing + installing OPAM via WODI&#39;s OCaml. (I think that co=
uld be a first step toward porting some of the WODI packages to an opam-win=
dows repository.) I have fixed a few issues, but it looks like you are a bi=
t farther than me on this side. Would you consider providing the sources of=
 your OPAM port to try to share the work?</div><div><br></div><div>Best,</d=
iv><div>Thomas</div><div><br></div><div><br></div><div><br></div><div><br><=
/div></div>

--089e0111b6aa64569e051827da15--

From thomas.braibant@gmail.com  Mon Jun 15 13:03:18 2015
Return-Path: <thomas.braibant@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id CBD253C151
 for <wg-windows@lists.ocaml.org>; Mon, 15 Jun 2015 13:03:18 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1685366 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.214.172 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (thomas.braibant[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-ob0-f172.google.com ([209.85.214.172]:32968)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1Z4TCO-0005tN-Rz (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <thomas.braibant@gmail.com>); Mon, 15 Jun 2015 13:09:09 +0100
Received: by obcej4 with SMTP id ej4so62491696obc.0
 for <wg-windows@lists.ocaml.org>; Mon, 15 Jun 2015 05:09:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:from:date:message-id:subject:to:content-type;
 bh=d7NXh8tojVihB/tbrPa8rP2HdZRhz9u/fT64EL7m55o=;
 b=bew19m/moGhdWSj+h30REbEjnTbsQWt6vwozQRykl4fVgwsC73R7xjuoeivzhH7n5D
 ncSi0cpibyBFt7chhswh7wDsyPLdJeTc7mftKdlgwcoLKNtNR+iRWd2sHsnNdHitXWJB
 0i8jJUVUXAhkJLTjg/D0dAnYj3/gjqX+acL9dNkPAieAlX7nuKbnMdY7fTm1ZfgUjGme
 bvZIMNAkno6SB5Z2gv+h7xruvtF0gJ218/4EPbDCktMvOIImaqdZeUUlcWgX0MYtXZya
 5B4txWllSu3CFQvPHxFnYnwir2EgO5ii8tTdRg3R8sW2vG0VVXr2+Dsmv5yEhA4lhZt/
 WjqQ==
X-Received: by 10.182.240.135 with SMTP id wa7mr9390713obc.63.1434370147205;
 Mon, 15 Jun 2015 05:09:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.202.194.68 with HTTP; Mon, 15 Jun 2015 05:08:46 -0700 (PDT)
From: Thomas Braibant <thomas.braibant@gmail.com>
Date: Mon, 15 Jun 2015 14:08:46 +0200
Message-ID: <CAHR=Vkwyg=O7MqLj-VVV6POONP8kROx=9z9RvEpSiCcggKPxhQ@mail.gmail.com>
To: wg-windows@lists.ocaml.org
Content-Type: multipart/alternative; boundary=001a11c1dfc019c90005188d53d2
Subject: [wg-windows] OPAM branch?
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 15 Jun 2015 12:03:18 -0000

--001a11c1dfc019c90005188d53d2
Content-Type: text/plain; charset=UTF-8

Hi

There has been some recent questions about the status of OPAM on Windows.

https://github.com/ocaml/opam/issues/2192
https://github.com/ocaml/opam/issues/2191

and some work done trying to port OPAM

https://github.com/ocaml/opam/issues/246#issuecomment-85543210

I have not found any public branch of OPAM on the subject. If there is not,
it might be worth making one somewhere to try to work in that direction. If
someone with a deeper understanding of OPAM internals than myself has some
ideas about what are the concrete steps in that direction, I would be very
happy to contribute working on this, rather than hacking through OPAM.

I might be mistaken, but from the various posts so far, I think that we
concur to say that having OPAM working under Cygwin (with a native Win32
port) is the first step toward improving the status of OCaml on Windows.

Best,
Thomas

--001a11c1dfc019c90005188d53d2
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi<div><br></div><div>There has been some recent questions=
 about the status of OPAM on Windows.=C2=A0</div><div><br></div><div><a hre=
f=3D"https://github.com/ocaml/opam/issues/2192">https://github.com/ocaml/op=
am/issues/2192</a><br></div><div><a href=3D"https://github.com/ocaml/opam/i=
ssues/2191">https://github.com/ocaml/opam/issues/2191</a><br></div><div><br=
></div><div>and some work done trying to port OPAM</div><div><br></div><div=
><a href=3D"https://github.com/ocaml/opam/issues/246#issuecomment-85543210"=
>https://github.com/ocaml/opam/issues/246#issuecomment-85543210</a></div><d=
iv><br></div><div>I have not found any public branch of OPAM on the subject=
. If there is not, it might be worth making one somewhere to try to work in=
 that direction. If someone with a deeper understanding of OPAM internals t=
han myself has some ideas about what are the concrete steps in that directi=
on, I would be very happy to contribute working on this, rather than hackin=
g through OPAM.=C2=A0</div><div><br></div><div>I might be mistaken, but fro=
m the various posts so far, I think that we concur to say that having OPAM =
working under Cygwin (with a native Win32 port) is the first step toward im=
proving the status of OCaml on Windows.</div><div><br></div><div>Best,</div=
><div>Thomas</div><div><br></div><div><br></div></div>

--001a11c1dfc019c90005188d53d2--

From daniel.buenzli@erratique.ch  Tue Jun 30 17:51:52 2015
Return-Path: <daniel.buenzli@erratique.ch>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 1A8953C4DA;
 Tue, 30 Jun 2015 17:51:52 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1687995
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail6.webfaction.com ([74.55.86.74]:45990
 helo=smtp.webfaction.com)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtp id 1Z9yrg-0000kh-lu (Exim 4.82_3-c0e5623)
 (return-path <daniel.buenzli@erratique.ch>); Tue, 30 Jun 2015 17:58:33 +0100
Received: from [172.20.10.2] (188.29.164.196.threembb.co.uk [188.29.164.196])
 by smtp.webfaction.com (Postfix) with ESMTP id 4CCA42142BD1;
 Tue, 30 Jun 2015 16:58:27 +0000 (UTC)
Date: Tue, 30 Jun 2015 17:58:21 +0100
From: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
To: "=?utf-8?Q?platform=40lists.ocaml.org?=" <platform@lists.ocaml.org>, 
 opam-devel <opam-devel@lists.ocaml.org>, wg-windows@lists.ocaml.org
Message-ID: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Cc: Peter Zotov <whitequark@whitequark.org>
Subject: [wg-windows] Identifying windows ports for build systems & cross
 compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 30 Jun 2015 16:51:52 -0000

Hello,  

In the context of building things, one apparently needs to be able precisely identify the windows ports in order to produce build artefacts with correct extensions (see [1]). It seems that: 

1) Using the OCaml MSVC ports, windows specific extensions are used
2) Using the OCaml mingw ports, unix extensions are used
3) Using the OCaml cygwin port, unix extensions are used

The problem is that at the moment various detection bits e.g. [2] conflate 1) + 2) under a single variable, namely win32. Something is needed to distinguish them in build systems in general.

Here are a few ideas:

a) Introduce a new toolchain variable, that specifies the toolchain used, whatever that means. 
b) Distinguish an OS for the mingw ports 
c) Distinguish these 3 cases through a distribution variable [3]

I have the impression that a) is going to introduce again more noise, names and branches in the eco-system which already has plenty enough. Regarding c) I think it would be bending the semantics of the variable. Given that cygwin is already treated as an OS I would suggest that we rather use b) and introduce a "win32-mingw" or "mingw" (or whichever name windows users would find accurate) value for OS like variables. 

Besides for cross compilation of packages we need to distinguish between `build-os` and `host-os` (os on which the build products are run). It would be nice if opam could somehow provide variables for these values for build systems to use in order to configure packages properly. IIRC opam currently only has an `os` variable which has the value of `build-os` but is currently being used for `host-os` semantics. 

Note that some other variables pertaining to the capabilities of the installed OCaml compilers see [4] will also need {build,host}-os distinction (e.g. `ocaml-native` and `ocaml-native-dynlink`). In order to remain backward compatible with the current repository, I guess that the simplest is to deem all current variables as having host semantics and introduce only new variables for build semantics i.e. `build-os-ocaml-native`, `build-os-ocaml-native-dynlink`, `build-os-ocaml-version`, etc.

Best,

Daniel

P.S. To windows users. I would also be interested in knowing if there is a tool invocation that is actually able to distinguish between 1) and 2).

[1] https://github.com/dbuenzli/topkg/issues/11#issuecomment-117050094
[2] https://github.com/ocaml/opam-depext/blob/d94f9f06e1d489dc4f946fb3aa37589eb9e9a2ec/depext.ml#L62-L74
[3] https://github.com/ocaml/opam-depext/blob/d94f9f06e1d489dc4f946fb3aa37589eb9e9a2ec/depext.ml#L76-L109
[4] https://opam.ocaml.org/doc/manual/dev-manual.html#sec37



From david@allsopps.net  Tue Jun 30 18:06:40 2015
Return-Path: <david@allsopps.net>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id DB1383C4DA;
 Tue, 30 Jun 2015 18:06:40 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1687995 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.109 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148109.authsmtp.co.uk ([62.13.148.109]:19584)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtp id 1Z9z61-0004OD-RL (Exim 4.82_3-c0e5623)
 (return-path <david@allsopps.net>); Tue, 30 Jun 2015 18:13:22 +0100
Received: from mail-c237.authsmtp.com (mail-c237.authsmtp.com [62.13.128.237])
 by punt18.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t5UHDGSo042400; 
 Tue, 30 Jun 2015 18:13:17 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t5UHDEj3096736;
 Tue, 30 Jun 2015 18:13:14 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t5UHDEQV007455
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
 Tue, 30 Jun 2015 18:13:14 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0224.002; Tue, 30 Jun 2015 18:13:13 +0100
From: David Allsopp <david@allsopps.net>
To: =?iso-8859-1?Q?Daniel_B=FCnzli?= <daniel.buenzli@erratique.ch>,
 "platform@lists.ocaml.org" <platform@lists.ocaml.org>, opam-devel
 <opam-devel@lists.ocaml.org>, "wg-windows@lists.ocaml.org"
 <wg-windows@lists.ocaml.org>
Thread-Topic: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
Thread-Index: AQHQs1YM2XpQJPWW80GdAXST55kz6J3FRc5g
Date: Tue, 30 Jun 2015 17:13:12 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
References: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
In-Reply-To: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.0.18]
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: 4b5da285-1f4b-11e5-9f74-002590a135d3
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZRRob BgsNCCtbTh09PVtK DAMVKBZePFsRUQkR
 bwdMdQIUEkAaAgsB AmMbWlxeUV57WGY7 aQtScwRdZ1RMXgd0 UUlNXVBXCwUmRRlk
 fmprCBpyfgNBe3g+ Z0BkX3AVWBZ/IRd/ SktJFDsCN3phaTUa TUkOcAdJcANIexZF
 O1F8UScOLwdybGoL AAB2IDE3MTJAMxEd Yw0AK04TT1cKGDF0 WBEEETIwBgUdQD8v
 NFQoLURUFlsQNkl6 Kko6RV8dKFdcaEVV BUZWG2dSIFwZRi4q CwwSUU8FDDxbSjtd BRszSgCQ
X-Authentic-SMTP: 61633634383431.1024:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
X-Mailman-Approved-At: Tue, 30 Jun 2015 18:24:58 +0100
Cc: Peter Zotov <whitequark@whitequark.org>
Subject: Re: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 30 Jun 2015 17:06:41 -0000

Daniel B=FCnzli wrote:
> Hello,
>=20
> In the context of building things, one apparently needs to be able
> precisely identify the windows ports in order to produce build artefacts
> with correct extensions (see [1]). It seems that:
>=20
> 1) Using the OCaml MSVC ports, windows specific extensions are used
> 2) Using the OCaml mingw ports, unix extensions are used

Not quite: shared libraries are .dll rather than .so

> 3) Using the OCaml cygwin port, unix extensions are used

I can't remember if Cygwin uses .so.dll or just .so, but I expect whatever =
it does that it fakes everything to work with just .so (just as it fakes th=
ings to work without .exe) - tricks which *do not work* when dealing with m=
ingw-compiled programs which obviously don't have the Cygwin layer.

> The problem is that at the moment various detection bits e.g. [2] conflat=
e
> 1) + 2) under a single variable, namely win32. Something is needed to
> distinguish them in build systems in general.
>=20
> Here are a few ideas:
>=20
> a) Introduce a new toolchain variable, that specifies the toolchain used,
> whatever that means.

$OCAMLLIB/Makefile.config defines TOOLCHAIN variable already which gives mi=
ngw or msvc. Equally, all of the required extensions can be determined by g=
rep'ing the output of ocamlopt -config (or with more recent OCamls by using=
 the Config module of compiler-libs.common)

> b) Distinguish an OS for the mingw ports
> c) Distinguish these 3 cases through a distribution variable [3]
>=20
> I have the impression that a) is going to introduce again more noise,
> names and branches in the eco-system which already has plenty enough.
> Regarding c) I think it would be bending the semantics of the variable.
> Given that cygwin is already treated as an OS I would suggest that we
> rather use b) and introduce a "win32-mingw" or "mingw" (or whichever name
> windows users would find accurate) value for OS like variables.
>=20
> Besides for cross compilation of packages we need to distinguish between
> `build-os` and `host-os` (os on which the build products are run). It
> would be nice if opam could somehow provide variables for these values fo=
r
> build systems to use in order to configure packages properly. IIRC opam
> currently only has an `os` variable which has the value of `build-os` but
> is currently being used for `host-os` semantics.

The mingw compiler already use the form w64 for the host, so that the compi=
lers "fake" a cross-compiling triple (e.g. i686-w64-mingw32-gcc and x86_64-=
w64-mingw32-gcc). Perhaps that would be better?

> Note that some other variables pertaining to the capabilities of the
> installed OCaml compilers see [4] will also need {build,host}-os
> distinction (e.g. `ocaml-native` and `ocaml-native-dynlink`). In order to
> remain backward compatible with the current repository, I guess that the
> simplest is to deem all current variables as having host semantics and
> introduce only new variables for build semantics i.e. `build-os-ocaml-
> native`, `build-os-ocaml-native-dynlink`, `build-os-ocaml-version`, etc.
>=20
> Best,
>=20
> Daniel
>=20
> P.S. To windows users. I would also be interested in knowing if there is =
a
> tool invocation that is actually able to distinguish between 1) and 2).
>=20
> [1] https://github.com/dbuenzli/topkg/issues/11#issuecomment-117050094
> [2] https://github.com/ocaml/opam-
> depext/blob/d94f9f06e1d489dc4f946fb3aa37589eb9e9a2ec/depext.ml#L62-L74
> [3] https://github.com/ocaml/opam-
> depext/blob/d94f9f06e1d489dc4f946fb3aa37589eb9e9a2ec/depext.ml#L76-L109
> [4] https://opam.ocaml.org/doc/manual/dev-manual.html#sec37
>=20
>=20
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows

From daniel.buenzli@erratique.ch  Tue Jun 30 18:46:29 2015
Return-Path: <daniel.buenzli@erratique.ch>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id C99BF3C4DA;
 Tue, 30 Jun 2015 18:46:29 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1687995
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail6.webfaction.com ([74.55.86.74]:36934
 helo=smtp.webfaction.com)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtp id 1Z9ziY-0004Gw-mF (Exim 4.82_3-c0e5623)
 (return-path <daniel.buenzli@erratique.ch>); Tue, 30 Jun 2015 18:53:11 +0100
Received: from [172.20.10.2] (188.29.164.196.threembb.co.uk [188.29.164.196])
 by smtp.webfaction.com (Postfix) with ESMTP id A32F320F8D8F;
 Tue, 30 Jun 2015 17:52:17 +0000 (UTC)
Date: Tue, 30 Jun 2015 18:52:16 +0100
From: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
To: David Allsopp <david@allsopps.net>
Message-ID: <76478AAD389641DE94728EC386AFFA87@erratique.ch>
In-Reply-To: <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
References: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
 <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Cc: Peter Zotov <whitequark@whitequark.org>,
 "=?utf-8?Q?platform=40lists.ocaml.org?=" <platform@lists.ocaml.org>,
 opam-devel <opam-devel@lists.ocaml.org>,
 "=?utf-8?Q?wg-windows=40lists.ocaml.org?=" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 30 Jun 2015 17:46:29 -0000

Le mardi, 30 juin 2015 =C3=A0 18:13, David Allsopp a =C3=A9crit :
> =24OCAMLLIB/Makefile.config defines TOOLCHAIN variable already which gi=
ves mingw or msvc. =20

Ok thanks, so it can at least be discovered. On my osx machine I have cc =
in there, so I guess this means the C toolchain =3F =20

> (or with more recent OCamls by using the Config module of compiler-libs=
.common)
Assuming we are accessing this from a build system implemented in OCaml, =
I guess this fails in cross-compilation settings since you will get the v=
alues of the build-os OCaml compilers in there.


> The mingw compiler already use the form w64 for the host, so that the c=
ompilers =22fake=22 a cross-compiling triple (e.g. i686-w64-mingw32-gcc a=
nd x86=5F64-w64-mingw32-gcc). Perhaps that would be better=3F
I don't understand what you are proposing here. Did you say we should use=
 =22mingw32=22 as an OS value to denote the mingw ports =3F =20

Best,

Daniel

From Douglas_Makofka@cable.comcast.com  Tue Jul  7 20:47:58 2015
Return-Path: <Douglas_Makofka@cable.comcast.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 5938F3C07A
 for <wg-windows@lists.ocaml.org>; Tue,  7 Jul 2015 20:47:58 +0100 (BST)
X-Cam-SpamDetails: score -0.8 from SpamAssassin-3.3.2-1689337 
 * -0.8 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from pacdcmhout01.cable.comcast.com ([68.87.31.167]:64328)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1:DHE-RSA-AES256-SHA:256)
 id 1ZCYxK-0002Ew-XE (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <Douglas_Makofka@cable.comcast.com>);
 Tue, 07 Jul 2015 20:55:03 +0100
X-AuditID: 44571fa7-f796a6d000005411-0a-559c2e93cb8c
Received: from PACDCEXHUB01.cable.comcast.com (dlpemail-wc-5p.sys.comcast.net
 [24.40.13.176]) (using TLS with cipher AES256-SHA (256/256 bits))
 (Client did not present a certificate)
 by pacdcmhout01.cable.comcast.com (SMTP Gateway) with SMTP id
 32.CC.21521.39E2C955; Tue,  7 Jul 2015 15:54:59 -0400 (EDT)
Received: from VAADCEX17.cable.comcast.com (147.191.102.84) by
 PACDCEXHUB01.cable.comcast.com (24.40.56.114) with Microsoft SMTP Server
 (TLS) id 14.3.181.6; Tue, 7 Jul 2015 15:54:45 -0400
Received: from VAADCEX19.cable.comcast.com (147.191.103.196) by
 VAADCEX17.cable.comcast.com (147.191.102.84) with Microsoft SMTP Server (TLS)
 id 15.0.1044.25; Tue, 7 Jul 2015 15:54:44 -0400
Received: from VAADCEX19.cable.comcast.com ([fe80::3aea:a7ff:fe12:5e30]) by
 VAADCEX19.cable.comcast.com ([fe80::3aea:a7ff:fe12:5e30%19]) with mapi id
 15.00.1044.021; Tue, 7 Jul 2015 15:54:44 -0400
From: "Makofka, Douglas S" <Douglas_Makofka@cable.comcast.com>
To: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Thread-Topic: dynlink.cmxa missing in cygwin builds
Thread-Index: AdC47bwp9gpSpHMtSDm52D8/qOnvnQ==
Date: Tue, 7 Jul 2015 19:54:44 +0000
Message-ID: <375959ed1a754da8bf2e84f6dfbea88d@VAADCEX19.cable.comcast.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [96.114.156.8]
Content-Type: multipart/alternative;
 boundary="_000_375959ed1a754da8bf2e84f6dfbea88dVAADCEX19cablecomcastco_"
MIME-Version: 1.0
X-CFilter-Loop: Forward
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFtrOIsWRmVeSWpSXmKPExsUiocG7QXey3pxQg9lrdS3eN/xmc2D0uPpg
 FVsAYxSXTUpqTmZZapG+XQJXxrLrzcwFtyQq/q5NbGDcJ9rFyMkhIWAiMe/wERYIW0ziwr31
 bCC2kMA2JometXZdjFxA9n5GiYOPrrJDOAeBnLbzLBBVJxglLt1JBrHZBOwkzqz7zw5iiwjY
 Siz88JYZxBYW0JNYfvcuE0TcWGLd7jmMELaexNED7WD1LAIqEo93/ACr4RXwkvi7uAnMZgS6
 6PupNWA2s4C4xK0n85kgLhWQWLLnPDOELSrx8vE/VgjbQGLr0n1Q3yhIbN+/jQWiN19i1scj
 jBDzBSVOznwCdb+exJn/h6HqxSUOH9nBOoFRfBaSdbOQtM9C0g4R15FYsPsTG4StLbFs4Wtm
 GPvMgcdMyOILGNlXMcoVJCanJOdm5JeWGBjqJScm5aTqJefnJicWl4DoTYzA6HQJl1++g/He
 C6dDjAIcjEo8vDd55oQKsSaWFVfmHmKU4GBWEuH9qQoU4k1JrKxKLcqPLyrNSS0+xCjNwaIk
 zru9d1aokEB6YklqdmpqQWoRTJaJg1OqgVFvQXfN9X0h31wuBdyqjK7qMGDbdGn5Kd8VIn+6
 Dm/g21MlXHK362eLq7x7qWZoTM+5X0Hy4W85j062ClvA+I4DGNBPIqIdeP++dbRQYHsY9EFW
 VZU/6oV3c2FvucFtxrXVKduPNb/S3FOqf+iN4ASXcwW8aUltp0rKZ29o8umQPT6Vy1tHiaU4
 I9FQi7moOBEAUz+VcMoCAAA=
Subject: [wg-windows] dynlink.cmxa missing in cygwin builds
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 07 Jul 2015 19:47:58 -0000

--_000_375959ed1a754da8bf2e84f6dfbea88dVAADCEX19cablecomcastco_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have OPAM running in Cygwin. I'm trying some basic builds like camlp4. It=
's choking because dynlink.cmxa isn't in the library. I'm using 4.02.1 .  I=
t is not in the 'system' installation either (4.01.0). I seem to remember s=
ome issue with Cygwin and native executables - but it was a few years ago, =
so maybe I'm imagining things. Anyway, is this an OPAM issue or did I mess =
up some other configuration?
Thanks,
Doug makofka


--_000_375959ed1a754da8bf2e84f6dfbea88dVAADCEX19cablecomcastco_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 15 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"#0563C1" vlink=3D"#954F72">
<div class=3D"WordSection1">
<p class=3D"MsoNormal">I have OPAM running in Cygwin. I&#8217;m trying some=
 basic builds like camlp4. It&#8217;s choking because dynlink.cmxa isn&#821=
7;t in the library. I&#8217;m using 4.02.1 . &nbsp;It is not in the &#8216;=
system&#8217; installation either (4.01.0). I seem to remember some issue w=
ith
 Cygwin and native executables &#8211; but it was a few years ago, so maybe=
 I&#8217;m imagining things. Anyway, is this an OPAM issue or did I mess up=
 some other configuration?<o:p></o:p></p>
<p class=3D"MsoNormal">Thanks,<o:p></o:p></p>
<p class=3D"MsoNormal">Doug makofka<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
</body>
</html>

--_000_375959ed1a754da8bf2e84f6dfbea88dVAADCEX19cablecomcastco_--

From adrien@notk.org  Tue Jul  7 21:52:29 2015
Return-Path: <adrien@notk.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 6556A3C07A
 for <wg-windows@lists.ocaml.org>; Tue,  7 Jul 2015 21:52:29 +0100 (BST)
X-Cam-SpamDetails: score -0.8 from SpamAssassin-3.3.2-1689337 
 * -0.8 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from nautica.notk.org ([91.121.71.147]:35577)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:DHE-RSA-AES256-GCM-SHA384:256)
 id 1ZCZxm-0000Tm-Pp (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <adrien@notk.org>); Tue, 07 Jul 2015 21:59:34 +0100
Received: by nautica.notk.org (Postfix, from userid 1003)
 id 7C13EC01B; Tue,  7 Jul 2015 22:59:33 +0200 (CEST)
Date: Tue, 7 Jul 2015 22:59:33 +0200
From: Adrien Nader <adrien@notk.org>
To: "Makofka, Douglas S" <Douglas_Makofka@cable.comcast.com>
Message-ID: <20150707205933.GA27407@notk.org>
References: <375959ed1a754da8bf2e84f6dfbea88d@VAADCEX19.cable.comcast.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
In-Reply-To: <375959ed1a754da8bf2e84f6dfbea88d@VAADCEX19.cable.comcast.com>
User-Agent: Mutt/1.5.21 (2010-09-15)
Cc: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] dynlink.cmxa missing in cygwin builds
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 07 Jul 2015 20:52:29 -0000

Hi,

On Tue, Jul 07, 2015, Makofka, Douglas S wrote:
> I have OPAM running in Cygwin. I'm trying some basic builds like camlp4. It's choking because dynlink.cmxa isn't in the library. I'm using 4.02.1 .  It is not in the 'system' installation either (4.01.0). I seem to remember some issue with Cygwin and native executables - but it was a few years ago, so maybe I'm imagining things. Anyway, is this an OPAM issue or did I mess up some other configuration?

On cygwin, 32 bits works while 64 bits is very uneven.

As far as I understand (not that you worded it poorly but that I'm
really tired), you should ensure you have the flexdll (or flexlink
maybe, just look for "flex") and dos2unix packages installed.

You should also check the output from configure and also whether you
have unix.cmxa too.

-- 
Adrien Nader

From Douglas_Makofka@cable.comcast.com  Thu Jul  9 18:44:11 2015
Return-Path: <Douglas_Makofka@cable.comcast.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 8FC1A3C17E
 for <wg-windows@lists.ocaml.org>; Thu,  9 Jul 2015 18:44:11 +0100 (BST)
X-Cam-SpamDetails: score -0.3 from SpamAssassin-3.3.2-1689812 
 * -0.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from pacdcmhout01.cable.comcast.com ([68.87.31.167]:52598)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:DHE-RSA-AES256-SHA:256)
 id 1ZDFyk-0002le-QF (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <Douglas_Makofka@cable.comcast.com>);
 Thu, 09 Jul 2015 18:51:22 +0100
X-AuditID: 44571fa7-f796a6d000005411-2d-559eb4978bce
Received: from pacdcexhub04.cable.comcast.com (dlpemail-wc-5p.sys.comcast.net
 [24.40.13.176]) (using TLS with cipher AES256-SHA (256/256 bits))
 (Client did not present a certificate)
 by pacdcmhout01.cable.comcast.com (SMTP Gateway) with SMTP id
 1A.79.21521.794BE955; Thu,  9 Jul 2015 13:51:19 -0400 (EDT)
Received: from VAADCEX17.cable.comcast.com (147.191.102.84) by
 pacdcexhub04.cable.comcast.com (24.40.56.121) with Microsoft SMTP Server
 (TLS) id 14.3.181.6; Thu, 9 Jul 2015 13:51:13 -0400
Received: from VAADCEX19.cable.comcast.com (147.191.103.196) by
 VAADCEX17.cable.comcast.com (147.191.102.84) with Microsoft SMTP Server (TLS)
 id 15.0.1044.25; Thu, 9 Jul 2015 13:51:12 -0400
Received: from VAADCEX19.cable.comcast.com ([fe80::3aea:a7ff:fe12:5e30]) by
 VAADCEX19.cable.comcast.com ([fe80::3aea:a7ff:fe12:5e30%19]) with mapi id
 15.00.1044.021; Thu, 9 Jul 2015 13:51:12 -0400
From: "Makofka, Douglas S" <Douglas_Makofka@cable.comcast.com>
To: Adrien Nader <adrien@notk.org>
Thread-Topic: [wg-windows] dynlink.cmxa missing in cygwin builds
Thread-Index: AdC47bwp9gpSpHMtSDm52D8/qOnvnQAK53mAAFV/1+A=
Date: Thu, 9 Jul 2015 17:51:12 +0000
Message-ID: <582e0834496640a1a4fde007a286a8d9@VAADCEX19.cable.comcast.com>
References: <375959ed1a754da8bf2e84f6dfbea88d@VAADCEX19.cable.comcast.com>
 <20150707205933.GA27407@notk.org>
In-Reply-To: <20150707205933.GA27407@notk.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [96.114.156.8]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-CFilter-Loop: Forward
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFjrDIsWRmVeSWpSXmKPExsUiocG7QXf6lnmhBhd2yVs03NrOavG+4Teb
 A5PH1Qer2DzeP9/KEsAUxWWTkpqTWZZapG+XwJWxYEIHU8EK/ooTZ3+yNjB+4eti5OSQEDCR
 ONa0lA3CFpO4cG89mC0ksI1JYs+Ggi5GLiB7P6PE99PzmCESBxkltl/MhEicYJRYNuUdWAeb
 gJ3EmXX/2UFsEQElia8zFoDZzAK2EtNv72MBsYUF7CWWNH1jgahxkNjwZwlUvZXEnzkfwOIs
 AioSP86cBIvzCnhJbFi/AWpxnsSzCduZQGxOAT2JC8+eMYLYjEBXfz+1hglil7jErSfzmSC+
 EZBYsuc8M4QtKvHy8T9WCNtAYutSiHskBBQktu/fBmRzAPVqSqzfpQ8xRlFiSvdDqBMEJU7O
 fMICcYKexJn/h6FaxSUOH9nBOoFRehaSzbMQJs1CMmkWkkkLGFlWMcoVJCanJOdm5JeWGBjq
 JScm5aTqJefnJicWl4DoTYzAOHYJl1++g/HeC6dDjAIcjEo8vAab5oUKsSaWFVfmHmKU4GBW
 EuG93A8U4k1JrKxKLcqPLyrNSS0+xCjNwaIkzrt88ZxQIYH0xJLU7NTUgtQimCwTB6dUA2PO
 tqIH1zeIqie1css+3x5WdLhzboOjQ0r1P8FjyocyXSNWTPWvnBcm1Ve5x8hSiy/tJlO+/7bj
 3/cqf3tiKnqD41HPgZVtCxZsiXE5cbVm9tJtDT0sk7LuqRttc7F+E9/8QztKt6f+QRvjmnDb
 eoMkk5NPP3a3reKae59N9eyj9q9SzQveblFiKc5INNRiLipOBAAzexAD3wIAAA==
Cc: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] dynlink.cmxa missing in cygwin builds
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 09 Jul 2015 17:44:11 -0000

T24gaHR0cDovL2FsYWluLmZyaXNjaC5mci9mbGV4ZGxsLmh0bWwgLCBpdCBvbmx5IGxpc3RzIHRo
ZSAzMi1iaXQgdmVyc2lvbiBvZiBnY2Mgc3VwcGxpZWQgd2l0aCBDeWd3aW4gYXMgYSBzdXBwb3J0
ZWQgcGxhdGZvcm0uIFNvIEkgZ3Vlc3MgSSdtIGdvaW5nIGJhY2sgdG8gQ3lnd2luX3g4NiBhbmQg
dHJ5aW5nIGFnYWluLiBJIGRpZCB0cnlpbmcgaW5zdGFsbGluZyBmbGV4bGluayBpbiB0aGUgNjQt
Yml0IHZlcnNpb24gYW5kIHJlLWJ1aWxkaW5nIG9jYW1sLTQuMDIuMSBmcm9tIHNjcmF0Y2guIC4v
Y29uZmlndXJlIGZvdW5kIGZsZXhsaW5rIG9rLCBidXQgJ21ha2Ugd29ybGQnIGZhaWxlZCBwcmV0
dHkgcXVpY2tseS4NCkRzbQ0KDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBB
ZHJpZW4gTmFkZXIgW21haWx0bzphZHJpZW5Abm90ay5vcmddIA0KU2VudDogVHVlc2RheSwgSnVs
eSAwNywgMjAxNSA1OjAwIFBNDQpUbzogTWFrb2ZrYSwgRG91Z2xhcyBTDQpDYzogd2ctd2luZG93
c0BsaXN0cy5vY2FtbC5vcmcNClN1YmplY3Q6IFJlOiBbd2ctd2luZG93c10gZHlubGluay5jbXhh
IG1pc3NpbmcgaW4gY3lnd2luIGJ1aWxkcw0KDQpIaSwNCg0KT24gVHVlLCBKdWwgMDcsIDIwMTUs
IE1ha29ma2EsIERvdWdsYXMgUyB3cm90ZToNCj4gSSBoYXZlIE9QQU0gcnVubmluZyBpbiBDeWd3
aW4uIEknbSB0cnlpbmcgc29tZSBiYXNpYyBidWlsZHMgbGlrZSBjYW1scDQuIEl0J3MgY2hva2lu
ZyBiZWNhdXNlIGR5bmxpbmsuY214YSBpc24ndCBpbiB0aGUgbGlicmFyeS4gSSdtIHVzaW5nIDQu
MDIuMSAuICBJdCBpcyBub3QgaW4gdGhlICdzeXN0ZW0nIGluc3RhbGxhdGlvbiBlaXRoZXIgKDQu
MDEuMCkuIEkgc2VlbSB0byByZW1lbWJlciBzb21lIGlzc3VlIHdpdGggQ3lnd2luIGFuZCBuYXRp
dmUgZXhlY3V0YWJsZXMgLSBidXQgaXQgd2FzIGEgZmV3IHllYXJzIGFnbywgc28gbWF5YmUgSSdt
IGltYWdpbmluZyB0aGluZ3MuIEFueXdheSwgaXMgdGhpcyBhbiBPUEFNIGlzc3VlIG9yIGRpZCBJ
IG1lc3MgdXAgc29tZSBvdGhlciBjb25maWd1cmF0aW9uPw0KDQpPbiBjeWd3aW4sIDMyIGJpdHMg
d29ya3Mgd2hpbGUgNjQgYml0cyBpcyB2ZXJ5IHVuZXZlbi4NCg0KQXMgZmFyIGFzIEkgdW5kZXJz
dGFuZCAobm90IHRoYXQgeW91IHdvcmRlZCBpdCBwb29ybHkgYnV0IHRoYXQgSSdtIHJlYWxseSB0
aXJlZCksIHlvdSBzaG91bGQgZW5zdXJlIHlvdSBoYXZlIHRoZSBmbGV4ZGxsIChvciBmbGV4bGlu
ayBtYXliZSwganVzdCBsb29rIGZvciAiZmxleCIpIGFuZCBkb3MydW5peCBwYWNrYWdlcyBpbnN0
YWxsZWQuDQoNCllvdSBzaG91bGQgYWxzbyBjaGVjayB0aGUgb3V0cHV0IGZyb20gY29uZmlndXJl
IGFuZCBhbHNvIHdoZXRoZXIgeW91IGhhdmUgdW5peC5jbXhhIHRvby4NCg0KLS0NCkFkcmllbiBO
YWRlcg0K

From daniel.buenzli@erratique.ch  Fri Jul 17 12:40:50 2015
Return-Path: <daniel.buenzli@erratique.ch>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 3F8DF3C0B6;
 Fri, 17 Jul 2015 12:40:50 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1691145 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [74.55.86.74 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail6.webfaction.com ([74.55.86.74]:48356
 helo=smtp.webfaction.com)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtp id 1ZG47v-0004i9-X9 (Exim 4.82_3-c0e5623)
 (return-path <daniel.buenzli@erratique.ch>); Fri, 17 Jul 2015 12:48:27 +0100
Received: from [192.168.2.7] (cpc16-cmbg14-2-0-cust300.5-4.cable.virginm.net
 [86.6.157.45])
 by smtp.webfaction.com (Postfix) with ESMTP id 14FB7212A385;
 Fri, 17 Jul 2015 10:26:08 +0000 (UTC)
Date: Fri, 17 Jul 2015 11:26:02 +0100
From: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
To: "=?utf-8?Q?platform=40lists.ocaml.org?=" <platform@lists.ocaml.org>, 
 opam-devel <opam-devel@lists.ocaml.org>, 
 "=?utf-8?Q?wg-windows=40lists.ocaml.org?=" <wg-windows@lists.ocaml.org>
Message-ID: <3D6425393B9549ED892DE814251B3530@erratique.ch>
In-Reply-To: <76478AAD389641DE94728EC386AFFA87@erratique.ch>
References: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
 <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
 <76478AAD389641DE94728EC386AFFA87@erratique.ch>
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Subject: Re: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 17 Jul 2015 11:40:50 -0000

Le mardi, 30 juin 2015 =C3=A0 18:52, Daniel B=C3=BCnzli a =C3=A9crit :
> Le mardi, 30 juin 2015 =C3=A0 18:13, David Allsopp a =C3=A9crit :
> > =24OCAMLLIB/Makefile.config defines TOOLCHAIN variable already which =
gives mingw or msvc.
> =20

It seems that =60ocamlc -config=60 doesn't output this variable. Could an=
yone confirm me that =60ocamlc -config =7C grep ccomp=5Ftype=60 gives the=
 information (and how). =20

Besides regarding the initial discussion I think the only reasonable opti=
on would be: =20

b) Distinguish an OS for the mingw ports

However I would like to get feedback from windows users if it makes sense=
 to do this, in the sense that a lot of things have to be done differentl=
y build-wise with mingw compared to a plain win32 and that it's useful in=
 build systems to be able to get that information without having to grep =
=60ocamlc -config=60. Because if it's only for the file extension busines=
s maybe it's not such a good idea to define an os value for it.

Best,

Daniel



From jun.furuse@gmail.com  Mon Jul 20 16:29:16 2015
Return-Path: <jun.furuse@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 52B383C2F7
 for <wg-windows@lists.ocaml.org>; Mon, 20 Jul 2015 16:29:16 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1691495 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [74.125.82.51 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (jun.furuse[at]gmail.com)
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-wg0-f51.google.com ([74.125.82.51]:35981)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:AES128-GCM-SHA256:128)
 id 1ZHD7o-0002vS-Wm (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <jun.furuse@gmail.com>); Mon, 20 Jul 2015 16:37:04 +0100
Received: by wgbcc4 with SMTP id cc4so40628553wgb.3
 for <wg-windows@lists.ocaml.org>; Mon, 20 Jul 2015 08:37:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:date:message-id:subject:from:to:content-type;
 bh=vr52fw8kLF1AQcNhC8z7nquXTpccmcYfShtJl6+x+RY=;
 b=aBbXUXs2HVA3gKdThh8rmThqFdjqtDjNY3mlWHn7dgNrKkB/C3BRf/B5HDoP5RL9uI
 WjgMc7X5WAzOatNJnboJ48ka1hTKOur0OBc4c8+cV3IHI4T1y+wR4WNZ+WrpjLoiMXlP
 lpw+tbeRjVuvJzA4KCJNJyUzPadqXrFlCI5TXz4Am/VsGyUDzFcnNF/v8giulJMJCtIg
 XrIhPLIsObIeJwCeK/5VbRW464VnrJqLIfHQpXFuIJM/ORqr2UEaB4oNRQ+TXNKnJxlL
 7pyXOhK+/vI2uD1soUTd3b69ZIILHSolZi+AfInMV0FZMa7tUopRCRgEdiqgv25FN+ln
 m+hg==
MIME-Version: 1.0
X-Received: by 10.180.92.40 with SMTP id cj8mr21576830wib.92.1437406623846;
 Mon, 20 Jul 2015 08:37:03 -0700 (PDT)
Received: by 10.194.72.169 with HTTP; Mon, 20 Jul 2015 08:37:03 -0700 (PDT)
Date: Mon, 20 Jul 2015 23:37:03 +0800
Message-ID: <CAAoLEWth0Zr-h8-QFnNYjo8w0MUCres_nfr-OQEj2j8oN5AvyA@mail.gmail.com>
From: Jun Furuse <jun.furuse@gmail.com>
To: wg-windows@lists.ocaml.org
Content-Type: text/plain; charset=UTF-8
Subject: [wg-windows] OMake on Mingw64
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 20 Jul 2015 15:29:16 -0000

Hi,

Has anyone succeeded to compile OMake with Mingw64 OCaml?

I am trying to build it with a patch found in Wodi repo:

https://github.com/camlspotter/ocaml-mingw/blob/master/omake-0.9.8.6/patch-aa.github.com_fdopen_godi-repo

but sofar it is in vain: make boostrap succeeds, but segfaults at make all.

Thanks
Jun

From gclow-wg-windows@m.gmane.org  Mon Jul 20 17:16:31 2015
Return-Path: <gclow-wg-windows@m.gmane.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 449863C2F7
 for <wg-windows@lists.ocaml.org>; Mon, 20 Jul 2015 17:16:31 +0100 (BST)
X-Cam-SpamDetails: score -1.9 from SpamAssassin-3.3.2-1691495 
 * -1.2 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [80.91.229.3 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from plane.gmane.org ([80.91.229.3]:55487)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1ZHDrX-0002J5-jS (Exim 4.82_3-c0e5623) for wg-windows@lists.ocaml.org
 (return-path <gclow-wg-windows@m.gmane.org>); Mon, 20 Jul 2015 17:24:19 +0100
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from <gclow-wg-windows@m.gmane.org>) id 1ZHDrV-00005R-Qt
 for wg-windows@lists.ocaml.org; Mon, 20 Jul 2015 18:24:17 +0200
Received: from p548c9cda.dip0.t-ipconnect.de ([84.140.156.218])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Mon, 20 Jul 2015 18:24:17 +0200
Received: from andreashauptmann by p548c9cda.dip0.t-ipconnect.de with local
 (Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Mon, 20 Jul 2015 18:24:17 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: wg-windows@lists.ocaml.org
From: Andreas Hauptmann <andreashauptmann@t-online.de>
Date: Mon, 20 Jul 2015 16:24:10 +0000
Organization: -
Lines: 18
Message-ID: <moj7bb$hua$1@ger.gmane.org>
References: <CAAoLEWth0Zr-h8-QFnNYjo8w0MUCres_nfr-OQEj2j8oN5AvyA@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: p548c9cda.dip0.t-ipconnect.de
In-Reply-To: <CAAoLEWth0Zr-h8-QFnNYjo8w0MUCres_nfr-OQEj2j8oN5AvyA@mail.gmail.com>
X-Archive: encrypt
Archive: no
Subject: Re: [wg-windows] OMake on Mingw64
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 20 Jul 2015 16:16:31 -0000

On Mon, 20 Jul 2015 23:37:03 +0800
Jun Furuse <jun.furuse@gmail.com> wrote:

> but sofar it is in vain: make boostrap succeeds, but segfaults at
> make all.

Try Gerd Stolpmanns recent fork:
https://github.com/gerdstolpmann/omake-fork/ 

If I remember right, he found the reason and his fork supports mingw
out of the box.

I didn't find the reason for it instantly and just shipped an
pre-compiled omake for bootstrapping.
(The bug wasn't triggered until some gcc update and only affected the
byte code version - which is used during bootstrapping but not
thereafter)



From dra-news@metastack.com  Thu Jul 23 19:48:46 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 5DE433C1D2;
 Thu, 23 Jul 2015 19:48:46 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1691495 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.161 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148161.authsmtp.com ([62.13.148.161]:45296)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtp id 1ZILfc-0007cb-r6 (Exim 4.82_3-c0e5623)
 (return-path <dra-news@metastack.com>); Thu, 23 Jul 2015 19:56:45 +0100
Received: from mail-c235.authsmtp.com (mail-c235.authsmtp.com [62.13.128.235])
 by punt15.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t6NIuddd007555; 
 Thu, 23 Jul 2015 19:56:39 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t6NIucH5052854;
 Thu, 23 Jul 2015 19:56:38 +0100 (BST)
Received: from Altus ([213.205.228.55]) (authenticated bits=0)
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t6NIuY4P009001
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO);
 Thu, 23 Jul 2015 19:56:37 +0100
From: "David Allsopp" <dra-news@metastack.com>
To: <platform@lists.ocaml.org>, "opam-devel" <opam-devel@lists.ocaml.org>,
 <wg-windows@lists.ocaml.org>
References: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
 <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
 <76478AAD389641DE94728EC386AFFA87@erratique.ch>
 <3D6425393B9549ED892DE814251B3530@erratique.ch>
In-Reply-To: <3D6425393B9549ED892DE814251B3530@erratique.ch>
Date: Thu, 23 Jul 2015 19:55:50 +0100
Organization: MetaStack Solutions Ltd.
Message-ID: <000001d0c579$332f0aa0$998d1fe0$@metastack.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHQs1YM2XpQJPWW80GdAXST55kz6J3FRc5g///9wwCAGjr0AIAJ4rdA
Content-Language: en-gb
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: 8c980cdd-316c-11e5-b397-002590a15da7
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgESJgdHAnNE X3kJW1VRQFx4U2Zz YQlZIwdcYVRPXwB0 UklLXFNTEBpqBAMB
 SFoYLGA3JH1DeHty bUNmEHleWkM0fRV0 Sk4HQTkbZmZmO30e URVdalFXeQRXfh9H
 b1l/BXIINTQAKBgV TUcAID90IjRZJCNK WTRFDF4fR1oKEC89 QR9KAjQpEUoaXG0r
 KAY6MRYSG1xZOFgz NVdpQkMDLxIXEUUQ V0pXBzRCb1IGQjIq CQJcUgYSESZBQCFX HhwvJAQg
X-Authentic-SMTP: 61633634383431.1023:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: Re: [wg-windows] Identifying windows ports for build systems &
	cross compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 23 Jul 2015 18:48:46 -0000

Daniel B=C3=BCnzli wrote:
> Le mardi, 30 juin 2015 =C3=A0 18:52, Daniel B=C3=BCnzli a =C3=A9crit :
> > Le mardi, 30 juin 2015 =C3=A0 18:13, David Allsopp a =C3=A9crit :
> > > $OCAMLLIB/Makefile.config defines TOOLCHAIN variable already which
> gives mingw or msvc.
> >
>=20
> It seems that `ocamlc -config` doesn't output this variable. Could =
anyone
> confirm me that `ocamlc -config | grep ccomp_type` gives the =
information
> (and how).

utils/config.mlp shows that the output will be the CCOMPTYPE variable =
OCaml was configured with; config/Makefile.{msvc,msvc64,mingw,mingw64} =
show that is "msvc" for the first two and "cc" for the second two.
=20
> Besides regarding the initial discussion I think the only reasonable
> option would be:
>=20
> b) Distinguish an OS for the mingw ports

That looks an abuse to me! The operating system for all four ports is =
Win32 (yes, it may sound strange that the OS for a 64-bit port is also =
Win32, but that's actually how the parlance works and isn't unique to =
OCaml...). The operating system for the Cygwin ports is *not* Windows, =
hence the different output.

Additionally, while new code out there may be taking advantage of =
Sys.win32, I expect there's a lot of code still reasonably expecting =
that Sys.os_type =3D "Win32" will work forever. Adding Sys.comp_type =
would be handy, of course... but then having the entire Config module as =
Sys.Config would be generally quite useful!

> However I would like to get feedback from windows users if it makes =
sense
> to do this, in the sense that a lot of things have to be done =
differently
> build-wise with mingw compared to a plain win32 and that it's useful =
in
> build systems to be able to get that information without having to =
grep
> `ocamlc -config`. Because if it's only for the file extension business
> maybe it's not such a good idea to define an os value for it.

I'm not sure what you're getting at here - what build system differences =
are you referring to?=20


David


From daniel.buenzli@erratique.ch  Thu Jul 23 21:31:13 2015
Return-Path: <daniel.buenzli@erratique.ch>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 7B24C3C1D2;
 Thu, 23 Jul 2015 21:31:13 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1691495 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [74.55.86.74 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail6.webfaction.com ([74.55.86.74]:52517
 helo=smtp.webfaction.com)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtp id 1ZINGq-0008J9-WP (Exim 4.82_3-c0e5623)
 (return-path <daniel.buenzli@erratique.ch>); Thu, 23 Jul 2015 21:39:12 +0100
Received: from [192.168.2.4] (cpc16-cmbg14-2-0-cust300.5-4.cable.virginm.net
 [86.6.157.45])
 by smtp.webfaction.com (Postfix) with ESMTP id 9EE872112330;
 Thu, 23 Jul 2015 20:39:09 +0000 (UTC)
Date: Thu, 23 Jul 2015 21:39:15 +0100
From: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
To: David Allsopp <dra-news@metastack.com>
Message-ID: <5B65952A997C4A70B0923F43F26DF2BB@erratique.ch>
In-Reply-To: <000001d0c579$332f0aa0$998d1fe0$@metastack.com>
References: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
 <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
 <76478AAD389641DE94728EC386AFFA87@erratique.ch>
 <3D6425393B9549ED892DE814251B3530@erratique.ch>
 <000001d0c579$332f0aa0$998d1fe0$@metastack.com>
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Cc: platform@lists.ocaml.org, opam-devel <opam-devel@lists.ocaml.org>,
 wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 23 Jul 2015 20:31:13 -0000

Le jeudi, 23 juillet 2015 =C3=A0 19:55, David Allsopp a =C3=A9crit :
> utils/config.mlp shows that the output will be the CCOMPTYPE variable O=
Caml was configured with; config/Makefile.=7Bmsvc,msvc64,mingw,mingw64=7D=
 show that is =22msvc=22 for the first two and =22cc=22 for the second tw=
o.

Thanks very much, that's useful information on where to look at things.

> Additionally, while new code out there may be taking advantage of Sys.w=
in32, I expect there's a lot of code still reasonably expecting that Sys.=
os=5Ftype =3D =22Win32=22 will work forever.
I'm not suggesting to change that in OCaml I'm suggesting that for the *o=
pam* os variable so that build systems can condition on it an behave acco=
rdingly. The opam os variable is already quite different from Sys.os=5Fty=
pe which is not precise enough, see =5B1=5D.
 =20
> Adding Sys.comp=5Ftype would be handy, of course... but then having the=
 entire Config module as Sys.Config would be generally quite useful=21

As already mentioned that doesn't help much in cross-compiling scenarios.=

 =20
> I'm not sure what you're getting at here - what build system difference=
s are you referring to=3F

Well the build system needs to adapt file extensions for one thing (which=
 is quite annoying). Hence my question is it *only this* that differs in =
the mingw and msvc ports or are there also other differences at the build=
 level (e.g. build rules) as if this is the case it would make sense to d=
istinguish the ports using the os variable in order to have a good bulk v=
ariable to condition on, otherwise, if it's only the file extensions I do=
n't think it's worth it.

Best,

Daniel

=5B1=5D https://github.com/ocaml/opam-depext/blob/d94f9f06e1d489dc4f946fb=
3aa37589eb9e9a2ec/depext.ml=23L62-L74



From dra-news@metastack.com  Fri Jul 24 11:51:04 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 68F083C16F;
 Fri, 24 Jul 2015 11:51:04 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1691495 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.101 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148101.authsmtp.com ([62.13.148.101]:50897)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtp id 1ZIagy-0000go-ZK (Exim 4.82_3-c0e5623)
 (return-path <dra-news@metastack.com>); Fri, 24 Jul 2015 11:59:05 +0100
Received: from mail-c237.authsmtp.com (mail-c237.authsmtp.com [62.13.128.237])
 by punt18.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t6OAx1rx052826; 
 Fri, 24 Jul 2015 11:59:01 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t6OAx0Oc029845;
 Fri, 24 Jul 2015 11:59:00 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t6OAwwhf025870
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
 Fri, 24 Jul 2015 11:58:59 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0248.002; Fri, 24 Jul 2015 11:58:58 +0100
From: David Allsopp <dra-news@metastack.com>
To: =?utf-8?B?RGFuaWVsIELDvG56bGk=?= <daniel.buenzli@erratique.ch>
Thread-Topic: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
Thread-Index: AQHQs1YM2XpQJPWW80GdAXST55kz6J3FRc5g///9wwCAGjr0AIAKKhzjgADkIzA=
Date: Fri, 24 Jul 2015 10:58:57 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9E9D4915E@Remus.metastack.local>
References: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
 <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
 <76478AAD389641DE94728EC386AFFA87@erratique.ch>
 <3D6425393B9549ED892DE814251B3530@erratique.ch>
 <000001d0c579$332f0aa0$998d1fe0$@metastack.com>
 <5B65952A997C4A70B0923F43F26DF2BB@erratique.ch>
In-Reply-To: <5B65952A997C4A70B0923F43F26DF2BB@erratique.ch>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.0.18]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: fd630b22-31f2-11e5-9f75-002590a135d3
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgYSJgdAAnNE X3kJW1VRQFxwU2Z8 YQpRIwdcYVRPXwB0 UklLXFNTEBpqBAMB
 SFoYLWg6d3oVeHx5 bUJnEHJYVEF8OxAp RE1UR28EeGRhPmIC UUENch5dJgRPYx9F
 aFV2VCIMYmBTZTQC Ml17DC8+eCpeLihS XRo4ZXMeTEAXHzAt RhYNVSouG0ECWD57
 Nxs8NkVUEkELek8v MF8tEUkJKAMfDxYW USMFCzVePEJJTC0u FQJeXEgRWDFcWjtd
 BBY0IxhOGVQI
X-Authentic-SMTP: 61633634383431.1024:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Cc: "platform@lists.ocaml.org" <platform@lists.ocaml.org>,
 opam-devel <opam-devel@lists.ocaml.org>,
 "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 24 Jul 2015 10:51:04 -0000

RGFuaWVsIELDvG56bGkgd3JvdGU6DQo+IExlIGpldWRpLCAyMyBqdWlsbGV0IDIwMTUgw6AgMTk6
NTUsIERhdmlkIEFsbHNvcHAgYSDDqWNyaXQgOg0KPiA+IHV0aWxzL2NvbmZpZy5tbHAgc2hvd3Mg
dGhhdCB0aGUgb3V0cHV0IHdpbGwgYmUgdGhlIENDT01QVFlQRSB2YXJpYWJsZQ0KPiBPQ2FtbCB3
YXMgY29uZmlndXJlZCB3aXRoOyBjb25maWcvTWFrZWZpbGUue21zdmMsbXN2YzY0LG1pbmd3LG1p
bmd3NjR9DQo+IHNob3cgdGhhdCBpcyAibXN2YyIgZm9yIHRoZSBmaXJzdCB0d28gYW5kICJjYyIg
Zm9yIHRoZSBzZWNvbmQgdHdvLg0KPiANCj4gVGhhbmtzIHZlcnkgbXVjaCwgdGhhdCdzIHVzZWZ1
bCBpbmZvcm1hdGlvbiBvbiB3aGVyZSB0byBsb29rIGF0IHRoaW5ncy4NCj4gDQo+ID4gQWRkaXRp
b25hbGx5LCB3aGlsZSBuZXcgY29kZSBvdXQgdGhlcmUgbWF5IGJlIHRha2luZyBhZHZhbnRhZ2Ug
b2YNCj4gPiBTeXMud2luMzIsIEkgZXhwZWN0IHRoZXJlJ3MgYSBsb3Qgb2YgY29kZSBzdGlsbCBy
ZWFzb25hYmx5IGV4cGVjdGluZyB0aGF0DQo+ID4gU3lzLm9zX3R5cGUgPSAiV2luMzIiIHdpbGwg
d29yayBmb3JldmVyLg0KPiBJJ20gbm90IHN1Z2dlc3RpbmcgdG8gY2hhbmdlIHRoYXQgaW4gT0Nh
bWwgSSdtIHN1Z2dlc3RpbmcgdGhhdCBmb3IgdGhlDQo+ICpvcGFtKiBvcyB2YXJpYWJsZSBzbyB0
aGF0IGJ1aWxkIHN5c3RlbXMgY2FuIGNvbmRpdGlvbiBvbiBpdCBhbiBiZWhhdmUNCj4gYWNjb3Jk
aW5nbHkuIFRoZSBvcGFtIG9zIHZhcmlhYmxlIGlzIGFscmVhZHkgcXVpdGUgZGlmZmVyZW50IGZy
b20NCj4gU3lzLm9zX3R5cGUgd2hpY2ggaXMgbm90IHByZWNpc2UgZW5vdWdoLCBzZWUgWzFdLg0K
DQpTb3JyeSAtIHBvb3IgY29udGV4dC1zd2l0Y2hpbmcgb24gbXkgcGFydCEgSG93ZXZlciwgbXkg
Y29tbWVudCBzdGlsbCBzdGFuZHMgLSBtaW5ndyBhbmQgbXN2YyBhcmUgbm90IG9wZXJhdGluZyAo
c3ViLSlzeXN0ZW1zIOKAkyBldmVuIHRoZSBzdWItc3BsaXR0aW5nIGluIHRoYXQgZnVuY3Rpb24g
c3RpbGwgZ2l2ZXMgeW91IG9wZXJhdGluZyBzeXN0ZW1zLiBIYXZpbmcgc29tZXRoaW5nIGFraW4g
dG8gdGhlIGNvbXBfdHlwZSBzZWVtcyBiZXR0ZXIgdG8gbWUgdGhhbiAoYWIpdXNpbmcgdGhlIG5v
dGlvbiBvZiBvcy4NCg0KVGhpcyBtYXkgcGxheSBkaWZmZXJlbnRseSBpbiBhbiBPUEFNIHdoaWNo
IGZ1bGx5IHN1cHBvcnRzIGNyb3NzLWNvbXBpbGF0aW9uLCBidXQgd291bGQgeW91IGV4cGVjdCB0
aGF0IG9zIHZhcmlhYmxlIHRvIGJlIHRoZSBzYW1lIGFjcm9zcyBhbGwgc3dpdGNoZXM/IE9uZSB0
aGluZyB0aGF0IGlzIGNlcnRhaW5seSBpbnRlcmVzdGluZyAoYW5kIHdoaWNoIEknbSBkb2luZyBp
biBteSBXaW5kb3dzIHBvcnQgb2YgT1BBTVsqXSkgaXMgYmVpbmcgYWJsZSB0byB1c2UgYWxsIGZv
dXIgbmF0aXZlIFdpbmRvd3MgcG9ydHMgaW4gdGhlIHNhbWUgT1BBTSBpbnN0YWxsYXRpb24uDQoN
CjxzbmlwPg0KDQo+ID4gSSdtIG5vdCBzdXJlIHdoYXQgeW91J3JlIGdldHRpbmcgYXQgaGVyZSAt
IHdoYXQgYnVpbGQgc3lzdGVtIGRpZmZlcmVuY2VzDQo+IGFyZSB5b3UgcmVmZXJyaW5nIHRvPw0K
PiANCj4gV2VsbCB0aGUgYnVpbGQgc3lzdGVtIG5lZWRzIHRvIGFkYXB0IGZpbGUgZXh0ZW5zaW9u
cyBmb3Igb25lIHRoaW5nICh3aGljaA0KPiBpcyBxdWl0ZSBhbm5veWluZykuIEhlbmNlIG15IHF1
ZXN0aW9uIGlzIGl0ICpvbmx5IHRoaXMqIHRoYXQgZGlmZmVycyBpbg0KPiB0aGUgbWluZ3cgYW5k
IG1zdmMgcG9ydHMgb3IgYXJlIHRoZXJlIGFsc28gb3RoZXIgZGlmZmVyZW5jZXMgYXQgdGhlIGJ1
aWxkDQo+IGxldmVsIChlLmcuIGJ1aWxkIHJ1bGVzKSBhcyBpZiB0aGlzIGlzIHRoZSBjYXNlIGl0
IHdvdWxkIG1ha2Ugc2Vuc2UgdG8NCj4gZGlzdGluZ3Vpc2ggdGhlIHBvcnRzIHVzaW5nIHRoZSBv
cyB2YXJpYWJsZSBpbiBvcmRlciB0byBoYXZlIGEgZ29vZCBidWxrDQo+IHZhcmlhYmxlIHRvIGNv
bmRpdGlvbiBvbiwgb3RoZXJ3aXNlLCBpZiBpdCdzIG9ubHkgdGhlIGZpbGUgZXh0ZW5zaW9ucyBJ
DQo+IGRvbid0IHRoaW5rIGl0J3Mgd29ydGggaXQuDQoNCk9oLCBJIHNlZSAtIHllcywgdGhlIHdh
eSB0aGUgY29tcGlsZXJzIGFuZCBsaW5rZXJzIGFyZSBpbnZva2VkIGlzIHRvdGFsbHkgZGlmZmVy
ZW50IChJIGZvciBzb21lIHJlYXNvbiB0aG91Z2h0IHlvdSB3ZXJlIG1lYW5pbmcgd2VyZSBkaWZm
ZXJlbnQgYnVpbGQgc3lzdGVtcyB0aGVtc2VsdmVzIHJlcXVpcmVkKS4gSW4gR05VIG1ha2UsIEkg
dXNlIGEgZnVuY3Rpb24gYW5kICQoY2FsbCAuLi4pIHRvIGRpZmZlcmVudGlhdGUgdGhlbSAtIHNl
ZSwgZm9yIGV4YW1wbGUsIGh0dHBzOi8vZ2l0aHViLmNvbS9kcmEyNy9vcGFtL2Jsb2IvMDEzMGRi
ODJmNmJjNDkyNDViMTY0ZDMxMzYzMDg1MzFkOTZjNzg2Yy9jb25maWd1cmUuYWMjTDg1LUwxMDAg
YW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9kcmEyNy9vcGFtL2Jsb2IvMDEzMGRiODJmNmJjNDkyNDVi
MTY0ZDMxMzYzMDg1MzFkOTZjNzg2Yy9zcmMvTWFrZWZpbGUjTDI3Ni4NCg0KSWYgeW91IGhhdmUg
Y29tcGFyY2ggPSBjYyBvbiB2aXJ0dWFsbHkgZXZlcnl0aGluZyAoQ3lnd2luLCBNaW5ndywgbW9z
dC9hbGwgVW5pY2VzKSBhbmQgY29tcGFyY2ggPSBtc3ZjIGZvciB0aGUgTWljcm9zb2Z0IGNvbXBp
bGVycyBhbmQgYWxzbyBvcyBiZWluZyBXaW4zMiwgQ3lnd2luIG9yIGEgdmFyaWV0eSBvZiBVbmlj
ZXMgdGhlbiB5b3UgaGF2ZToNCg0KY29tcGFyY2ggPSBtc3ZjIC0+IGltbWVkaWF0ZWx5IC5vYmos
IC5saWIsIC5kbGwsIC5leGUgKGFuZCBNaWNyb3NvZnQgaW52b2NhdGlvbiBydWxlcykNCmNvbXBh
cmNoID0gY2MgLT4gaW1tZWRpYXRlbHkgZ2l2ZXMgeW91IC5vIGFuZCAuYSBhbmQgdGhlbiBvcyA8
PiBXaW4zMiBnaXZlcyB5b3UgLnNvIG9yIC5kbGwrLmV4ZSAoYW5kIENDL0dDQyBpbnZvY2F0aW9u
IHJ1bGVzKQ0KDQpCZXN0LA0KDQoNCkQNCg0KDQpbKl0gd2hpY2ggaXMsIG9mIGNvdXJzZSwgYSkg
bm90IGZpbmlzaGVkIGFuZCBiKSBub3QgbmVjZXNzYXJpbHkgZ29pbmcgdG8gYmUgbWVyZ2VkIQ0K
DQo=

From daniel.buenzli@erratique.ch  Fri Jul 24 13:51:36 2015
Return-Path: <daniel.buenzli@erratique.ch>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id ABFA53C17E;
 Fri, 24 Jul 2015 13:51:36 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1691495 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [74.55.86.74 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail6.webfaction.com ([74.55.86.74]:53198
 helo=smtp.webfaction.com)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtp id 1ZIcZd-0001BZ-YO (Exim 4.82_3-c0e5623)
 (return-path <daniel.buenzli@erratique.ch>); Fri, 24 Jul 2015 13:59:38 +0100
Received: from [192.168.2.4] (cpc16-cmbg14-2-0-cust300.5-4.cable.virginm.net
 [86.6.157.45])
 by smtp.webfaction.com (Postfix) with ESMTP id 8917421160AA;
 Fri, 24 Jul 2015 12:59:34 +0000 (UTC)
Date: Fri, 24 Jul 2015 13:59:43 +0100
From: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
To: David Allsopp <dra-news@metastack.com>
Message-ID: <5FC0BE0F5534411B99B1D89D414AE590@erratique.ch>
In-Reply-To: <E51C5B015DBD1348A1D85763337FB6D9E9D4915E@Remus.metastack.local>
References: <88589CEFF4F346BBB9C699A50E198142@erratique.ch>
 <E51C5B015DBD1348A1D85763337FB6D9E9C9F6C4@Remus.metastack.local>
 <76478AAD389641DE94728EC386AFFA87@erratique.ch>
 <3D6425393B9549ED892DE814251B3530@erratique.ch>
 <000001d0c579$332f0aa0$998d1fe0$@metastack.com>
 <5B65952A997C4A70B0923F43F26DF2BB@erratique.ch>
 <E51C5B015DBD1348A1D85763337FB6D9E9D4915E@Remus.metastack.local>
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Cc: "=?utf-8?Q?platform=40lists.ocaml.org?=" <platform@lists.ocaml.org>,
 opam-devel <opam-devel@lists.ocaml.org>,
 "=?utf-8?Q?wg-windows=40lists.ocaml.org?=" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] Identifying windows ports for build systems &
 cross compiling distinctions
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Fri, 24 Jul 2015 12:51:36 -0000

Le vendredi, 24 juillet 2015 =C3=A0 11:58, David Allsopp a =C3=A9crit :
> Sorry - poor context-switching on my part=21 However, my comment still =
stands - mingw and msvc are not operating (sub-)systems =E2=80=93 even th=
e sub-splitting in that function still gives you operating systems. Havin=
g something akin to the comp=5Ftype seems better to me than (ab)using the=
 notion of os.

Ok.
  =20
> This may play differently in an OPAM which fully supports cross-compila=
tion, but would you expect that os variable to be the same across all swi=
tches=3F

Since that os variable should formally be taken for host-os no.
 =20
> One thing that is certainly interesting (and which I'm doing in my Wind=
ows port of OPAM=5B*=5D) is being able to use all four native Windows por=
ts in the same OPAM installation.

Yes, there should be no problem with this I think.

> comparch =3D msvc -> immediately .obj, .lib, .dll, .exe (and Microsoft =
invocation rules)
> comparch =3D cc -> immediately gives you .o and .a and then os <> Win32=
 gives you .so or .dll+.exe (and CC/GCC invocation rules)

You meant comp=5Ftype I guess. Ok thanks, that's clear. It seems effectiv=
ely less contrived than introducing an os for mingw. =20

> =5B*=5D which is, of course, a) not finished and b) not necessarily goi=
ng to be merged=21 =20
You should try to sync and plot with Louis, I'm sure he's interested. =20

Best,

Daniel

From thranur@gmail.com  Tue Sep  1 12:10:36 2015
Return-Path: <thranur@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id A60173C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 12:10:36 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.212.171 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (thranur[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-wi0-f171.google.com ([209.85.212.171]:38083)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
 id 1ZWjcP-00013u-mM (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <thranur@gmail.com>); Tue, 01 Sep 2015 12:20:50 +0100
Received: by wiclp12 with SMTP id lp12so27005361wic.1
 for <wg-windows@lists.ocaml.org>; Tue, 01 Sep 2015 04:20:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:date:message-id:subject:from:to:content-type;
 bh=Tpn3KRPztDeU1Ic/RMxIUnilX1TDiDKUqD3mVCvGJc8=;
 b=k+yjqzE8TEmx6RRZhZNspcQeJIV+DFTl8+rNMsJ7JqD32AFxEV5snxIhumxJmpSwdq
 1BWFjrTtdvQ66e2UIsiygKObXRNEeeWx8R69x5CN6UAj6r3lLGNUL8FzhZc/Vocripcw
 Zq51YRBJgShoHTC1XkJpyZSyLxfl8e1iXOpoFtWiiXYECIAvEVZnI7eG4565xEeGgv7x
 QRnZ//+k30pcjH3K9rIYrFHqO6PfAV2XF61RPh8/C4xf4TG/H9BGwPW8NX6YyC2Dm9Jk
 9ay5cg9RQsmQRI5O029+K6KnI/w5NSaJtxagjA7N8iYmdssW5KwHg7EiQ77enA7bMtDp
 jZcA==
MIME-Version: 1.0
X-Received: by 10.180.84.131 with SMTP id z3mr2832620wiy.9.1441106449593; Tue,
 01 Sep 2015 04:20:49 -0700 (PDT)
Received: by 10.28.175.8 with HTTP; Tue, 1 Sep 2015 04:20:49 -0700 (PDT)
Date: Tue, 1 Sep 2015 13:20:49 +0200
Message-ID: <CABAtnw__zsyC10cSAR6QSVmj6ZgbuX3KWAfQzup8if8yAngL+g@mail.gmail.com>
From: Thranur Andul <thranur@gmail.com>
To: wg-windows@lists.ocaml.org
Content-Type: multipart/alternative; boundary=f46d043bdd6402f7e9051eadbeab
Subject: [wg-windows] Minimal virtual machine for OCaml
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 11:10:36 -0000

--f46d043bdd6402f7e9051eadbeab
Content-Type: text/plain; charset=UTF-8

While OPAM for Windows is not ready, I'm considering some teaching
experiments using Linux virtual machines running inside Windows.

I suppose it has already been tried by some people here, so maybe someone
could share their experiences with that approach.

In particular, one of my main issues is disk space: how much space would be
necessary for a minimal Linux install with a graphical interface (XFCE,
LXDE or even lighter) and the dependencies needed to install OCaml and the
most common OPAM packages (e.g. Core,
js_of_ocaml, Coq, etc.)? Is there already a Linux distribution made for
that?

Also, related details about virtual machine experiences (issues,
limitations, recommendations, etc.) are welcome.

--f46d043bdd6402f7e9051eadbeab
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div><div><div><div><div>While OPAM for Windows is not rea=
dy, I&#39;m considering some teaching experiments using Linux virtual machi=
nes running inside Windows.<br><br></div>I suppose it has already been trie=
d by some people here, so maybe someone could share their experiences with =
that approach.<br><br></div>In particular, one of my main issues is disk sp=
ace: how much space would be necessary for a minimal Linux install with a g=
raphical interface (XFCE, LXDE or even lighter) and the dependencies needed=
 to install OCaml and the most common OPAM packages (e.g. Core, <br></div>j=
s_of_ocaml, Coq, etc.)? Is there already a Linux distribution made for that=
?<br><br></div>Also, related details about virtual machine experiences (iss=
ues, limitations, recommendations, etc.) are welcome.<br><br></div></div>

--f46d043bdd6402f7e9051eadbeab--

From daniel.buenzli@erratique.ch  Tue Sep  1 12:30:45 2015
Return-Path: <daniel.buenzli@erratique.ch>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 5E9E03C366;
 Tue,  1 Sep 2015 12:30:45 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [74.55.86.74 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail6.webfaction.com ([74.55.86.74]:34237
 helo=smtp.webfaction.com)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtp id 1ZWjvu-0004E4-kh (Exim 4.86_36-e07b163)
 (return-path <daniel.buenzli@erratique.ch>); Tue, 01 Sep 2015 12:40:59 +0100
Received: from [192.168.2.3] (cpc16-cmbg14-2-0-cust300.5-4.cable.virginm.net
 [86.6.157.45])
 by smtp.webfaction.com (Postfix) with ESMTP id 5887420968A1;
 Tue,  1 Sep 2015 11:40:55 +0000 (UTC)
Date: Tue, 1 Sep 2015 12:40:53 +0100
From: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
To: Thranur Andul <thranur@gmail.com>
Message-ID: <9A94AA51109B47E1AF5AC201CCED55AC@erratique.ch>
In-Reply-To: <CABAtnw__zsyC10cSAR6QSVmj6ZgbuX3KWAfQzup8if8yAngL+g@mail.gmail.com>
References: <CABAtnw__zsyC10cSAR6QSVmj6ZgbuX3KWAfQzup8if8yAngL+g@mail.gmail.com>
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Cc: teaching@lists.ocaml.org, wg-windows@lists.ocaml.org
Subject: [wg-windows] Fw:  Minimal virtual machine for OCaml
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 11:30:45 -0000

=46orwarding this to the teaching mailing list. They may be more people i=
n the position of responding to these questions.


Le mardi, 1 septembre 2015 =C3=A0 12:20, Thranur Andul a =C3=A9crit :

> While OPAM for Windows is not ready, I'm considering some teaching expe=
riments using Linux virtual machines running inside Windows.
> =20
> I suppose it has already been tried by some people here, so maybe someo=
ne could share their experiences with that approach.
> =20
> In particular, one of my main issues is disk space: how much space woul=
d be necessary for a minimal Linux install with a graphical interface (X=46=
CE, LXDE or even lighter) and the dependencies needed to install OCaml an=
d the most common OPAM packages (e.g. Core, =20
> js=5Fof=5Focaml, Coq, etc.)=3F Is there already a Linux distribution ma=
de for that=3F
> =20
> Also, related details about virtual machine experiences (issues, limita=
tions, recommendations, etc.) are welcome.
> =20
> =5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=
=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F
> wg-windows mailing list
> wg-windows=40lists.ocaml.org (mailto:wg-windows=40lists.ocaml.org)
> http://lists.ocaml.org/listinfo/wg-windows




From modlfo@gmail.com  Tue Sep  1 13:51:44 2015
Return-Path: <modlfo@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 592283C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 13:51:44 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.215.42 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (modlfo[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-la0-f42.google.com ([209.85.215.42]:34169)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
 id 1ZWlCH-0000vA-X4 (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <modlfo@gmail.com>); Tue, 01 Sep 2015 14:01:58 +0100
Received: by laba3 with SMTP id a3so91880787lab.1
 for <wg-windows@lists.ocaml.org>; Tue, 01 Sep 2015 06:01:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:date:message-id:subject:from:to:content-type;
 bh=xszNDmavIOpsjkcTqt/q4D/YYkjgk4b8V+xrPT2ezJc=;
 b=Vj8c5/ud1xMV4hk4139FvacfiMaOjndLzfzOzcSJ1gjvR+jSPxjGWQ2PSrbjAVCQ1Q
 W/JbjDHjVWTyT0paG7AaGvekEPGKO/D6RbzbdVabZy0oXVOlU3wHDSSJlCtBg3Gau2WZ
 QiuASoozvfpC1gd+VlipGbEYqks2MMib8xiEFtc1f9+AFxUB+re3jOfZe03doLlsZo02
 7UmwTNJG/y+Z1Ty87ymbbRzYDH6tRR4sXDgjF7eWMm/bcvwgTENf46X8NtjriVuTy688
 6/KVD38jCEHfNreue5N83xjGFlOouvPSrsdGsqFzd3/jL0UKGML4P8AHytk34l6rZ/Rt
 LfOA==
MIME-Version: 1.0
X-Received: by 10.112.136.170 with SMTP id qb10mr13590484lbb.34.1441112516013; 
 Tue, 01 Sep 2015 06:01:56 -0700 (PDT)
Received: by 10.25.144.72 with HTTP; Tue, 1 Sep 2015 06:01:55 -0700 (PDT)
Date: Tue, 1 Sep 2015 15:01:55 +0200
Message-ID: <CAF=ojbVBciLiwREy3MrbA-b63C-dXnPAxC7LCQQt-fnyRimR9A@mail.gmail.com>
From: Leonardo Laguna <modlfo@gmail.com>
To: wg-windows@lists.ocaml.org
Content-Type: multipart/alternative; boundary=089e0115fd30993675051eaf2760
Subject: [wg-windows] Problem (and fix) with Unix.create_process in windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 12:51:44 -0000

--089e0115fd30993675051eaf2760
Content-Type: text/plain; charset=UTF-8

Hi,

I have spent some hours trying to find a problem when using
Unix.create_process in windows.

The problem shows when trying to create a process in which the path of the
executable and one of the arguments have spaces, for example:

let cmd = "C:/Program Files/Something/something.exe" ;;
let args = ["arg1"; "arg2"; "C:/Program Files/arg3"] ;;

let pid = Unix.create_process cmd (cmd::args |> Array.of_list) Unix.stdin
Unix.stdout Unix.stderr ;;

Unix.waitpid [] pid ;;

As soon as there's an argument with spaces, the process fails to run. I
tried many different combinations with quoting, backlashes, forwardslashes,
backslashed space, etc, but nothing seemed to work.

I saw that ocaml calls CreateProcess from the windows API, which has many
weird things in the documentation.

When calling CreateProcess you need to supply (optionally) the path to the
application and then the full command line call. For example:

CreateProcess("C:/some.exe","\"C:/some.exe\" arg1 arg2",.........);

Note that you need to pass in the full command line the name of the
application quoted.

The only way of fixing my problem was to pass NULL as first argument:

CreateProcess(NULL","\"C:/some.exe\" arg1 arg2",.........);

After making this change all calls work fine for me.

Has anyone had these kind of problems?

Is is possible to get this change in the ocaml code?

Leonardo

--089e0115fd30993675051eaf2760
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div><div><div><div><div>Hi,<br><br></div>I have spent som=
e hours trying to find a problem when using Unix.create_process in windows.=
<br><br></div>The problem shows when trying to create a process in which th=
e path of the executable and one of the arguments have spaces, for example:=
<br><br></div>let cmd =3D &quot;C:/Program Files/Something/something.exe&qu=
ot; ;;<br>let args =3D [&quot;arg1&quot;; &quot;arg2&quot;; &quot;C:/Progra=
m Files/arg3&quot;] ;;<br><br>let pid =3D Unix.create_process cmd (cmd::arg=
s |&gt; Array.of_list) Unix.stdin Unix.stdout Unix.stderr ;;<br><br>Unix.wa=
itpid [] pid ;;<br><br></div>As soon as there&#39;s an argument with spaces=
, the process fails to run. I tried many different combinations with quotin=
g, backlashes, forwardslashes, backslashed space, etc, but nothing seemed t=
o work.<br><br></div>I saw that ocaml calls CreateProcess from the windows =
API, which has many weird things in the documentation. <br><div><div><div><=
br></div><div>When calling CreateProcess you need to supply (optionally) th=
e path to the application and then the full command line call. For example:=
<br><br></div><div>CreateProcess(&quot;C:/some.exe&quot;,&quot;\&quot;C:/so=
me.exe\&quot; arg1 arg2&quot;,.........);<br><br></div><div>Note that you n=
eed to pass in the full command line the name of the application quoted.<br=
><br></div><div>The only way of fixing my problem was to pass NULL as first=
 argument:<br><br>CreateProcess(NULL&quot;,&quot;\&quot;C:/some.exe\&quot; =
arg1 arg2&quot;,.........);<br></div><div><br></div><div>After making this =
change all calls work fine for me. <br><br></div><div>Has anyone had these =
kind of problems?<br><br></div><div>Is is possible to get this change in th=
e ocaml code?<br><br></div><div>Leonardo<br></div><div><br><br></div></div>=
</div></div>

--089e0115fd30993675051eaf2760--

From adrien@notk.org  Tue Sep  1 13:58:34 2015
Return-Path: <adrien@notk.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 950B23C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 13:58:34 +0100 (BST)
X-Cam-SpamDetails: score -0.0 from SpamAssassin-3.3.2-1700216 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from nautica.notk.org ([91.121.71.147]:37257)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256)
 id 1ZWlIu-0001nH-Wr (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <adrien@notk.org>); Tue, 01 Sep 2015 14:08:48 +0100
Received: by nautica.notk.org (Postfix, from userid 1003)
 id A9F63C009; Tue,  1 Sep 2015 15:08:47 +0200 (CEST)
Date: Tue, 1 Sep 2015 15:08:47 +0200
From: Adrien Nader <adrien@notk.org>
To: Leonardo Laguna <modlfo@gmail.com>
Message-ID: <20150901130847.GA24741@notk.org>
References: <CAF=ojbVBciLiwREy3MrbA-b63C-dXnPAxC7LCQQt-fnyRimR9A@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
In-Reply-To: <CAF=ojbVBciLiwREy3MrbA-b63C-dXnPAxC7LCQQt-fnyRimR9A@mail.gmail.com>
User-Agent: Mutt/1.5.21 (2010-09-15)
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Problem (and fix) with Unix.create_process in
 windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 12:58:34 -0000

Hi,

On Tue, Sep 01, 2015, Leonardo Laguna wrote:
> Hi,
> 
> I have spent some hours trying to find a problem when using
> Unix.create_process in windows.
> 
> The problem shows when trying to create a process in which the path of the
> executable and one of the arguments have spaces, for example:
> 
> let cmd = "C:/Program Files/Something/something.exe" ;;
> let args = ["arg1"; "arg2"; "C:/Program Files/arg3"] ;;
> 
> let pid = Unix.create_process cmd (cmd::args |> Array.of_list) Unix.stdin
> Unix.stdout Unix.stderr ;;
> 
> Unix.waitpid [] pid ;;
> 
> As soon as there's an argument with spaces, the process fails to run. I
> tried many different combinations with quoting, backlashes, forwardslashes,
> backslashed space, etc, but nothing seemed to work.
> 
> I saw that ocaml calls CreateProcess from the windows API, which has many
> weird things in the documentation.
> 
> When calling CreateProcess you need to supply (optionally) the path to the
> application and then the full command line call. For example:
> 
> CreateProcess("C:/some.exe","\"C:/some.exe\" arg1 arg2",.........);
> 
> Note that you need to pass in the full command line the name of the
> application quoted.
> 
> The only way of fixing my problem was to pass NULL as first argument:
> 
> CreateProcess(NULL","\"C:/some.exe\" arg1 arg2",.........);
> 
> After making this change all calls work fine for me.
> 
> Has anyone had these kind of problems?
> 
> Is is possible to get this change in the ocaml code?

Yes! I'm not saying it will happen, only that it's possible.

It's probably the kind of things for which you need to provide new
testsuite entries.
Have you checked the compatibility for this? I.e. is it supposed to also
work on Windows XP? (not that I care about XP)
You will also need to explain the possible drawbacks of passing NULL as
the first parameter.

Just a few quick ideas. If this solves the problem you mention, that
sounds like something good but at the same time the corresponding code
is quite sensitive and with Microsoft's weird APIs I'm a bit worried
about corner cases.

-- 
Adrien Nader

From daniel.buenzli@erratique.ch  Tue Sep  1 14:10:24 2015
Return-Path: <daniel.buenzli@erratique.ch>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id E61E83C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 14:10:24 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [74.55.86.74 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail6.webfaction.com ([74.55.86.74]:40105
 helo=smtp.webfaction.com)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtp id 1ZWlUM-000068-qI (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <daniel.buenzli@erratique.ch>); Tue, 01 Sep 2015 14:20:38 +0100
Received: from [192.168.2.3] (cpc16-cmbg14-2-0-cust300.5-4.cable.virginm.net
 [86.6.157.45])
 by smtp.webfaction.com (Postfix) with ESMTP id 4666620903A9;
 Tue,  1 Sep 2015 13:20:36 +0000 (UTC)
Date: Tue, 1 Sep 2015 14:20:30 +0100
From: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
To: Leonardo Laguna <modlfo@gmail.com>
Message-ID: <63E0A8564BF34E0CB1216E1130BE1EA0@erratique.ch>
In-Reply-To: <CAF=ojbVBciLiwREy3MrbA-b63C-dXnPAxC7LCQQt-fnyRimR9A@mail.gmail.com>
References: <CAF=ojbVBciLiwREy3MrbA-b63C-dXnPAxC7LCQQt-fnyRimR9A@mail.gmail.com>
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Cc: wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Problem (and fix) with Unix.create_process in
 windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 13:10:25 -0000

Le mardi, 1 septembre 2015 =C3=A0 14:01, Leonardo Laguna a =C3=A9crit :
> Has anyone had these kind of problems=3F

Not yet. =20

> Is is possible to get this change in the ocaml code=3F
This surely qualifies as bug. No escaping should be needed on Unix.create=
=5Fprocess and whathever you give as arguments should end up in the sub p=
rocess' Sys.argv as given. A mantis http://caml.inria.fr/mantis/ issue an=
d a patch (possibly on github) are likely most welcome. =20

=46WIW I have this link about the problem =5B1=5D I intended to study at =
a certain point. It might be worth giving it a read. =20

Best,

Daniel

=5B1=5D http://blogs.msdn.com/b/twistylittlepassagesallalike/archive/2011=
/04/23/everyone-quotes-arguments-the-wrong-way.aspx



From thranur@gmail.com  Tue Sep  1 15:58:09 2015
Return-Path: <thranur@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id C2A813C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 15:58:09 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.212.194 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (thranur[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
 *  0.0 AC_DIV_BONANZA RAW: Too many divs in a row... spammy template
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-wi0-f194.google.com ([209.85.212.194]:33739)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
 id 1ZWnAd-0000Bt-Wi (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <thranur@gmail.com>); Tue, 01 Sep 2015 16:08:23 +0100
Received: by wicjd9 with SMTP id jd9so4013985wic.0
 for <wg-windows@lists.ocaml.org>; Tue, 01 Sep 2015 08:08:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:date:message-id:subject:from:to
 :content-type; bh=ZfDJu8nO3cIy4fCJSyv/fgrUjPFtamM07njOtq8e1xc=;
 b=I+VsmsiCWdqOkJMQiBzlKuKzH9mptAIHbaSWUzqTWfms/QRyzEf//4ZJ8yRSsDGYX8
 64e8XYl6gXkCXYrSNIRKpMb4WJp8sLu30bPVF3apiNXiwLhOnPDuyiQ6wo49GXHFkoRH
 m4d32xH+5UzSTshRPjuXzqWhRq4nkw01gw1Ix36ZNG3MrHeU6DYVCGvirt0h02k+VeBX
 8XJsosLgPePapH2yod9g2HCGtrcPaC5Alb2b0aS2Z2so/TBZaLgHKaZhC+FP/Uw3iS+Q
 6Wp8i0w4TvO8EU/c7YeAmoYNgTqjlfY0NNthaX3fYoEbEu06QcuqlBT0nU38V5FHf7sX
 u+QA==
MIME-Version: 1.0
X-Received: by 10.180.189.108 with SMTP id gh12mr4191056wic.53.1441119735466; 
 Tue, 01 Sep 2015 08:02:15 -0700 (PDT)
Received: by 10.28.175.8 with HTTP; Tue, 1 Sep 2015 08:02:15 -0700 (PDT)
In-Reply-To: <CABAtnw_hrU71Qcq0c5rdLocCWUkVFrS0Mqq0cGW_6fR5JVJpTw@mail.gmail.com>
References: <CABAtnw__zsyC10cSAR6QSVmj6ZgbuX3KWAfQzup8if8yAngL+g@mail.gmail.com>
 <9A94AA51109B47E1AF5AC201CCED55AC@erratique.ch>
 <55E5A7C0.7000108@freenet.de>
 <CABAtnw_hrU71Qcq0c5rdLocCWUkVFrS0Mqq0cGW_6fR5JVJpTw@mail.gmail.com>
Date: Tue, 1 Sep 2015 17:02:15 +0200
Message-ID: <CABAtnw_Gj=acvP0iROEP56MUPNbXa3T11GgmR69228hu2EyCbg@mail.gmail.com>
From: Thranur Andul <thranur@gmail.com>
To: wg-windows@lists.ocaml.org
Content-Type: multipart/alternative; boundary=001a11c3420ce950e8051eb0d548
Subject: [wg-windows] Fwd: [Teaching] Fw: Minimal virtual machine for OCaml
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 14:58:09 -0000

--001a11c3420ce950e8051eb0d548
Content-Type: text/plain; charset=UTF-8

Thank you for the advice.

To clarify what I'm looking for: I'm trying to make Linux usage as
transparent as possible, exactly to avoid requiring much unix literacy,
hence why I mentioned disk space usage. It's not so much an issue in
itself, but if I wanted to distribute a static VM image with everything
already installed, its size might become an issue.

For instance, Eclipse, which used to be a quite large application, has a
download size of 270 MB. It does not include the JVM, but after
decompressing I'd estimate it (Eclipse + JVM) at about 1 GB.

I don't know the exact size of Xcode, but some websites estimate it at 2-4
GB.

Visual Studio is probably the largest one, at about 6 GB.

Certainly, installing a Linux via a VM includes much more than an IDE +
compiler + runtime, but if it requires 7GB, it's still a hard pill to
swallow.

This brings me to another point: disk usage anxiety. Even with dynamic disk
images, I'm afraid to give them a large size, so I end up worrying that it
will run out of space. And the kinds of errors that happen in such
situations are much less obvious to understand, especially for linux
newbies. Should I just lose my fear and allow my disk images to dynamically
grow to be as large as they want to be?

For those reasons, I asked about a minimalistic Linux with the lightest
possible UI, to save on disk space as much as possible. It's not so much
about CPU, which for the intended purposes should be mostly fine.

Finally, on the issue of transparency, another major difficulty I have when
using a Linux VM is that the file systems are separate, so even if I tell
the students to "just download that file and open it on your
<Linux/OCaml-based application>", they'll either:

a) Download it using Windows, then not be able to find the file using the
Linux application (or have to move it to a shared folder, which they often
forget);
b) Be forced to use a browser inside Linux, which requires more disk space,
setting up the browser, etc.

I never found it very easy to configure Samba shares on Linux or to set up
the filesystem in a way that maximum sharing could be achieved with minimal
user intervention, especially without knowing in advance some parameters
such as host/username, etc. Which would make it even more complicated to
set up in advance in a static VM image for that purpose.

Is there a better solution concerning transparency between Windows and
Linux for OCaml usage purposes? E.g. using a Merlin-configured Emacs from
Linux that could open a file downloaded via Windows and then compile an
OCaml application that could easily read the files in a Windows directory
to perform some action on them? It sounds almost like Cygwin, but that's
another can of worms...

Any partial solutions or tips you can give me about each of these issues is
already greatly useful to me. I usually end up finding some solutions
myself, but it takes a lot of time searching and trying, and if someone had
already done exactly the same thing before, well, I'd be glad to learn from
them!

Best regards,

On Tue, Sep 1, 2015 at 3:27 PM, Mr. Herr <misterherr@freenet.de> wrote:

> Caveat: this is a general answer, my point of view, and not done with OCaml
>
> It certainly is technically feasible, depending on your desktop hardware
> even easy to do.
>
> You need a VM software. I had good experiences with Virtualbox. With MS
> solutions you must find the right product for your Win version
> (Virtual PC or Hyperv ) - I don't think it will beat Virtualbox in your
> scenario.
>

> Disk space: starting from 3G for the OS and ~4G for the opam directory,
> this all depends directly on what you install.
> You need quite some compilers, make and tools, and devel packages. Do a
> pilot install, of course.
>

> Linux distro: any current distribution will do. Performance will not be
> much of an issue unless you have very weak desktops. I am using virtualbox
> on my old notebook. But some ocaml package compile times are quite long
> even on beefy machines (coq comes to mind).
>
> As for the desktop environment: lighter is better, but not an issue
> either, even on KDE you can turn off effects and background tasks to speed
> it up.
> Take what you and your students know.
>
> skipping "... usual software ... coq ..." - is it an ocaml introduction ?
> :-)
>
> But:
>
> There is a big risk of wasting time with subjects not in the centre of
> your course, especially Linux setup and use.
>
> This depends directly on the "unix/linux literacy" of your students.
>
>
> /Str.
>
>
>

--001a11c3420ce950e8051eb0d548
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div class=3D"gmail_quote"><div dir=3D"ltr"><div><div><div=
><div><div><div><div><div><div><div><div><div>Thank you for the advice.<br>=
<br></div>To clarify what I&#39;m looking for: I&#39;m trying to make Linux=
 usage as transparent as possible, exactly to avoid requiring much unix lit=
eracy, hence why I mentioned disk space usage. It&#39;s not so much an issu=
e in itself, but if I wanted to distribute a static VM image with everythin=
g already installed, its size might become an issue.<br><br></div>For insta=
nce, Eclipse, which used to be a quite large application, has a download si=
ze of 270 MB. It does not include the JVM, but after decompressing I&#39;d =
estimate it (Eclipse + JVM) at about 1 GB.<br><br></div><div>I don&#39;t kn=
ow the exact size of Xcode, but some websites estimate it at 2-4 GB.<br></d=
iv><div><br></div>Visual Studio is probably the largest one, at about 6 GB.=
<br><br></div>Certainly, installing a Linux via a VM includes much more tha=
n an IDE + compiler + runtime, but if it requires 7GB, it&#39;s still a har=
d pill to swallow.<br><br></div>This brings me to another point: disk usage=
 anxiety. Even with dynamic disk images, I&#39;m afraid to give them a larg=
e size, so I end up worrying that it will run out of space. And the kinds o=
f errors that happen in such situations are much less obvious to understand=
, especially for linux newbies. Should I just lose my fear and allow my dis=
k images to dynamically grow to be as large as they want to be?<br><br></di=
v>For those reasons, I asked about a minimalistic Linux with the lightest p=
ossible UI, to save on disk space as much as possible. It&#39;s not so much=
 about CPU, which for the intended purposes should be mostly fine.<br><br><=
/div>Finally, on the issue of transparency, another major difficulty I have=
 when using a Linux VM is that the file systems are separate, so even if I =
tell the students to &quot;just download that file and open it on your &lt;=
Linux/OCaml-based application&gt;&quot;, they&#39;ll either:<br></div><br><=
/div>a) Download it using Windows, then not be able to find the file using =
the Linux application (or have to move it to a shared folder, which they of=
ten forget);<br></div>b) Be forced to use a browser inside Linux, which req=
uires more disk space, setting up the browser, etc.<br><br></div>I never fo=
und it very easy to configure Samba shares on Linux or to set up the filesy=
stem in a way that maximum sharing could be achieved with minimal user inte=
rvention, especially without knowing in advance some parameters such as hos=
t/username, etc. Which would make it even more complicated to set up in adv=
ance in a static VM image for that purpose.<br><br></div>Is there a better =
solution concerning transparency between Windows and Linux for OCaml usage =
purposes? E.g. using a Merlin-configured Emacs from Linux that could open a=
 file downloaded via Windows and then compile an OCaml application that cou=
ld easily read the files in a Windows directory to perform some action on t=
hem? It sounds almost like Cygwin, but that&#39;s another can of worms...<b=
r><div><div><div><div><div><div><div><div><div><div><div><br><div><div><div=
><div class=3D"gmail_extra">Any partial solutions or tips you can give me a=
bout each of these issues is already greatly useful to me. I usually end up=
 finding some solutions myself, but it takes a lot of time searching and tr=
ying, and if someone had already done exactly the same thing before, well, =
I&#39;d be glad to learn from them!<br><br></div><div class=3D"gmail_extra"=
>Best regards,<br></div><span class=3D""><div class=3D"gmail_extra"><br><di=
v class=3D"gmail_quote">On Tue, Sep 1, 2015 at 3:27 PM, Mr. Herr <span dir=
=3D"ltr">&lt;<a href=3D"mailto:misterherr@freenet.de" target=3D"_blank">mis=
terherr@freenet.de</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quot=
e" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">=
Caveat: this is a general answer, my point of view, and not done with OCaml=
<br>
<br>
It certainly is technically feasible, depending on your desktop hardware ev=
en easy to do.<br>
<br>
You need a VM software. I had good experiences with Virtualbox. With MS sol=
utions you must find the right product for your Win version<br>
(Virtual PC or Hyperv ) - I don&#39;t think it will beat Virtualbox in your=
 scenario.<br></blockquote><blockquote class=3D"gmail_quote" style=3D"margi=
n:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<br>
Disk space: starting from 3G for the OS and ~4G for the opam directory, thi=
s all depends directly on what you install.<br>
You need quite some compilers, make and tools, and devel packages. Do a pil=
ot install, of course.<br></blockquote><blockquote class=3D"gmail_quote" st=
yle=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<br>
Linux distro: any current distribution will do. Performance will not be muc=
h of an issue unless you have very weak desktops. I am using virtualbox on =
my old notebook. But some ocaml package compile times are quite long even o=
n beefy machines (coq comes to mind).<br>
<br>
As for the desktop environment: lighter is better, but not an issue either,=
 even on KDE you can turn off effects and background tasks to speed it up.<=
br>
Take what you and your students know.<br>
<br>
skipping &quot;... usual software ... coq ...&quot; - is it an ocaml introd=
uction ? :-)<br>
<br>
But:<br>
<br>
There is a big risk of wasting time with subjects not in the centre of your=
 course, especially Linux setup and use.<br>
<br>
This depends directly on the &quot;unix/linux literacy&quot; of your studen=
ts.<br>
<br>
<br>
/Str.<br>
<br>
<br>
</blockquote></div><br></div></span></div></div></div></div></div></div></d=
iv></div></div></div></div></div></div></div></div>
</div><br></div>

--001a11c3420ce950e8051eb0d548--

From yotambarnoy@gmail.com  Tue Sep  1 16:16:26 2015
Return-Path: <yotambarnoy@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 33F6E3C366;
 Tue,  1 Sep 2015 16:16:26 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.220.172 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (yotambarnoy[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
 *  0.0 AC_DIV_BONANZA RAW: Too many divs in a row... spammy template
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-qk0-f172.google.com ([209.85.220.172]:34449)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
 id 1ZWnSJ-0005nO-WV (Exim 4.86_36-e07b163)
 (return-path <yotambarnoy@gmail.com>); Tue, 01 Sep 2015 16:26:40 +0100
Received: by qkct7 with SMTP id t7so45067287qkc.1;
 Tue, 01 Sep 2015 08:26:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:from:date:message-id:subject:to
 :cc:content-type;
 bh=PSN+4/nhg31VmCI7Sd00GtmSBkW6hggLu3lukrUdFS4=;
 b=tLuAvtcr7gkpcyUt9QN+L9ZhihWhznZY2G6/gxy9rn3AHRoraaY7IpVdfOs7O/jBEe
 WADLrusuivEiUcgD+DdK+m6OpXzeYt4PT85DMr+ppq7/t3azpFRUAyLgNbmfthuhsNXM
 kUgXG78t9JUJ/i8fCdqYwjeHg+QKzj9KB894k3ywmKiyF16TaBQi/WwuyhuAUIec73VU
 /nj+uhOzuQjQwpAWJLa573h/Cjogjl4OBqVkW5ybUilXbTmB+vOHnU00J/vpL7JV59iG
 /JB/xQN6XnM5Z5ctuMd8NWeipic5nG9jwpFQ8ZzO1hq/1LW2uvZvkB0SycApYvDddRVg
 osWQ==
X-Received: by 10.129.88.9 with SMTP id m9mr28430082ywb.147.1441121197831;
 Tue, 01 Sep 2015 08:26:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.37.93.8 with HTTP; Tue, 1 Sep 2015 08:26:18 -0700 (PDT)
In-Reply-To: <CABAtnw_Gj=acvP0iROEP56MUPNbXa3T11GgmR69228hu2EyCbg@mail.gmail.com>
References: <CABAtnw__zsyC10cSAR6QSVmj6ZgbuX3KWAfQzup8if8yAngL+g@mail.gmail.com>
 <9A94AA51109B47E1AF5AC201CCED55AC@erratique.ch> <55E5A7C0.7000108@freenet.de>
 <CABAtnw_hrU71Qcq0c5rdLocCWUkVFrS0Mqq0cGW_6fR5JVJpTw@mail.gmail.com>
 <CABAtnw_Gj=acvP0iROEP56MUPNbXa3T11GgmR69228hu2EyCbg@mail.gmail.com>
From: Yotam Barnoy <yotambarnoy@gmail.com>
Date: Tue, 1 Sep 2015 11:26:18 -0400
Message-ID: <CAN6ygOkH3uGPk+miqxcog2Gz_nKLbGLAj8zWDox2134gNi_q-g@mail.gmail.com>
To: Thranur Andul <thranur@gmail.com>
Content-Type: multipart/alternative; boundary=001a114936e0133b15051eb12dec
Cc: teaching@lists.ocaml.org, wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Fwd: [Teaching] Fw: Minimal virtual machine for
	OCaml
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 15:16:26 -0000

--001a114936e0133b15051eb12dec
Content-Type: text/plain; charset=UTF-8

I highly recommend that you look into vagrant https://www.vagrantup.com/
Last time I helped run a class that needed standardized components, vagrant
was the easiest choice. It's very uniform (everyone has the 'vagrant' user
by default), automatically sets up sharing of directories, and allows for
bring-up/tear-down/sshing in using very simple commands. You'll be able to
post simple instructions that everyone will be able to follow.

I recommend sticking with an Ubuntu distribution. Anything else will be
much harder to support.

Of course, a more ideal setting is to have everyone use the University's
standard unix accounts, as those will be even more standardized. But this
is a close second.

-Yotam

On Tue, Sep 1, 2015 at 11:02 AM, Thranur Andul <thranur@gmail.com> wrote:

> Thank you for the advice.
>
> To clarify what I'm looking for: I'm trying to make Linux usage as
> transparent as possible, exactly to avoid requiring much unix literacy,
> hence why I mentioned disk space usage. It's not so much an issue in
> itself, but if I wanted to distribute a static VM image with everything
> already installed, its size might become an issue.
>
> For instance, Eclipse, which used to be a quite large application, has a
> download size of 270 MB. It does not include the JVM, but after
> decompressing I'd estimate it (Eclipse + JVM) at about 1 GB.
>
> I don't know the exact size of Xcode, but some websites estimate it at 2-4
> GB.
>
> Visual Studio is probably the largest one, at about 6 GB.
>
> Certainly, installing a Linux via a VM includes much more than an IDE +
> compiler + runtime, but if it requires 7GB, it's still a hard pill to
> swallow.
>
> This brings me to another point: disk usage anxiety. Even with dynamic
> disk images, I'm afraid to give them a large size, so I end up worrying
> that it will run out of space. And the kinds of errors that happen in such
> situations are much less obvious to understand, especially for linux
> newbies. Should I just lose my fear and allow my disk images to dynamically
> grow to be as large as they want to be?
>
> For those reasons, I asked about a minimalistic Linux with the lightest
> possible UI, to save on disk space as much as possible. It's not so much
> about CPU, which for the intended purposes should be mostly fine.
>
> Finally, on the issue of transparency, another major difficulty I have
> when using a Linux VM is that the file systems are separate, so even if I
> tell the students to "just download that file and open it on your
> <Linux/OCaml-based application>", they'll either:
>
> a) Download it using Windows, then not be able to find the file using the
> Linux application (or have to move it to a shared folder, which they often
> forget);
> b) Be forced to use a browser inside Linux, which requires more disk
> space, setting up the browser, etc.
>
> I never found it very easy to configure Samba shares on Linux or to set up
> the filesystem in a way that maximum sharing could be achieved with minimal
> user intervention, especially without knowing in advance some parameters
> such as host/username, etc. Which would make it even more complicated to
> set up in advance in a static VM image for that purpose.
>
> Is there a better solution concerning transparency between Windows and
> Linux for OCaml usage purposes? E.g. using a Merlin-configured Emacs from
> Linux that could open a file downloaded via Windows and then compile an
> OCaml application that could easily read the files in a Windows directory
> to perform some action on them? It sounds almost like Cygwin, but that's
> another can of worms...
>
> Any partial solutions or tips you can give me about each of these issues
> is already greatly useful to me. I usually end up finding some solutions
> myself, but it takes a lot of time searching and trying, and if someone had
> already done exactly the same thing before, well, I'd be glad to learn from
> them!
>
> Best regards,
>
> On Tue, Sep 1, 2015 at 3:27 PM, Mr. Herr <misterherr@freenet.de> wrote:
>
>> Caveat: this is a general answer, my point of view, and not done with
>> OCaml
>>
>> It certainly is technically feasible, depending on your desktop hardware
>> even easy to do.
>>
>> You need a VM software. I had good experiences with Virtualbox. With MS
>> solutions you must find the right product for your Win version
>> (Virtual PC or Hyperv ) - I don't think it will beat Virtualbox in your
>> scenario.
>>
>
>> Disk space: starting from 3G for the OS and ~4G for the opam directory,
>> this all depends directly on what you install.
>> You need quite some compilers, make and tools, and devel packages. Do a
>> pilot install, of course.
>>
>
>> Linux distro: any current distribution will do. Performance will not be
>> much of an issue unless you have very weak desktops. I am using virtualbox
>> on my old notebook. But some ocaml package compile times are quite long
>> even on beefy machines (coq comes to mind).
>>
>> As for the desktop environment: lighter is better, but not an issue
>> either, even on KDE you can turn off effects and background tasks to speed
>> it up.
>> Take what you and your students know.
>>
>> skipping "... usual software ... coq ..." - is it an ocaml introduction ?
>> :-)
>>
>> But:
>>
>> There is a big risk of wasting time with subjects not in the centre of
>> your course, especially Linux setup and use.
>>
>> This depends directly on the "unix/linux literacy" of your students.
>>
>>
>> /Str.
>>
>>
>>
>
>
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows
>
>

--001a114936e0133b15051eb12dec
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I highly recommend that you look into vagrant=C2=A0<a href=
=3D"https://www.vagrantup.com/" target=3D"_blank">https://www.vagrantup.com=
/</a><div>Last time I helped run a class that needed standardized component=
s, vagrant was the easiest choice. It&#39;s very uniform (everyone has the =
&#39;vagrant&#39; user by default), automatically sets up sharing of direct=
ories, and allows for bring-up/tear-down/sshing in using very simple comman=
ds. You&#39;ll be able to post simple instructions that everyone will be ab=
le to follow.</div><div><br></div><div>I recommend sticking with an Ubuntu =
distribution. Anything else will be much harder to support.</div><div><br><=
/div><div>Of course, a more ideal setting is to have everyone use the Unive=
rsity&#39;s standard unix accounts, as those will be even more standardized=
. But this is a close second.</div><div><br></div><div>-Yotam</div></div><d=
iv class=3D"gmail_extra"><br><div class=3D"gmail_quote">On Tue, Sep 1, 2015=
 at 11:02 AM, Thranur Andul <span dir=3D"ltr">&lt;<a href=3D"mailto:thranur=
@gmail.com" target=3D"_blank">thranur@gmail.com</a>&gt;</span> wrote:<br><b=
lockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px =
#ccc solid;padding-left:1ex"><div dir=3D"ltr"><div class=3D"gmail_quote"><d=
iv dir=3D"ltr"><div><div><div><div><div><div><div><div><div><div><div><div>=
Thank you for the advice.<br><br></div>To clarify what I&#39;m looking for:=
 I&#39;m trying to make Linux usage as transparent as possible, exactly to =
avoid requiring much unix literacy, hence why I mentioned disk space usage.=
 It&#39;s not so much an issue in itself, but if I wanted to distribute a s=
tatic VM image with everything already installed, its size might become an =
issue.<br><br></div>For instance, Eclipse, which used to be a quite large a=
pplication, has a download size of 270 MB. It does not include the JVM, but=
 after decompressing I&#39;d estimate it (Eclipse + JVM) at about 1 GB.<br>=
<br></div><div>I don&#39;t know the exact size of Xcode, but some websites =
estimate it at 2-4 GB.<br></div><div><br></div>Visual Studio is probably th=
e largest one, at about 6 GB.<br><br></div>Certainly, installing a Linux vi=
a a VM includes much more than an IDE + compiler + runtime, but if it requi=
res 7GB, it&#39;s still a hard pill to swallow.<br><br></div>This brings me=
 to another point: disk usage anxiety. Even with dynamic disk images, I&#39=
;m afraid to give them a large size, so I end up worrying that it will run =
out of space. And the kinds of errors that happen in such situations are mu=
ch less obvious to understand, especially for linux newbies. Should I just =
lose my fear and allow my disk images to dynamically grow to be as large as=
 they want to be?<br><br></div>For those reasons, I asked about a minimalis=
tic Linux with the lightest possible UI, to save on disk space as much as p=
ossible. It&#39;s not so much about CPU, which for the intended purposes sh=
ould be mostly fine.<br><br></div>Finally, on the issue of transparency, an=
other major difficulty I have when using a Linux VM is that the file system=
s are separate, so even if I tell the students to &quot;just download that =
file and open it on your &lt;Linux/OCaml-based application&gt;&quot;, they&=
#39;ll either:<br></div><br></div>a) Download it using Windows, then not be=
 able to find the file using the Linux application (or have to move it to a=
 shared folder, which they often forget);<br></div>b) Be forced to use a br=
owser inside Linux, which requires more disk space, setting up the browser,=
 etc.<br><br></div>I never found it very easy to configure Samba shares on =
Linux or to set up the filesystem in a way that maximum sharing could be ac=
hieved with minimal user intervention, especially without knowing in advanc=
e some parameters such as host/username, etc. Which would make it even more=
 complicated to set up in advance in a static VM image for that purpose.<br=
><br></div>Is there a better solution concerning transparency between Windo=
ws and Linux for OCaml usage purposes? E.g. using a Merlin-configured Emacs=
 from Linux that could open a file downloaded via Windows and then compile =
an OCaml application that could easily read the files in a Windows director=
y to perform some action on them? It sounds almost like Cygwin, but that&#3=
9;s another can of worms...<br><div><div><div><div><div><div><div><div><div=
><div><div><br><div><div><div><div class=3D"gmail_extra">Any partial soluti=
ons or tips you can give me about each of these issues is already greatly u=
seful to me. I usually end up finding some solutions myself, but it takes a=
 lot of time searching and trying, and if someone had already done exactly =
the same thing before, well, I&#39;d be glad to learn from them!<br><br></d=
iv><div class=3D"gmail_extra">Best regards,<br></div><span class=3D""><span=
><div class=3D"gmail_extra"><br><div class=3D"gmail_quote">On Tue, Sep 1, 2=
015 at 3:27 PM, Mr. Herr <span dir=3D"ltr">&lt;<a href=3D"mailto:misterherr=
@freenet.de" target=3D"_blank">misterherr@freenet.de</a>&gt;</span> wrote:<=
br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left=
:1px #ccc solid;padding-left:1ex">Caveat: this is a general answer, my poin=
t of view, and not done with OCaml<br>
<br>
It certainly is technically feasible, depending on your desktop hardware ev=
en easy to do.<br>
<br>
You need a VM software. I had good experiences with Virtualbox. With MS sol=
utions you must find the right product for your Win version<br>
(Virtual PC or Hyperv ) - I don&#39;t think it will beat Virtualbox in your=
 scenario.<br></blockquote><blockquote class=3D"gmail_quote" style=3D"margi=
n:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<br>
Disk space: starting from 3G for the OS and ~4G for the opam directory, thi=
s all depends directly on what you install.<br>
You need quite some compilers, make and tools, and devel packages. Do a pil=
ot install, of course.<br></blockquote><blockquote class=3D"gmail_quote" st=
yle=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<br>
Linux distro: any current distribution will do. Performance will not be muc=
h of an issue unless you have very weak desktops. I am using virtualbox on =
my old notebook. But some ocaml package compile times are quite long even o=
n beefy machines (coq comes to mind).<br>
<br>
As for the desktop environment: lighter is better, but not an issue either,=
 even on KDE you can turn off effects and background tasks to speed it up.<=
br>
Take what you and your students know.<br>
<br>
skipping &quot;... usual software ... coq ...&quot; - is it an ocaml introd=
uction ? :-)<br>
<br>
But:<br>
<br>
There is a big risk of wasting time with subjects not in the centre of your=
 course, especially Linux setup and use.<br>
<br>
This depends directly on the &quot;unix/linux literacy&quot; of your studen=
ts.<br>
<br>
<br>
/Str.<br>
<br>
<br>
</blockquote></div><br></div></span></span></div></div></div></div></div></=
div></div></div></div></div></div></div></div></div></div>
</div><br></div>
<br>_______________________________________________<br>
wg-windows mailing list<br>
<a href=3D"mailto:wg-windows@lists.ocaml.org">wg-windows@lists.ocaml.org</a=
><br>
<a href=3D"http://lists.ocaml.org/listinfo/wg-windows" rel=3D"noreferrer" t=
arget=3D"_blank">http://lists.ocaml.org/listinfo/wg-windows</a><br>
<br></blockquote></div><br></div>

--001a114936e0133b15051eb12dec--

From modlfo@gmail.com  Tue Sep  1 19:41:42 2015
Return-Path: <modlfo@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id F14933C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 19:41:41 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.212.179 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (modlfo[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
 *  0.0 MIME_QP_LONG_LINE RAW: Quoted-printable line longer than 76 chars
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-wi0-f179.google.com ([209.85.212.179]:35688)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
 id 1ZWqex-0000Xn-Z3 (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <modlfo@gmail.com>); Tue, 01 Sep 2015 19:51:56 +0100
Received: by wicge5 with SMTP id ge5so17086724wic.0
 for <wg-windows@lists.ocaml.org>; Tue, 01 Sep 2015 11:51:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=references:mime-version:in-reply-to:content-type
 :content-transfer-encoding:message-id:cc:from:subject:date:to;
 bh=4SDWttmd5bl/8qAD5sqgtTPdpl6Yr2iscyMIpp/ZsjM=;
 b=jWG1xkZ26RJypxtut4RRdqsEjx+slsVnhrRmP49mS08oWSkn7ISac+sIhNgXMBv6u1
 iN/KkAqg5CHfoGWkJOMT5hI1yko3Rj+gc7/64CIkNG0HHotc5x1WU3DiQnQOhB7o8fNU
 GaXvgRXz/lhw9TmS4weJqHvxDqpw4eFtMbDVFdB1wDLELdV1DKTK6fv3TsKH4VnHAOm9
 h5kXS5W/F1pAJPyXnt2xeu4+2oiy0Tl96+iS2vq9XQXQmhCWVqkmnTZrOXZX03zW6fIp
 7gjs6IuH6/xgpvcWYJu7tSKlJU4F+aulMqyrfqWhRGjZ6St0YaJx6NTY3P+myWCMTExf
 VUGg==
X-Received: by 10.194.174.133 with SMTP id bs5mr16950792wjc.156.1441133515576; 
 Tue, 01 Sep 2015 11:51:55 -0700 (PDT)
Received: from [192.168.0.100] ([79.100.251.71])
 by smtp.gmail.com with ESMTPSA id fs7sm4064152wib.8.2015.09.01.11.51.54
 (version=TLSv1/SSLv3 cipher=OTHER);
 Tue, 01 Sep 2015 11:51:54 -0700 (PDT)
References: <CAF=ojbVBciLiwREy3MrbA-b63C-dXnPAxC7LCQQt-fnyRimR9A@mail.gmail.com>
 <63E0A8564BF34E0CB1216E1130BE1EA0@erratique.ch>
Mime-Version: 1.0 (1.0)
In-Reply-To: <63E0A8564BF34E0CB1216E1130BE1EA0@erratique.ch>
Content-Type: multipart/alternative;
 boundary=Apple-Mail-E8FEAF5B-277E-4E0E-9EAA-B43690C3EAFD
Content-Transfer-Encoding: 7bit
Message-Id: <97EB086F-259A-4EF7-BB51-9B7EB1CC3A4C@gmail.com>
X-Mailer: iPad Mail (12H321)
From: Leonardo Laguna Ruiz <modlfo@gmail.com>
Date: Tue, 1 Sep 2015 20:51:52 +0200
To: =?utf-8?Q?Daniel_B=C3=BCnzli?= <daniel.buenzli@erratique.ch>
Cc: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] Problem (and fix) with Unix.create_process in
	windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 18:41:42 -0000


--Apple-Mail-E8FEAF5B-277E-4E0E-9EAA-B43690C3EAFD
Content-Type: text/plain;
	charset=utf-8
Content-Transfer-Encoding: quoted-printable



I was curious about what Qt makes when calling a process, since we have used=
 Qt in windows without problems when calling processes. Seems that they do e=
xactly what my fix makes:

https://github.com/Vitallium/qt5/blob/master/qtbase/src/corelib/io/qprocess_=
win.cpp

I would assume that this change is safe and compatible since it has been in Q=
t for a while.

Leonardo

> On 01 Sep 2015, at 15:20, Daniel B=C3=BCnzli <daniel.buenzli@erratique.ch>=
 wrote:
>=20
>> Le mardi, 1 septembre 2015 =C3=A0 14:01, Leonardo Laguna a =C3=A9crit :
>> Has anyone had these kind of problems?
>=20
> Not yet. =20
>=20
>> Is is possible to get this change in the ocaml code?
> This surely qualifies as bug. No escaping should be needed on Unix.create_=
process and whathever you give as arguments should end up in the sub process=
' Sys.argv as given. A mantis http://caml.inria.fr/mantis/ issue and a patch=
 (possibly on github) are likely most welcome. =20
>=20
> FWIW I have this link about the problem [1] I intended to study at a certa=
in point. It might be worth giving it a read. =20
>=20
> Best,
>=20
> Daniel
>=20
> [1] http://blogs.msdn.com/b/twistylittlepassagesallalike/archive/2011/04/2=
3/everyone-quotes-arguments-the-wrong-way.aspx
>=20
>=20

--Apple-Mail-E8FEAF5B-277E-4E0E-9EAA-B43690C3EAFD
Content-Type: text/html;
	charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html><head><meta http-equiv=3D"content-type" content=3D"text/html; charset=3D=
utf-8"></head><body dir=3D"auto"><div><br><br>I was curious about what Qt ma=
kes when calling a process, since we have used Qt in windows without problem=
s when calling processes. Seems that they do exactly what my fix makes:</div=
><div><br></div><div><a href=3D"https://github.com/Vitallium/qt5/blob/master=
/qtbase/src/corelib/io/qprocess_win.cpp">https://github.com/Vitallium/qt5/bl=
ob/master/qtbase/src/corelib/io/qprocess_win.cpp</a></div><div><br></div><di=
v>I would assume that this change is safe and compatible since it has been i=
n Qt for a while.</div><div><br></div><div>Leonardo</div><div><br>On 01 Sep 2=
015, at 15:20, Daniel B=C3=BCnzli &lt;<a href=3D"mailto:daniel.buenzli@errat=
ique.ch">daniel.buenzli@erratique.ch</a>&gt; wrote:<br><br></div><blockquote=
 type=3D"cite"><div><span>Le mardi, 1 septembre 2015 =C3=A0 14:01, Leonardo L=
aguna a =C3=A9crit :</span><br><blockquote type=3D"cite"><span>Has anyone ha=
d these kind of problems?</span><br></blockquote><span></span><br><span>Not y=
et. &nbsp;</span><br><span></span><br><blockquote type=3D"cite"><span>Is is p=
ossible to get this change in the ocaml code?</span><br></blockquote><span>T=
his surely qualifies as bug. No escaping should be needed on Unix.create_pro=
cess and whathever you give as arguments should end up in the sub process' S=
ys.argv as given. A mantis <a href=3D"http://caml.inria.fr/mantis/">http://c=
aml.inria.fr/mantis/</a> issue and a patch (possibly on github) are likely m=
ost welcome. &nbsp;</span><br><span></span><br><span>FWIW I have this link a=
bout the problem [1] I intended to study at a certain point. It might be wor=
th giving it a read. &nbsp;</span><br><span></span><br><span>Best,</span><br=
><span></span><br><span>Daniel</span><br><span></span><br><span>[1] <a href=3D=
"http://blogs.msdn.com/b/twistylittlepassagesallalike/archive/2011/04/23/eve=
ryone-quotes-arguments-the-wrong-way.aspx">http://blogs.msdn.com/b/twistylit=
tlepassagesallalike/archive/2011/04/23/everyone-quotes-arguments-the-wrong-w=
ay.aspx</a></span><br><span></span><br><span></span><br></div></blockquote><=
/body></html>=

--Apple-Mail-E8FEAF5B-277E-4E0E-9EAA-B43690C3EAFD--

From dra-news@metastack.com  Tue Sep  1 21:23:14 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 78FC93C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 21:23:14 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.154 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148154.authsmtp.co.uk ([62.13.148.154]:22219)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtp id 1ZWsFE-0003bk-ld (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Tue, 01 Sep 2015 21:33:29 +0100
Received: from mail-c235.authsmtp.com (mail-c235.authsmtp.com [62.13.128.235])
 by punt15.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t81KXQ64054696; 
 Tue, 1 Sep 2015 21:33:26 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t81KXPBN003671;
 Tue, 1 Sep 2015 21:33:25 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t81KXOSC013336
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
 Tue, 1 Sep 2015 21:33:24 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0248.002; Tue, 1 Sep 2015 21:33:23 +0100
From: David Allsopp <dra-news@metastack.com>
To: Leonardo Laguna Ruiz <modlfo@gmail.com>, =?utf-8?B?RGFuaWVsIELDvG56bGk=?=
 <daniel.buenzli@erratique.ch>
Thread-Topic: [wg-windows] Problem (and fix) with Unix.create_process in
 windows
Thread-Index: AQHQ5OdWs+eVHXiUfUeKh3j/R1sCRJ4oIGYg
Date: Tue, 1 Sep 2015 20:33:22 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9E9E39BF7@Remus.metastack.local>
References: <CAF=ojbVBciLiwREy3MrbA-b63C-dXnPAxC7LCQQt-fnyRimR9A@mail.gmail.com>
 <63E0A8564BF34E0CB1216E1130BE1EA0@erratique.ch>
 <97EB086F-259A-4EF7-BB51-9B7EB1CC3A4C@gmail.com>
In-Reply-To: <97EB086F-259A-4EF7-BB51-9B7EB1CC3A4C@gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [131.111.184.3]
Content-Type: multipart/alternative;
 boundary="_000_E51C5B015DBD1348A1D85763337FB6D9E9E39BF7Remusmetastackl_"
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: b2556346-50e8-11e5-b399-002590a15da7
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgESJgVFAmpU Q3kJW1VRQF9wU2B2 YQhUIwdcYVRPXwB0 UklLXFNTEBpqBAMB
 SFoWU2IaF3c4eH5z Y0FjEHNdW0JyOxR/ R0tSFmkAeGJgPWgC UUENch4GcwpDYx9F
 aFV2VCIMZDFWYTQC Ml17DC8+eCpeLihS XRo4ZWoIRkwPEzt0 BxkEEX0hHF1EDzoy
 MxxuF1gdDAAaKEg7 LVYWQUgfOBIJEUVf GSMsHy5fK14eXEIA 
X-Authentic-SMTP: 61633634383431.1023:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Cc: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Subject: Re: [wg-windows] Problem (and fix) with Unix.create_process
	in	windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 20:23:14 -0000

--_000_E51C5B015DBD1348A1D85763337FB6D9E9E39BF7Remusmetastackl_
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

VGhhdOKAmXMgYWxsIGdyZWF0IGluZm9ybWF0aW9uIHRvIGluY2x1ZGUgaW4gY29kZS9jb21taXQg
Y29tbWVudHMgd2l0aCBhbnkgcGF0Y2hlcyAobGlua3MgdG8gYnVnIHRyYWNrZXIgcmVwb3J0cyBj
YW4gYmUgdXNlZnVsIGFzIHdlbGwpLiBUaGUga2V5IHRoaW5nIHdpdGggY2hhbmdlcyBsaWtlIHRo
aXMgaXMgdG8gaGF2ZSBhcyBtdWNoIHBlcnRpbmVudCBpbmZvIGluY2x1ZGVkIGFzIHBvc3NpYmxl
IGFzIHRvIHdoeSB0aGUgY2hhbmdlIHdhcyBtYWRlIHNvIHRoYXQgZnV0dXJlIGlzc3Vlcy9jaGFu
Z2VzIGNhbiBhdm9pZCBob3BlZnVsbHkgcmVncmVzc2lvbnMuDQoNCg0KRGF2aWQNCg0KRnJvbTog
d2ctd2luZG93cyBbbWFpbHRvOndnLXdpbmRvd3MtYm91bmNlc0BsaXN0cy5vY2FtbC5vcmddIE9u
IEJlaGFsZiBPZiBMZW9uYXJkbyBMYWd1bmEgUnVpeg0KU2VudDogMDEgU2VwdGVtYmVyIDIwMTUg
MjA6NTINClRvOiBEYW5pZWwgQsO8bnpsaQ0KQ2M6IHdnLXdpbmRvd3NAbGlzdHMub2NhbWwub3Jn
DQpTdWJqZWN0OiBSZTogW3dnLXdpbmRvd3NdIFByb2JsZW0gKGFuZCBmaXgpIHdpdGggVW5peC5j
cmVhdGVfcHJvY2VzcyBpbiB3aW5kb3dzDQoNCg0KDQpJIHdhcyBjdXJpb3VzIGFib3V0IHdoYXQg
UXQgbWFrZXMgd2hlbiBjYWxsaW5nIGEgcHJvY2Vzcywgc2luY2Ugd2UgaGF2ZSB1c2VkIFF0IGlu
IHdpbmRvd3Mgd2l0aG91dCBwcm9ibGVtcyB3aGVuIGNhbGxpbmcgcHJvY2Vzc2VzLiBTZWVtcyB0
aGF0IHRoZXkgZG8gZXhhY3RseSB3aGF0IG15IGZpeCBtYWtlczoNCg0KaHR0cHM6Ly9naXRodWIu
Y29tL1ZpdGFsbGl1bS9xdDUvYmxvYi9tYXN0ZXIvcXRiYXNlL3NyYy9jb3JlbGliL2lvL3Fwcm9j
ZXNzX3dpbi5jcHANCg0KSSB3b3VsZCBhc3N1bWUgdGhhdCB0aGlzIGNoYW5nZSBpcyBzYWZlIGFu
ZCBjb21wYXRpYmxlIHNpbmNlIGl0IGhhcyBiZWVuIGluIFF0IGZvciBhIHdoaWxlLg0KDQpMZW9u
YXJkbw0KDQpPbiAwMSBTZXAgMjAxNSwgYXQgMTU6MjAsIERhbmllbCBCw7xuemxpIDxkYW5pZWwu
YnVlbnpsaUBlcnJhdGlxdWUuY2g8bWFpbHRvOmRhbmllbC5idWVuemxpQGVycmF0aXF1ZS5jaD4+
IHdyb3RlOg0KTGUgbWFyZGksIDEgc2VwdGVtYnJlIDIwMTUgw6AgMTQ6MDEsIExlb25hcmRvIExh
Z3VuYSBhIMOpY3JpdCA6DQoNCkhhcyBhbnlvbmUgaGFkIHRoZXNlIGtpbmQgb2YgcHJvYmxlbXM/
DQoNCk5vdCB5ZXQuDQoNCg0KSXMgaXMgcG9zc2libGUgdG8gZ2V0IHRoaXMgY2hhbmdlIGluIHRo
ZSBvY2FtbCBjb2RlPw0KVGhpcyBzdXJlbHkgcXVhbGlmaWVzIGFzIGJ1Zy4gTm8gZXNjYXBpbmcg
c2hvdWxkIGJlIG5lZWRlZCBvbiBVbml4LmNyZWF0ZV9wcm9jZXNzIGFuZCB3aGF0aGV2ZXIgeW91
IGdpdmUgYXMgYXJndW1lbnRzIHNob3VsZCBlbmQgdXAgaW4gdGhlIHN1YiBwcm9jZXNzJyBTeXMu
YXJndiBhcyBnaXZlbi4gQSBtYW50aXMgaHR0cDovL2NhbWwuaW5yaWEuZnIvbWFudGlzLyBpc3N1
ZSBhbmQgYSBwYXRjaCAocG9zc2libHkgb24gZ2l0aHViKSBhcmUgbGlrZWx5IG1vc3Qgd2VsY29t
ZS4NCg0KRldJVyBJIGhhdmUgdGhpcyBsaW5rIGFib3V0IHRoZSBwcm9ibGVtIFsxXSBJIGludGVu
ZGVkIHRvIHN0dWR5IGF0IGEgY2VydGFpbiBwb2ludC4gSXQgbWlnaHQgYmUgd29ydGggZ2l2aW5n
IGl0IGEgcmVhZC4NCg0KQmVzdCwNCg0KRGFuaWVsDQoNClsxXSBodHRwOi8vYmxvZ3MubXNkbi5j
b20vYi90d2lzdHlsaXR0bGVwYXNzYWdlc2FsbGFsaWtlL2FyY2hpdmUvMjAxMS8wNC8yMy9ldmVy
eW9uZS1xdW90ZXMtYXJndW1lbnRzLXRoZS13cm9uZy13YXkuYXNweA0KDQo=

--_000_E51C5B015DBD1348A1D85763337FB6D9E9E39BF7Remusmetastackl_
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: base64

PGh0bWwgeG1sbnM6dj0idXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWwiIHhtbG5zOm89InVy
bjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOm9mZmljZSIgeG1sbnM6dz0idXJuOnNjaGVt
YXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6d29yZCIgeG1sbnM6bT0iaHR0cDovL3NjaGVtYXMubWlj
cm9zb2Z0LmNvbS9vZmZpY2UvMjAwNC8xMi9vbW1sIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcv
VFIvUkVDLWh0bWw0MCI+DQo8aGVhZD4NCjxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIg
Y29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4NCjxtZXRhIG5hbWU9IkdlbmVyYXRv
ciIgY29udGVudD0iTWljcm9zb2Z0IFdvcmQgMTQgKGZpbHRlcmVkIG1lZGl1bSkiPg0KPHN0eWxl
PjwhLS0NCi8qIEZvbnQgRGVmaW5pdGlvbnMgKi8NCkBmb250LWZhY2UNCgl7Zm9udC1mYW1pbHk6
IkNhbWJyaWEgTWF0aCI7DQoJcGFub3NlLTE6MiA0IDUgMyA1IDQgNiAzIDIgNDt9DQpAZm9udC1m
YWNlDQoJe2ZvbnQtZmFtaWx5OkNhbGlicmk7DQoJcGFub3NlLTE6MiAxNSA1IDIgMiAyIDQgMyAy
IDQ7fQ0KQGZvbnQtZmFjZQ0KCXtmb250LWZhbWlseTpUYWhvbWE7DQoJcGFub3NlLTE6MiAxMSA2
IDQgMyA1IDQgNCAyIDQ7fQ0KLyogU3R5bGUgRGVmaW5pdGlvbnMgKi8NCnAuTXNvTm9ybWFsLCBs
aS5Nc29Ob3JtYWwsIGRpdi5Nc29Ob3JtYWwNCgl7bWFyZ2luOjBjbTsNCgltYXJnaW4tYm90dG9t
Oi4wMDAxcHQ7DQoJZm9udC1zaXplOjEyLjBwdDsNCglmb250LWZhbWlseToiVGltZXMgTmV3IFJv
bWFuIiwic2VyaWYiO30NCmE6bGluaywgc3Bhbi5Nc29IeXBlcmxpbmsNCgl7bXNvLXN0eWxlLXBy
aW9yaXR5Ojk5Ow0KCWNvbG9yOmJsdWU7DQoJdGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTt9DQph
OnZpc2l0ZWQsIHNwYW4uTXNvSHlwZXJsaW5rRm9sbG93ZWQNCgl7bXNvLXN0eWxlLXByaW9yaXR5
Ojk5Ow0KCWNvbG9yOnB1cnBsZTsNCgl0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO30NCnNwYW4u
RW1haWxTdHlsZTE3DQoJe21zby1zdHlsZS10eXBlOnBlcnNvbmFsLXJlcGx5Ow0KCWZvbnQtZmFt
aWx5OiJDYWxpYnJpIiwic2Fucy1zZXJpZiI7DQoJY29sb3I6d2luZG93dGV4dDt9DQouTXNvQ2hw
RGVmYXVsdA0KCXttc28tc3R5bGUtdHlwZTpleHBvcnQtb25seTsNCglmb250LXNpemU6MTAuMHB0
O30NCkBwYWdlIFdvcmRTZWN0aW9uMQ0KCXtzaXplOjYxMi4wcHQgNzkyLjBwdDsNCgltYXJnaW46
NzIuMHB0IDcyLjBwdCA3Mi4wcHQgNzIuMHB0O30NCmRpdi5Xb3JkU2VjdGlvbjENCgl7cGFnZTpX
b3JkU2VjdGlvbjE7fQ0KLS0+PC9zdHlsZT48IS0tW2lmIGd0ZSBtc28gOV0+PHhtbD4NCjxvOnNo
YXBlZGVmYXVsdHMgdjpleHQ9ImVkaXQiIHNwaWRtYXg9IjEwMjYiIC8+DQo8L3htbD48IVtlbmRp
Zl0tLT48IS0tW2lmIGd0ZSBtc28gOV0+PHhtbD4NCjxvOnNoYXBlbGF5b3V0IHY6ZXh0PSJlZGl0
Ij4NCjxvOmlkbWFwIHY6ZXh0PSJlZGl0IiBkYXRhPSIxIiAvPg0KPC9vOnNoYXBlbGF5b3V0Pjwv
eG1sPjwhW2VuZGlmXS0tPg0KPC9oZWFkPg0KPGJvZHkgbGFuZz0iRU4tR0IiIGxpbms9ImJsdWUi
IHZsaW5rPSJwdXJwbGUiPg0KPGRpdiBjbGFzcz0iV29yZFNlY3Rpb24xIj4NCjxwIGNsYXNzPSJN
c29Ob3JtYWwiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MTEuMHB0O2ZvbnQtZmFtaWx5OiZxdW90
O0NhbGlicmkmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90OyI+VGhhdOKAmXMgYWxsIGdyZWF0
IGluZm9ybWF0aW9uIHRvIGluY2x1ZGUgaW4gY29kZS9jb21taXQgY29tbWVudHMgd2l0aCBhbnkg
cGF0Y2hlcyAobGlua3MgdG8gYnVnIHRyYWNrZXIgcmVwb3J0cyBjYW4gYmUgdXNlZnVsIGFzIHdl
bGwpLiBUaGUga2V5IHRoaW5nIHdpdGggY2hhbmdlcyBsaWtlIHRoaXMNCiBpcyB0byBoYXZlIGFz
IG11Y2ggcGVydGluZW50IGluZm8gaW5jbHVkZWQgYXMgcG9zc2libGUgYXMgdG8gPGk+d2h5PC9p
PiB0aGUgY2hhbmdlIHdhcyBtYWRlIHNvIHRoYXQgZnV0dXJlIGlzc3Vlcy9jaGFuZ2VzIGNhbiBh
dm9pZCBob3BlZnVsbHkgcmVncmVzc2lvbnMuPG86cD48L286cD48L3NwYW4+PC9wPg0KPHAgY2xh
c3M9Ik1zb05vcm1hbCI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxMS4wcHQ7Zm9udC1mYW1pbHk6
JnF1b3Q7Q2FsaWJyaSZxdW90OywmcXVvdDtzYW5zLXNlcmlmJnF1b3Q7Ij48bzpwPiZuYnNwOzwv
bzpwPjwvc3Bhbj48L3A+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48c3BhbiBzdHlsZT0iZm9udC1z
aXplOjExLjBwdDtmb250LWZhbWlseTomcXVvdDtDYWxpYnJpJnF1b3Q7LCZxdW90O3NhbnMtc2Vy
aWYmcXVvdDsiPjxvOnA+Jm5ic3A7PC9vOnA+PC9zcGFuPjwvcD4NCjxwIGNsYXNzPSJNc29Ob3Jt
YWwiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MTEuMHB0O2ZvbnQtZmFtaWx5OiZxdW90O0NhbGli
cmkmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90OyI+RGF2aWQNCjxvOnA+PC9vOnA+PC9zcGFu
PjwvcD4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MTEuMHB0
O2ZvbnQtZmFtaWx5OiZxdW90O0NhbGlicmkmcXVvdDssJnF1b3Q7c2Fucy1zZXJpZiZxdW90OyI+
PG86cD4mbmJzcDs8L286cD48L3NwYW4+PC9wPg0KPGRpdiBzdHlsZT0iYm9yZGVyOm5vbmU7Ym9y
ZGVyLWxlZnQ6c29saWQgYmx1ZSAxLjVwdDtwYWRkaW5nOjBjbSAwY20gMGNtIDQuMHB0Ij4NCjxk
aXY+DQo8ZGl2IHN0eWxlPSJib3JkZXI6bm9uZTtib3JkZXItdG9wOnNvbGlkICNCNUM0REYgMS4w
cHQ7cGFkZGluZzozLjBwdCAwY20gMGNtIDBjbSI+DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48Yj48
c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1
b3Q7VGFob21hJnF1b3Q7LCZxdW90O3NhbnMtc2VyaWYmcXVvdDsiPkZyb206PC9zcGFuPjwvYj48
c3BhbiBsYW5nPSJFTi1VUyIgc3R5bGU9ImZvbnQtc2l6ZToxMC4wcHQ7Zm9udC1mYW1pbHk6JnF1
b3Q7VGFob21hJnF1b3Q7LCZxdW90O3NhbnMtc2VyaWYmcXVvdDsiPiB3Zy13aW5kb3dzIFttYWls
dG86d2ctd2luZG93cy1ib3VuY2VzQGxpc3RzLm9jYW1sLm9yZ10NCjxiPk9uIEJlaGFsZiBPZiA8
L2I+TGVvbmFyZG8gTGFndW5hIFJ1aXo8YnI+DQo8Yj5TZW50OjwvYj4gMDEgU2VwdGVtYmVyIDIw
MTUgMjA6NTI8YnI+DQo8Yj5Ubzo8L2I+IERhbmllbCBCw7xuemxpPGJyPg0KPGI+Q2M6PC9iPiB3
Zy13aW5kb3dzQGxpc3RzLm9jYW1sLm9yZzxicj4NCjxiPlN1YmplY3Q6PC9iPiBSZTogW3dnLXdp
bmRvd3NdIFByb2JsZW0gKGFuZCBmaXgpIHdpdGggVW5peC5jcmVhdGVfcHJvY2VzcyBpbiB3aW5k
b3dzPG86cD48L286cD48L3NwYW4+PC9wPg0KPC9kaXY+DQo8L2Rpdj4NCjxwIGNsYXNzPSJNc29O
b3JtYWwiPjxvOnA+Jm5ic3A7PC9vOnA+PC9wPg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwi
Pjxicj4NCjxicj4NCkkgd2FzIGN1cmlvdXMgYWJvdXQgd2hhdCBRdCBtYWtlcyB3aGVuIGNhbGxp
bmcgYSBwcm9jZXNzLCBzaW5jZSB3ZSBoYXZlIHVzZWQgUXQgaW4gd2luZG93cyB3aXRob3V0IHBy
b2JsZW1zIHdoZW4gY2FsbGluZyBwcm9jZXNzZXMuIFNlZW1zIHRoYXQgdGhleSBkbyBleGFjdGx5
IHdoYXQgbXkgZml4IG1ha2VzOjxvOnA+PC9vOnA+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xh
c3M9Ik1zb05vcm1hbCI+PG86cD4mbmJzcDs8L286cD48L3A+DQo8L2Rpdj4NCjxkaXY+DQo8cCBj
bGFzcz0iTXNvTm9ybWFsIj48YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vVml0YWxsaXVtL3F0
NS9ibG9iL21hc3Rlci9xdGJhc2Uvc3JjL2NvcmVsaWIvaW8vcXByb2Nlc3Nfd2luLmNwcCI+aHR0
cHM6Ly9naXRodWIuY29tL1ZpdGFsbGl1bS9xdDUvYmxvYi9tYXN0ZXIvcXRiYXNlL3NyYy9jb3Jl
bGliL2lvL3Fwcm9jZXNzX3dpbi5jcHA8L2E+PG86cD48L286cD48L3A+DQo8L2Rpdj4NCjxkaXY+
DQo8cCBjbGFzcz0iTXNvTm9ybWFsIj48bzpwPiZuYnNwOzwvbzpwPjwvcD4NCjwvZGl2Pg0KPGRp
dj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPkkgd291bGQgYXNzdW1lIHRoYXQgdGhpcyBjaGFuZ2Ug
aXMgc2FmZSBhbmQgY29tcGF0aWJsZSBzaW5jZSBpdCBoYXMgYmVlbiBpbiBRdCBmb3IgYSB3aGls
ZS48bzpwPjwvbzpwPjwvcD4NCjwvZGl2Pg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPjxv
OnA+Jm5ic3A7PC9vOnA+PC9wPg0KPC9kaXY+DQo8ZGl2Pg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+
TGVvbmFyZG88bzpwPjwvbzpwPjwvcD4NCjwvZGl2Pg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3Jt
YWwiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEyLjBwdCI+PGJyPg0KT24gMDEgU2VwIDIwMTUsIGF0
IDE1OjIwLCBEYW5pZWwgQsO8bnpsaSAmbHQ7PGEgaHJlZj0ibWFpbHRvOmRhbmllbC5idWVuemxp
QGVycmF0aXF1ZS5jaCI+ZGFuaWVsLmJ1ZW56bGlAZXJyYXRpcXVlLmNoPC9hPiZndDsgd3JvdGU6
PG86cD48L286cD48L3A+DQo8L2Rpdj4NCjxibG9ja3F1b3RlIHN0eWxlPSJtYXJnaW4tdG9wOjUu
MHB0O21hcmdpbi1ib3R0b206NS4wcHQiPg0KPGRpdj4NCjxwIGNsYXNzPSJNc29Ob3JtYWwiPkxl
IG1hcmRpLCAxIHNlcHRlbWJyZSAyMDE1IMOgIDE0OjAxLCBMZW9uYXJkbyBMYWd1bmEgYSDDqWNy
aXQgOjxicj4NCjxicj4NCjxvOnA+PC9vOnA+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+SGFz
IGFueW9uZSBoYWQgdGhlc2Uga2luZCBvZiBwcm9ibGVtcz88bzpwPjwvbzpwPjwvcD4NCjxwIGNs
YXNzPSJNc29Ob3JtYWwiPjxicj4NCk5vdCB5ZXQuICZuYnNwOzxicj4NCjxicj4NCjxicj4NCjxv
OnA+PC9vOnA+PC9wPg0KPHAgY2xhc3M9Ik1zb05vcm1hbCI+SXMgaXMgcG9zc2libGUgdG8gZ2V0
IHRoaXMgY2hhbmdlIGluIHRoZSBvY2FtbCBjb2RlPzxvOnA+PC9vOnA+PC9wPg0KPHAgY2xhc3M9
Ik1zb05vcm1hbCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTIuMHB0Ij5UaGlzIHN1cmVseSBxdWFs
aWZpZXMgYXMgYnVnLiBObyBlc2NhcGluZyBzaG91bGQgYmUgbmVlZGVkIG9uIFVuaXguY3JlYXRl
X3Byb2Nlc3MgYW5kIHdoYXRoZXZlciB5b3UgZ2l2ZSBhcyBhcmd1bWVudHMgc2hvdWxkIGVuZCB1
cCBpbiB0aGUgc3ViIHByb2Nlc3MnIFN5cy5hcmd2IGFzIGdpdmVuLiBBIG1hbnRpcw0KPGEgaHJl
Zj0iaHR0cDovL2NhbWwuaW5yaWEuZnIvbWFudGlzLyI+aHR0cDovL2NhbWwuaW5yaWEuZnIvbWFu
dGlzLzwvYT4gaXNzdWUgYW5kIGEgcGF0Y2ggKHBvc3NpYmx5IG9uIGdpdGh1YikgYXJlIGxpa2Vs
eSBtb3N0IHdlbGNvbWUuICZuYnNwOzxicj4NCjxicj4NCkZXSVcgSSBoYXZlIHRoaXMgbGluayBh
Ym91dCB0aGUgcHJvYmxlbSBbMV0gSSBpbnRlbmRlZCB0byBzdHVkeSBhdCBhIGNlcnRhaW4gcG9p
bnQuIEl0IG1pZ2h0IGJlIHdvcnRoIGdpdmluZyBpdCBhIHJlYWQuICZuYnNwOzxicj4NCjxicj4N
CkJlc3QsPGJyPg0KPGJyPg0KRGFuaWVsPGJyPg0KPGJyPg0KWzFdIDxhIGhyZWY9Imh0dHA6Ly9i
bG9ncy5tc2RuLmNvbS9iL3R3aXN0eWxpdHRsZXBhc3NhZ2VzYWxsYWxpa2UvYXJjaGl2ZS8yMDEx
LzA0LzIzL2V2ZXJ5b25lLXF1b3Rlcy1hcmd1bWVudHMtdGhlLXdyb25nLXdheS5hc3B4Ij4NCmh0
dHA6Ly9ibG9ncy5tc2RuLmNvbS9iL3R3aXN0eWxpdHRsZXBhc3NhZ2VzYWxsYWxpa2UvYXJjaGl2
ZS8yMDExLzA0LzIzL2V2ZXJ5b25lLXF1b3Rlcy1hcmd1bWVudHMtdGhlLXdyb25nLXdheS5hc3B4
PC9hPjxicj4NCjxicj4NCjxvOnA+PC9vOnA+PC9wPg0KPC9kaXY+DQo8L2Jsb2NrcXVvdGU+DQo8
L2Rpdj4NCjwvZGl2Pg0KPC9ib2R5Pg0KPC9odG1sPg0K

--_000_E51C5B015DBD1348A1D85763337FB6D9E9E39BF7Remusmetastackl_--

From misterherr@freenet.de  Tue Sep  1 21:59:00 2015
Return-Path: <misterherr@freenet.de>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 0B3FD3C366
 for <wg-windows@lists.ocaml.org>; Tue,  1 Sep 2015 21:59:00 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1700216 
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (misterherr[at]freenet.de)
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [195.4.92.93 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mout3.freenet.de ([195.4.92.93]:33194)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256)
 id 1ZWsnq-0006dh-RX (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <misterherr@freenet.de>); Tue, 01 Sep 2015 22:09:15 +0100
Received: from [195.4.92.140] (helo=mjail0.freenet.de)
 by mout3.freenet.de with esmtpa (ID misterherr@freenet.de) (port 25) (Exim
 4.85 #1) id 1ZWsnp-0006VN-TQ
 for wg-windows@lists.ocaml.org; Tue, 01 Sep 2015 23:09:13 +0200
Received: from localhost ([::1]:55438 helo=mjail0.freenet.de)
 by mjail0.freenet.de with esmtpa (ID misterherr@freenet.de) (Exim 4.85 #1)
 id 1ZWsnp-0001Cw-PW
 for wg-windows@lists.ocaml.org; Tue, 01 Sep 2015 23:09:13 +0200
Received: from mx15.freenet.de ([195.4.92.25]:54303)
 by mjail0.freenet.de with esmtpa (ID misterherr@freenet.de) (Exim 4.85 #1)
 id 1ZWslW-00009M-Sl
 for wg-windows@lists.ocaml.org; Tue, 01 Sep 2015 23:06:50 +0200
Received: from cl-252.ham-02.de.sixxs.net ([2001:6f8:1c00:fb::2]:60662)
 by mx15.freenet.de with esmtpsa (ID misterherr@freenet.de)
 (TLSv1.2:DHE-RSA-AES128-SHA:128) (port 465) (Exim 4.85 #1)
 id 1ZWslW-00007F-Mc
 for wg-windows@lists.ocaml.org; Tue, 01 Sep 2015 23:06:50 +0200
To: wg-windows@lists.ocaml.org
From: "Mr. Herr" <misterherr@freenet.de>
Message-ID: <55E61369.7080406@freenet.de>
Date: Tue, 1 Sep 2015 23:06:49 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
Content-Type: multipart/alternative;
 boundary="------------060606000305090704000501"
X-Originated-At: 2001:6f8:1c00:fb::2!60662
Subject: Re: [wg-windows] Problem (and fix) with Unix.create_process in
	windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 01 Sep 2015 20:59:00 -0000

This is a multi-part message in MIME format.
--------------060606000305090704000501
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I found this original Windows documentation about CreateProcess, it might help you 
judge the change:

https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx

too long to quote.

/Str.


On 01.09.2015 20:51, Leonardo Laguna Ruiz wrote:
>  > > I was curious about what Qt makes when calling a process, since we haveused Qt 
in windows without problems when calling processes. Seems that they do exactly what 
my fix makes: > > 
https://github.com/Vitallium/qt5/blob/master/qtbase/src/corelib/io/qprocess_win.cpp > 
 > I would assume that this change is safe and compatible since it has been in Qt for 
a while. > > Leonardo >

--------------060606000305090704000501
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

<html>
  <head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
  </head>
  <body text="#000000" bgcolor="#FFFFFF">
    Hi,<br>
    <br>
    I found this original Windows documentation about CreateProcess, it
    might help you judge the change:<br>
    <br>
<a class="moz-txt-link-freetext" href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx">https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx</a><br>
    <br>
    too long to quote.<br>
    <br>
    /Str.<br>
    <br>
    <br>
    On 01.09.2015 20:51, Leonardo Laguna Ruiz wrote:<br>
    <span style="white-space: pre;">&gt;
&gt;
&gt; I was curious about what Qt makes when calling a process, since we haveused Qt in windows without problems when calling processes. Seems that they do exactly what my fix makes:
&gt;
&gt; <a class="moz-txt-link-freetext" href="https://github.com/Vitallium/qt5/blob/master/qtbase/src/corelib/io/qprocess_win.cpp">https://github.com/Vitallium/qt5/blob/master/qtbase/src/corelib/io/qprocess_win.cpp</a>
&gt;
&gt; I would assume that this change is safe and compatible since it has been in Qt for a while.
&gt;
&gt; Leonardo
&gt;</span><br>
  </body>
</html>

--------------060606000305090704000501--

From anil@recoil.org  Wed Sep  2 21:23:59 2015
Return-Path: <anil@recoil.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 9437D3C007;
 Wed,  2 Sep 2015 21:23:59 +0100 (BST)
X-Cam-SpamDetails: score -0.0 from SpamAssassin-3.3.2-1700420 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from bark.recoil.org ([5.153.225.51]:38305)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256)
 id 1ZXEjZ-0005oa-qX (Exim 4.86_36-e07b163)
 (return-path <anil@recoil.org>); Wed, 02 Sep 2015 21:34:17 +0100
Received: from [172.16.7.154] (S0106000c429759cb.vc.shawcable.net
 [50.67.170.218])
 by bark.recoil.org (OpenSMTPD) with ESMTPSA id 68b6fa58
 TLS version=TLSv1/SSLv3 cipher=ECDHE-RSA-AES256-SHA bits=256 verify=NO;
 Wed, 2 Sep 2015 21:34:16 +0100 (BST)
Content-Type: multipart/alternative;
 boundary="Apple-Mail=_617E6EC9-BBD0-4F64-A8C1-9C89E742875A"
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
From: Anil Madhavapeddy <anil@recoil.org>
In-Reply-To: <CABAtnw__zsyC10cSAR6QSVmj6ZgbuX3KWAfQzup8if8yAngL+g@mail.gmail.com>
Date: Wed, 2 Sep 2015 13:34:13 -0700
Message-Id: <AFE940AA-DB91-4474-AF1B-DF54716104BE@recoil.org>
References: <CABAtnw__zsyC10cSAR6QSVmj6ZgbuX3KWAfQzup8if8yAngL+g@mail.gmail.com>
To: Thranur Andul <thranur@gmail.com>
X-Mailer: Apple Mail (2.2104)
Cc: teaching@lists.ocaml.org, wg-windows@lists.ocaml.org
Subject: Re: [wg-windows] Minimal virtual machine for OCaml
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 02 Sep 2015 20:23:59 -0000


--Apple-Mail=_617E6EC9-BBD0-4F64-A8C1-9C89E742875A
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

On 1 Sep 2015, at 04:20, Thranur Andul <thranur@gmail.com> wrote:
>=20
> While OPAM for Windows is not ready, I'm considering some teaching =
experiments using Linux virtual machines running inside Windows.
>=20
> I suppose it has already been tried by some people here, so maybe =
someone could share their experiences with that approach.
>=20
> In particular, one of my main issues is disk space: how much space =
would be necessary for a minimal Linux install with a graphical =
interface (XFCE, LXDE or even lighter) and the dependencies needed to =
install OCaml and the most common OPAM packages (e.g. Core,=20
> js_of_ocaml, Coq, etc.)? Is there already a Linux distribution made =
for that?
>=20
> Also, related details about virtual machine experiences (issues, =
limitations, recommendations, etc.) are welcome.

One fairly easy way to get the VM images that is portable across =
operating systems is to use Vagrant.  One that has been recently updated =
(by the CS3110 folk at Cornell) is at:

https://github.com/cs3110/vagrant-opam =
<https://github.com/cs3110/vagrant-opam>

That sets up a common development environment and OPAM.

It's tricky to get things more lightweight than this when using VMs.  =
One option I'm investigating is the feasibility of using Docker =
containers (via Boot2Docker) in order to have a CLI-only interface to =
the environment.  The user experience with this is to install the =
recently released Docker Toolbox on either Windows or MacOS X, and then =
use a CLI to get a Linux container.  Some more work is needed to expose =
a graphical interface, so it's not quite ideal for student use yet.

cheers,
Anil=

--Apple-Mail=_617E6EC9-BBD0-4F64-A8C1-9C89E742875A
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" =
class=3D"">On 1 Sep 2015, at 04:20, Thranur Andul &lt;<a =
href=3D"mailto:thranur@gmail.com" class=3D"">thranur@gmail.com</a>&gt; =
wrote:<br class=3D""><div><blockquote type=3D"cite" class=3D""><br =
class=3D"Apple-interchange-newline"><div class=3D""><div dir=3D"ltr" =
class=3D""><div class=3D""><div class=3D""><div class=3D""><div =
class=3D""><div class=3D"">While OPAM for Windows is not ready, I'm =
considering some teaching experiments using Linux virtual machines =
running inside Windows.<br class=3D""><br class=3D""></div>I suppose it =
has already been tried by some people here, so maybe someone could share =
their experiences with that approach.<br class=3D""><br =
class=3D""></div>In particular, one of my main issues is disk space: how =
much space would be necessary for a minimal Linux install with a =
graphical interface (XFCE, LXDE or even lighter) and the dependencies =
needed to install OCaml and the most common OPAM packages (e.g. Core, =
<br class=3D""></div>js_of_ocaml, Coq, etc.)? Is there already a Linux =
distribution made for that?<br class=3D""><br class=3D""></div>Also, =
related details about virtual machine experiences (issues, limitations, =
recommendations, etc.) are welcome.<br =
class=3D""></div></div></div></blockquote></div><br class=3D""><div =
class=3D"">One fairly easy way to get the VM images that is portable =
across operating systems is to use Vagrant. &nbsp;One that has been =
recently updated (by the CS3110 folk at Cornell) is at:</div><div =
class=3D""><br class=3D""></div><div class=3D""><a =
href=3D"https://github.com/cs3110/vagrant-opam" =
class=3D"">https://github.com/cs3110/vagrant-opam</a></div><div =
class=3D""><br class=3D""></div><div class=3D"">That sets up a common =
development environment and OPAM.</div><div class=3D""><br =
class=3D""></div><div class=3D"">It's tricky to get things more =
lightweight than this when using VMs. &nbsp;One option I'm investigating =
is the feasibility of using Docker containers (via Boot2Docker) in order =
to have a CLI-only interface to the environment. &nbsp;The user =
experience with this is to install the recently released Docker Toolbox =
on either Windows or MacOS X, and then use a CLI to get a Linux =
container. &nbsp;Some more work is needed to expose a graphical =
interface, so it's not quite ideal for student use yet.</div><div =
class=3D""><br class=3D""></div><div class=3D"">cheers,</div><div =
class=3D"">Anil</div></body></html>=

--Apple-Mail=_617E6EC9-BBD0-4F64-A8C1-9C89E742875A--

From dra-news@metastack.com  Tue Sep 15 12:20:47 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 3506F3C366;
 Tue, 15 Sep 2015 12:20:47 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1702870 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.99 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148099.authsmtp.net ([62.13.148.99]:37683)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtp id 1ZboSh-0006yx-SR (Exim 4.86_36-e07b163)
 (return-path <dra-news@metastack.com>); Tue, 15 Sep 2015 12:31:48 +0100
Received: from mail-c235.authsmtp.com (mail-c235.authsmtp.com [62.13.128.235])
 by punt18.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8FBVl11083213; 
 Tue, 15 Sep 2015 12:31:47 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8FBVgsg067843;
 Tue, 15 Sep 2015 12:31:42 +0100 (BST)
Received: from Altus (global-1-28.nat.csx.cam.ac.uk [131.111.184.28])
 (authenticated bits=0)
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t8FBVfnc018305
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO);
 Tue, 15 Sep 2015 12:31:42 +0100
From: "David Allsopp" <dra-news@metastack.com>
To: <wg-windows@lists.ocaml.org>, <opam-devel@lists.ocaml.org>
Date: Tue, 15 Sep 2015 12:31:07 +0100
Organization: MetaStack Solutions Ltd.
Message-ID: <000f01d0efaa$03f94150$0bebc3f0$@metastack.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AdDvocbLfz+/BuEPQIy++/kQx5SMwg==
Content-Language: en-gb
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: 56c17ee5-5b9d-11e5-b399-002590a15da7
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgASJgRBAmpU Q3kJW1VRQFxzU2B0 YQ5TIwdcYVRPXwB0 UklLXFNTEBpqBAMB
 SFoWJGsUIEYReHh3 bUJhEHVbX0A0cEAu Q0kBQGgbYDVpPH0e URVdalFXeQpXfh9H
 b1l/BXIINTQAKAUA Nip7ODZ5GzxDKTpY Cj4MK14VXl1DW3YH WxkeAC5nAFUJTjk+ RwAA
X-Authentic-SMTP: 61633634383431.1023:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: [wg-windows] OPAM on Native Windows - Status update
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 15 Sep 2015 11:20:47 -0000

As previously mentioned, I've been devoting a little time to porting the
master branch of OPAM to work on native Windows (i.e. in a Command or
PowerShell Prompt rather than in Cygwin).

I had the chance to sync with a few people in Cambridge at the end of
August, and as a result a few of us had a presentation/discussion at
Microsoft Research Cambridge yesterday about the work I've done so far and
what still needs doing. The (PDF) slides from my talk are available at
http://1drv.ms/1QeD746

I refer in the slides to various things where Proof-of-Concept (PoC) work
has been done, and I've now shared these on GitHub at
https://github.com/dra27/opam-experiments

I mention at the end that the port is not particularly exciting at this
stage, as you can only get as far as a not terribly polished opam init. My
plan is by mid-October to have opam config env working so that we have a
very, very pre-alpha "release" which may be able to install some packages
into the system switch only.

Anyone is of course welcome to try building what's on the windows branch in
the meantime, and I'm very happy to provide assistance/receive bug reports
on the build process so far. There's documentation on the detailed
requirements for the build environment in README.md (see
https://github.com/dra27/opam/blob/windows/README.md#compiling-on-native-win
dows)

I have also shared my OneNote scribblings and notes on the port at
http://1drv.ms/1QeDkV0 (opens in OneNote Online). Please be aware that this
document contains paged-out portions of my brain, which is both a
highly-disorganised place and also sometimes expresses opinions more
strongly than are necessary!

Continuing towards the OCaml/OPAM Windows Dream...


David


From gabriel.scherer@gmail.com  Tue Sep 15 12:35:05 2015
Return-Path: <gabriel.scherer@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 579B43C366;
 Tue, 15 Sep 2015 12:35:05 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1702870 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.212.169 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (gabriel.scherer[at]gmail.com)
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-wi0-f169.google.com ([209.85.212.169]:37025)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
 id 1ZbogX-0007gE-ld (Exim 4.86_36-e07b163)
 (return-path <gabriel.scherer@gmail.com>); Tue, 15 Sep 2015 12:46:06 +0100
Received: by wicfx3 with SMTP id fx3so23308564wic.0;
 Tue, 15 Sep 2015 04:46:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:from:date:message-id:subject:to
 :cc:content-type;
 bh=QRk3yaV2Fx1Qq1sFb2O931kp5p9XxU4urUTyUlEVy6k=;
 b=K5Vk7NB6ERa4MHFJNGTNdjUK4ebeoDCPvBba/a+AAO2afha7QZ1Ez7008M9ObZ0iTB
 iAW9/qlTAm450psYXRTLKe4D/QYLvJTmivaLFX6rfTPlBonH+dO0LK2g2qeVQAZ/0d6Z
 iUZfOBftJBH4YM2CoOulCgNvKCRl3Dm4zkngjz0fqlXH3IBL1h1RwmI1pXjvMMRd7r9r
 0kcOFcyCmN1P3dZP1eI6Lby+26/x5HXt4VvAObUA0ZlbBRvJGeqJ2YgNzkyHKiAlqnd3
 JoqH12JrJuM1NWKJ0gS4+scYjJjxmnOJ1OZ9bqjjy92c5g65VfJqdPMSNtR47KClnXnN
 ENSw==
X-Received: by 10.194.92.68 with SMTP id ck4mr9388377wjb.141.1442317565289;
 Tue, 15 Sep 2015 04:46:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.28.148.212 with HTTP; Tue, 15 Sep 2015 04:45:25 -0700 (PDT)
In-Reply-To: <000f01d0efaa$03f94150$0bebc3f0$@metastack.com>
References: <000f01d0efaa$03f94150$0bebc3f0$@metastack.com>
From: Gabriel Scherer <gabriel.scherer@gmail.com>
Date: Tue, 15 Sep 2015 13:45:25 +0200
Message-ID: <CAPFanBHoJj-k4_q_adqH+by9vgxxxogY3NOHhgBsR4pwYJrK8A@mail.gmail.com>
To: David Allsopp <dra-news@metastack.com>
Content-Type: multipart/alternative; boundary=047d7bf0d2de21eaae051fc7baf2
X-Mailman-Approved-At: Tue, 15 Sep 2015 12:35:33 +0100
Cc: wg-windows@lists.ocaml.org,
 "opam-devel@lists.ocaml.org" <opam-devel@lists.ocaml.org>
Subject: Re: [wg-windows] [opam-devel] OPAM on Native Windows - Status update
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 15 Sep 2015 11:35:05 -0000

--047d7bf0d2de21eaae051fc7baf2
Content-Type: text/plain; charset=UTF-8

Could you provide more information on what changes/fixes you need from
upstream? By looking at the slides I see that you mention
  http://caml.inria.fr/mantis/view.php?id=4034
  http://caml.inria.fr/mantis/view.php?id=6120

Are both equally important? Is it easy to workaround not having them, or a
deal-breaker for your work? Which other upstream issues would you need
solved?


On Tue, Sep 15, 2015 at 1:31 PM, David Allsopp <dra-news@metastack.com>
wrote:

> As previously mentioned, I've been devoting a little time to porting the
> master branch of OPAM to work on native Windows (i.e. in a Command or
> PowerShell Prompt rather than in Cygwin).
>
> I had the chance to sync with a few people in Cambridge at the end of
> August, and as a result a few of us had a presentation/discussion at
> Microsoft Research Cambridge yesterday about the work I've done so far and
> what still needs doing. The (PDF) slides from my talk are available at
> http://1drv.ms/1QeD746
>
> I refer in the slides to various things where Proof-of-Concept (PoC) work
> has been done, and I've now shared these on GitHub at
> https://github.com/dra27/opam-experiments
>
> I mention at the end that the port is not particularly exciting at this
> stage, as you can only get as far as a not terribly polished opam init. My
> plan is by mid-October to have opam config env working so that we have a
> very, very pre-alpha "release" which may be able to install some packages
> into the system switch only.
>
> Anyone is of course welcome to try building what's on the windows branch in
> the meantime, and I'm very happy to provide assistance/receive bug reports
> on the build process so far. There's documentation on the detailed
> requirements for the build environment in README.md (see
>
> https://github.com/dra27/opam/blob/windows/README.md#compiling-on-native-win
> dows)
>
> I have also shared my OneNote scribblings and notes on the port at
> http://1drv.ms/1QeDkV0 (opens in OneNote Online). Please be aware that
> this
> document contains paged-out portions of my brain, which is both a
> highly-disorganised place and also sometimes expresses opinions more
> strongly than are necessary!
>
> Continuing towards the OCaml/OPAM Windows Dream...
>
>
> David
>
> _______________________________________________
> opam-devel mailing list
> opam-devel@lists.ocaml.org
> http://lists.ocaml.org/listinfo/opam-devel
>

--047d7bf0d2de21eaae051fc7baf2
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div><div>Could you provide more information on what chang=
es/fixes you need from upstream? By looking at the slides I see that you me=
ntion<br>=C2=A0 <a href=3D"http://caml.inria.fr/mantis/view.php?id=3D4034">=
http://caml.inria.fr/mantis/view.php?id=3D4034</a><br>=C2=A0 <a href=3D"htt=
p://caml.inria.fr/mantis/view.php?id=3D6120">http://caml.inria.fr/mantis/vi=
ew.php?id=3D6120</a><br></div><br></div>Are both equally important? Is it e=
asy to workaround not having them, or a deal-breaker for your work? Which o=
ther upstream issues would you need solved?<br><div>=C2=A0 <br></div></div>=
<div class=3D"gmail_extra"><br><div class=3D"gmail_quote">On Tue, Sep 15, 2=
015 at 1:31 PM, David Allsopp <span dir=3D"ltr">&lt;<a href=3D"mailto:dra-n=
ews@metastack.com" target=3D"_blank">dra-news@metastack.com</a>&gt;</span> =
wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;bord=
er-left:1px #ccc solid;padding-left:1ex">As previously mentioned, I&#39;ve =
been devoting a little time to porting the<br>
master branch of OPAM to work on native Windows (i.e. in a Command or<br>
PowerShell Prompt rather than in Cygwin).<br>
<br>
I had the chance to sync with a few people in Cambridge at the end of<br>
August, and as a result a few of us had a presentation/discussion at<br>
Microsoft Research Cambridge yesterday about the work I&#39;ve done so far =
and<br>
what still needs doing. The (PDF) slides from my talk are available at<br>
<a href=3D"http://1drv.ms/1QeD746" rel=3D"noreferrer" target=3D"_blank">htt=
p://1drv.ms/1QeD746</a><br>
<br>
I refer in the slides to various things where Proof-of-Concept (PoC) work<b=
r>
has been done, and I&#39;ve now shared these on GitHub at<br>
<a href=3D"https://github.com/dra27/opam-experiments" rel=3D"noreferrer" ta=
rget=3D"_blank">https://github.com/dra27/opam-experiments</a><br>
<br>
I mention at the end that the port is not particularly exciting at this<br>
stage, as you can only get as far as a not terribly polished opam init. My<=
br>
plan is by mid-October to have opam config env working so that we have a<br=
>
very, very pre-alpha &quot;release&quot; which may be able to install some =
packages<br>
into the system switch only.<br>
<br>
Anyone is of course welcome to try building what&#39;s on the windows branc=
h in<br>
the meantime, and I&#39;m very happy to provide assistance/receive bug repo=
rts<br>
on the build process so far. There&#39;s documentation on the detailed<br>
requirements for the build environment in README.md (see<br>
<a href=3D"https://github.com/dra27/opam/blob/windows/README.md#compiling-o=
n-native-win" rel=3D"noreferrer" target=3D"_blank">https://github.com/dra27=
/opam/blob/windows/README.md#compiling-on-native-win</a><br>
dows)<br>
<br>
I have also shared my OneNote scribblings and notes on the port at<br>
<a href=3D"http://1drv.ms/1QeDkV0" rel=3D"noreferrer" target=3D"_blank">htt=
p://1drv.ms/1QeDkV0</a> (opens in OneNote Online). Please be aware that thi=
s<br>
document contains paged-out portions of my brain, which is both a<br>
highly-disorganised place and also sometimes expresses opinions more<br>
strongly than are necessary!<br>
<br>
Continuing towards the OCaml/OPAM Windows Dream...<br>
<br>
<br>
David<br>
<br>
_______________________________________________<br>
opam-devel mailing list<br>
<a href=3D"mailto:opam-devel@lists.ocaml.org">opam-devel@lists.ocaml.org</a=
><br>
<a href=3D"http://lists.ocaml.org/listinfo/opam-devel" rel=3D"noreferrer" t=
arget=3D"_blank">http://lists.ocaml.org/listinfo/opam-devel</a><br>
</blockquote></div><br></div>

--047d7bf0d2de21eaae051fc7baf2--

From dra-news@metastack.com  Tue Sep 15 12:53:49 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 5C4FB3C366;
 Tue, 15 Sep 2015 12:53:49 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1702870 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.149.43 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail149043.authsmtp.co.uk ([62.13.149.43]:30388)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtp id 1Zboyf-0007Ra-R3 (Exim 4.86_36-e07b163)
 (return-path <dra-news@metastack.com>); Tue, 15 Sep 2015 13:04:50 +0100
Received: from mail-c237.authsmtp.com (mail-c237.authsmtp.com [62.13.128.237])
 by punt17.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8FC4m8I057440; 
 Tue, 15 Sep 2015 13:04:48 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8FC4lc0042986;
 Tue, 15 Sep 2015 13:04:47 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t8FC4kjW018495
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
 Tue, 15 Sep 2015 13:04:46 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0248.002; Tue, 15 Sep 2015 13:04:46 +0100
From: David Allsopp <dra-news@metastack.com>
To: Gabriel Scherer <gabriel.scherer@gmail.com>
Thread-Topic: [opam-devel] OPAM on Native Windows - Status update
Thread-Index: AQHQ76wfwP9p+/zA0Ei1GFzfbJwYhp49bU2A
Date: Tue, 15 Sep 2015 12:04:44 +0000
Message-ID: <9752EA39-D1F3-4E67-BDDE-8FBB20BAE651@metastack.com>
References: <000f01d0efaa$03f94150$0bebc3f0$@metastack.com>
 <CAPFanBHoJj-k4_q_adqH+by9vgxxxogY3NOHhgBsR4pwYJrK8A@mail.gmail.com>
In-Reply-To: <CAPFanBHoJj-k4_q_adqH+by9vgxxxogY3NOHhgBsR4pwYJrK8A@mail.gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-GB
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-Type: multipart/alternative;
 boundary="_000_9752EA39D1F34E67BDDE8FBB20BAE651metastackcom_"
MIME-Version: 1.0
X-MSL-Actually-To: dra-news@metastack.com
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: f5aeb8bb-5ba1-11e5-9f76-002590a135d3
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgESJgRBAmpU Q3kJW1VRQFxyU2Nx YQ5WIwdcYVRPXwB0 UklLXFNTEBpqBAMB
 SFoWJGp2K1ZGeHpy bE5kEHNTXkV9OxB4 ExsGHT9UeGIyOWEC UUENch5dJgRMYx9F
 aFV2VCIMYmBTZTQC El17DDcpNDAaJClL TwU4ZXUqaGNDGTh0 YRkeHCsiVXIEQSk0
 MAdubxYnAE8NL156 LEMtUE4VWwA8
X-Authentic-SMTP: 61633634383431.1024:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Cc: "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>,
 "opam-devel@lists.ocaml.org" <opam-devel@lists.ocaml.org>
Subject: Re: [wg-windows] [opam-devel] OPAM on Native Windows - Status update
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 15 Sep 2015 11:53:49 -0000

--_000_9752EA39D1F34E67BDDE8FBB20BAE651metastackcom_
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

T24gMTUgU2VwIDIwMTUsIGF0IDEyOjQ2LCBHYWJyaWVsIFNjaGVyZXIgPGdhYnJpZWwuc2NoZXJl
ckBnbWFpbC5jb208bWFpbHRvOmdhYnJpZWwuc2NoZXJlckBnbWFpbC5jb20+PiB3cm90ZToNCkNv
dWxkIHlvdSBwcm92aWRlIG1vcmUgaW5mb3JtYXRpb24gb24gd2hhdCBjaGFuZ2VzL2ZpeGVzIHlv
dSBuZWVkIGZyb20gdXBzdHJlYW0/IEJ5IGxvb2tpbmcgYXQgdGhlIHNsaWRlcyBJIHNlZSB0aGF0
IHlvdSBtZW50aW9uDQogIGh0dHA6Ly9jYW1sLmlucmlhLmZyL21hbnRpcy92aWV3LnBocD9pZD00
MDM0DQogIGh0dHA6Ly9jYW1sLmlucmlhLmZyL21hbnRpcy92aWV3LnBocD9pZD02MTIwDQoNCkFy
ZSBib3RoIGVxdWFsbHkgaW1wb3J0YW50PyBJcyBpdCBlYXN5IHRvIHdvcmthcm91bmQgbm90IGhh
dmluZyB0aGVtLCBvciBhIGRlYWwtYnJlYWtlciBmb3IgeW91ciB3b3JrPyBXaGljaCBvdGhlciB1
cHN0cmVhbSBpc3N1ZXMgd291bGQgeW91IG5lZWQgc29sdmVkPw0KDQo0MDM0IGlzIGNvbXBsaWNh
dGVkIHdoaWNoIGlzIHdoeSBpdCdzIHNhdCB1bmZpeGVkIC0gaXQgZG9lc24ndCBuZWVkIGZpeGlu
ZyBmb3IgT1BBTSwgSSBzaW1wbHkgd3JhcHBlZCB0aGUgV2luZG93cyBBUEkgY2FsbCBpbiBPUEFN
IGRpcmVjdGx5IHRvIHNvbHZlIGl0cyB1c2UgY2FzZS4NCg0KNjEyMCBpcyBjcml0aWNhbCBmb3Ig
YnVpbGRpbmcgZG9zZTMgZGlyZWN0bHkgKGlmIHlvdSBjb21waWxlIHVzaW5nIGxpYi1leHQsIGl0
IGRvZXNuJ3QgbWF0dGVyKSBidXQgbm90IGNyaXRpY2FsLCB0aGVyZWZvcmUuIEkgd2FzIGdvaW5n
IHRvIHVwZGF0ZSBpdHMgTWFudGlzIHBhZ2Ugd2l0aCBhIG5vdGUgdGhhdCBJIGV4cGVjdCB0byBm
aW5pc2ggdGhlIHBhdGNoIGluIE9jdG9iZXIgKGFuZCBzbyBob3BlZnVsbHkgZ2V0IGl0IGludG8g
NC4wMykuIFRoZSBtYWtlIGNvbXBpbGVyIHJvdXRlIG9mIG15IFdpbmRvd3MgT1BBTSBwb3J0IGFs
cmVhZHkgaW5jbHVkZXMgdGhpcyBwYXRjaC4NCg0KSSdtIG5vdCBhd2FyZSBvZiBhbnkgb3RoZXIg
T0NhbWwgZml4ZXMgbmVlZGVkIC0gSSBkb24ndCBleHBlY3QgYW55LCBlaXRoZXIsIGFzIE9DYW1s
IG9mIGNvdXJzZSB3b3JrcyB3ZWxsIG9uIFdpbmRvd3MgYWxyZWFkeSENCg0KDQpEYXZpZA0KDQoN
Cg0KDQpPbiBUdWUsIFNlcCAxNSwgMjAxNSBhdCAxOjMxIFBNLCBEYXZpZCBBbGxzb3BwIDxkcmEt
bmV3c0BtZXRhc3RhY2suY29tPG1haWx0bzpkcmEtbmV3c0BtZXRhc3RhY2suY29tPj4gd3JvdGU6
DQpBcyBwcmV2aW91c2x5IG1lbnRpb25lZCwgSSd2ZSBiZWVuIGRldm90aW5nIGEgbGl0dGxlIHRp
bWUgdG8gcG9ydGluZyB0aGUNCm1hc3RlciBicmFuY2ggb2YgT1BBTSB0byB3b3JrIG9uIG5hdGl2
ZSBXaW5kb3dzIChpLmUuIGluIGEgQ29tbWFuZCBvcg0KUG93ZXJTaGVsbCBQcm9tcHQgcmF0aGVy
IHRoYW4gaW4gQ3lnd2luKS4NCg0KSSBoYWQgdGhlIGNoYW5jZSB0byBzeW5jIHdpdGggYSBmZXcg
cGVvcGxlIGluIENhbWJyaWRnZSBhdCB0aGUgZW5kIG9mDQpBdWd1c3QsIGFuZCBhcyBhIHJlc3Vs
dCBhIGZldyBvZiB1cyBoYWQgYSBwcmVzZW50YXRpb24vZGlzY3Vzc2lvbiBhdA0KTWljcm9zb2Z0
IFJlc2VhcmNoIENhbWJyaWRnZSB5ZXN0ZXJkYXkgYWJvdXQgdGhlIHdvcmsgSSd2ZSBkb25lIHNv
IGZhciBhbmQNCndoYXQgc3RpbGwgbmVlZHMgZG9pbmcuIFRoZSAoUERGKSBzbGlkZXMgZnJvbSBt
eSB0YWxrIGFyZSBhdmFpbGFibGUgYXQNCmh0dHA6Ly8xZHJ2Lm1zLzFRZUQ3NDYNCg0KSSByZWZl
ciBpbiB0aGUgc2xpZGVzIHRvIHZhcmlvdXMgdGhpbmdzIHdoZXJlIFByb29mLW9mLUNvbmNlcHQg
KFBvQykgd29yaw0KaGFzIGJlZW4gZG9uZSwgYW5kIEkndmUgbm93IHNoYXJlZCB0aGVzZSBvbiBH
aXRIdWIgYXQNCmh0dHBzOi8vZ2l0aHViLmNvbS9kcmEyNy9vcGFtLWV4cGVyaW1lbnRzDQoNCkkg
bWVudGlvbiBhdCB0aGUgZW5kIHRoYXQgdGhlIHBvcnQgaXMgbm90IHBhcnRpY3VsYXJseSBleGNp
dGluZyBhdCB0aGlzDQpzdGFnZSwgYXMgeW91IGNhbiBvbmx5IGdldCBhcyBmYXIgYXMgYSBub3Qg
dGVycmlibHkgcG9saXNoZWQgb3BhbSBpbml0LiBNeQ0KcGxhbiBpcyBieSBtaWQtT2N0b2JlciB0
byBoYXZlIG9wYW0gY29uZmlnIGVudiB3b3JraW5nIHNvIHRoYXQgd2UgaGF2ZSBhDQp2ZXJ5LCB2
ZXJ5IHByZS1hbHBoYSAicmVsZWFzZSIgd2hpY2ggbWF5IGJlIGFibGUgdG8gaW5zdGFsbCBzb21l
IHBhY2thZ2VzDQppbnRvIHRoZSBzeXN0ZW0gc3dpdGNoIG9ubHkuDQoNCkFueW9uZSBpcyBvZiBj
b3Vyc2Ugd2VsY29tZSB0byB0cnkgYnVpbGRpbmcgd2hhdCdzIG9uIHRoZSB3aW5kb3dzIGJyYW5j
aCBpbg0KdGhlIG1lYW50aW1lLCBhbmQgSSdtIHZlcnkgaGFwcHkgdG8gcHJvdmlkZSBhc3Npc3Rh
bmNlL3JlY2VpdmUgYnVnIHJlcG9ydHMNCm9uIHRoZSBidWlsZCBwcm9jZXNzIHNvIGZhci4gVGhl
cmUncyBkb2N1bWVudGF0aW9uIG9uIHRoZSBkZXRhaWxlZA0KcmVxdWlyZW1lbnRzIGZvciB0aGUg
YnVpbGQgZW52aXJvbm1lbnQgaW4gUkVBRE1FLm1kIChzZWUNCmh0dHBzOi8vZ2l0aHViLmNvbS9k
cmEyNy9vcGFtL2Jsb2Ivd2luZG93cy9SRUFETUUubWQjY29tcGlsaW5nLW9uLW5hdGl2ZS13aW4N
CmRvd3MpDQoNCkkgaGF2ZSBhbHNvIHNoYXJlZCBteSBPbmVOb3RlIHNjcmliYmxpbmdzIGFuZCBu
b3RlcyBvbiB0aGUgcG9ydCBhdA0KaHR0cDovLzFkcnYubXMvMVFlRGtWMCAob3BlbnMgaW4gT25l
Tm90ZSBPbmxpbmUpLiBQbGVhc2UgYmUgYXdhcmUgdGhhdCB0aGlzDQpkb2N1bWVudCBjb250YWlu
cyBwYWdlZC1vdXQgcG9ydGlvbnMgb2YgbXkgYnJhaW4sIHdoaWNoIGlzIGJvdGggYQ0KaGlnaGx5
LWRpc29yZ2FuaXNlZCBwbGFjZSBhbmQgYWxzbyBzb21ldGltZXMgZXhwcmVzc2VzIG9waW5pb25z
IG1vcmUNCnN0cm9uZ2x5IHRoYW4gYXJlIG5lY2Vzc2FyeSENCg0KQ29udGludWluZyB0b3dhcmRz
IHRoZSBPQ2FtbC9PUEFNIFdpbmRvd3MgRHJlYW0uLi4NCg0KDQpEYXZpZA0KDQpfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXw0Kb3BhbS1kZXZlbCBtYWlsaW5n
IGxpc3QNCm9wYW0tZGV2ZWxAbGlzdHMub2NhbWwub3JnPG1haWx0bzpvcGFtLWRldmVsQGxpc3Rz
Lm9jYW1sLm9yZz4NCmh0dHA6Ly9saXN0cy5vY2FtbC5vcmcvbGlzdGluZm8vb3BhbS1kZXZlbA0K
DQo=

--_000_9752EA39D1F34E67BDDE8FBB20BAE651metastackcom_
Content-Type: text/html; charset="utf-8"
Content-ID: <A1C4F9860A673446837DE80CDDD6716B@metastack.local>
Content-Transfer-Encoding: base64

PGh0bWw+DQo8aGVhZD4NCjxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0i
dGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4NCjwvaGVhZD4NCjxib2R5IGRpcj0iYXV0byI+DQo8
ZGl2PjxzcGFuPjwvc3Bhbj48L2Rpdj4NCjxkaXY+DQo8ZGl2Pg0KPGRpdj5PbiAxNSBTZXAgMjAx
NSwgYXQgMTI6NDYsIEdhYnJpZWwgU2NoZXJlciAmbHQ7PGEgaHJlZj0ibWFpbHRvOmdhYnJpZWwu
c2NoZXJlckBnbWFpbC5jb20iPmdhYnJpZWwuc2NoZXJlckBnbWFpbC5jb208L2E+Jmd0OyB3cm90
ZTo8L2Rpdj4NCjwvZGl2Pg0KPGJsb2NrcXVvdGUgdHlwZT0iY2l0ZSI+DQo8ZGl2Pg0KPGRpdiBk
aXI9Imx0ciI+DQo8ZGl2Pg0KPGRpdj5Db3VsZCB5b3UgcHJvdmlkZSBtb3JlIGluZm9ybWF0aW9u
IG9uIHdoYXQgY2hhbmdlcy9maXhlcyB5b3UgbmVlZCBmcm9tIHVwc3RyZWFtPyBCeSBsb29raW5n
IGF0IHRoZSBzbGlkZXMgSSBzZWUgdGhhdCB5b3UgbWVudGlvbjxicj4NCiZuYnNwOyA8YSBocmVm
PSJodHRwOi8vY2FtbC5pbnJpYS5mci9tYW50aXMvdmlldy5waHA/aWQ9NDAzNCI+aHR0cDovL2Nh
bWwuaW5yaWEuZnIvbWFudGlzL3ZpZXcucGhwP2lkPTQwMzQ8L2E+PGJyPg0KJm5ic3A7IDxhIGhy
ZWY9Imh0dHA6Ly9jYW1sLmlucmlhLmZyL21hbnRpcy92aWV3LnBocD9pZD02MTIwIj5odHRwOi8v
Y2FtbC5pbnJpYS5mci9tYW50aXMvdmlldy5waHA/aWQ9NjEyMDwvYT48YnI+DQo8L2Rpdj4NCjxi
cj4NCjwvZGl2Pg0KQXJlIGJvdGggZXF1YWxseSBpbXBvcnRhbnQ/IElzIGl0IGVhc3kgdG8gd29y
a2Fyb3VuZCBub3QgaGF2aW5nIHRoZW0sIG9yIGEgZGVhbC1icmVha2VyIGZvciB5b3VyIHdvcms/
IFdoaWNoIG90aGVyIHVwc3RyZWFtIGlzc3VlcyB3b3VsZCB5b3UgbmVlZCBzb2x2ZWQ/PGJyPg0K
PC9kaXY+DQo8L2Rpdj4NCjwvYmxvY2txdW90ZT4NCjxkaXY+PGJyPg0KPC9kaXY+DQo8ZGl2PjQw
MzQgaXMgY29tcGxpY2F0ZWQgd2hpY2ggaXMgd2h5IGl0J3Mgc2F0IHVuZml4ZWQgLSBpdCBkb2Vz
bid0IG5lZWQgZml4aW5nIGZvciBPUEFNLCBJIHNpbXBseSB3cmFwcGVkIHRoZSBXaW5kb3dzIEFQ
SSBjYWxsIGluIE9QQU0gZGlyZWN0bHkgdG8gc29sdmUgaXRzIHVzZSBjYXNlLjwvZGl2Pg0KPGRp
dj48YnI+DQo8L2Rpdj4NCjxkaXY+NjEyMCBpcyBjcml0aWNhbCBmb3IgYnVpbGRpbmcgZG9zZTMg
ZGlyZWN0bHkgKGlmIHlvdSBjb21waWxlIHVzaW5nIGxpYi1leHQsIGl0IGRvZXNuJ3QgbWF0dGVy
KSBidXQgbm90IGNyaXRpY2FsLCB0aGVyZWZvcmUuIEkgd2FzIGdvaW5nIHRvIHVwZGF0ZSBpdHMg
TWFudGlzIHBhZ2Ugd2l0aCBhIG5vdGUgdGhhdCBJIGV4cGVjdCB0byBmaW5pc2ggdGhlIHBhdGNo
IGluIE9jdG9iZXIgKGFuZCBzbyBob3BlZnVsbHkgZ2V0IGl0IGludG8gNC4wMykuDQogVGhlIG1h
a2UgY29tcGlsZXIgcm91dGUgb2YgbXkgV2luZG93cyBPUEFNIHBvcnQgYWxyZWFkeSBpbmNsdWRl
cyB0aGlzIHBhdGNoLjwvZGl2Pg0KPGRpdj48YnI+DQo8L2Rpdj4NCjxkaXY+SSdtIG5vdCBhd2Fy
ZSBvZiBhbnkgb3RoZXIgT0NhbWwgZml4ZXMgbmVlZGVkIC0gSSBkb24ndCBleHBlY3QgYW55LCBl
aXRoZXIsIGFzIE9DYW1sIG9mIGNvdXJzZSB3b3JrcyB3ZWxsIG9uIFdpbmRvd3MgYWxyZWFkeSE8
L2Rpdj4NCjxkaXY+PGJyPg0KPC9kaXY+DQo8ZGl2Pjxicj4NCjwvZGl2Pg0KPGRpdj5EYXZpZDwv
ZGl2Pg0KPGRpdj48YnI+DQo8L2Rpdj4NCjxicj4NCjxibG9ja3F1b3RlIHR5cGU9ImNpdGUiPg0K
PGRpdj4NCjxkaXYgZGlyPSJsdHIiPg0KPGRpdj4mbmJzcDsgPGJyPg0KPC9kaXY+DQo8L2Rpdj4N
CjxkaXYgY2xhc3M9ImdtYWlsX2V4dHJhIj48YnI+DQo8ZGl2IGNsYXNzPSJnbWFpbF9xdW90ZSI+
T24gVHVlLCBTZXAgMTUsIDIwMTUgYXQgMTozMSBQTSwgRGF2aWQgQWxsc29wcCA8c3BhbiBkaXI9
Imx0ciI+DQombHQ7PGEgaHJlZj0ibWFpbHRvOmRyYS1uZXdzQG1ldGFzdGFjay5jb20iIHRhcmdl
dD0iX2JsYW5rIj5kcmEtbmV3c0BtZXRhc3RhY2suY29tPC9hPiZndDs8L3NwYW4+IHdyb3RlOjxi
cj4NCjxibG9ja3F1b3RlIGNsYXNzPSJnbWFpbF9xdW90ZSIgc3R5bGU9Im1hcmdpbjowIDAgMCAu
OGV4O2JvcmRlci1sZWZ0OjFweCAjY2NjIHNvbGlkO3BhZGRpbmctbGVmdDoxZXgiPg0KQXMgcHJl
dmlvdXNseSBtZW50aW9uZWQsIEkndmUgYmVlbiBkZXZvdGluZyBhIGxpdHRsZSB0aW1lIHRvIHBv
cnRpbmcgdGhlPGJyPg0KbWFzdGVyIGJyYW5jaCBvZiBPUEFNIHRvIHdvcmsgb24gbmF0aXZlIFdp
bmRvd3MgKGkuZS4gaW4gYSBDb21tYW5kIG9yPGJyPg0KUG93ZXJTaGVsbCBQcm9tcHQgcmF0aGVy
IHRoYW4gaW4gQ3lnd2luKS48YnI+DQo8YnI+DQpJIGhhZCB0aGUgY2hhbmNlIHRvIHN5bmMgd2l0
aCBhIGZldyBwZW9wbGUgaW4gQ2FtYnJpZGdlIGF0IHRoZSBlbmQgb2Y8YnI+DQpBdWd1c3QsIGFu
ZCBhcyBhIHJlc3VsdCBhIGZldyBvZiB1cyBoYWQgYSBwcmVzZW50YXRpb24vZGlzY3Vzc2lvbiBh
dDxicj4NCk1pY3Jvc29mdCBSZXNlYXJjaCBDYW1icmlkZ2UgeWVzdGVyZGF5IGFib3V0IHRoZSB3
b3JrIEkndmUgZG9uZSBzbyBmYXIgYW5kPGJyPg0Kd2hhdCBzdGlsbCBuZWVkcyBkb2luZy4gVGhl
IChQREYpIHNsaWRlcyBmcm9tIG15IHRhbGsgYXJlIGF2YWlsYWJsZSBhdDxicj4NCjxhIGhyZWY9
Imh0dHA6Ly8xZHJ2Lm1zLzFRZUQ3NDYiIHJlbD0ibm9yZWZlcnJlciIgdGFyZ2V0PSJfYmxhbmsi
Pmh0dHA6Ly8xZHJ2Lm1zLzFRZUQ3NDY8L2E+PGJyPg0KPGJyPg0KSSByZWZlciBpbiB0aGUgc2xp
ZGVzIHRvIHZhcmlvdXMgdGhpbmdzIHdoZXJlIFByb29mLW9mLUNvbmNlcHQgKFBvQykgd29yazxi
cj4NCmhhcyBiZWVuIGRvbmUsIGFuZCBJJ3ZlIG5vdyBzaGFyZWQgdGhlc2Ugb24gR2l0SHViIGF0
PGJyPg0KPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL2RyYTI3L29wYW0tZXhwZXJpbWVudHMi
IHJlbD0ibm9yZWZlcnJlciIgdGFyZ2V0PSJfYmxhbmsiPmh0dHBzOi8vZ2l0aHViLmNvbS9kcmEy
Ny9vcGFtLWV4cGVyaW1lbnRzPC9hPjxicj4NCjxicj4NCkkgbWVudGlvbiBhdCB0aGUgZW5kIHRo
YXQgdGhlIHBvcnQgaXMgbm90IHBhcnRpY3VsYXJseSBleGNpdGluZyBhdCB0aGlzPGJyPg0Kc3Rh
Z2UsIGFzIHlvdSBjYW4gb25seSBnZXQgYXMgZmFyIGFzIGEgbm90IHRlcnJpYmx5IHBvbGlzaGVk
IG9wYW0gaW5pdC4gTXk8YnI+DQpwbGFuIGlzIGJ5IG1pZC1PY3RvYmVyIHRvIGhhdmUgb3BhbSBj
b25maWcgZW52IHdvcmtpbmcgc28gdGhhdCB3ZSBoYXZlIGE8YnI+DQp2ZXJ5LCB2ZXJ5IHByZS1h
bHBoYSAmcXVvdDtyZWxlYXNlJnF1b3Q7IHdoaWNoIG1heSBiZSBhYmxlIHRvIGluc3RhbGwgc29t
ZSBwYWNrYWdlczxicj4NCmludG8gdGhlIHN5c3RlbSBzd2l0Y2ggb25seS48YnI+DQo8YnI+DQpB
bnlvbmUgaXMgb2YgY291cnNlIHdlbGNvbWUgdG8gdHJ5IGJ1aWxkaW5nIHdoYXQncyBvbiB0aGUg
d2luZG93cyBicmFuY2ggaW48YnI+DQp0aGUgbWVhbnRpbWUsIGFuZCBJJ20gdmVyeSBoYXBweSB0
byBwcm92aWRlIGFzc2lzdGFuY2UvcmVjZWl2ZSBidWcgcmVwb3J0czxicj4NCm9uIHRoZSBidWls
ZCBwcm9jZXNzIHNvIGZhci4gVGhlcmUncyBkb2N1bWVudGF0aW9uIG9uIHRoZSBkZXRhaWxlZDxi
cj4NCnJlcXVpcmVtZW50cyBmb3IgdGhlIGJ1aWxkIGVudmlyb25tZW50IGluIFJFQURNRS5tZCAo
c2VlPGJyPg0KPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL2RyYTI3L29wYW0vYmxvYi93aW5k
b3dzL1JFQURNRS5tZCNjb21waWxpbmctb24tbmF0aXZlLXdpbiIgcmVsPSJub3JlZmVycmVyIiB0
YXJnZXQ9Il9ibGFuayI+aHR0cHM6Ly9naXRodWIuY29tL2RyYTI3L29wYW0vYmxvYi93aW5kb3dz
L1JFQURNRS5tZCNjb21waWxpbmctb24tbmF0aXZlLXdpbjwvYT48YnI+DQpkb3dzKTxicj4NCjxi
cj4NCkkgaGF2ZSBhbHNvIHNoYXJlZCBteSBPbmVOb3RlIHNjcmliYmxpbmdzIGFuZCBub3RlcyBv
biB0aGUgcG9ydCBhdDxicj4NCjxhIGhyZWY9Imh0dHA6Ly8xZHJ2Lm1zLzFRZURrVjAiIHJlbD0i
bm9yZWZlcnJlciIgdGFyZ2V0PSJfYmxhbmsiPmh0dHA6Ly8xZHJ2Lm1zLzFRZURrVjA8L2E+IChv
cGVucyBpbiBPbmVOb3RlIE9ubGluZSkuIFBsZWFzZSBiZSBhd2FyZSB0aGF0IHRoaXM8YnI+DQpk
b2N1bWVudCBjb250YWlucyBwYWdlZC1vdXQgcG9ydGlvbnMgb2YgbXkgYnJhaW4sIHdoaWNoIGlz
IGJvdGggYTxicj4NCmhpZ2hseS1kaXNvcmdhbmlzZWQgcGxhY2UgYW5kIGFsc28gc29tZXRpbWVz
IGV4cHJlc3NlcyBvcGluaW9ucyBtb3JlPGJyPg0Kc3Ryb25nbHkgdGhhbiBhcmUgbmVjZXNzYXJ5
ITxicj4NCjxicj4NCkNvbnRpbnVpbmcgdG93YXJkcyB0aGUgT0NhbWwvT1BBTSBXaW5kb3dzIERy
ZWFtLi4uPGJyPg0KPGJyPg0KPGJyPg0KRGF2aWQ8YnI+DQo8YnI+DQpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXzxicj4NCm9wYW0tZGV2ZWwgbWFpbGluZyBs
aXN0PGJyPg0KPGEgaHJlZj0ibWFpbHRvOm9wYW0tZGV2ZWxAbGlzdHMub2NhbWwub3JnIj5vcGFt
LWRldmVsQGxpc3RzLm9jYW1sLm9yZzwvYT48YnI+DQo8YSBocmVmPSJodHRwOi8vbGlzdHMub2Nh
bWwub3JnL2xpc3RpbmZvL29wYW0tZGV2ZWwiIHJlbD0ibm9yZWZlcnJlciIgdGFyZ2V0PSJfYmxh
bmsiPmh0dHA6Ly9saXN0cy5vY2FtbC5vcmcvbGlzdGluZm8vb3BhbS1kZXZlbDwvYT48YnI+DQo8
L2Jsb2NrcXVvdGU+DQo8L2Rpdj4NCjxicj4NCjwvZGl2Pg0KPC9kaXY+DQo8L2Jsb2NrcXVvdGU+
DQo8L2Rpdj4NCjwvYm9keT4NCjwvaHRtbD4NCg==

--_000_9752EA39D1F34E67BDDE8FBB20BAE651metastackcom_--

From jonathan.protzenko@gmail.com  Tue Sep 15 18:09:59 2015
Return-Path: <jonathan.protzenko@gmail.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 1FDB93C366
 for <wg-windows@lists.ocaml.org>; Tue, 15 Sep 2015 18:09:59 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1702870 
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (jonathan.protzenko[at]gmail.com)
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [209.85.220.41 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mail-pa0-f41.google.com ([209.85.220.41]:34244)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES128-GCM-SHA256:128)
 id 1Zbtue-0007cw-qw (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <jonathan.protzenko@gmail.com>); Tue, 15 Sep 2015 18:21:01 +0100
Received: by padhy16 with SMTP id hy16so182080369pad.1
 for <wg-windows@lists.ocaml.org>; Tue, 15 Sep 2015 10:20:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=to:from:subject:message-id:date:user-agent:mime-version
 :content-type:content-transfer-encoding;
 bh=RAcvx+4iI4/iAu4yipQy5ulh2TSYxj8p6NIXioV9o7A=;
 b=TxF8rFAfNMm3ucpq/f75t0MHgite3cOklcfnMNz5ZW7I5QGdwt3jkTOWM0ImyDGqQy
 IUJgSDrAihnpXIUOVuDzE1LsBEX8buMKW8qxlEzogW/N/0D/bGPen/FBWzoo9ZV6rcSU
 g6GamxUNFd3btfJY5PxjK/8TlMU+CnBkp+TXVMNhZukI6TUe/niZu7UP3gV2ApnOnOgn
 u1v9j2UoSm+vOPoofBOMmpbTMwD+jWbMPNRrn3PSxM22UBMbw2xlH/TpgQTJnkZiVEFI
 /AoedNU+PN17lrQ2PYw3QtWgdCxM2eQ0QU44S2s86loQcvNYeqMB4b8lESXkVrbpEEFU
 aNrw==
X-Received: by 10.68.65.3 with SMTP id t3mr49509587pbs.127.1442337658888;
 Tue, 15 Sep 2015 10:20:58 -0700 (PDT)
Received: from ?IPv6:2001:4898:d8:1001:3826:a534:667:d602?
 ([2001:4898:80e8:1::74a])
 by smtp.googlemail.com with ESMTPSA id fa1sm23166068pbb.35.2015.09.15.10.20.58
 for <wg-windows@lists.ocaml.org>
 (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Tue, 15 Sep 2015 10:20:58 -0700 (PDT)
To: wg-windows@lists.ocaml.org
From: Jonathan Protzenko <jonathan.protzenko@gmail.com>
Message-ID: <55F85378.7000008@gmail.com>
Date: Tue, 15 Sep 2015 10:20:56 -0700
User-Agent: Mozilla/5.0 (Windows NT 6.3; WOW64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
Subject: [wg-windows] Interim solution for OPAM on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Tue, 15 Sep 2015 17:09:59 -0000

Hi all,

David's email reminded me that I forgot to tell the world about this 
horrible hack that I did a while ago.

http://protz.github.io/ocaml-installer/ now offers an installer with 
OPAM. The toolchain is the usual one (native compilers / generating 
native windows programs / using mingw64 32-bit compilers). However, the 
installer now installs an "opam" program in c:\ocaml\bin. The opam 
program is a *cygwin 32-bit binary*, so it only works within a cygwin 
32-bit terminal. I got as far as doing "opam init" and "opam install 
a-whole-bunch-of-packages", including mezzo and all its dependencies, 
batteries, and a couple others.

All in all, I hope it'll provide a good enough interim solution until 
David finishes everything and I can, eventually, retire my installer :).

Caveats:
- there is a massive dependency on cygwin now as your build + opam 
environment;
- that won't help with "sophisticated" packages (e.g. openssl, lablgtk) 
because afaik, you still have to fight to install and compile the gtk / 
openssl libraries yourself on windows;
- I don't expect opam switch to work at all... it wouldn't make much 
sense anyhow.

Feedback is welcome.

Cheers,

Jonathan



From dra-news@metastack.com  Wed Sep 16 08:34:56 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-51.csi.cam.ac.uk (ppsw-51.csi.cam.ac.uk [131.111.8.151])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 6B8E03C078
 for <wg-windows@lists.ocaml.org>; Wed, 16 Sep 2015 08:34:56 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1703123 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.149.77 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail149077.authsmtp.com ([62.13.149.77]:19171)
 by ppsw-51.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtp id 1Zc7Pj-00079X-ZN (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Wed, 16 Sep 2015 08:46:00 +0100
Received: from mail-c235.authsmtp.com (mail-c235.authsmtp.com [62.13.128.235])
 by punt15.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8G7jwsl042298; 
 Wed, 16 Sep 2015 08:45:58 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8G7jrb0038229;
 Wed, 16 Sep 2015 08:45:54 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t8G7jrwk002758
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
 Wed, 16 Sep 2015 08:45:53 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0248.002; Wed, 16 Sep 2015 08:45:52 +0100
From: David Allsopp <dra-news@metastack.com>
To: Jonathan Protzenko <jonathan.protzenko@gmail.com>,
 "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Thread-Topic: [wg-windows] Interim solution for OPAM on Windows
Thread-Index: AQHQ79ry5GX/3IpNLkmzWHSxW8Gkjp4+xcoA
Date: Wed, 16 Sep 2015 07:45:50 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9E9E97524@Remus.metastack.local>
References: <55F85378.7000008@gmail.com>
In-Reply-To: <55F85378.7000008@gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.0.18]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: f5a88f67-5c46-11e5-b399-002590a15da7
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgASJgRCAmpU Q3kJW1VRQF15U2dw YQ9VIwdcYVRPXwB0 UklLXFNTEBpqBAMB
 SFoWJR4oNVdGeH14 Z0RrEHVTXEY0I0Ms SkYCE2obYDRkbn0e URVdalFXeQpXfh9H
 b1l/BXIINTQAKBgV TUcAID90IjRZJCNK WTRFDFQOTFwKG3Yn QBQfATQoGwULQD97
 CCQPDxYbGg4uM0M+ NkQ6Mf9/
X-Authentic-SMTP: 61633634383431.1023:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: Re: [wg-windows] Interim solution for OPAM on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 16 Sep 2015 07:34:56 -0000

Jonathan Protzenko wrote:
> David's email reminded me that I forgot to tell the world about this
> horrible hack that I did a while ago.
>=20
> http://protz.github.io/ocaml-installer/ now offers an installer with OPAM=
.
> The toolchain is the usual one (native compilers / generating native
> windows programs / using mingw64 32-bit compilers). However, the installe=
r
> now installs an "opam" program in c:\ocaml\bin. The opam program is a
> *cygwin 32-bit binary*, so it only works within a cygwin 32-bit terminal.
> I got as far as doing "opam init" and "opam install a-whole-bunch-of-
> packages", including mezzo and all its dependencies, batteries, and a
> couple others.
>=20
> All in all, I hope it'll provide a good enough interim solution until
> David finishes everything and I can, eventually, retire my installer :).

It's not (necessarily) the case that the installer would want retiring (but=
 it may well change shape, especially where installing Cygwin is concerned)=
. OPAM expects the system already to have an OCaml compiler (usually instal=
led by the operating system's package manager) - one of the minor changes I=
 have yet to make is to relax this requirement for OPAM on Windows, as it i=
s less reasonable.

However, the existence of the "system" switch means I was imagining that th=
ere would still want to be an installer which installs OCaml (and OPAM) "fo=
r all users". Apart from anything else, it would improve the first-time OCa=
ml user's experience as installing OPAM on a system without OCaml must nece=
ssarily add a 10 minute or so delay while OPAM builds OCaml.


David

From misterherr@freenet.de  Wed Sep 16 09:41:39 2015
Return-Path: <misterherr@freenet.de>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id D69963C0DF
 for <wg-windows@lists.ocaml.org>; Wed, 16 Sep 2015 09:41:39 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1703123 
 *  0.0 FREEMAIL_FROM Sender email is commonly abused enduser mail provider
 *       (misterherr[at]freenet.de)
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [195.4.92.91 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mout1.freenet.de ([195.4.92.91]:45561)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256)
 id 1Zc8SJ-0001xG-RW (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <misterherr@freenet.de>); Wed, 16 Sep 2015 09:52:44 +0100
Received: from [195.4.92.140] (helo=mjail0.freenet.de)
 by mout1.freenet.de with esmtpa (ID misterherr@freenet.de) (port 25) (Exim
 4.85 #1) id 1Zc8SJ-0000gV-1x
 for wg-windows@lists.ocaml.org; Wed, 16 Sep 2015 10:52:43 +0200
Received: from localhost ([::1]:58232 helo=mjail0.freenet.de)
 by mjail0.freenet.de with esmtpa (ID misterherr@freenet.de) (Exim 4.85 #1)
 id 1Zc8SI-0004Dw-VP
 for wg-windows@lists.ocaml.org; Wed, 16 Sep 2015 10:52:43 +0200
Received: from mx17.freenet.de ([195.4.92.27]:47404)
 by mjail0.freenet.de with esmtpa (ID misterherr@freenet.de) (Exim 4.85 #1)
 id 1Zc8P3-0000bZ-BH
 for wg-windows@lists.ocaml.org; Wed, 16 Sep 2015 10:49:21 +0200
Received: from cl-252.ham-02.de.sixxs.net ([2001:6f8:1c00:fb::2]:60366)
 by mx17.freenet.de with esmtpsa (ID misterherr@freenet.de)
 (TLSv1.2:DHE-RSA-AES128-SHA:128) (port 465) (Exim 4.85 #1)
 id 1Zc8P3-00067c-5C
 for wg-windows@lists.ocaml.org; Wed, 16 Sep 2015 10:49:21 +0200
To: wg-windows@lists.ocaml.org
References: <55F85378.7000008@gmail.com>
 <E51C5B015DBD1348A1D85763337FB6D9E9E97524@Remus.metastack.local>
From: "Mr. Herr" <misterherr@freenet.de>
Message-ID: <55F92D10.7090706@freenet.de>
Date: Wed, 16 Sep 2015 10:49:20 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.2.0
MIME-Version: 1.0
In-Reply-To: <E51C5B015DBD1348A1D85763337FB6D9E9E97524@Remus.metastack.local>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Originated-At: 2001:6f8:1c00:fb::2!60366
Subject: Re: [wg-windows] Interim solution for OPAM on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 16 Sep 2015 08:41:39 -0000



On 16.09.2015 09:45, David Allsopp wrote:
> Jonathan Protzenko wrote:
>> David's email reminded me that I forgot to tell the world about this
>> horrible hack that I did a while ago.
>>
>> http://protz.github.io/ocaml-installer/ now offers an installer with OPAM.
>> The toolchain is the usual one (native compilers / generating native
>> windows programs / using mingw64 32-bit compilers). However, the installer
>> now installs an "opam" program in c:\ocaml\bin. The opam program is a
>> *cygwin 32-bit binary*, so it only works within a cygwin 32-bit terminal.
>> I got as far as doing "opam init" and "opam install a-whole-bunch-of-
>> packages", including mezzo and all its dependencies, batteries, and a
>> couple others.
>>
>> All in all, I hope it'll provide a good enough interim solution until
>> David finishes everything and I can, eventually, retire my installer :).
> It's not (necessarily) the case that the installer would want retiring (but it may well change shape, especially where installing Cygwin is concerned). OPAM expects the system already to have an OCaml compiler (usually installed by the operating system's package manager) - one of the minor changes I have yet to make is to relax this requirement for OPAM on Windows, as it is less reasonable.

Opam has an ocaml-less install procedure, see list "ocaml_beginners"::[] Conflicting 
installation advice" 16.08.2015 14:09 CEST,
and http://opam.ocaml.org/doc/Install.html "Binary Installer".

> However, the existence of the "system" switch means I was imagining that there would still want to be an installer which installs OCaml (and OPAM) "for all users". Apart from anything else, it would improve the first-time OCaml user's experience as installing OPAM on a system without OCaml must necessarily add a 10 minute or so delay while OPAM builds OCaml.
>

There is no system distribution in Windows, right? So opam must do it, and it does it 
well on *nix.

With all the progress opam has made and brought, a general scripting setup like perl 
/ tcl / python is still
lacking IMO, it would make ocaml more accessible for ad hoc scripting.

Yes, I know, the seasoned admin has his hand knitted solution...

/Str.



From dra-news@metastack.com  Wed Sep 16 09:57:36 2015
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 976453C0DF
 for <wg-windows@lists.ocaml.org>; Wed, 16 Sep 2015 09:57:36 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1703123 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.149.55 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail149055.authsmtp.co.uk ([62.13.149.55]:53914)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtp id 1Zc8hk-00014c-k2 (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Wed, 16 Sep 2015 10:08:40 +0100
Received: from mail-c235.authsmtp.com (mail-c235.authsmtp.com [62.13.128.235])
 by punt17.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8G98cvP091893; 
 Wed, 16 Sep 2015 10:08:38 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id t8G98aO9000775;
 Wed, 16 Sep 2015 10:08:36 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id t8G98Zb3003340
 (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
 Wed, 16 Sep 2015 10:08:35 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0248.002; Wed, 16 Sep 2015 10:08:35 +0100
From: David Allsopp <dra-news@metastack.com>
To: "Mr. Herr" <misterherr@freenet.de>, "wg-windows@lists.ocaml.org"
 <wg-windows@lists.ocaml.org>
Thread-Topic: [wg-windows] Interim solution for OPAM on Windows
Thread-Index: AQHQ79ry5GX/3IpNLkmzWHSxW8Gkjp4+xcoAgAAC5ACAABSqYA==
Date: Wed, 16 Sep 2015 09:08:34 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9E9E98886@Remus.metastack.local>
References: <55F85378.7000008@gmail.com>
 <E51C5B015DBD1348A1D85763337FB6D9E9E97524@Remus.metastack.local>
 <55F92D10.7090706@freenet.de>
In-Reply-To: <55F92D10.7090706@freenet.de>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.0.18]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: 838ee8a9-5c52-11e5-b399-002590a15da7
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgASJgRCAmpU Q3kJW1VRQFxxU2N9 YQlXIwdcYVRPXwB0 UklLXFNTEBpqBAMB
 SFoWJRB6JnpPeH5w YkFnEHhbW0Y0fUV1 FxtcRGQbYDRlan0e URVdalFXeQpXfh9H
 b1l/BXIINTQAKBgV TUcAID90IjRZJCNK WTRFDFQOTFwKG3Yn QBQfATQoGwULQD97
 CCQPDxYbGg4uM0M+ NkQ6Mf9/
X-Authentic-SMTP: 61633634383431.1023:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: Re: [wg-windows] Interim solution for OPAM on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 16 Sep 2015 08:57:36 -0000

Mr. Herr wrote:
> On 16.09.2015 09:45, David Allsopp wrote:
> > Jonathan Protzenko wrote:
> >> David's email reminded me that I forgot to tell the world about this
> >> horrible hack that I did a while ago.
> >>
> >> http://protz.github.io/ocaml-installer/ now offers an installer with
> OPAM.
> >> The toolchain is the usual one (native compilers / generating native
> >> windows programs / using mingw64 32-bit compilers). However, the
> >> installer now installs an "opam" program in c:\ocaml\bin. The opam
> >> program is a *cygwin 32-bit binary*, so it only works within a cygwin
> 32-bit terminal.
> >> I got as far as doing "opam init" and "opam install a-whole-bunch-of-
> >> packages", including mezzo and all its dependencies, batteries, and a
> >> couple others.
> >>
> >> All in all, I hope it'll provide a good enough interim solution until
> >> David finishes everything and I can, eventually, retire my installer
> :).
> > It's not (necessarily) the case that the installer would want retiring
> (but it may well change shape, especially where installing Cygwin is
> concerned). OPAM expects the system already to have an OCaml compiler
> (usually installed by the operating system's package manager) - one of th=
e
> minor changes I have yet to make is to relax this requirement for OPAM on
> Windows, as it is less reasonable.
>=20
> Opam has an ocaml-less install procedure, see list "ocaml_beginners"::[]
> Conflicting installation advice" 16.08.2015 14:09 CEST, and
> http://opam.ocaml.org/doc/Install.html "Binary Installer".

I'm aware of that - however, if you forget to specify --comp, I'm fairly ce=
rtain you get an exception at the moment (it certainly did when I last look=
ed)...

> > However, the existence of the "system" switch means I was imagining tha=
t
> there would still want to be an installer which installs OCaml (and OPAM)
> "for all users". Apart from anything else, it would improve the first-tim=
e
> OCaml user's experience as installing OPAM on a system without OCaml must
> necessarily add a 10 minute or so delay while OPAM builds OCaml.
> >
>=20
> There is no system distribution in Windows, right? So opam must do it, an=
d
> it does it well on *nix.

Yes there is - anything you install at a system level (i.e. for all users) =
is the "system distribution". That said, "system", as far as OPAM is concer=
ned, simply means an OCaml compiler that it found in PATH.

> With all the progress opam has made and brought, a general scripting setu=
p
> like perl / tcl / python is still lacking IMO, it would make ocaml more
> accessible for ad hoc scripting.

I'm not sure what you mean here?


David=20

From anil@recoil.org  Wed Sep 30 15:50:02 2015
Return-Path: <anil@recoil.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-50.csi.cam.ac.uk (ppsw-50.csi.cam.ac.uk [131.111.8.150])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 628FA3C366
 for <wg-windows@lists.ocaml.org>; Wed, 30 Sep 2015 15:50:02 +0100 (BST)
X-Cam-SpamDetails: score 0.6 from SpamAssassin-3.3.2-1705815 
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 *  0.6 URIBL_SBL Contains an URL's NS IP listed in the SBL blocklist
 *      [URIs: setup.ml]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from bark.recoil.org ([5.153.225.51]:23054)
 by ppsw-50.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256)
 id 1ZhItG-0008Me-qv (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <anil@recoil.org>); Wed, 30 Sep 2015 16:01:55 +0100
Received: from dhcp-172-17-169-28.eduroam.wireless.private.cam.ac.uk
 (global-184-27.nat-1.net.cam.ac.uk [131.111.184.27])
 by bark.recoil.org (OpenSMTPD) with ESMTPSA id 4c85379f
 TLS version=TLSv1/SSLv3 cipher=ECDHE-RSA-AES256-SHA bits=256 verify=NO
 for <wg-windows@lists.ocaml.org>;
 Wed, 30 Sep 2015 16:01:53 +0100 (BST)
From: Anil Madhavapeddy <anil@recoil.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Wed, 30 Sep 2015 16:01:57 +0100
References: <CAAoLEWsQK7=qER66Uixx5pq4wLExXovrQWM6b69_fyMmjYFiZA@mail.gmail.com>
To: wg-windows@lists.ocaml.org
Message-Id: <A2D3FCEF-C290-4371-BA08-791ABF7FC9BE@recoil.org>
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
X-Mailer: Apple Mail (2.2104)
Subject: [wg-windows] Fwd: [Caml-list] User Report: Cygwin32 OPAM for MinGW
	OCaml 64
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 30 Sep 2015 14:50:02 -0000



> Begin forwarded message:
> 
> From: Jun Furuse <jun.furuse@gmail.com>
> Subject: [Caml-list] User Report: Cygwin32 OPAM for MinGW OCaml 64
> Date: 30 September 2015 16:00:04 BST
> To: caml-list <caml-list@inria.fr>
> Reply-To: Jun Furuse <jun.furuse@gmail.com>
> 
> Hi List,
> 
> I have played a bit with Cygwin OPAM to install packages for MinGW
> 64bit OCaml system, and finally got succeeded to install core_kernel
> by `opam install core_kernel`.  It required several fixes of
> OCaml+OPAM configurations and patching to packages but now I think I
> got enough know-how and share it with the community.
> 
> To use Cygwin32 OPAM smoothly for MinGW64 OCaml you need:
> 
> * /usr/bin/ar of Cygwin32 did not work for MinGW OCaml 64. I had to
> use a special ar command for MinGW64.
> * Many build scripts assume Unix commands.  You need to add Cygwin's
> /bin directory to Windows PATH
> * global-config.config and system.comp must be fixed so that directory
> and paths can be understandable by MinGW OCaml, a Windows app
> 
> Many packages can be installed without any modification to them.
> Therefore Cygwin OPAM is already very useful for MinGW OCaml package
> installation.  However, some packages required fixes and here are some
> tips:
> 
> * Use "mixed path" obtained by cygpath -m, so that the paths can be
> understandable both for Cygwin and for MinGW
> * Build systems like Oasis executes commands not using /bin/sh but
> cmd.exe in MinGW.  _oasis or setup.ml contains lots of Unix shell
> phrases like   mkdir $dir; build something  which are wrongly executed
> by cmd.exe.  You need to fix them so that they can be interpreted by
> sh, i.e.  sh -c "mkdir $dir; build something"
> * In Unix, files in xxx.install are ignored by OPAM when they are
> already installed by OPAM's install section.  However, in Cygwin, it
> sometimes fails.  It is due to Cygwin's special handling of files with
> .exe extension.  You need remove entries from xxx.install if they are
> installed by the install section.
> 
> I hope this information helps you.  More details or work log can be
> found here: https://bitbucket.org/camlspotter/opamingw
> 
> Enjoy OPAMinGW!
> Jun Furuse
> 
> -- 
> Caml-list mailing list.  Subscription management and archives:
> https://sympa.inria.fr/sympa/arc/caml-list
> Beginner's list: http://groups.yahoo.com/group/ocaml_beginners
> Bug reports: http://caml.inria.fr/bin/caml-bugs
> 


From gclow-wg-windows@m.gmane.org  Mon Nov  2 14:51:28 2015
Return-Path: <gclow-wg-windows@m.gmane.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 14EF83C203
 for <wg-windows@lists.ocaml.org>; Mon,  2 Nov 2015 14:51:28 +0000 (GMT)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1711726 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [80.91.229.3 listed in list.dnswl.dnsbl.ja.net]
 * -0.0 T_RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from plane.gmane.org ([80.91.229.3]:55813)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1ZtGfX-00070a-kk (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <gclow-wg-windows@m.gmane.org>); Mon, 02 Nov 2015 15:05:11 +0000
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from <gclow-wg-windows@m.gmane.org>) id 1ZtGfN-0003HU-GP
 for wg-windows@lists.ocaml.org; Mon, 02 Nov 2015 16:05:01 +0100
Received: from p548c903e.dip0.t-ipconnect.de ([84.140.144.62])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Mon, 02 Nov 2015 16:05:01 +0100
Received: from andreashauptmann by p548c903e.dip0.t-ipconnect.de with local
 (Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Mon, 02 Nov 2015 16:05:01 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: wg-windows@lists.ocaml.org
From: Andreas Hauptmann <andreashauptmann@t-online.de>
Date: Mon, 2 Nov 2015 16:04:51 +0100
Organization: -
Lines: 14
Message-ID: <n17u2j$kek$1@ger.gmane.org>
References: <CAAoLEWsQK7=qER66Uixx5pq4wLExXovrQWM6b69_fyMmjYFiZA@mail.gmail.com>
 <A2D3FCEF-C290-4371-BA08-791ABF7FC9BE@recoil.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: p548c903e.dip0.t-ipconnect.de
X-Archive: encrypt
Archive: no
Subject: Re: [wg-windows] [Caml-list] User Report: Cygwin32 OPAM for MinGW
	OCaml 64
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 02 Nov 2015 14:51:28 -0000

On Wed, 30 Sep 2015 16:01:57 +0100
Anil Madhavapeddy wrote:
> > I hope this information helps you.  More details or work log can be
> > found here: https://bitbucket.org/camlspotter/opamingw

FYI: I've tried to create a native opam for mingw at the weekend.
With a few patches it already works well enough to install many
packages:

https://github.com/fdopen/opam-repository-mingw

(a fork of the repository above and links to opam/flexdll/aspcud
binaries to bootstrap ocaml)



From dra-news@metastack.com  Sun May 29 10:00:30 2016
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-42.csi.cam.ac.uk (ppsw-42.csi.cam.ac.uk [131.111.8.142])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 230F23C18E
 for <wg-windows@lists.ocaml.org>; Sun, 29 May 2016 10:00:30 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1743621 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.149.95 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail149095.authsmtp.com ([62.13.149.95]:55158)
 by ppsw-42.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtp id 1b6wyu-000T43-8r (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Sun, 29 May 2016 10:26:01 +0100
Received: from mail-c232.authsmtp.com (mail-c232.authsmtp.com [62.13.128.232])
 by punt24.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u4T9Q0SH053604
 for <wg-windows@lists.ocaml.org>;
 Sun, 29 May 2016 10:26:00 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u4T9PxHh076397
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
 for <wg-windows@lists.ocaml.org>; Sun, 29 May 2016 10:25:59 +0100 (BST)
Received: from Bug ([172.16.0.29]) (authenticated bits=0)
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id u4T9PwHl019668
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO)
 for <wg-windows@lists.ocaml.org>; Sun, 29 May 2016 10:25:58 +0100
From: "David Allsopp" <dra-news@metastack.com>
To: <wg-windows@lists.ocaml.org>
Date: Sun, 29 May 2016 10:25:58 +0100
Organization: MetaStack Solutions Ltd.
Message-ID: <001f01d1b98c$1c248350$546d89f0$@metastack.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 16.0
Thread-Index: AdG5iUxhSKHphCPXRIC/bfToR6eGUg==
Content-Language: en-gb
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: 5b040044-257f-11e6-829e-00151795d556
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNkUGEBtQ
 NEpdMUF7NFwHWUof XDVaBghKDx8mF2F8 dHcAJBpfYktITwRq WkpMSFdbWgdpAgIA
 BhsAUBhwaQRHfGFy YFljEDVfOE0aPT4l QklSFmQBK2VlamNR VRJYcwNUdAdXfBpC
 PE1+VSYLfG0Fby99 R1dqYmlubGhTdXkL VDsAKFUMQEAEViI8 SlglJRwKVVYUXDk+
 KlQ9NV8AF0ZZNUN6 DlonVVUHKHc8
X-Authentic-SMTP: 61633634383431.1037:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: [wg-windows] Removing the OPAM system switch on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Sun, 29 May 2016 09:00:30 -0000

My attempts to produce a full port of OPAM for native Windows continue, even
if out-paced by the progress of a snail! I'm at present implementing support
required for opam switch (bootstrapping/installing FlexDLL, etc.).

For anyone who hasn't had the pleasure of using OPAM yet, by default OPAM
creates one compiler switch called "system" representing the OCaml compiler
already installed on your system (usually by your OS's package manager).
OPAM can install libraries for this switch, but it does not build a compiler
(because it's already there) and there's a certain amount of trickery
associated with things like ocamlfind (which may, or may not, be installed
using an OS package).

Given the lack of a single "official" way to install OCaml on Windows, and
the fact that several organisations already have home-grown methods to have
multiple compiler installations co-existing, I'm wondering in the Windows
case if the "system" switch is far more effort than it's worth. My feeling
is that it would be better for opam init to switch to the latest version of
OCaml. So, at present, that would mean opam init were equivalent to opam
init --bare && opam switch 4.03.0. OPAM would never pay any attention to or
alter an installed system compiler, flexlink, etc. A keen user could choose
to install the system switch by manually creating it and installing the
ocaml.system package as its root.

Does anyone have any thoughts and/or opinions on why having the system
switch would be useful for native Windows too? It makes sense to keep it for
the Cygwin build of OPAM (naturally, since Cygwin has an OCaml package). The
only downside I can see at the moment is the delay it adds to opam init,
because building the compiler takes a while. 


David


From louis.gesbert@ocamlpro.com  Mon May 30 10:52:13 2016
Return-Path: <louis.gesbert@ocamlpro.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-42.csi.cam.ac.uk (ppsw-42.csi.cam.ac.uk [131.111.8.142])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 1EFB23C32C
 for <wg-windows@lists.ocaml.org>; Mon, 30 May 2016 10:52:13 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1743621
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from antislash.info ([37.187.244.36]:33104 helo=vps119294.ovh.net)
 by ppsw-42.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtps (TLSv1.2:ECDHE-RSA-AES256-GCM-SHA384:256)
 id 1b7KGZ-0003NZ-6W (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <louis.gesbert@ocamlpro.com>); Mon, 30 May 2016 11:17:47 +0100
From: Louis Gesbert <louis.gesbert@ocamlpro.com>
To: wg-windows@lists.ocaml.org
Date: Mon, 30 May 2016 12:17:44 +0200
Message-ID: <4608005.8tPCLeiKKn@maitake>
Organization: OCamlPro
In-Reply-To: <001f01d1b98c$1c248350$546d89f0$@metastack.com>
References: <001f01d1b98c$1c248350$546d89f0$@metastack.com>
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"
Subject: Re: [wg-windows] Removing the OPAM system switch on Windows
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Mon, 30 May 2016 09:52:13 -0000

Le dimanche 29 mai 2016, 10:25:58 David Allsopp a =E9crit :
>  I'm wondering in the Windows case if the "system" switch is far more=
 effort=20
than it's worth. My feeling is that it would be better for opam init to=
 switch=20
to the latest version of OCaml.

We are actually having the same question on Linux at the moment (due to=
 the=20
conflicting constraints "we don't want specific OCaml detection code in=
 opam"=20
and "we don't want dynamic packages"), and might fall back to having on=
e pre-
defined "system" compiler per OCaml version, defined in the repository,=
 and=20
that you need to select manually (like for e.g. llvm). The current alph=
a=20
provides a semi-dynamic `ocaml.system` package defined in its repositor=
y, that=20
polls the system; but this has some drawbacks, mainly due to the fact t=
hat the=20
variable `ocaml-version` (i.e. `4.03.0`) can't be known in advance and =
is=20
different from the version of the `ocaml` package (i.e. `system`), so w=
e can't=20
properly resolve full installations including the compiler.

>  So, at present, that would mean opam init were equivalent to opam
> init --bare && opam switch 4.03.0. OPAM would never pay any attention=
 to or
> alter an installed system compiler, flexlink, etc.

Or just `opam init --compiler=3Docaml.4.03.0` ;  a discussion is ongoin=
g to make=20
that the default on Linux too, see once again the issue discussion at=20=

https://github.com/ocaml/opam/issues/2537

From Andre.OLIVEIRAMARONEZE@cea.fr  Wed Jul  6 19:18:00 2016
Return-Path: <Andre.OLIVEIRAMARONEZE@cea.fr>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-31.csi.cam.ac.uk (ppsw-31.csi.cam.ac.uk [131.111.8.131])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id D1E7B3C337
 for <wg-windows@lists.ocaml.org>; Wed,  6 Jul 2016 19:18:00 +0100 (BST)
X-Cam-SpamDetails: score -6.3 from SpamAssassin-3.3.2-1750237 
 * -5.0 RCVD_IN_DNSWL_HI RBL: Sender listed at http://www.dnswl.org/, high
 *      trust
 *      [132.167.192.145 listed in list.dnswl.dnsbl.ja.net]
 * -1.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from sainfoin-out.extra.cea.fr ([132.167.192.145]:38280)
 by ppsw-31.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bKrpN-000IL3-MQ (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <Andre.OLIVEIRAMARONEZE@cea.fr>); Wed, 06 Jul 2016 19:45:42 +0100
Received: from pisaure.intra.cea.fr (pisaure.intra.cea.fr [132.166.88.21])
 by sainfoin.extra.cea.fr (8.15.2/8.15.2/CEAnet-Internet-out-2.4) with ESMTP id
 u66Ijfb3019116
 for <wg-windows@lists.ocaml.org>; Wed, 6 Jul 2016 20:45:41 +0200
Received: from pisaure.intra.cea.fr (localhost [127.0.0.1])
 by localhost (Postfix) with SMTP id 28280201C62
 for <wg-windows@lists.ocaml.org>; Wed,  6 Jul 2016 20:46:52 +0200 (CEST)
Received: from muguet2.intra.cea.fr (muguet2.intra.cea.fr [132.166.192.7])
 by pisaure.intra.cea.fr (Postfix) with ESMTP id 1DECE200E14
 for <wg-windows@lists.ocaml.org>; Wed,  6 Jul 2016 20:46:52 +0200 (CEST)
Received: from [10.8.32.73] (is152242.intra.cea.fr [10.8.32.73])
 by muguet2.intra.cea.fr (8.15.2/8.15.2/CEAnet-Intranet-out-1.4) with ESMTP id
 u66Ijf2M006896
 for <wg-windows@lists.ocaml.org>; Wed, 6 Jul 2016 20:45:41 +0200
From: Andre Maroneze <Andre.OLIVEIRAMARONEZE@cea.fr>
To: wg-windows@lists.ocaml.org
Message-ID: <577D51D5.8070607@cea.fr>
Date: Wed, 6 Jul 2016 20:45:41 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.8.0
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
Subject: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 06 Jul 2016 18:18:00 -0000

I've been successfully using Andreas Hauptmann's MinGW OPAM repository 
to install somewhat tricky OPAM packages, such as Frama-C, using Cygwin 
and the MinGW-based OCaml provided with it.

However, a constant problem that I have (due to the package itself) is 
Windows' limit of 8k (or 32k, according to the application) characters 
in the command line, which results in the error "input line is too long".

That limit means that, if I compile my package (frama-c) using a short 
path (e.g. C:\Ocaml32\user\frama-c), everything works (thanks to 
Andreas' patches). However, if I try a longer path (at least 60 
characters), there are several calls to "ocamlfind ocamlopt" in my 
Makefile that fail with "input line is too long".

Most of these command lines have less than 6000 characters, which is 
below both limits. Furthermore, I am able to run simple commands such as 
"ocamlfind ocamlopt t1.ml t2.ml t3.ml ...", with up to 32k characters, 
without hitting any limits. But my actual command line is much shorter, 
yet it triggers this error, most certainly due to the flags it uses. 
This makes me think that it may be some internal command executed by 
ocamlfind or ocamlopt that is triggering the limit, e.g. after expanding 
some arguments, but I don't how to get Windows or Cygwin to give me more 
detailed information about this error.

The only hint I've got so far is that the "-shared" flag in my command 
line contributes significantly to the error: I can either trim my 
command to less than 4000 characters while keeping -shared and still 
have the error, or I can keep it over 5000 characters and remove 
"-shared", and the command line parsing error disappears (but then 
ocamlopt does not produce what I need, so this is not a solution).

Has someone else also encountered this problem when compiling on Windows 
with a MinGW-based OCaml? Suggestions on how to avoid it are welcome, 
preferably that do not require modifying the entire compilation process.

(I've tried a few hacks, such as using Python's subprocess module to 
pass the arguments as a list instead of a string, but it didn't work.)

For information, I'm using OCaml 4.02.3+mingw32 on a Windows 8.1.

-- 
André Maroneze
Ingénieur-chercheur CEA/LIST
Laboratoire Sûreté et Sécurité des Logiciels


From gclow-wg-windows@m.gmane.org  Wed Jul  6 20:33:24 2016
Return-Path: <gclow-wg-windows@m.gmane.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-31.csi.cam.ac.uk (ppsw-31.csi.cam.ac.uk [131.111.8.131])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 3542B3C337
 for <wg-windows@lists.ocaml.org>; Wed,  6 Jul 2016 20:33:24 +0100 (BST)
X-Cam-SpamDetails: score -2.0 from SpamAssassin-3.3.2-1750237 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [80.91.229.3 listed in list.dnswl.dnsbl.ja.net]
 * -1.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from plane.gmane.org ([80.91.229.3]:56017)
 by ppsw-31.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bKt0L-000xLf-KS (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <gclow-wg-windows@m.gmane.org>); Wed, 06 Jul 2016 21:01:05 +0100
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from <gclow-wg-windows@m.gmane.org>) id 1bKt0G-0004D1-2c
 for wg-windows@lists.ocaml.org; Wed, 06 Jul 2016 22:01:00 +0200
Received: from p548c8d42.dip0.t-ipconnect.de ([84.140.141.66])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Wed, 06 Jul 2016 22:01:00 +0200
Received: from andreashauptmann by p548c8d42.dip0.t-ipconnect.de with local
 (Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Wed, 06 Jul 2016 22:01:00 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: wg-windows@lists.ocaml.org
From: Andreas Hauptmann <andreashauptmann@t-online.de>
Date: Wed, 6 Jul 2016 22:00:48 +0200
Organization: -
Lines: 22
Message-ID: <nljo1h$u8f$1@ger.gmane.org>
References: <577D51D5.8070607@cea.fr>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: p548c8d42.dip0.t-ipconnect.de
In-Reply-To: <577D51D5.8070607@cea.fr>
X-Archive: encrypt
Archive: no
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Wed, 06 Jul 2016 19:33:24 -0000

Hi,

On Wed, 6 Jul 2016 20:45:41 +0200
Andre Maroneze wrote:
> Has someone else also encountered this problem when compiling on
> Windows with a MinGW-based OCaml?

It's probably not your own command, that is too long, but a command
that is internally created by flexlink (or ocamlopt)
(See for example: https://github.com/alainfrisch/flexdll/issues/7 )

Compile it with:

export FLEXLINKFLAGS='-v -v -v'
export OCAMLPARAM='_,verbose=1'
ocamlfind ocamlopt ...

then ocamlopt/ocamlc should print, which external commands they call to
stderr. And flexlink will also print some debug output.
With this information we can hopefully locate the point at which the
wrong command is generated.



From Andre.OLIVEIRAMARONEZE@cea.fr  Thu Jul  7 07:50:26 2016
Return-Path: <Andre.OLIVEIRAMARONEZE@cea.fr>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-31.csi.cam.ac.uk (ppsw-31.csi.cam.ac.uk [131.111.8.131])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id BB53C3C2F7
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 07:50:26 +0100 (BST)
X-Cam-SpamDetails: score -6.3 from SpamAssassin-3.3.2-1750237 
 * -5.0 RCVD_IN_DNSWL_HI RBL: Sender listed at http://www.dnswl.org/, high
 *      trust
 *      [132.167.192.142 listed in list.dnswl.dnsbl.ja.net]
 * -1.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from cirse-out.extra.cea.fr ([132.167.192.142]:57191)
 by ppsw-31.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bL3ZZ-000B4l-Kb (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <Andre.OLIVEIRAMARONEZE@cea.fr>); Thu, 07 Jul 2016 08:18:10 +0100
Received: from pisaure.intra.cea.fr (pisaure.intra.cea.fr [132.166.88.21])
 by cirse.extra.cea.fr (8.15.2/8.15.2/CEAnet-Internet-out-2.4) with ESMTP id
 u677I9eH024622
 for <wg-windows@lists.ocaml.org>; Thu, 7 Jul 2016 09:18:09 +0200
Received: from pisaure.intra.cea.fr (localhost [127.0.0.1])
 by localhost (Postfix) with SMTP id F1511203AEF
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 09:18:08 +0200 (CEST)
Received: from muguet1.intra.cea.fr (muguet1.intra.cea.fr [132.166.192.6])
 by pisaure.intra.cea.fr (Postfix) with ESMTP id E80A8200C4C
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 09:18:08 +0200 (CEST)
Received: from [10.8.32.73] (is152242.intra.cea.fr [10.8.32.73])
 by muguet1.intra.cea.fr (8.15.2/8.15.2/CEAnet-Intranet-out-1.4) with ESMTP id
 u677I80s022179
 for <wg-windows@lists.ocaml.org>; Thu, 7 Jul 2016 09:18:08 +0200
To: wg-windows@lists.ocaml.org
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
From: Andre Maroneze <Andre.OLIVEIRAMARONEZE@cea.fr>
Message-ID: <577E0231.6010705@cea.fr>
Date: Thu, 7 Jul 2016 09:18:09 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.8.0
MIME-Version: 1.0
In-Reply-To: <nljo1h$u8f$1@ger.gmane.org>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 06:50:26 -0000

Thanks, using those flags it shows useful information:

- A call to i686-w64-mingw32-as, with a short command line, that succeeds;
- A call to flexlink, also with a short command line, using a response 
file (@C:\cygwin32\tmp\camlresp0050ba);
- And then several lines:

** Use cygpath: true
** Search path: .... (lots of directories, one per line)
** Default libraries: ... (some -l<lib> followed by corresponding lines 
"** open: .../lib/<lib>.a")
+ i686-w64-mingw32-gcc -mconsole -shared -Wl,-e_FlexDLLiniter@12  ... 
(lots of -I and -L, plus some extra flags, and this line is slightly 
larger than 8k characters)
La ligne de commande est trop longue.
** Fatal error: Error during linking

So it's that call to i686-w64-mingw32-gcc that fails. Is there a way to 
use a response file for that command as well?


Regards,


On 07/06/2016 10:00 PM, Andreas Hauptmann wrote:
> Hi,
>
> On Wed, 6 Jul 2016 20:45:41 +0200
> Andre Maroneze wrote:
>> Has someone else also encountered this problem when compiling on
>> Windows with a MinGW-based OCaml?
> It's probably not your own command, that is too long, but a command
> that is internally created by flexlink (or ocamlopt)
> (See for example: https://github.com/alainfrisch/flexdll/issues/7 )
>
> Compile it with:
>
> export FLEXLINKFLAGS='-v -v -v'
> export OCAMLPARAM='_,verbose=1'
> ocamlfind ocamlopt ...
>
> then ocamlopt/ocamlc should print, which external commands they call to
> stderr. And flexlink will also print some debug output.
> With this information we can hopefully locate the point at which the
> wrong command is generated.
>
>
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows

-- 
Andr Maroneze
Ingnieur-chercheur CEA/LIST
Laboratoire Sret et Scurit des Logiciels


From dra-news@metastack.com  Thu Jul  7 10:54:50 2016
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-31.csi.cam.ac.uk (ppsw-31.csi.cam.ac.uk [131.111.8.131])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id A864B3C0B8
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 10:54:50 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1750237 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.99 listed in list.dnswl.dnsbl.ja.net]
 *  0.0 HTML_MESSAGE BODY: HTML included in message
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148099.authsmtp.net ([62.13.148.99]:23575)
 by ppsw-31.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtp id 1bL6S1-000MXb-LW (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Thu, 07 Jul 2016 11:22:34 +0100
Received: from mail-c247.authsmtp.com (mail-c247.authsmtp.com [62.13.128.247])
 by punt22.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u67AMRZg038730; 
 Thu, 7 Jul 2016 11:22:27 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u67AMQgj005586
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
 Thu, 7 Jul 2016 11:22:27 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id u67AMPJR001781
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO);
 Thu, 7 Jul 2016 11:22:25 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0279.002; Thu, 7 Jul 2016 11:22:25 +0100
From: David Allsopp <dra-news@metastack.com>
To: Andre Maroneze <andre.oliveiramaroneze@cea.fr>,
 "wg-windows@lists.ocaml.org" <wg-windows@lists.ocaml.org>
Thread-Topic: [wg-windows] mingw, ocamlopt and "input line is too long"
Thread-Index: AQHR17amUw4l2nJdGE+lhG8JOw8wwqALwfwAgAC9QICAAEQ/6w==
Date: Thu, 7 Jul 2016 10:22:24 +0000
Message-ID: <61F93E417BAD022A.187EDB2B-9865-4D21-B5CE-1A64AF2ABD9F@mail.outlook.com>
References: <577D51D5.8070607@cea.fr>
 <nljo1h$u8f$1@ger.gmane.org>,<577E0231.6010705@cea.fr>
In-Reply-To: <577E0231.6010705@cea.fr>
Accept-Language: en-GB, en-US
Content-Language: en-GB
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-Type: multipart/alternative;
 boundary="_000_61F93E417BAD022A187EDB2B98654D21B5CE1A64AF2ABD9Fmailout_"
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: b4121d31-442c-11e6-bcde-0015176ca198
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgASJgVDAnNE X3kJW1VSQFxwU2F3 YQhWIwdcYVRPXwB0 UklLXFNTEBpqBAMA
 SFsYVWgPFlIceH51 YE5kEHFeW0R4OxR5 Q0xVQW4HeGNkajMC UUENcR4GI1cfYx9F
 a1V+U3VeMGQObjQC El17DC8+eCpeLihS XRo4ZVcTR0kUWnY7 TBkHGTI3AQUMQSl7
 ZR0gMkMAVEIQNEh6 MEBpRVUfexsVDAIU dwAA
X-Authentic-SMTP: 61633634383431.1038:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 09:54:50 -0000

--_000_61F93E417BAD022A187EDB2B98654D21B5CE1A64AF2ABD9Fmailout_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Cygwin executables support @response files when invoked by a native process=
 (it's not relevant when they're invoked by q Cygwin process, as the limit =
doesn't exist).

I thought flexlink could already do this, but it's not a major patch to fle=
xlink if it can't.


David





On Thu, Jul 7, 2016 at 8:18 AM +0100, "Andre Maroneze" <Andre.OLIVEIRAMARON=
EZE@cea.fr<mailto:Andre.OLIVEIRAMARONEZE@cea.fr>> wrote:

Thanks, using those flags it shows useful information:

- A call to i686-w64-mingw32-as, with a short command line, that succeeds;
- A call to flexlink, also with a short command line, using a response
file (@C:\cygwin32\tmp\camlresp0050ba);
- And then several lines:

** Use cygpath: true
** Search path: .... (lots of directories, one per line)
** Default libraries: ... (some -l<lib> followed by corresponding lines
"** open: .../lib/<lib>.a")
+ i686-w64-mingw32-gcc -mconsole -shared -Wl,-e_FlexDLLiniter@12  ...
(lots of -I and -L, plus some extra flags, and this line is slightly
larger than 8k characters)
La ligne de commande est trop longue.
** Fatal error: Error during linking

So it's that call to i686-w64-mingw32-gcc that fails. Is there a way to
use a response file for that command as well?


Regards,


On 07/06/2016 10:00 PM, Andreas Hauptmann wrote:
> Hi,
>
> On Wed, 6 Jul 2016 20:45:41 +0200
> Andre Maroneze wrote:
>> Has someone else also encountered this problem when compiling on
>> Windows with a MinGW-based OCaml?
> It's probably not your own command, that is too long, but a command
> that is internally created by flexlink (or ocamlopt)
> (See for example: https://github.com/alainfrisch/flexdll/issues/7 )
>
> Compile it with:
>
> export FLEXLINKFLAGS=3D'-v -v -v'
> export OCAMLPARAM=3D'_,verbose=3D1'
> ocamlfind ocamlopt ...
>
> then ocamlopt/ocamlc should print, which external commands they call to
> stderr. And flexlink will also print some debug output.
> With this information we can hopefully locate the point at which the
> wrong command is generated.
>
>
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows

--
Andr=E9 Maroneze
Ing=E9nieur-chercheur CEA/LIST
Laboratoire S=FBret=E9 et S=E9curit=E9 des Logiciels

_______________________________________________
wg-windows mailing list
wg-windows@lists.ocaml.org
http://lists.ocaml.org/listinfo/wg-windows

--_000_61F93E417BAD022A187EDB2B98654D21B5CE1A64AF2ABD9Fmailout_
Content-Type: text/html; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

<html>
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3DWindows-1=
252">
<meta name=3D"Generator" content=3D"Microsoft Exchange Server">
<!-- converted from text --><style><!-- .EmailQuote { margin-left: 1pt; pad=
ding-left: 4pt; border-left: #800000 2px solid; } --></style>
</head>
<body>
<div>
<div>Cygwin executables support @response files when invoked by a native pr=
ocess (it's not relevant when they're invoked by q Cygwin process, as the l=
imit doesn't exist).</div>
<div><br>
</div>
<div>I thought flexlink could already do this, but it's not a major patch t=
o flexlink if it can't.</div>
<div><br>
</div>
<div><br>
</div>
<div>David<br>
<br>
<div class=3D"x_acompli_signature"></div>
<br>
</div>
<br>
<br>
<br>
<div class=3D"x_gmail_quote">On Thu, Jul 7, 2016 at 8:18 AM &#43;0100, &quo=
t;Andre Maroneze&quot;
<span dir=3D"ltr">&lt;<a href=3D"mailto:Andre.OLIVEIRAMARONEZE@cea.fr" targ=
et=3D"_blank">Andre.OLIVEIRAMARONEZE@cea.fr</a>&gt;</span> wrote:<br>
<br>
</div>
</div>
<font size=3D"2"><span style=3D"font-size:10pt;">
<div class=3D"PlainText">Thanks, using those flags it shows useful informat=
ion:<br>
<br>
- A call to i686-w64-mingw32-as, with a short command line, that succeeds;<=
br>
- A call to flexlink, also with a short command line, using a response <br>
file (@C:\cygwin32\tmp\camlresp0050ba);<br>
- And then several lines:<br>
<br>
** Use cygpath: true<br>
** Search path: .... (lots of directories, one per line)<br>
** Default libraries: ... (some -l&lt;lib&gt; followed by corresponding lin=
es <br>
&quot;** open: .../lib/&lt;lib&gt;.a&quot;)<br>
&#43; i686-w64-mingw32-gcc -mconsole -shared -Wl,-e_FlexDLLiniter@12&nbsp; =
... <br>
(lots of -I and -L, plus some extra flags, and this line is slightly <br>
larger than 8k characters)<br>
La ligne de commande est trop longue.<br>
** Fatal error: Error during linking<br>
<br>
So it's that call to i686-w64-mingw32-gcc that fails. Is there a way to <br=
>
use a response file for that command as well?<br>
<br>
<br>
Regards,<br>
<br>
<br>
On 07/06/2016 10:00 PM, Andreas Hauptmann wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; On Wed, 6 Jul 2016 20:45:41 &#43;0200<br>
&gt; Andre Maroneze wrote:<br>
&gt;&gt; Has someone else also encountered this problem when compiling on<b=
r>
&gt;&gt; Windows with a MinGW-based OCaml?<br>
&gt; It's probably not your own command, that is too long, but a command<br=
>
&gt; that is internally created by flexlink (or ocamlopt)<br>
&gt; (See for example: <a href=3D"https://github.com/alainfrisch/flexdll/is=
sues/7">https://github.com/alainfrisch/flexdll/issues/7</a> )<br>
&gt;<br>
&gt; Compile it with:<br>
&gt;<br>
&gt; export FLEXLINKFLAGS=3D'-v -v -v'<br>
&gt; export OCAMLPARAM=3D'_,verbose=3D1'<br>
&gt; ocamlfind ocamlopt ...<br>
&gt;<br>
&gt; then ocamlopt/ocamlc should print, which external commands they call t=
o<br>
&gt; stderr. And flexlink will also print some debug output.<br>
&gt; With this information we can hopefully locate the point at which the<b=
r>
&gt; wrong command is generated.<br>
&gt;<br>
&gt;<br>
&gt; _______________________________________________<br>
&gt; wg-windows mailing list<br>
&gt; wg-windows@lists.ocaml.org<br>
&gt; <a href=3D"http://lists.ocaml.org/listinfo/wg-windows">http://lists.oc=
aml.org/listinfo/wg-windows</a><br>
<br>
-- <br>
Andr=E9 Maroneze<br>
Ing=E9nieur-chercheur CEA/LIST<br>
Laboratoire S=FBret=E9 et S=E9curit=E9 des Logiciels<br>
<br>
_______________________________________________<br>
wg-windows mailing list<br>
wg-windows@lists.ocaml.org<br>
<a href=3D"http://lists.ocaml.org/listinfo/wg-windows">http://lists.ocaml.o=
rg/listinfo/wg-windows</a><br>
</div>
</span></font>
</body>
</html>

--_000_61F93E417BAD022A187EDB2B98654D21B5CE1A64AF2ABD9Fmailout_--

From gclow-wg-windows@m.gmane.org  Thu Jul  7 11:00:15 2016
Return-Path: <gclow-wg-windows@m.gmane.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 6F6CC3C0B8
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 11:00:15 +0100 (BST)
X-Cam-SpamDetails: score -2.0 from SpamAssassin-3.3.2-1750237 
 * -1.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [80.91.229.3 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from plane.gmane.org ([80.91.229.3]:50734)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bL6XG-0005Ag-Rv (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <gclow-wg-windows@m.gmane.org>); Thu, 07 Jul 2016 11:27:59 +0100
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from <gclow-wg-windows@m.gmane.org>) id 1bL6XE-0006Wj-8F
 for wg-windows@lists.ocaml.org; Thu, 07 Jul 2016 12:27:56 +0200
Received: from p548c8b5f.dip0.t-ipconnect.de ([84.140.139.95])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Thu, 07 Jul 2016 12:27:56 +0200
Received: from andreashauptmann by p548c8b5f.dip0.t-ipconnect.de with local
 (Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Thu, 07 Jul 2016 12:27:56 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: wg-windows@lists.ocaml.org
From: Andreas Hauptmann <andreashauptmann@t-online.de>
Date: Thu, 7 Jul 2016 12:27:46 +0200
Organization: -
Lines: 43
Message-ID: <nllar2$ugo$1@ger.gmane.org>
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: p548c8b5f.dip0.t-ipconnect.de
X-Archive: encrypt
Archive: no
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 10:00:15 -0000

On Thu, 7 Jul 2016 09:18:09 +0200
Andre Maroneze wrote:
> ** Use cygpath: true
> ** Search path: .... (lots of directories, one per line)
[....]
> (lots of -I and -L, plus some extra flags, and this line is slightly=20
> larger than 8k characters)
> La ligne de commande est trop longue.
> ** Fatal error: Error during linking
>=20
> So it's that call to i686-w64-mingw32-gcc that fails. Is there a way
> to use a response file for that command as well?

Ok, I think I've identified the problem. Flexlink already writes the
command to a file and execute this file with bash, if the command line
is too long. Since both bash and gcc are linked against cygwin-1.dll,
there aren't any limits beside your main memory (cygwin programs use
shared memory to pass command line arguments and environment variables
around, if they hit a limit imposed by windows).

However there are at least two problems:
- the decision to use bash or not is based on a gross estimation, not
the real command line length (It looks at your object files, not your
include directories)
- The wrong quote function is used to write the shell script
(Filename.quote quotes for cmd, not a unix shell,...)

Try:
https://www.dropbox.com/s/570bs4205llxqwt/flexlink32.exe
or
https://www.dropbox.com/s/ki1bvfdld27vlwb/flexlink64.exe

as replacement for your current flexlink.exe.=20

I=E2=80=99m not sure, if my guess (and patch) is correct. When I=E2=80=99ve=
 tried to
use a opam switch under a location with long filenames, I fail much
earlier because of the filename length limit of 260 - not because of
flexlink. (If you want to use more than 260 chars, you have to use the
unicode api and always use absolute paths =E2=80=93 of course no commonly u=
sed
build system can deal with such limitations.)



From alain.frisch@lexifi.com  Thu Jul  7 11:10:07 2016
Return-Path: <alain.frisch@lexifi.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 12FBA3C0B8
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 11:10:07 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1750237 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [82.138.71.21 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mx30.yaziba.net ([82.138.71.21]:56834)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bL6go-0005f2-Qp (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <alain.frisch@lexifi.com>); Thu, 07 Jul 2016 11:37:50 +0100
Received: from mta10.int.yaziba.net (unknown [217.117.151.14])
 (using TLSv1 with cipher ADH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx30.yaziba.net (mx10.yaziba.net) with ESMTPS id CB54D1A79F2;
 Thu,  7 Jul 2016 12:37:49 +0200 (CEST)
Received: from mta10.int.yaziba.net (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTPS id BA8B8CA761;
 Thu,  7 Jul 2016 12:37:49 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id A9A52CA760;
 Thu,  7 Jul 2016 12:37:49 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10026)
 with ESMTP id vx_NSkO9PCyw; Thu,  7 Jul 2016 12:37:49 +0200 (CEST)
Received: from [10.0.210.182] (unknown [185.23.92.144])
 by mta10.int.yaziba.net (Postfix) with ESMTPSA id 871C8CA75D;
 Thu,  7 Jul 2016 12:37:49 +0200 (CEST)
To: Andreas Hauptmann <andreashauptmann@t-online.de>,
 wg-windows@lists.ocaml.org
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr> <nllar2$ugo$1@ger.gmane.org>
From: Alain Frisch <alain.frisch@lexifi.com>
Message-ID: <086f0d2f-99f6-ba8c-556f-77acd9e63733@lexifi.com>
Date: Thu, 7 Jul 2016 12:37:47 +0200
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:45.0) Gecko/20100101
 Thunderbird/45.1.1
MIME-Version: 1.0
In-Reply-To: <nllar2$ugo$1@ger.gmane.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
X-DRWEB-SCAN: ok
X-VRSPAM-SCORE: -100
X-VRSPAM-STATE: legit
X-VRSPAM-CAUSE: gggruggvucftvghtrhhoucdtuddrfeeltddrvdekgdeftdcutefuodetggdotefrucfrrhhofhhilhgvmecuggftfghnshhusghstghrihgsvgdpjgetkgfkueetnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenucfjughrpefuvfhfhffkffgfgggjtgfgsehtjeertddtfeejnecuhfhrohhmpeetlhgrihhnucfhrhhishgthhcuoegrlhgrihhnrdhfrhhishgthheslhgvgihifhhirdgtohhmqeenucffohhmrghinhepghhithhhuhgsrdgtohhmnecukfhppedukeehrddvfedrledvrddugeegnecurfgrrhgrmhepmhhouggvpehsmhhtphhouhht
X-VRSPAM-EXTCAUSE: mhhouggvpehsmhhtphhouhht
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 10:10:07 -0000

On 07/07/2016 12:27, Andreas Hauptmann wrote:
> However there are at least two problems:
> - the decision to use bash or not is based on a gross estimation, not
> the real command line length (It looks at your object files, not your
> include directories)

Indeed, and this is now fixed in the development version.

https://github.com/alainfrisch/flexdll/commit/2bac9b8153b2e98880545f86c43590f905afe427

> - The wrong quote function is used to write the shell script
> (Filename.quote quotes for cmd, not a unix shell,...)

Do you have a reproduction case for this one?


-- Alain

From dra-news@metastack.com  Thu Jul  7 11:51:38 2016
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-40.csi.cam.ac.uk (ppsw-40.csi.cam.ac.uk [131.111.8.140])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 64C213C0B8
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 11:51:38 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1750237 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.106 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148106.authsmtp.co.uk ([62.13.148.106]:20010)
 by ppsw-40.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.148]:25)
 with esmtp id 1bL7Kz-000pM3-lO (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Thu, 07 Jul 2016 12:19:22 +0100
Received: from mail-c247.authsmtp.com (mail-c247.authsmtp.com [62.13.128.247])
 by punt22.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u67BJK5u005141; 
 Thu, 7 Jul 2016 12:19:20 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u67BJIYJ047750
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
 Thu, 7 Jul 2016 12:19:19 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id u67BJHJ3002070
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO);
 Thu, 7 Jul 2016 12:19:18 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0279.002; Thu, 7 Jul 2016 12:19:17 +0100
From: David Allsopp <dra-news@metastack.com>
To: Alain Frisch <alain.frisch@lexifi.com>, Andreas Hauptmann
 <andreashauptmann@t-online.de>, "wg-windows@lists.ocaml.org"
 <wg-windows@lists.ocaml.org>
Thread-Topic: [wg-windows] mingw, ocamlopt and "input line is too long"
Thread-Index: AQHR17amUw4l2nJdGE+lhG8JOw8wwqALwfwAgAC9QICAAEXkcf//8eOAgAAaC6A=
Date: Thu, 7 Jul 2016 11:19:17 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9011E9C7385@Remus.metastack.local>
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr> <nllar2$ugo$1@ger.gmane.org>
 <086f0d2f-99f6-ba8c-556f-77acd9e63733@lexifi.com>
In-Reply-To: <086f0d2f-99f6-ba8c-556f-77acd9e63733@lexifi.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.0.29]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: a5de226c-4434-11e6-bcde-0015176ca198
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgESJgVDAnNE X3kJW1VSQFxzU2J8 YQtYIwdcYVRPXwB0 UklLXFNTEBpqBAMA
 SFsYVWsIDmw8eHp3 YkNiEHFbXkd5Oxd4 FhtWF2tVeGNka2QC UUENcR4GI1cfYx9F
 a1V+U3VeMGQObjQC Ml17DC8+eCpeLihS XRo4ZVcTR0kUWnY7 TBkHGTI3AQUMQSl7
 ZR0gMkMAVEIQNEh6 MEBpRVUfexsVDAIU dwAA
X-Authentic-SMTP: 61633634383431.1038:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 10:51:38 -0000

Alain Frisch wrote:
> On 07/07/2016 12:27, Andreas Hauptmann wrote:
> > However there are at least two problems:
> > - the decision to use bash or not is based on a gross estimation, not
> > the real command line length (It looks at your object files, not your
> > include directories)
>=20
> Indeed, and this is now fixed in the development version.
>=20
> https://github.com/alainfrisch/flexdll/commit/2bac9b8153b2e98880545f86c43=
5
> 90f905afe427
>=20
> > - The wrong quote function is used to write the shell script
> > (Filename.quote quotes for cmd, not a unix shell,...)
>=20
> Do you have a reproduction case for this one?

The full story is even more involved than just argument quoting (I did a lo=
t of forensic digging in the code for cygwin1.dll in May). Handling of doub=
le-quotes is different from the standard Windows mechanism (described in th=
e somewhat obscurely-named CommandLineToArgvW function in MSDN: https://msd=
n.microsoft.com/en-us/library/windows/desktop/bb776391(v=3Dvs.85).aspx).

The final result of digging (and fruitless requests on the Cygwin list) was=
:
  1. When invoking a Cygwin process, it is necessary to go via the win_crea=
te_process C primitive from the Unix module (in order to bypass OCaml's cor=
rect implementation of CommandLineToArgvW escaping)
  2. It is necessary to escape the arguments also taking into Cygwin's nogl=
ob setting (two entirely different escaping code paths).

For OPAM, which does not need any globbing assistance, this resulted in htt=
ps://github.com/dra27/opam/blob/windows/src/core/opamProcess.ml#L17-L202. I=
t's working for me so far, but it's clearly going to need @response support=
 implementing soon, as noted in the comments! That code also permits the ef=
fect of being able to execute #! scripts directly: https://github.com/dra27=
/opam/blob/windows/src/core/opamProcess.ml#L369-L421.


David

From gclow-wg-windows@m.gmane.org  Thu Jul  7 11:59:15 2016
Return-Path: <gclow-wg-windows@m.gmane.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-30.csi.cam.ac.uk (ppsw-30.csi.cam.ac.uk [131.111.8.130])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 4875B3C0B8
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 11:59:15 +0100 (BST)
X-Cam-SpamDetails: score -2.0 from SpamAssassin-3.3.2-1750237 
 * -1.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [80.91.229.3 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from plane.gmane.org ([80.91.229.3]:42656)
 by ppsw-30.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bL7SM-000hrZ-eb (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <gclow-wg-windows@m.gmane.org>); Thu, 07 Jul 2016 12:26:59 +0100
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from <gclow-wg-windows@m.gmane.org>) id 1bL7SL-0003FB-CV
 for wg-windows@lists.ocaml.org; Thu, 07 Jul 2016 13:26:57 +0200
Received: from p548c8b5f.dip0.t-ipconnect.de ([84.140.139.95])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Thu, 07 Jul 2016 13:26:57 +0200
Received: from andreashauptmann by p548c8b5f.dip0.t-ipconnect.de with local
 (Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Thu, 07 Jul 2016 13:26:57 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: wg-windows@lists.ocaml.org
From: Andreas Hauptmann <andreashauptmann@t-online.de>
Date: Thu, 7 Jul 2016 13:26:52 +0200
Organization: -
Lines: 32
Message-ID: <nlle9s$ugo$2@ger.gmane.org>
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr> <nllar2$ugo$1@ger.gmane.org>
 <086f0d2f-99f6-ba8c-556f-77acd9e63733@lexifi.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: p548c8b5f.dip0.t-ipconnect.de
X-Archive: encrypt
Archive: no
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 10:59:15 -0000

On Thu, 7 Jul 2016 12:37:47 +0200
Alain Frisch wrote:

> On 07/07/2016 12:27, Andreas Hauptmann wrote:
> > However there are at least two problems:
> > - the decision to use bash or not is based on a gross estimation,
> > not the real command line length (It looks at your object files,
> > not your include directories)  
> 
> Indeed, and this is now fixed in the development version.
> 
> https://github.com/alainfrisch/flexdll/commit/2bac9b8153b2e98880545f86c43590f905afe427

Thanks,
it still needs to be fixed at least here:
https://github.com/alainfrisch/flexdll/blob/2aa2c0e22aa37515617245065cdbfee7108fc172/reloc.ml#L164

> > - The wrong quote function is used to write the shell script
> > (Filename.quote quotes for cmd, not a unix shell,...)  
> 
> Do you have a reproduction case for this one?

Yes, I know, it probably won't happen in practice, because everybody
uses 'normal' filenames. But as soon as your string contains something,
that is interpreted by bash.....

let cmd = "mkdir -p " ^ (Filename.quote "fo${PATH}bar") in
let ch = open_out_bin "foo" in
let () = output_string ch cmd in
let () = close_out ch in
let res = Sys.command "bash foo" in
assert ( res = 0 )


From alain.frisch@lexifi.com  Thu Jul  7 12:13:50 2016
Return-Path: <alain.frisch@lexifi.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-41.csi.cam.ac.uk (ppsw-41.csi.cam.ac.uk [131.111.8.141])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 4BFEA3C0DA
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 12:13:50 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1750237 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [82.138.71.21 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mx30.yaziba.net ([82.138.71.21]:41171)
 by ppsw-41.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.149]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bL7gT-00087l-Qh (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <alain.frisch@lexifi.com>); Thu, 07 Jul 2016 12:41:34 +0100
Received: from mta10.int.yaziba.net (unknown [217.117.151.14])
 (using TLSv1 with cipher ADH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx30.yaziba.net (mx10.yaziba.net) with ESMTPS id B82D11A7A07;
 Thu,  7 Jul 2016 13:41:32 +0200 (CEST)
Received: from mta10.int.yaziba.net (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTPS id C2ABBCA739;
 Thu,  7 Jul 2016 13:41:32 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id AD0A1CA768;
 Thu,  7 Jul 2016 13:41:32 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10026)
 with ESMTP id KNP1b_QIWg76; Thu,  7 Jul 2016 13:41:32 +0200 (CEST)
Received: from [10.0.210.182] (unknown [185.23.92.144])
 by mta10.int.yaziba.net (Postfix) with ESMTPSA id 8C2C7CA739;
 Thu,  7 Jul 2016 13:41:32 +0200 (CEST)
To: Andreas Hauptmann <andreashauptmann@t-online.de>,
 wg-windows@lists.ocaml.org
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr> <nllar2$ugo$1@ger.gmane.org>
 <086f0d2f-99f6-ba8c-556f-77acd9e63733@lexifi.com>
 <nlle9s$ugo$2@ger.gmane.org>
From: Alain Frisch <alain.frisch@lexifi.com>
Message-ID: <33db5145-8e04-4a43-5b4c-9e37a15896ee@lexifi.com>
Date: Thu, 7 Jul 2016 13:41:30 +0200
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:45.0) Gecko/20100101
 Thunderbird/45.1.1
MIME-Version: 1.0
In-Reply-To: <nlle9s$ugo$2@ger.gmane.org>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-DRWEB-SCAN: ok
X-VRSPAM-SCORE: -100
X-VRSPAM-STATE: legit
X-VRSPAM-CAUSE: gggruggvucftvghtrhhoucdtuddrfeeltddrvdekgdegfecutefuodetggdotefrucfrrhhofhhilhgvmecuggftfghnshhusghstghrihgsvgdpjgetkgfkueetnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmdenucfjughrpefuvfhfhffkffgfgggjtgfgsehtjeertddtfeehnecuhfhrohhmpeetlhgrihhnucfhrhhishgthhcuoegrlhgrihhnrdhfrhhishgthheslhgvgihifhhirdgtohhmqeenucffohhmrghinhepghhithhhuhgsrdgtohhmnecukfhppedukeehrddvfedrledvrddugeegnecurfgrrhgrmhepmhhouggvpehsmhhtphhouhht
X-VRSPAM-EXTCAUSE: mhhouggvpehsmhhtphhouhht
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 11:13:50 -0000

On 07/07/2016 13:26, Andreas Hauptmann wrote:
> Thanks,
> it still needs to be fixed at least here:
> https://github.com/alainfrisch/flexdll/blob/2aa2c0e22aa37515617245065cdbfee7108fc172/reloc.ml#L164

Are you sure?  This goes through get_output, which already had the logic 
to use bash for long command line.

> Yes, I know, it probably won't happen in practice, because everybody
> uses 'normal' filenames. But as soon as your string contains something,
> that is interpreted by bash.....

Ok.  Considering the effort David had to deploy to "get quoting right", 
I'd prefer to focus on more immediate issues.  Ideally, all the process 
invocation logic that David has been working on could be reused in 
flexlink; one tricky point is that in order to simplify bootstrapping, I 
avoided any non-stdlib dependency for flexlink (including Unix).


Alain

From Andre.OLIVEIRAMARONEZE@cea.fr  Thu Jul  7 12:59:53 2016
Return-Path: <Andre.OLIVEIRAMARONEZE@cea.fr>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-30.csi.cam.ac.uk (ppsw-30.csi.cam.ac.uk [131.111.8.130])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id AB81B3C0DA
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 12:59:53 +0100 (BST)
X-Cam-SpamDetails: score -6.3 from SpamAssassin-3.3.2-1750237 
 * -5.0 RCVD_IN_DNSWL_HI RBL: Sender listed at http://www.dnswl.org/, high
 *      trust
 *      [132.168.224.8 listed in list.dnswl.dnsbl.ja.net]
 * -1.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from oxalide-out.extra.cea.fr ([132.168.224.8]:56780)
 by ppsw-30.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.146]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bL8P3-000Mju-cu (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <Andre.OLIVEIRAMARONEZE@cea.fr>); Thu, 07 Jul 2016 13:27:37 +0100
Received: from pisaure.intra.cea.fr (pisaure.intra.cea.fr [132.166.88.21])
 by oxalide.extra.cea.fr (8.15.2/8.15.2/CEAnet-Internet-out-2.4) with ESMTP id
 u67CRavA027410
 for <wg-windows@lists.ocaml.org>; Thu, 7 Jul 2016 14:27:36 +0200
Received: from pisaure.intra.cea.fr (localhost [127.0.0.1])
 by localhost (Postfix) with SMTP id 5CC9B204D11
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 14:27:36 +0200 (CEST)
Received: from muguet2.intra.cea.fr (muguet2.intra.cea.fr [132.166.192.7])
 by pisaure.intra.cea.fr (Postfix) with ESMTP id 52FD0204D0E
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 14:27:36 +0200 (CEST)
Received: from [10.8.32.73] (is152242.intra.cea.fr [10.8.32.73])
 by muguet2.intra.cea.fr (8.15.2/8.15.2/CEAnet-Intranet-out-1.4) with ESMTP id
 u67CRa5D026491
 for <wg-windows@lists.ocaml.org>; Thu, 7 Jul 2016 14:27:36 +0200
To: wg-windows@lists.ocaml.org
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr> <nllar2$ugo$1@ger.gmane.org>
From: Andre Maroneze <Andre.OLIVEIRAMARONEZE@cea.fr>
Message-ID: <577E4AB8.5050007@cea.fr>
Date: Thu, 7 Jul 2016 14:27:36 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
 Thunderbird/38.8.0
MIME-Version: 1.0
In-Reply-To: <nllar2$ugo$1@ger.gmane.org>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 11:59:53 -0000



On 07/07/2016 12:27 PM, Andreas Hauptmann wrote:
> Ok, I think I've identified the problem. Flexlink already writes the
> command to a file and execute this file with bash, if the command line
> is too long. Since both bash and gcc are linked against cygwin-1.dll,
> there aren't any limits beside your main memory (cygwin programs use
> shared memory to pass command line arguments and environment variables
> around, if they hit a limit imposed by windows).
>
> However there are at least two problems:
> - the decision to use bash or not is based on a gross estimation, not
> the real command line length (It looks at your object files, not your
> include directories)
> - The wrong quote function is used to write the shell script
> (Filename.quote quotes for cmd, not a unix shell,...)
>
> Try:
> https://www.dropbox.com/s/570bs4205llxqwt/flexlink32.exe
> or
> https://www.dropbox.com/s/ki1bvfdld27vlwb/flexlink64.exe
>
> as replacement for your current flexlink.exe.
>
> I’m not sure, if my guess (and patch) is correct. When I’ve tried to
> use a opam switch under a location with long filenames, I fail much
> earlier because of the filename length limit of 260 - not because of
> flexlink. (If you want to use more than 260 chars, you have to use the
> unicode api and always use absolute paths – of course no commonly used
> build system can deal with such limitations.)
>
>
> _______________________________________________
> wg-windows mailing list
> wg-windows@lists.ocaml.org
> http://lists.ocaml.org/listinfo/wg-windows

Thanks a lot, I just tested using your flexlink32.exe and it worked just 
fine, I was able to compile frama-c-base on a directory with a long name.

The prefix in my case is only 132 characters long, so even when adding 
the longest path in my sources (~100 characters), it remains under 260, 
so it worked. Still, it's good to know about that limit, I'll inform our 
users about it.


-- 
André Maroneze
Ingénieur-chercheur CEA/LIST
Laboratoire Sûreté et Sécurité des Logiciels


From gclow-wg-windows@m.gmane.org  Thu Jul  7 14:42:34 2016
Return-Path: <gclow-wg-windows@m.gmane.org>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-31.csi.cam.ac.uk (ppsw-31.csi.cam.ac.uk [131.111.8.131])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id BD9993C0DA
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 14:42:34 +0100 (BST)
X-Cam-SpamDetails: score -2.0 from SpamAssassin-3.3.2-1750237 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [80.91.229.3 listed in list.dnswl.dnsbl.ja.net]
 * -1.3 RP_MATCHES_RCVD Envelope sender domain matches handover relay
 *      domain
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from plane.gmane.org ([80.91.229.3]:46351)
 by ppsw-31.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bLA0P-000z5Z-M9 (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <gclow-wg-windows@m.gmane.org>); Thu, 07 Jul 2016 15:10:18 +0100
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from <gclow-wg-windows@m.gmane.org>) id 1bLA0O-0004W2-QP
 for wg-windows@lists.ocaml.org; Thu, 07 Jul 2016 16:10:16 +0200
Received: from p548c8b5f.dip0.t-ipconnect.de ([84.140.139.95])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Thu, 07 Jul 2016 16:10:16 +0200
Received: from andreashauptmann by p548c8b5f.dip0.t-ipconnect.de with local
 (Gmexim 0.1 (Debian)) id 1AlnuQ-0007hv-00
 for <wg-windows@lists.ocaml.org>; Thu, 07 Jul 2016 16:10:16 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: wg-windows@lists.ocaml.org
From: Andreas Hauptmann <andreashauptmann@t-online.de>
Date: Thu, 7 Jul 2016 16:10:06 +0200
Organization: -
Lines: 37
Message-ID: <nllnru$5ij$1@ger.gmane.org>
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr> <nllar2$ugo$1@ger.gmane.org>
 <086f0d2f-99f6-ba8c-556f-77acd9e63733@lexifi.com>
 <nlle9s$ugo$2@ger.gmane.org>
 <33db5145-8e04-4a43-5b4c-9e37a15896ee@lexifi.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: p548c8b5f.dip0.t-ipconnect.de
X-Archive: encrypt
Archive: no
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 13:42:34 -0000

On Thu, 7 Jul 2016 13:41:30 +0200
Alain Frisch wrote:

> On 07/07/2016 13:26, Andreas Hauptmann wrote:
> > Thanks,
> > it still needs to be fixed at least here:
> > https://github.com/alainfrisch/flexdll/blob/2aa2c0e22aa37515617245065cdbfee7108fc172/reloc.ml#L164  
> 
> Are you sure?  This goes through get_output, which already had the
> logic to use bash for long command line.

Indeed, but then there is something wrong with get_output,
otherwise https://github.com/alainfrisch/flexdll/issues/7 couldn't
occur (I've observed this error several times in the past).

Probably it's just the magic number that is too high. The following
program aborts before 8191 (or 8182):

--
let () =
  let rec iter s =
    let cmd = s ^ " >NUL 2>NUL" in
    if Sys.command cmd <> 0 then (
      Printf.eprintf "%d\n" @@ String.length cmd;
      exit 0
    )
    else
      iter (s ^ "a")
  in
  let b = Bytes.make 8100 'a' in
  let start = "echo a" in
  let () = Bytes.blit_string start 0 b 0 (String.length start) in
  iter (Bytes.to_string b)
--

It's 8160 for me, and another user even reports 8158:
http://forum.pellesc.de/index.php?topic=4975.5


From dra-news@metastack.com  Thu Jul  7 20:12:57 2016
Return-Path: <dra-news@metastack.com>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-31.csi.cam.ac.uk (ppsw-31.csi.cam.ac.uk [131.111.8.131])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 7E1243C0DA
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 20:12:57 +0100 (BST)
X-Cam-SpamDetails: score -0.7 from SpamAssassin-3.3.2-1750237 
 * -0.7 RCVD_IN_DNSWL_LOW RBL: Sender listed at http://www.dnswl.org/, low
 *      trust
 *      [62.13.148.154 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from outmail148154.authsmtp.co.uk ([62.13.148.154]:49559)
 by ppsw-31.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtp id 1bLFA9-000SO6-MP (Exim 4.86_36-e07b163) for
 wg-windows@lists.ocaml.org
 (return-path <dra-news@metastack.com>); Thu, 07 Jul 2016 20:40:42 +0100
Received: from mail-c247.authsmtp.com (mail-c247.authsmtp.com [62.13.128.247])
 by punt24.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u67Jef5X040371; 
 Thu, 7 Jul 2016 20:40:41 +0100 (BST)
Received: from romulus.metastack.com
 (114.212-105-213.static.virginmediabusiness.co.uk [213.105.212.114])
 (authenticated bits=0)
 by mail.authsmtp.com (8.14.2/8.14.2/) with ESMTP id u67JedeU054433
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
 Thu, 7 Jul 2016 20:40:40 +0100 (BST)
Received: from remus.metastack.local (remus.metastack.com [172.16.0.1])
 by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id u67JecAr004633
 (version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO);
 Thu, 7 Jul 2016 20:40:38 +0100
Received: from Remus.metastack.local ([fe80::547c:3c42:e1da:eda2]) by
 Remus.metastack.local ([fe80::547c:3c42:e1da:eda2%10]) with mapi id
 14.03.0279.002; Thu, 7 Jul 2016 20:40:38 +0100
From: David Allsopp <dra-news@metastack.com>
To: Alain Frisch <alain.frisch@lexifi.com>, Andreas Hauptmann
 <andreashauptmann@t-online.de>, "wg-windows@lists.ocaml.org"
 <wg-windows@lists.ocaml.org>
Thread-Topic: [wg-windows] mingw, ocamlopt and "input line is too long"
Thread-Index: AQHR17amUw4l2nJdGE+lhG8JOw8wwqALwfwAgAC9QICAAEXkcf//8eOAgAAelfL///M4AIAAlTdQ
Date: Thu, 7 Jul 2016 19:40:37 +0000
Message-ID: <E51C5B015DBD1348A1D85763337FB6D9011E9CB52B@Remus.metastack.local>
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr> <nllar2$ugo$1@ger.gmane.org>
 <086f0d2f-99f6-ba8c-556f-77acd9e63733@lexifi.com>
 <nlle9s$ugo$2@ger.gmane.org>
 <33db5145-8e04-4a43-5b4c-9e37a15896ee@lexifi.com>
In-Reply-To: <33db5145-8e04-4a43-5b4c-9e37a15896ee@lexifi.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.16.0.29]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
Organization: MetaStack Solutions Ltd.
X-Scanned-By: MIMEDefang 2.65 on 172.16.0.20
X-Server-Quench: afbf0296-447a-11e6-bcde-0015176ca198
X-AuthReport-Spam: If SPAM / abuse - report it at:
 http://www.authsmtp.com/abuse
X-AuthRoute: OCd1ZAARAlZZVg1f DC4bFwdFRBksPQFF ChxFJgxfNl8UURhQ
 KkJXbgESJgVDAnNE X3kJW1VSQF9xU2d1 YQ5RIwdcYVRPXwB0 UklLXFNTEBpqBAMA
 SFsYVWMnI1AjeHt0 YUVhEHheXEw0JBAv FE5WHGsbYWNnOX0e URVealEHJFZXfh9E
 b1F4UiBcYGwPKBgV TUcAID90IjRZJCNK WTRFKFMUTllPVjk3 ThUGGi0zVUQDS215
 Lho+N0JUGEcXPw0z KhM9XlVQNxgUBUc2 
X-Authentic-SMTP: 61633634383431.1038:706
X-AuthFastPath: 0 (Was 255)
X-AuthSMTP-Origin: 213.105.212.114/25
X-AuthVirus-Status: No virus detected - but ensure you scan with your own
 anti-virus system.
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 19:12:57 -0000

Alain Frisch wrote:
> On 07/07/2016 13:26, Andreas Hauptmann wrote:
> > Thanks,
> > it still needs to be fixed at least here:
> > https://github.com/alainfrisch/flexdll/blob/2aa2c0e22aa37515617245065c
> > dbfee7108fc172/reloc.ml#L164
>=20
> Are you sure?  This goes through get_output, which already had the logic
> to use bash for long command line.
>=20
> > Yes, I know, it probably won't happen in practice, because everybody
> > uses 'normal' filenames. But as soon as your string contains
> > something, that is interpreted by bash.....
>=20
> Ok.  Considering the effort David had to deploy to "get quoting right",
> I'd prefer to focus on more immediate issues.  Ideally, all the process
> invocation logic that David has been working on could be reused in
> flexlink; one tricky point is that in order to simplify bootstrapping, I
> avoided any non-stdlib dependency for flexlink (including Unix).

Especially if stdout, stderr and stdin don't need to be controlled, it's ju=
st a matter of wrapping CreateProcess directly - it could be almost lifted =
straight out of otherlibs/win32unix/createprocess.c

Though I'd hang on until the implementation in OPAM has been battle-tested =
some more ;o)


David

From alain@frisch.fr  Thu Jul  7 08:17:08 2016
Return-Path: <alain@frisch.fr>
X-Original-To: wg-windows@lists.ocaml.org
Delivered-To: wg-windows@lists.ocaml.org
Received: from ppsw-31.csi.cam.ac.uk (ppsw-31.csi.cam.ac.uk [131.111.8.131])
 by ocaml-mx.ocamllabs.cl.cam.ac.uk (Postfix) with ESMTPS id 3450A3C2F7
 for <wg-windows@lists.ocaml.org>; Thu,  7 Jul 2016 08:17:08 +0100 (BST)
X-Cam-SpamDetails: score 0.0 from SpamAssassin-3.3.2-1750237 
 * -0.0 RCVD_IN_DNSWL_NONE RBL: Sender listed at http://www.dnswl.org/, no
 *      trust
 *      [82.138.71.21 listed in list.dnswl.dnsbl.ja.net]
X-Cam-ScannerInfo: http://www.ucs.cam.ac.uk/email/scanner/
Received: from mx30.yaziba.net ([82.138.71.21]:45625)
 by ppsw-31.csi.cam.ac.uk (mx.cam.ac.uk [131.111.8.147]:25)
 with esmtps (TLSv1:AES256-SHA:256)
 id 1bL3zO-000T9i-MA (Exim 4.86_36-e07b163) for wg-windows@lists.ocaml.org
 (return-path <alain@frisch.fr>); Thu, 07 Jul 2016 08:44:51 +0100
Received: from mta10.int.yaziba.net (unknown [217.117.151.14])
 (using TLSv1 with cipher ADH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx30.yaziba.net (mx10.yaziba.net) with ESMTPS id 34DD61A7962;
 Thu,  7 Jul 2016 09:44:50 +0200 (CEST)
Received: from mta10.int.yaziba.net (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTPS id 3F885CA659;
 Thu,  7 Jul 2016 09:44:50 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
 by mta10.int.yaziba.net (Postfix) with ESMTP id 2DFC1CA74C;
 Thu,  7 Jul 2016 09:44:50 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
 by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10026)
 with ESMTP id zED3KfizzWKR; Thu,  7 Jul 2016 09:44:50 +0200 (CEST)
Received: from [10.0.210.182] (unknown [185.23.92.144])
 by mta10.int.yaziba.net (Postfix) with ESMTPSA id 0E097CA659;
 Thu,  7 Jul 2016 09:44:50 +0200 (CEST)
To: Andre Maroneze <Andre.OLIVEIRAMARONEZE@cea.fr>, wg-windows@lists.ocaml.org
References: <577D51D5.8070607@cea.fr> <nljo1h$u8f$1@ger.gmane.org>
 <577E0231.6010705@cea.fr>
From: Alain Frisch <alain@frisch.fr>
Message-ID: <e6999432-baed-4e32-71eb-5805cdcfd8e7@frisch.fr>
Date: Thu, 7 Jul 2016 09:44:48 +0200
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:45.0) Gecko/20100101
 Thunderbird/45.1.1
MIME-Version: 1.0
In-Reply-To: <577E0231.6010705@cea.fr>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-DRWEB-SCAN: ok
X-VRSPAM-SCORE: -100
X-VRSPAM-STATE: legit
X-VRSPAM-CAUSE: gggruggvucftvghtrhhoucdtuddrfeeltddrvdejgdduvdelucetufdoteggodetrfcurfhrohhfihhlvgemucggtfgfnhhsuhgsshgtrhhisggvpdgjtegkkfeuteenuceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmnecujfgurhepuffvfhfhkffffgggjggtgfesthejredttdefheenucfhrhhomheptehlrghinhcuhfhrihhstghhuceorghlrghinhesfhhrihhstghhrdhfrheqnecuffhomhgrihhnpehotggrmhhlrdhorhhgpdhgihhthhhusgdrtghomhenucfkphepudekhedrvdefrdelvddrudeggeenucfrrghrrghmpehmohguvgepshhmthhpohhuth
X-VRSPAM-EXTCAUSE: mhhouggvpehsmhhtphhouhht
X-Mailman-Approved-At: Fri, 08 Jul 2016 20:34:00 +0100
Subject: Re: [wg-windows] mingw, ocamlopt and "input line is too long"
X-BeenThere: wg-windows@lists.ocaml.org
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: Working group for OCaml Windows OS support
 <wg-windows.lists.ocaml.org>
List-Unsubscribe: <http://lists.ocaml.org/options/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=unsubscribe>
List-Archive: <http://lists.ocaml.org/pipermail/wg-windows/>
List-Post: <mailto:wg-windows@lists.ocaml.org>
List-Help: <mailto:wg-windows-request@lists.ocaml.org?subject=help>
List-Subscribe: <http://lists.ocaml.org/listinfo/wg-windows>,
 <mailto:wg-windows-request@lists.ocaml.org?subject=subscribe>
X-List-Received-Date: Thu, 07 Jul 2016 07:17:08 -0000

It seems flexdll decides to use response files only for file arguments 
when calling gcc, not taking other arguments into account.

I'll try to fix that.

-- Alain


On 07/07/2016 09:18, Andre Maroneze wrote:
> Thanks, using those flags it shows useful information:
>
> - A call to i686-w64-mingw32-as, with a short command line, that succeeds;
> - A call to flexlink, also with a short command line, using a response
> file (@C:\cygwin32\tmp\camlresp0050ba);
> - And then several lines:
>
> ** Use cygpath: true
> ** Search path: .... (lots of directories, one per line)
> ** Default libraries: ... (some -l<lib> followed by corresponding lines
> "** open: .../lib/<lib>.a")
> + i686-w64-mingw32-gcc -mconsole -shared -Wl,-e_FlexDLLiniter@12  ...
> (lots of -I and -L, plus some extra flags, and this line is slightly
> larger than 8k characters)
> La ligne de commande est trop longue.
> ** Fatal error: Error during linking
>
> So it's that call to i686-w64-mingw32-gcc that fails. Is there a way to
> use a response file for that command as well?
>
>
> Regards,
>
>
> On 07/06/2016 10:00 PM, Andreas Hauptmann wrote:
>> Hi,
>>
>> On Wed, 6 Jul 2016 20:45:41 +0200
>> Andre Maroneze wrote:
>>> Has someone else also encountered this problem when compiling on
>>> Windows with a MinGW-based OCaml?
>> It's probably not your own command, that is too long, but a command
>> that is internally created by flexlink (or ocamlopt)
>> (See for example: https://github.com/alainfrisch/flexdll/issues/7 )
>>
>> Compile it with:
>>
>> export FLEXLINKFLAGS='-v -v -v'
>> export OCAMLPARAM='_,verbose=1'
>> ocamlfind ocamlopt ...
>>
>> then ocamlopt/ocamlc should print, which external commands they call to
>> stderr. And flexlink will also print some debug output.
>> With this information we can hopefully locate the point at which the
>> wrong command is generated.
>>
>>
>> _______________________________________________
>> wg-windows mailing list
>> wg-windows@lists.ocaml.org
>> http://lists.ocaml.org/listinfo/wg-windows
>

